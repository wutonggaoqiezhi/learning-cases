webpackJsonp(["app"], {/***/
       109:/***/
              function (e, t, i) {/* WEBPACK VAR INJECTION */
                     (function (n) {
                            var s, a, r, o = void 0 !== e && e.exports && void 0 !== n ? n : this || window;//helps ensure compatibility with AMD/RequireJS and CommonJS/Node
                            (o._gsQueue || (o._gsQueue = [])).push(function () {
                                   "use strict"; function e(e, t, i, n, s, a) { return i = (parseFloat(i || 0) - parseFloat(e || 0)) * s, n = (parseFloat(n || 0) - parseFloat(t || 0)) * a, Math.sqrt(i * i + n * n) } function t(e) { return "string" != typeof e && e.nodeType || (e = o.TweenLite.selector(e), e.length && (e = e[0])), e }
                                   //accepts values like "100%" or "20% 80%" or "20 50" and parses it into an absolute start and end position on the line/stroke based on its length. Returns an an array with the start and end values, like [0, 243]
                                   function i(e, t, i) { var n, s, a = e.indexOf(" "); return -1 === a ? (n = void 0 !== i ? i + "" : e, s = e) : (n = e.substr(0, a), s = e.substr(a + 1)), n = -1 !== n.indexOf("%") ? parseFloat(n) / 100 * t : parseFloat(n), s = -1 !== s.indexOf("%") ? parseFloat(s) / 100 * t : parseFloat(s), n > s ? [s, n] : [n, s] } function n(i) {
                                          if (!i) return 0; i = t(i); var n, s, a, r, o, l, u, c = i.tagName.toLowerCase(), d = 1, _ = 1; "non-scaling-stroke" === i.getAttribute("vector-effect") && (
                                                 //non-scaling-stroke basically scales the shape and then strokes it at the screen-level (after transforms), thus we need to adjust the length accordingly.
                                                 _ = i.getScreenCTM(), d = _.a, _ = _.d); try {
                                                        //IE bug: calling <path>.getTotalLength() locks the repaint area of the stroke to whatever its current dimensions are on that frame/tick. To work around that, we must call getBBox() to force IE to recalculate things.
                                                        s = i.getBBox()
                                                 } catch (e) { } if (s && (s.width || s.height) || "rect" !== c && "circle" !== c && "ellipse" !== c || (
                                                        //if the element isn't visible, try to discern width/height using its attributes.
                                                        s = { width: parseFloat(i.getAttribute("rect" === c ? "width" : "circle" === c ? "r" : "rx")), height: parseFloat(i.getAttribute("rect" === c ? "height" : "circle" === c ? "r" : "ry")) }, "rect" !== c && (s.width *= 2, s.height *= 2)), "path" === c) r = i.style.strokeDasharray, i.style.strokeDasharray = "none", n = i.getTotalLength() || 0, d !== _ && console.log("Warning: <path> length cannot be measured accurately when vector-effect is non-scaling-stroke and the element isn't proportionally scaled."), n *= (d + _) / 2, i.style.strokeDasharray = r; else if ("rect" === c) n = 2 * s.width * d + 2 * s.height * _; else if ("line" === c) n = e(i.getAttribute("x1"), i.getAttribute("y1"), i.getAttribute("x2"), i.getAttribute("y2"), d, _); else if ("polyline" === c || "polygon" === c) for (a = i.getAttribute("points").match(h) || [], "polygon" === c && a.push(a[0], a[1]), n = 0, o = 2; o < a.length; o += 2)n += e(a[o - 2], a[o - 1], a[o], a[o + 1], d, _) || 0; else "circle" !== c && "ellipse" !== c || (l = s.width / 2 * d, u = s.height / 2 * _, n = Math.PI * (3 * (l + u) - Math.sqrt((3 * l + u) * (l + 3 * u)))); return n || 0
                                   } function s(e, i) { if (!e) return [0, 0]; e = t(e), i = i || n(e) + 1; var s = l(e), a = s.strokeDasharray || "", r = parseFloat(s.strokeDashoffset), o = a.indexOf(","); return o < 0 && (o = a.indexOf(" ")), a = o < 0 ? i : parseFloat(a.substr(0, o)) || 1e-5, a > i && (a = i), [Math.max(0, -r), Math.max(0, a - r)] } var
                                          //Microsoft Edge has a bug that causes it not to redraw the path correctly if the stroke-linecap is anything other than "butt" (like "round") and it doesn't match the stroke-linejoin. A way to trigger it is to change the stroke-miterlimit, so we'll only do that if/when we have to (to maximize performance)
                                          a, r = o.document, l = r.defaultView ? r.defaultView.getComputedStyle : function () { }, h = /(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi, u = -1 !== ((o.navigator || {}).userAgent || "").indexOf("Edge"); a = o._gsDefine.plugin({
                                                 propName: "drawSVG", API: 2, version: "0.1.4", global: !0, overwriteProps: ["drawSVG"], init: function (e, t, a, r) {
                                                        if (!e.getBBox) return !1; var o, h, c, d, _ = n(e) + 1;//allow people to go past the end, like values of 105% because for some paths, Firefox doesn't return an accurate getTotalLength(), so it could end up coming up short.
                                                        //some browsers render artifacts if dash is 0, so we use a very small number in that case.
                                                        //to work around a bug in Microsoft Edge, animate the stroke-miterlimit by 0.0001 just to trigger the repaint (only necessary if stroke-linecap isn't "butt"; also unnecessary if it's "round" and stroke-linejoin is also "round"). Imperceptible, relatively high-performance, and effective. Another option was to set the "d" <path> attribute to its current value on every tick, but that seems like it'd be much less performant.
                                                        return this._style = e.style, "function" == typeof t && (t = t(r, e)), !0 === t || "true" === t ? t = "0 100%" : t ? -1 === (t + "").indexOf(" ") && (t = "0 " + t) : t = "0 0", o = s(e, _), h = i(t, _, o[0]), this._length = _ + 10, 0 === o[0] && 0 === h[0] ? (c = Math.max(1e-5, h[1] - _), this._dash = _ + c, this._offset = _ - o[1] + c, this._addTween(this, "_offset", this._offset, _ - h[1] + c, "drawSVG")) : (this._dash = o[1] - o[0] || 1e-6, this._offset = -o[0], this._addTween(this, "_dash", this._dash, h[1] - h[0] || 1e-5, "drawSVG"), this._addTween(this, "_offset", this._offset, -h[0], "drawSVG")), u && (d = l(e), "butt" !== (h = d.strokeLinecap) && h !== d.strokeLinejoin && (h = parseFloat(d.strokeMiterlimit), this._addTween(e.style, "strokeMiterlimit", h, h + 1e-4, "strokeMiterlimit"))), !0
                                                 },
                                                 //called each time the values should be updated, and the ratio gets passed as the only parameter (typically it's a value between 0 and 1, but it can exceed those when using an ease like Elastic.easeOut or Back.easeOut, etc.)
                                                 set: function (e) { this._firstPT && (this._super.setRatio.call(this, e), this._style.strokeDashoffset = this._offset, this._style.strokeDasharray = 1 === e || 0 === e ? this._offset < .001 && this._length - this._dash <= 10 ? "none" : this._offset === this._dash ? "0px, 999999px" : this._dash + "px," + this._length + "px" : this._dash + "px," + this._length + "px") }
                                          }), a.getLength = n, a.getPosition = s
                            }), o._gsDefine && o._gsQueue.pop()(),
                                   //export to AMD/RequireJS and CommonJS/Node (precursor to full modular build system coming at a later date)
                                   function (n) { "use strict"; var l = function () { return (o.GreenSockGlobals || o).DrawSVGPlugin }; a = [i(47)], s = l, void 0 !== (r = "function" == typeof s ? s.apply(t, a) : s) && (e.exports = r) }()
                     }).call(t, i(24))
              },/***/
       151:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 10"><path d="M6.17 1.44L4.81 0 0 5l4.81 5 1.36-1.41L3.69 6H13V4H3.69l2.48-2.56z"></path></svg>' },/***/
       152:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 9.97"><path d="M6.83 1.41L8.19 0 13 5l-4.81 5-1.36-1.44L9.31 6H0V4h9.31z"></path></svg>' },/***/
       153:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10.41 10.41"><path fill-rule="evenodd" d="M10.41 9L6.62 5.21l3.79-3.8L9 0 5.21 3.79 1.41 0 0 1.41l3.79 3.8L0 9l1.41 1.41 3.8-3.79L9 10.41 10.41 9z"></path></svg>' },/***/
       154:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 39.88 37.93"><path fill="none" stroke="#000" stroke-miterlimit="10" d="M25.94.5h-12L4.23 7.55.53 18.97l3.7 11.41 9.71 7.05h12l9.71-7.05 3.71-11.41-3.71-11.42L25.94.5z"></path></svg>' },/***/
       155:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22.38 12"><path d="M5.74 0L0 6l5.74 6 1.35-1.41L2.71 6l4.38-4.59zm11 0l-1.35 1.41L19.71 6l-4.32 4.59L16.72 12l5.66-6z" fill="#fff"></path></svg>' },/***/
       156:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 59.66 59.97"><g fill="#d8d3d1"><path d="M58 26.76l-3.17-1.53.85-2 .57-1.37-1.15-.94-3.28-2.7 1.89-2.52 1.2-1.59-1.59-1.2-14.52-11L37.15.63 36 2.34l-1.72 2.43-2.43-1.94-1.14-.9-1.21.8-2.67 1.76L25 1.74 23.89 0 22.2 1.2 6.49 12.3l-1.62 1.14L6 15.07l2.06 3L5.39 20l-1.28 1 .64 1.46.78 1.79-3.53.94-2 .53.57 2S1.95 32.38 3.34 37c.82 2.7 1.49 4.86 2 6.41 1.06 3.29 1.39 4.28 3 4.28a29.55 29.55 0 0 0 4.43-.86l.23 3.33.19 2.05 2-.26.71-.09-.05.7-.16 2.15h1.66l.08 3 .05 1.92h1.92l20.06.26h1.91l.11-1.91.17-2.86 1.19-.12.21-1.57.27-2h.44l1.54.17.55-1.45 1.45-3.85 2.82.88 1.8.56.66-1.77L59 29.26l.64-1.71zM50.8 45.4L46.18 44l-2.11 5.62-2.38-.26-.53 3.92-1.32.13-.26 4.57-20.06-.26-.13-5h-1.45l.23-3.14L15 50l-.53-5.61s-5.78 1.28-6.17 1.28-5.81-18.55-5.81-18.55l5.81-1.56-1.72-3.92 4.22-3.14-3.16-4.57 15.71-11.1 2.9 4.44 4.36-2.87 4.1 3.26 2.9-4.18 14.52 11-3 4 4.75 3.92-1.58 3.79 4.88 2.35z"></path><path d="M27.29 28l2.25 4.07c.58 0 2.59.09 2.59.09l2.42-4.58-3.75-3zM25 17.81l.85 1.12 1.7-.78 1 1.2-1.74 1 1.16 1.86 2.92-1.74 2.06 2 1.31-1.4-1-1.06 1-1.83 1.6 1.53 3.9-4.29-.88-.89-.64.38-1.2-1.23-1.7 1.92-1-.87-1.05.81-2.06-2-2.32 2-.65-1.17-1.69 1.19-1.41-2.73L21.73 15c.24.45 2.15 3.46 2.15 3.46zm-6.09 12.9l1.31-.5-.3-1.82 1.41-.61.51 1.92 2.16-.6-.91-3.23 2.53-1.41-1-1.62-1.31.71-1.52-1.41L23.66 21l-3.13-4.85-1.11.61.2.71-1.52.81 1.42 2.12-1.11.71.51 1.21-2.53 1.41 1.31 2.73-1.31.3.71 1.92-3 .61L15.26 33c.51-.1 3.94-1.11 3.94-1.11zM45 26.77l-1.31-.3L45 23.75l-2.53-1.41.5-1.21-1.11-.71 1.44-2.12-1.52-.81.2-.71-1.11-.61L37.74 21l1.92 1.11-1.52 1.41-1.31-.71-1 1.62 2.53 1.41-.91 3.23 2.12.61.51-1.92 1.41.61-.3 1.82 1.31.5-.3 1.21s3.44 1 3.94 1.11l1.21-3.74-3-.61zM29.59 40.06l.69-2.06-3.2-1.09.24-2.91-1.91-.09-.15 1.49-2 .44.15-2.21-5.8-.17-.12 1.26.7.24-.19 1.7h2.56v1.32l1.3.27-.24 2.88 3 .47-.48 1.25 2 .51-1.2 2.84 3.79 1.12c.2-.47 1.29-3.87 1.29-3.87L28.79 43l.32-1.37-1.68-.78.29-1.51zm14.04-6.68l-5.82.17.19 2.19-2-.44-.15-1.47-1.92.08.24 2.86-3.22 1.08.69 2.07 1.89-.67.29 1.5-1.69.78.32 1.36-1.18.43s1.09 3.37 1.29 3.84L36.3 46l-1.2-2.82 2-.5-.49-1.24 3-.46-.24-2.86 1.3-.27v-1.3h2.57L43 34.86l.71-.23z"></path></g></svg>' },/***/
       157:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 748 84"><path d="M272.15 63.9L293.53 7h8.24l21.39 56.9h-8.08l-5.47-15.42h-23.84l-5.54 15.42zm16.08-22.25h18.85L297.81 16h-.32zM334.33 25v6.36h.32a10.1 10.1 0 0 1 4.71-5.36 15.11 15.11 0 0 1 7.56-2 23.81 23.81 0 0 1 2.61.16v7.15a28 28 0 0 0-2.93-.16 12.29 12.29 0 0 0-8.6 3.07 10.76 10.76 0 0 0-3.37 8.38v21.3h-7.29V25h7zm39.92 39.58q-6.1 0-9.31-3.26t-3.21-9.22V31.63h-6.81V25h6.81V13H369v12h9.5v6.68H369V51.5q0 6.36 5.23 6.36a7.76 7.76 0 0 0 3.33-.64l2.53 6.28a14.72 14.72 0 0 1-5.85 1.03zm24.87.64A17.4 17.4 0 0 1 388.38 62a18.79 18.79 0 0 1-6.22-8l6.5-2.7q3.09 7.31 10.53 7.31a9.59 9.59 0 0 0 5.58-1.51 4.63 4.63 0 0 0 2.18-4q0-3.81-5.31-5.17l-7.84-1.91a18.63 18.63 0 0 1-7-3.62 8.73 8.73 0 0 1-3.33-7.19 9.84 9.84 0 0 1 4.53-8.3 18.25 18.25 0 0 1 10.81-3.22A18 18 0 0 1 408 26a13.21 13.21 0 0 1 5.78 6.72l-6.34 2.62q-2.14-5.17-8.87-5.17a10.33 10.33 0 0 0-5.46 1.35 4.12 4.12 0 0 0-2.22 3.66q0 3.34 5.15 4.53l7.68 1.83q5.46 1.27 8.08 4.37a10.56 10.56 0 0 1 2.61 7 10.85 10.85 0 0 1-4.28 8.74q-4.28 3.52-11.02 3.52zm79.84-21.62l-6.57 10.57 5.29 6.83-5.46 4.13-3.89-5.13a18.63 18.63 0 0 1-13.15 5.17 20.32 20.32 0 0 1-14.65-5.8 19.08 19.08 0 0 1-6-14.3 18.65 18.65 0 0 1 2.61-9.46 20.31 20.31 0 0 1 7.21-7.31q-4.12-5.48-4.12-9.46a12.3 12.3 0 0 1 4-9.3 13.58 13.58 0 0 1 9.66-3.82 12.13 12.13 0 0 1 8 2.74 14.71 14.71 0 0 1 4.63 6.87l-6.26 3.34q-2.22-6-6.42-6a6.53 6.53 0 0 0-4.52 1.63 5.71 5.71 0 0 0-1.82 4.49 8.22 8.22 0 0 0 1.82 5.09l18.77 24.64 5.07-8.5zm-23.77 14.89a11.92 11.92 0 0 0 9.11-3.81l-16-21.06a14.27 14.27 0 0 0-5.19 4.93 12.08 12.08 0 0 0-1.94 6.52 12.6 12.6 0 0 0 4.08 9.62 14 14 0 0 0 9.94 3.81zm73.18 6.68a28.45 28.45 0 0 1-21-8.5q-8.47-8.5-8.47-21.22t8.47-21.22a28.46 28.46 0 0 1 21-8.5q12.83 0 20.83 9.3L544.13 20q-5.78-7.23-15.76-7.23A21.44 21.44 0 0 0 512.73 19q-6.38 6.28-6.38 16.45t6.38 16.45a21.44 21.44 0 0 0 15.64 6.28q10.22 0 17.42-8.26l5.07 5.08a27.63 27.63 0 0 1-9.74 7.43 29.73 29.73 0 0 1-12.75 2.74zM591 63.9h-7v-5.4h-.32a13.54 13.54 0 0 1-5.07 4.73 14.31 14.31 0 0 1-7.21 1.95q-7.29 0-11-4.45t-3.75-11.93V25h7.29v22.6q0 10.89 9.58 10.89a8.93 8.93 0 0 0 7.37-3.65 13.32 13.32 0 0 0 2.85-8.42V25H591v38.9zm16.16 0h-7.29V7h7.29zm26.06.64q-6.1 0-9.31-3.26t-3.21-9.22V31.63h-6.81V25h6.81V13h7.3v12h9.5v6.68H628V51.5q0 6.36 5.23 6.36a7.76 7.76 0 0 0 3.33-.64l2.54 6.28a14.72 14.72 0 0 1-5.86 1zm44.51-.64h-7v-5.4h-.32a13.54 13.54 0 0 1-5.07 4.73 14.31 14.31 0 0 1-7.21 1.95q-7.29 0-11-4.45t-3.76-11.93V25h7.29v22.6q0 10.89 9.58 10.89a8.92 8.92 0 0 0 7.37-3.65 13.31 13.31 0 0 0 2.85-8.42V25h7.29v38.9zm15.36 0h-7.29V25h7v6.36h.32a10 10 0 0 1 4.55-5.24 13 13 0 0 1 6.69-2.12 13.85 13.85 0 0 1 5.47 1l-2.77 6.83a11 11 0 0 0-3.88-.56 9.51 9.51 0 0 0-7 3.14 11.31 11.31 0 0 0-3 8.22V63.9zm36.67 1.27a18.68 18.68 0 0 1-14.3-5.88Q710 53.41 710 44.43a21.48 21.48 0 0 1 5.34-14.62A17.33 17.33 0 0 1 729 23.68q8.63 0 13.82 5.64T748 44.43l-.08 1.35h-30.65a13.23 13.23 0 0 0 3.92 9.3 11.87 11.87 0 0 0 8.44 3.42q7.84 0 10.61-6.67l6.49 2.7a17.45 17.45 0 0 1-6.26 7.59 18.14 18.14 0 0 1-10.69 3.06zm10.46-25.43a10.4 10.4 0 0 0-3-6.36q-2.81-3-8.36-3a10.43 10.43 0 0 0-7 2.54 13 13 0 0 0-4.08 6.83h22.49zM0 32.59C0 14.62 15 0 33 0a30.89 30.89 0 0 1 22.21 9L49 15.26A22.59 22.59 0 0 0 33 8.9 23.33 23.33 0 0 0 9.66 32.28v.3a23.33 23.33 0 0 0 23 23.68H33c8.48 0 13.31-3.42 16.4-6.52 2.53-2.54 4.2-6.2 4.83-11.21H33v-8.9h29.81a29.07 29.07 0 0 1 .48 5.56c0 6.67-1.82 14.94-7.68 20.82-5.7 6-13 9.14-22.65 9.14C15 65.17 0 50.55 0 32.59zm87.42-9.39a20.65 20.65 0 0 0-21 20.29v.69a21 21 0 0 0 42 0 20.65 20.65 0 0 0-20.3-21zm0 33.7c-6.34 0-11.8-5.24-11.8-12.72s5.46-12.72 11.8-12.72 11.8 5.17 11.8 12.72-5.46 12.72-11.8 12.72zm45.79-33.7a20.64 20.64 0 0 0-21 20.29v.69a21 21 0 0 0 42 0 20.65 20.65 0 0 0-20.3-21h-.69zm0 33.7c-6.34 0-11.8-5.24-11.8-12.72s5.46-12.72 11.8-12.72S145 36.64 145 44.19s-5.46 12.72-11.8 12.72zm56.2-32.42v3.42h-.31a14.47 14.47 0 0 0-11-4.69c-10.46 0-20 9.22-20 21.06s9.58 20.9 20 20.9a14.23 14.23 0 0 0 11-4.76h.32v3c0 8-4.28 12.32-11.17 12.32-5.62 0-9.11-4.05-10.53-7.47l-8 3.34A19.93 19.93 0 0 0 178.24 84c10.77 0 19.88-6.36 19.88-21.85V24.48h-8.72zM178.88 56.9c-6.34 0-11.64-5.32-11.64-12.64s5.31-12.8 11.64-12.8S190 36.87 190 44.27s-4.86 12.63-11.12 12.63zm25.58-54.67h9.19V63.9h-9.19zm34.38 54.67c-4.67 0-8-2.15-10.14-6.36l28-11.6-1-2.38c-1.74-4.69-7-13.35-17.9-13.35s-19.72 8.5-19.72 21c0 11.76 8.87 21 20.75 21a20.78 20.78 0 0 0 17.42-9.3l-7.13-4.77c-2.36 3.46-5.61 5.76-10.28 5.76zm-.71-25.59c3.64 0 6.73 1.83 7.76 4.45l-18.69 7.79a11.49 11.49 0 0 1 10.7-12.23z"></path></svg>' },/***/
       158:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 19"><path d="M9 0a9 9 0 0 0-9 9v7a3 3 0 0 0 3 3h3v-8H2V9a7 7 0 0 1 14 0v2h-4v8h3a3 3 0 0 0 3-3V9a9 9 0 0 0-9-9z" fill="none"></path></svg>' },/***/
       159:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 21"><path d="M2 9v7h3V9zm6 0v7h3V9zM0 21h19v-3H0zM14 9v7h3V9zM9.5 0L0 5v2h19V5z" fill="none"></path></svg>' },/***/
       160:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 22"><path d="M7 2H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h5v2h2V0H7zm0 15H2l5-6zm9-15h-5v2h5v13l-5-6v9h5a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z" fill="none"></path></svg>' },/***/
       161:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 37.12 15.36"><path d="M36.48 1.27h-4.2V.56a.59.59 0 0 0-1.17 0v.71h-4.19a.78.78 0 0 0-.79.75.77.77 0 0 0 .79.75h4.19v1.28H31a.52.52 0 0 0-.55.52v1.72h-5.37a5.5 5.5 0 0 1-2.47-1.12c-1.18-.82-1.06-1.27-2.55-1.27H17.2c-1.49 0-1.33.45-2.55 1.27a5.52 5.52 0 0 1-2.46 1.12H6.82V4.57a.52.52 0 0 0-.55-.52h-.12V2.77h4.19a.77.77 0 0 0 .79-.77.78.78 0 0 0-.79-.75H6.15V.56A.59.59 0 0 0 5 .56v.71H.78A.77.77 0 0 0 0 2a.76.76 0 0 0 .78.75H5v1.3h-.14a.52.52 0 0 0-.55.52V9.7a.53.53 0 0 0 .55.53h1.37a.53.53 0 0 0 .55-.53V8.39h5.37a3.08 3.08 0 0 1 1.68 1 10.11 10.11 0 0 0-4.58 4.65.91.91 0 0 0 .47 1.19 1 1 0 0 0 1.28-.4 8.09 8.09 0 0 1 4.08-4l.78 1.05a1.36 1.36 0 0 0 1.1.56h3.21a1.38 1.38 0 0 0 1.1-.56 11.67 11.67 0 0 1 .73-1.02 8 8 0 0 1 4.07 4 1 1 0 0 0 .87.53 1.43 1.43 0 0 0 .39-.08.87.87 0 0 0 .47-1.19 10 10 0 0 0-4.59-4.65 3 3 0 0 1 1.69-1h5.37V9.7a.53.53 0 0 0 .55.53h1.37a.53.53 0 0 0 .55-.53V4.57a.52.52 0 0 0-.55-.52h-.12V2.77h4.19a.76.76 0 0 0 .8-.77c.2-.39-.15-.73-.58-.73z" fill="none"></path></svg>' },/***/
       162:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><path d="M40 28V4a4 4 0 0 0-4-4H12a4 4 0 0 0-4 4v24a4 4 0 0 0 4 4h24a4 4 0 0 0 4-4zm-22-8l4.06 5.42L28 18l8 10H12zM0 8v28a4 4 0 0 0 4 4h28v-4H4V8z" fill="#fff"></path></svg>' },/***/
       163:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.99 19.99"><path d="M20 17.77V2.22A2.23 2.23 0 0 0 17.77 0H2.22A2.23 2.23 0 0 0 0 2.22v15.55A2.23 2.23 0 0 0 2.22 20h15.55A2.23 2.23 0 0 0 20 17.77zM6.11 11.66L8.88 15l3.89-5 5 6.67H2.22z" fill="none"></path></svg>' },/***/
       164:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 19.07"><path d="M9 16.54l-7.38-5.73L0 12.07l9 7 9-7-1.63-1.27zM9 14l7.36-5.73L18 7 9 0 0 7l1.63 1.27z" fill="none"></path></svg>' },/***/
       165:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8.8 10.91"><path d="M8.8 5.45L0 0v10.91l8.8-5.46" fill="none"></path></svg>' },/***/
       166:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 31.94 31.94"><defs><linearGradient id="a" y1="15.97" x2="31.94" y2="15.97" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#fff" stop-opacity="0"></stop><stop offset="1" stop-color="#fff"></stop></linearGradient></defs><path d="M4.37 0a32 32 0 0 0-.19 31.94l27.76-16z" fill-rule="evenodd" fill="url(#a)"></path></svg>' },/***/
       167:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 880"><path d="M169 625.92s-9.21 3.23 4.49 1.91S230.11 607 279 583.25s63.48-24.37 115.41 17.46 92.23 27.26 113.64-6.82 28.12-84.58 52-115.35c22.46-28.9 84.93-49.35 122.27 5.73s3.68 85.86 31.46 113.93 70.66 21.43 91.61-26 33.66-63.88 77.82-62.12c34.48 1.62 61.85 19.76 66.38 75.86s15.11 122.14 82.74 129.19c105.25-.67 109.21-57.37 119-88.63 10-31.92 20.87-80.06 38.92-94.16s56.82-19.69 74.52 11.69 11 72.53-28.7 76.17-86.15-14.87-87.18-80.3 34.49-111.19 23-143.95-62.2-54.62-86.67-82.23-34.81-57.32-24.88-97.59 59.38-31.27 74-23.84 41.08 30.36 30.71 63.1-87.84 56.46-123.77-24.88-34.58-64.14-34.58-64.14" fill="none"></path><path fill="#fff" d="M0 0h1440v880H0z"></path></svg>' },/***/
       168:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14"><path d="M13.61 0h-.12L9.33 1.63 4.67 0 .28 1.48a.39.39 0 0 0-.28.37v11.76a.38.38 0 0 0 .39.39h.12l4.16-1.61L9.33 14l4.39-1.48a.39.39 0 0 0 .28-.37V.39a.38.38 0 0 0-.39-.39zM9 12l-4-1V2l4 1z" fill="none"></path></svg>' },/***/
       169:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 44"><path d="M40.26 19A5.53 5.53 0 0 0 42 21.25a4.68 4.68 0 0 0 2.8.75 4.48 4.48 0 0 0 4.33-2.41C50 18 50.4 15.46 50.4 12a24.76 24.76 0 0 0-.4-4.46 10.4 10.4 0 0 0-.52-2A6.45 6.45 0 0 0 48.61 4a4.11 4.11 0 0 0-1.44-1.23 4.75 4.75 0 0 0-2.27-.48 4.73 4.73 0 0 0-4.28 2.18q-1.41 2.17-1.41 7.62a27.9 27.9 0 0 0 .28 4 10.52 10.52 0 0 0 .77 2.91zM43.4 7.12c.28-.89.73-1.34 1.36-1.34s1.08.44 1.39 1.31a18.27 18.27 0 0 1 .46 5.12 26.67 26.67 0 0 1-.2 3.82 4.21 4.21 0 0 1-.62 1.79 1.25 1.25 0 0 1-1 .57c-.58 0-1-.45-1.34-1.34a17.66 17.66 0 0 1-.46-5 19.25 19.25 0 0 1 .41-4.93zM29.21 21a5.21 5.21 0 0 0 3.3 1 4.83 4.83 0 0 0 2.84-.8 5.2 5.2 0 0 0 1.77-2.37 9 9 0 0 0 .64-3.46 8 8 0 0 0-1.26-4.63 3.69 3.69 0 0 0-3.1-1.83 3 3 0 0 0-1.65.47 5 5 0 0 0-1.4 1.43 15.37 15.37 0 0 1 .55-4c.34-.87.82-1.3 1.43-1.3a1 1 0 0 1 .86.45 3.25 3.25 0 0 1 .5 1.55l3.79-.65a8.08 8.08 0 0 0-1-2.55A4.36 4.36 0 0 0 35 2.78a5.34 5.34 0 0 0-2.58-.52 4.89 4.89 0 0 0-4.32 2.4c-1 1.61-1.56 4.13-1.56 7.58a17.65 17.65 0 0 0 .74 5.68A6.53 6.53 0 0 0 29.21 21zM31 13a1.55 1.55 0 0 1 1.33-.82 1.52 1.52 0 0 1 1.3.85 4.82 4.82 0 0 1 .52 2.46 4.56 4.56 0 0 1-.5 2.38 1.49 1.49 0 0 1-1.26.8 1.62 1.62 0 0 1-1.39-.84 4.57 4.57 0 0 1-.56-2.44A4.28 4.28 0 0 1 31 13zM18 6.14a1.29 1.29 0 0 1 1.09-.57 1.18 1.18 0 0 1 1 .52 2.39 2.39 0 0 1 .37 1.39A2.58 2.58 0 0 1 20 9.05a1.49 1.49 0 0 1-1.23.66 2.11 2.11 0 0 1-.48-.07l-.2 3.8a3.52 3.52 0 0 1 1.23-.31 1.51 1.51 0 0 1 1.32.73 3.73 3.73 0 0 1 .49 2.06 3.75 3.75 0 0 1-.56 2.08 1.5 1.5 0 0 1-1.27.79 1.43 1.43 0 0 1-1.2-.63 5.11 5.11 0 0 1-.69-2.23l-3.81.71a10 10 0 0 0 1.07 3 4.85 4.85 0 0 0 1.78 1.79 5.9 5.9 0 0 0 2.94.62 5.3 5.3 0 0 0 3.09-.83 5.24 5.24 0 0 0 1.8-2.36 8.52 8.52 0 0 0 .62-3.2 6.27 6.27 0 0 0-.38-2.29 3.76 3.76 0 0 0-1.06-1.54 3.57 3.57 0 0 0-1.21-.65 4.93 4.93 0 0 0 1.46-1.78 5.14 5.14 0 0 0 .48-2.24A5.24 5.24 0 0 0 23 3.65a4.82 4.82 0 0 0-3.87-1.39 4.87 4.87 0 0 0-3.6 1.28 6.82 6.82 0 0 0-1.72 3.67l3.6.9A4.17 4.17 0 0 1 18 6.14zm33.76 6.41v.59c5.72 2.09 9.3 5.07 9.3 8.39 0 5.64-10.38 10.33-24 11.26l.33 4.3C52.47 36 64 30.3 64 23.44c0-4.44-4.8-8.36-12.27-10.89zM27.3 25.87v6.94C13.5 31.92 3 27.21 3 21.53c0-3.93 5-7.39 12.65-9.45v-.53C6.27 14 0 18.39 0 23.44c0 7 11.85 12.71 27.3 13.69V44l4.62-4.53 4.62-4.54-4.62-4.53zm26-20.8a2.54 2.54 0 1 0-2.56-2.53 2.54 2.54 0 0 0 2.53 2.53zm0-3.61a1.08 1.08 0 1 1-1.08 1.08 1.08 1.08 0 0 1 1.05-1.08z" fill="none"></path></svg>' },/***/
       170:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.76 69.61"><defs><linearGradient id="a" x1="9.38" x2="9.38" y2="69.61" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ee8c00" stop-opacity="0"></stop><stop offset="1" stop-color="#ee8c00"></stop></linearGradient></defs><path d="M.4 0q.2 9 1.26 18a94.31 94.31 0 0 0 3.57 17.45A25.63 25.63 0 0 0 8.93 43a42.17 42.17 0 0 1 4.92 8.11A55.24 55.24 0 0 1 17.08 60a43 43 0 0 1 1 4.61 41.24 41.24 0 0 1 .68 4.81l-6 .19a38.72 38.72 0 0 0-.25-4.17c-.14-1.43-.36-2.85-.61-4.27a49.69 49.69 0 0 0-2.26-8.3 37.23 37.23 0 0 0-3.81-7.66 29.38 29.38 0 0 1-3.58-8.89A95.65 95.65 0 0 1 .08 18.16Q-.19 9 .4 0z" fill="url(#a)"></path></svg>' },/***/
       171:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><path d="M20 0a20 20 0 1 0 20 20A20 20 0 0 0 20 0zm-4 29V11l12 9z" fill="none"></path></svg>' },/***/
       172:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path class="pause" d="M9.5 6h-2v12h4V6h-2zm5 0h-2v12h4V6h-2z" fill="none"></path><path class="play" d="M18 12L8 5.7v12.6L18 12" fill="none"></path></svg>' },/***/
       173:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 12.99"><path d="M0 4.99v4h3l3 4v-12l-3 4H0z"></path><g class="waves"><path d="M9.75 6.49a3.34 3.34 0 0 0-1.81-3v6a3.32 3.32 0 0 0 1.81-3z"></path><path d="M7.94 0v1.52a5.17 5.17 0 0 1 3.61 5 5.17 5.17 0 0 1-3.61 5V13A6.63 6.63 0 0 0 13 6.49 6.63 6.63 0 0 0 7.94 0z"></path></g></svg>' },/***/
       174:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 29"><path d="M61.33 0H2.67A2.64 2.64 0 0 0 0 2.62v23.76A2.64 2.64 0 0 0 2.67 29h24c1.47 0 2-1 2.66-2.62A33 33 0 0 0 32 21.13a49.59 49.59 0 0 1 2.67 5.25c.83 1.28 1.19 2.62 2.66 2.62h24A2.64 2.64 0 0 0 64 26.38V2.62A2.64 2.64 0 0 0 61.33 0zM16 18.44a3.94 3.94 0 1 1 4-3.94 4 4 0 0 1-4 3.94zm32 0a3.94 3.94 0 1 1 4-3.94 4 4 0 0 1-4 3.94z" fill="none"></path></svg>' },/***/
       200:/***/
              function (e, t, i) {/* WEBPACK VAR INJECTION */
                     (function (n) {
                            var s, a, r, o = void 0 !== e && e.exports && void 0 !== n ? n : this || window;//helps ensure compatibility with AMD/RequireJS and CommonJS/Node
                            (o._gsQueue || (o._gsQueue = [])).push(function () {
                                   "use strict"; var e = Math.PI / 180, t = 180 / Math.PI, i = /[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi, n = /(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi, s = /(^[#\.]|[a-y][a-z])/gi, a = /[achlmqstvz]/gi, r = /[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,
                                          //_attrExp = /(\S+)=["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?/gi, //finds all the attribute name/value pairs in an HTML element
                                          //_outerTagExp = /^<([A-Za-z0-9_\-]+)((?:\s+[A-Za-z0-9_\-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i, //takes the outerHTML and pulls out [0] - the first tag, [1] - the tag name, and [2] - the attribute name/value pairs (space-delimited)
                                          //_wrappingQuotesExp = /^["']|["']$/g,
                                          l = o._gsDefine.globals.TweenLite,
                                          //_nonNumbersExp = /(?:([\-+](?!(\d|=)))|[^\d\-+=e]|(e(?![\-+][\d])))+/ig,
                                          h = function (e) { o.console && console.log(e) },
                                          // translates an arc into a normalized array of cubic beziers excluding the starting x/y. The circle the arc follows will be centered at 0,0 and have a radius of 1 (hence normalized). Each bezier covers no more than 90 degrees; the arc will be divided evenly into a maximum of four curves.
                                          u = function (t, i) { var n, s, a, r, o, l, h = Math.ceil(Math.abs(i) / 90), u = 0, c = []; for (t *= e, i *= e, n = i / h, s = 4 / 3 * Math.sin(n / 2) / (1 + Math.cos(n / 2)), l = 0; l < h; l++)a = t + l * n, r = Math.cos(a), o = Math.sin(a), c[u++] = r - s * o, c[u++] = o + s * r, a += n, r = Math.cos(a), o = Math.sin(a), c[u++] = r + s * o, c[u++] = o - s * r, c[u++] = r, c[u++] = o; return c },
                                          // translates SVG arc data into an array of cubic beziers
                                          c = function (i, n, s, a, r, o, l, h, c) {
                                                 if (i !== h || n !== c) {
                                                        s = Math.abs(s), a = Math.abs(a); var d = r % 360 * e, _ = Math.cos(d), p = Math.sin(d), v = (i - h) / 2, f = (n - c) / 2, g = _ * v + p * f, m = -p * v + _ * f, y = s * s, E = a * a, T = g * g, A = m * m, b = T / y + A / E; b > 1 && (s = Math.sqrt(b) * s, a = Math.sqrt(b) * a, y = s * s, E = a * a); var R = o === l ? -1 : 1, w = (y * E - y * A - E * T) / (y * A + E * T); w < 0 && (w = 0); var I = R * Math.sqrt(w), P = I * (s * m / a), L = I * (-a * g / s), k = (i + h) / 2, C = (n + c) / 2, M = k + (_ * P - p * L), x = C + (p * P + _ * L), O = (g - P) / s, S = (m - L) / a, D = (-g - P) / s, N = (-m - L) / a, F = Math.sqrt(O * O + S * S), V = O; R = S < 0 ? -1 : 1; var B = R * Math.acos(V / F) * t; F = Math.sqrt((O * O + S * S) * (D * D + N * N)), V = O * D + S * N, R = O * N - S * D < 0 ? -1 : 1; var U = R * Math.acos(V / F) * t; !l && U > 0 ? U -= 360 : l && U < 0 && (U += 360), U %= 360, B %= 360; var H, G, $, z = u(B, U), W = _ * s, K = p * s, Y = p * -a, X = _ * a, j = z.length - 2;
                                                        //translate all the bezier points according to the matrix...
                                                        for (H = 0; H < j; H += 2)G = z[H], $ = z[H + 1], z[H] = G * W + $ * Y + M, z[H + 1] = G * K + $ * X + x;//always set the end to exactly where it's supposed to be
                                                        return z[z.length - 2] = h, z[z.length - 1] = c, z
                                                 }
                                          },
                                          //Spits back an array of cubic Bezier segments that use absolute coordinates. Each segment starts with a "moveTo" command (x coordinate, then y) and then 2 control points (x, y, x, y), then anchor. The goal is to minimize memory and maximize speed.
                                          d = function (e) {
                                                 var t, n, s, a, o, l, u, d, _, p, v, f, g, m = (e + "").replace(r, function (e) { var t = +e; return t < 1e-4 && t > -1e-4 ? 0 : t }).match(i) || [],
                                                 //some authoring programs spit out very small numbers in scientific notation like "1e-5", so make sure we round that down to 0 first.
                                                 y = [], E = 0, T = 0, A = m.length, b = 2, R = 0; if (!e || !isNaN(m[0]) || isNaN(m[1])) return h("ERROR: malformed path data: " + e), y; for (t = 0; t < A; t++)
                                                        // "M" (move)
                                                        if (g = o, isNaN(m[t]) ? (o = m[t].toUpperCase(), l = o !== m[t]) :
                                                               //commands like "C" can be strung together without any new command characters between.
                                                               t--, s = +m[t + 1], a = +m[t + 2], l && (s += E, a += T), 0 === t && (d = s, _ = a), "M" === o) u && u.length < 8 && (
                                                                      //if the path data was funky and just had a M with no actual drawing anywhere, skip it.
                                                                      y.length -= 1, b = 0), E = d = s, T = _ = a, u = [s, a], R += b, b = 2, y.push(u), t += 2, o = "L"; else if ("C" === o) u || (u = [0, 0]), u[b++] = s, u[b++] = a, l || (E = T = 0), u[b++] = E + 1 * m[t + 3],//note: "*1" is just a fast/short way to cast the value as a Number. WAAAY faster in Chrome, slightly slower in Firefox.
                                                                             u[b++] = T + 1 * m[t + 4], u[b++] = E += 1 * m[t + 5], u[b++] = T += 1 * m[t + 6],
                                                                             //if (y === segment[l-1] && y === segment[l-3] && x === segment[l-2] && x === segment[l-4]) { //if all the values are the same, eliminate the waste.
                                                                             //	segment.length = l = l-6;
                                                                             //}
                                                                             t += 6; else if ("S" === o) "C" === g || "S" === g ? (p = E - u[b - 4], v = T - u[b - 3], u[b++] = E + p, u[b++] = T + v) : (u[b++] = E, u[b++] = T), u[b++] = s, u[b++] = a, l || (E = T = 0), u[b++] = E += 1 * m[t + 3], u[b++] = T += 1 * m[t + 4],
                                                                                    //if (y === segment[l-1] && y === segment[l-3] && x === segment[l-2] && x === segment[l-4]) { //if all the values are the same, eliminate the waste.
                                                                                    //	segment.length = l = l-6;
                                                                                    //}
                                                                                    t += 4; else if ("Q" === o) p = s - E, v = a - T, u[b++] = E + 2 * p / 3, u[b++] = T + 2 * v / 3, l || (E = T = 0), E += 1 * m[t + 3], T += 1 * m[t + 4], p = s - E, v = a - T, u[b++] = E + 2 * p / 3, u[b++] = T + 2 * v / 3, u[b++] = E, u[b++] = T, t += 4; else if ("T" === o) p = E - u[b - 4], v = T - u[b - 3], u[b++] = E + p, u[b++] = T + v, p = E + 1.5 * p - s, v = T + 1.5 * v - a, u[b++] = s + 2 * p / 3, u[b++] = a + 2 * v / 3, u[b++] = E = s, u[b++] = T = a, t += 2; else if ("H" === o) a = T,
                                                                                           //if (x !== relativeX) {
                                                                                           u[b++] = E + (s - E) / 3, u[b++] = T + (a - T) / 3, u[b++] = E + 2 * (s - E) / 3, u[b++] = T + 2 * (a - T) / 3, u[b++] = E = s, u[b++] = a,
                                                                                           //}
                                                                                           t += 1; else if ("V" === o) a = s,//adjust values because the first (and only one) isn't x in this case, it's y.
                                                                                                  s = E, l && (a += T - E),
                                                                                                  //if (y !== relativeY) {
                                                                                                  u[b++] = s, u[b++] = T + (a - T) / 3, u[b++] = s, u[b++] = T + 2 * (a - T) / 3, u[b++] = s, u[b++] = T = a,
                                                                                                  //}
                                                                                                  t += 1; else if ("L" === o || "Z" === o) "Z" === o && (s = d, a = _, u.closed = !0), ("L" === o || Math.abs(E - s) > .5 || Math.abs(T - a) > .5) && (u[b++] = E + (s - E) / 3, u[b++] = T + (a - T) / 3, u[b++] = E + 2 * (s - E) / 3, u[b++] = T + 2 * (a - T) / 3, u[b++] = s, u[b++] = a, "L" === o && (t += 2)), E = s, T = a; else if ("A" === o) { if (f = c(E, T, 1 * m[t + 1], 1 * m[t + 2], 1 * m[t + 3], 1 * m[t + 4], 1 * m[t + 5], (l ? E : 0) + 1 * m[t + 6], (l ? T : 0) + 1 * m[t + 7])) for (n = 0; n < f.length; n++)u[b++] = f[n]; E = u[b - 2], T = u[b - 1], t += 7 } else h("Error: malformed path data: " + e); return y.totalPoints = R + b, y
                                          },
                                          //adds a certain number of Beziers while maintaining the path shape (so that the start/end values can have a matching quantity of points to animate). Only pass in ONE segment of the Bezier at a time. Format: [xAnchor, yAnchor, xControlPoint1, yControlPoint1, xControlPoint2, yControlPoint2, xAnchor, yAnchor, xControlPoint1, etc...]
                                          _ = function (e, t) {
                                                 var i, n, s, a, r, o, l, h, u, c, d, _, p, v, f = 0, g = e.length, m = t / ((g - 2) / 6); for (p = 2; p < g; p += 6)for (f += m; f > .999999;)
                                                        //compare with 0.99999 instead of 1 in order to prevent rounding errors
                                                        i = e[p - 2], n = e[p - 1], s = e[p], a = e[p + 1], r = e[p + 2], o = e[p + 3], l = e[p + 4], h = e[p + 5], v = 1 / (Math.floor(f) + 1),//progress along the bezier (value between 0 and 1)
                                                               u = i + (s - i) * v, d = s + (r - s) * v, u += (d - u) * v, d += (r + (l - r) * v - d) * v, c = n + (a - n) * v, _ = a + (o - a) * v, c += (_ - c) * v, _ += (o + (h - o) * v - _) * v, e.splice(p, 4, i + (s - i) * v,//first control point
                                                                      n + (a - n) * v, u,//second control point
                                                                      c, u + (d - u) * v,//new fabricated anchor on line
                                                                      c + (_ - c) * v, d,//third control point
                                                                      _, r + (l - r) * v,//fourth control point
                                                                      o + (h - o) * v), p += 6, g += 6, f--; return e
                                          }, p = function (e) { var t, i, n, s, a = "", r = e.length; for (i = 0; i < r; i++) { for (s = e[i], a += "M" + s[0] + "," + s[1] + " C", t = s.length, n = 2; n < t; n++)a += (100 * s[n++] | 0) / 100 + "," + (100 * s[n++] | 0) / 100 + " " + (100 * s[n++] | 0) / 100 + "," + (100 * s[n++] | 0) / 100 + " " + (100 * s[n++] | 0) / 100 + "," + (100 * s[n] | 0) / 100 + " "; s.closed && (a += "z") } return a }, v = function (e) { for (var t = [], i = e.length - 1, n = 0; --i > -1;)t[n++] = e[i], t[n++] = e[i + 1], i--; for (i = 0; i < n; i++)e[i] = t[i]; e.reversed = !e.reversed }, f = function (e) { var t, i = e.length, n = 0, s = 0; for (t = 0; t < i; t++)n += e[t++], s += e[t]; return [n / (i / 2), s / (i / 2)] }, g = function (e) {
                                                 //rough estimate of the bounding box (based solely on the anchors) of a single segment. sets "size", "centerX", and "centerY" properties on the bezier array itself, and returns the size (width * height)
                                                 var t, i, n, s = e.length, a = e[0], r = a, o = e[1], l = o; for (n = 6; n < s; n += 6)t = e[n], i = e[n + 1], t > a ? a = t : t < r && (r = t), i > o ? o = i : i < l && (l = i); return e.centerX = (a + r) / 2, e.centerY = (o + l) / 2, e.size = (a - r) * (o - l)
                                          }, m = function (e) {
                                                 for (
                                                        //rough estimate of the bounding box of the entire list of Bezier segments (based solely on the anchors). sets "size", "centerX", and "centerY" properties on the bezier array itself, and returns the size (width * height)
                                                        var t, i, n, s, a, r = e.length, o = e[0][0], l = o, h = e[0][1], u = h; --r > -1;)for (a = e[r], t = a.length, s = 6; s < t; s += 6)i = a[s], n = a[s + 1], i > o ? o = i : i < l && (l = i), n > h ? h = n : n < u && (u = n); return e.centerX = (o + l) / 2, e.centerY = (h + u) / 2, e.size = (o - l) * (h - u)
                                          }, y = function (e, t) { return t.length - e.length }, E = function (e, t) { var i = e.size || g(e), n = t.size || g(t); return Math.abs(n - i) < (i + n) / 20 ? t.centerX - e.centerX || t.centerY - e.centerY : n - i }, T = function (e, t) { var i, n, s = e.slice(0), a = e.length, r = a - 2; for (t |= 0, i = 0; i < a; i++)n = (i + t) % r, e[i++] = s[n], e[i] = s[n + 1] }, A = function (e, t, i, n, s) { var a, r, o, l, h = e.length, u = 0, c = h - 2; for (i *= 6, r = 0; r < h; r += 6)a = (r + i) % c, l = e[a] - (t[r] - n), o = e[a + 1] - (t[r + 1] - s), u += Math.sqrt(o * o + l * l); return u }, b = function (e, t, i) {
                                                 //finds the index in a closed cubic bezier array that's closest to the angle provided (angle measured from the center or average x/y).
                                                 var n, s, a, r = e.length, o = f(e),
                                                        //when comparing distances, adjust the coordinates as if the shapes are centered with each other.
                                                        l = f(t), h = l[0] - o[0], u = l[1] - o[1], c = A(e, t, 0, h, u), d = 0; for (a = 6; a < r; a += 6)(s = A(e, t, a / 6, h, u)) < c && (c = s, d = a); if (i) for (n = e.slice(0), v(n), a = 6; a < r; a += 6)(s = A(n, t, a / 6, h, u)) < c && (c = s, d = -a); return d / 6
                                          }, R = function (e, t, i) {
                                                 for (
                                                        //finds the x/y of the anchor that's closest to the provided x/y coordinate (returns an array, like [x, y]). The bezier should be the top-level type that contains an array for each segment.
                                                        var n, s, a, r, o, l, h = e.length, u = 99999999999, c = 0, d = 0; --h > -1;)for (n = e[h], l = n.length, o = 0; o < l; o += 6)s = n[o] - t, a = n[o + 1] - i, (r = Math.sqrt(s * s + a * a)) < u && (u = r, c = n[o], d = n[o + 1]); return [c, d]
                                          }, w = function (e, t, i, n, s, a) {
                                                 //matches the bezier to the closest one in a pool (array) of beziers, assuming they are in order of size and we shouldn't drop more than 20% of the size, otherwise prioritizing location (total distance to the center). Extracts the segment out of the pool array and returns it.
                                                 var r, o, l, h, u = t.length, c = 0, d = Math.min(e.size || g(e), t[i].size || g(t[i])) * n,
                                                        //limit things based on a percentage of the size of either the bezier or the next element in the array, whichever is smaller.
                                                        _ = 999999999999, p = e.centerX + s, v = e.centerY + a; for (r = i; r < u && !((t[r].size || g(t[r])) < d); r++)o = t[r].centerX - p, l = t[r].centerY - v, (h = Math.sqrt(o * o + l * l)) < _ && (c = r, _ = h); return h = t[c], t.splice(c, 1), h
                                          }, I = function (e, t, i, n) {
                                                 //returns an array of shape indexes, 1 for each segment.
                                                 var s, a, r, o, l, u, c, d = t.length - e.length, p = d > 0 ? t : e, f = d > 0 ? e : t, A = 0, I = "complexity" === n ? y : E, P = "position" === n ? 0 : "number" == typeof n ? n : .8, L = f.length, k = "object" == typeof i && i.push ? i.slice(0) : [i], C = "reverse" === k[0] || k[0] < 0, M = "log" === i; if (f[0]) {
                                                        if (p.length > 1 && (e.sort(I), t.sort(I), u = p.size || m(p),//ensures centerX and centerY are defined (used below).
                                                               u = f.size || m(f), u = p.centerX - f.centerX, c = p.centerY - f.centerY, I === E)) for (L = 0; L < f.length; L++)p.splice(L, 0, w(f[L], p, L, P, u, c)); if (d) for (d < 0 && (d = -d), p[0].length > f[0].length &&
                                                                      //since we use shorter[0] as the one to map the origination point of any brand new fabricated segments, do any subdividing first so that there are more points to choose from (if necessary)
                                                                      _(f[0], (p[0].length - f[0].length) / 6 | 0), L = f.length; A < d;)o = p[L].size || g(p[L]),//just to ensure centerX and centerY are calculated which we use on the next line.
                                                                             r = R(f, p[L].centerX, p[L].centerY), o = r[0], l = r[1], f[L++] = [o, l, o, l, o, l, o, l], f.totalPoints += 8, A++; for (L = 0; L < e.length; L++)s = t[L], a = e[L], d = s.length - a.length, d < 0 ? _(s, -d / 6 | 0) : d > 0 && _(a, d / 6 | 0), C && !a.reversed && v(a), (i = k[L] || 0 === k[L] ? k[L] : "auto") && (
                                                                                    //if start shape is closed, find the closest point to the start/end, and re-organize the bezier points accordingly so that the shape morphs in a more intuitive way.
                                                                                    a.closed || Math.abs(a[0] - a[a.length - 2]) < .5 && Math.abs(a[1] - a[a.length - 1]) < .5 ? "auto" === i || "log" === i ? (k[L] = i = b(a, s, 0 === L), i < 0 && (C = !0, v(a), i = -i), T(a, 6 * i)) : "reverse" !== i && (L && i < 0 &&
                                                                                           //only happens if an array is passed as shapeIndex and a negative value is defined for an index beyond 0. Very rare, but helpful sometimes.
                                                                                           v(a), T(a, 6 * (i < 0 ? -i : i))) : !C && ("auto" === i && Math.abs(s[0] - a[0]) + Math.abs(s[1] - a[1]) + Math.abs(s[s.length - 2] - a[a.length - 2]) + Math.abs(s[s.length - 1] - a[a.length - 1]) > Math.abs(s[0] - a[a.length - 2]) + Math.abs(s[1] - a[a.length - 1]) + Math.abs(s[s.length - 2] - a[0]) + Math.abs(s[s.length - 1] - a[1]) || i % 2) ? (v(a), k[L] = -1, C = !0) : "auto" === i ? k[L] = 0 : "reverse" === i && (k[L] = -1), a.closed !== s.closed && (
                                                                                                  //if one is closed and one isn't, don't close either one otherwise the tweening will look weird (but remember, the beginning and final states will honor the actual values, so this only affects the inbetween state)
                                                                                                  a.closed = s.closed = !1)); return M && h("shapeIndex:[" + k.join(",") + "]"), k
                                                 }
                                          }, P = function (e, t, i, n) { var s = d(e[0]), a = d(e[1]); I(s, a, t || 0 === t ? t : "auto", i) && (e[0] = p(s), e[1] = p(a), "log" !== n && !0 !== n || h('precompile:["' + e[0] + '","' + e[1] + '"]')) }, L = function (e, t, i) { return t || i || e || 0 === e ? function (n) { P(n, e, t, i) } : P }, k = function (e, t) { if (!t) return e; var i, s, a, r = e.match(n) || [], o = r.length, l = ""; for ("reverse" === t ? (s = o - 1, i = -2) : (s = (2 * (parseInt(t, 10) || 0) + 1 + 100 * o) % o, i = 2), a = 0; a < o; a += 2)l += r[s - 1] + "," + r[s] + " ", s = (s + i) % o; return l },
                                          //adds a certain number of points while maintaining the polygon/polyline shape (so that the start/end values can have a matching quantity of points to animate). Returns the revised string.
                                          C = function (e, t) {
                                                 var i, n, s, a, r, o, l, h = 0, u = parseFloat(e[0]), c = parseFloat(e[1]), d = u + "," + c + " "; for (s = e.length, i = .5 * t / (.5 * s - 1), n = 0; n < s - 2; n += 2) {
                                                        if (h += i, o = parseFloat(e[n + 2]), l = parseFloat(e[n + 3]), h > .999999) for (
                                                               //compare with 0.99999 instead of 1 in order to prevent rounding errors
                                                               r = 1 / (Math.floor(h) + 1), a = 1; h > .999999;)d += (u + (o - u) * r * a).toFixed(2) + "," + (c + (l - c) * r * a).toFixed(2) + " ", h--, a++; d += o + "," + l + " ", u = o, c = l
                                                 } return d
                                          }, M = function (e) { var t = e[0].match(n) || [], i = e[1].match(n) || [], s = i.length - t.length; s > 0 ? e[0] = C(t, s) : e[1] = C(i, -s) }, x = function (e) { return isNaN(e) ? M : function (t) { M(t), t[1] = k(t[1], parseInt(e, 10)) } }, O = function (e, t) {
                                                 var i, n = o.document.createElementNS("http://www.w3.org/2000/svg", "path"), s = Array.prototype.slice.call(e.attributes), a = s.length; for (t = "," + t + ","; --a > -1;)i = s[a].nodeName.toLowerCase(),//in Microsoft Edge, if you don't set the attribute with a lowercase name, it doesn't render correctly! Super weird.
                                                        -1 === t.indexOf("," + i + ",") && n.setAttributeNS(null, i, s[a].nodeValue); return n
                                          }, S = function (e, t) {
                                                 var i, s, a, r, o, l, h, u, c, d, _, p, v, f, g, m, y, E, T, A, b, R = e.tagName.toLowerCase(), w = .552284749831;
                                                 //if there are rounded corners, render cubic beziers
                                                 return "path" !== R && e.getBBox ? (l = O(e, "x,y,width,height,cx,cy,rx,ry,r,x1,x2,y1,y2,points"), "rect" === R ? (r = +e.getAttribute("rx") || 0, o = +e.getAttribute("ry") || 0, s = +e.getAttribute("x") || 0, a = +e.getAttribute("y") || 0, d = (+e.getAttribute("width") || 0) - 2 * r, _ = (+e.getAttribute("height") || 0) - 2 * o, r || o ? (p = s + r * (1 - w), v = s + r, f = v + d, g = f + r * w, m = f + r, y = a + o * (1 - w), E = a + o, T = E + _, A = T + o * w, b = T + o, i = "M" + m + "," + E + " V" + T + " C" + [m, A, g, b, f, b, f - (f - v) / 3, b, v + (f - v) / 3, b, v, b, p, b, s, A, s, T, s, T - (T - E) / 3, s, E + (T - E) / 3, s, E, s, y, p, a, v, a, v + (f - v) / 3, a, f - (f - v) / 3, a, f, a, g, a, m, y, m, E].join(",") + "z") : i = "M" + (s + d) + "," + a + " v" + _ + " h" + -d + " v" + -_ + " h" + d + "z") : "circle" === R || "ellipse" === R ? ("circle" === R ? (r = o = +e.getAttribute("r") || 0, u = r * w) : (r = +e.getAttribute("rx") || 0, o = +e.getAttribute("ry") || 0, u = o * w), s = +e.getAttribute("cx") || 0, a = +e.getAttribute("cy") || 0, h = r * w, i = "M" + (s + r) + "," + a + " C" + [s + r, a + u, s + h, a + o, s, a + o, s - h, a + o, s - r, a + u, s - r, a, s - r, a - u, s - h, a - o, s, a - o, s + h, a - o, s + r, a - u, s + r, a].join(",") + "z") : "line" === R ? i = "M" + (e.getAttribute("x1") || 0) + "," + (e.getAttribute("y1") || 0) + " L" + (e.getAttribute("x2") || 0) + "," + (e.getAttribute("y2") || 0) : "polyline" !== R && "polygon" !== R || (c = (e.getAttribute("points") + "").match(n) || [], s = c.shift(), a = c.shift(), i = "M" + s + "," + a + " L" + c.join(","), "polygon" === R && (i += "," + s + "," + a + "z")), l.setAttribute("d", i), t && e.parentNode && (e.parentNode.insertBefore(l, e), e.parentNode.removeChild(e)), l) : e
                                          }, D = function (e, t, i) {
                                                 var a, r, o = "string" == typeof e;//allow array-like objects like jQuery objects.
                                                 //if we were passed an element (or selector text for an element) that isn't a path, convert it.
                                                 //if the shape matches the target element, the user wants to revert to the original which should have been stored in the data-original attribute
                                                 return (!o || s.test(e) || (e.match(n) || []).length < 3) && (a = o ? l.selector(e) : e && e[0] ? e : [e], a && a[0] ? (a = a[0], r = a.nodeName.toUpperCase(), t && "PATH" !== r && (a = S(a, !1), r = "PATH"), e = a.getAttribute("PATH" === r ? "d" : "points") || "", a === i && (e = a.getAttributeNS(null, "data-original") || e)) : (h("WARNING: invalid morph to: " + e), e = !1)), e
                                          }, N = "Use MorphSVGPlugin.convertToPath(elementOrSelectorText) to convert to a path before morphing.", F = o._gsDefine.plugin({
                                                 propName: "morphSVG", API: 2, global: !0, version: "0.8.11",
                                                 //called when the tween renders for the first time. This is where initial values should be recorded and any setup routines should run.
                                                 init: function (e, t, i, n) { var s, r, o, l, u; return "function" == typeof e.setAttribute && ("function" == typeof t && (t = t(n, e)), s = e.nodeName.toUpperCase(), u = "POLYLINE" === s || "POLYGON" === s, "PATH" === s || u ? (r = "PATH" === s ? "d" : "points", ("string" == typeof t || t.getBBox || t[0]) && (t = { shape: t }), l = D(t.shape || t.d || t.points || "", "d" === r, e), u && a.test(l) ? (h("WARNING: a <" + s + "> cannot accept path data. " + N), !1) : (l && (this._target = e, e.getAttributeNS(null, "data-original") || e.setAttributeNS(null, "data-original", e.getAttribute(r)), (o = this._addTween(e, "setAttribute", e.getAttribute(r) + "", l + "", "morphSVG", !1, r, "object" == typeof t.precompile ? function (e) { e[0] = t.precompile[0], e[1] = t.precompile[1] } : "d" === r ? L(t.shapeIndex, t.map || F.defaultMap, t.precompile) : x(t.shapeIndex))) && (this._overwriteProps.push("morphSVG"), o.end = l, o.endProp = r)), !0)) : (h("WARNING: cannot morph a <" + s + "> SVG element. " + N), !1)) }, set: function (e) { var t; if (this._super.setRatio.call(this, e), 1 === e) for (t = this._firstPT; t;)t.end && this._target.setAttribute(t.endProp, t.end), t = t._next }
                                          }); F.pathFilter = P, F.pointsFilter = M, F.subdivideRawBezier = _, F.defaultMap = "size", F.pathDataToRawBezier = function (e) { return d(D(e, !0)) }, F.equalizeSegmentQuantity = I, F.convertToPath = function (e, t) { "string" == typeof e && (e = l.selector(e)); for (var i = e && 0 !== e.length ? e.length && e[0] && e[0].nodeType ? Array.prototype.slice.call(e, 0) : [e] : [], n = i.length; --n > -1;)i[n] = S(i[n], !1 !== t); return i }, F.pathDataToBezier = function (e, t) {
                                                 //converts SVG path data into an array of {x, y} objects that can be plugged directly into a bezier tween. You can optionally pass in a 2D matrix like [a, b, c, d, tx, ty] containing numbers that should transform each point.
                                                 var i, n, s, a, r, o, h, u, c = d(D(e, !0))[0] || [], _ = 0; if (t = t || {}, u = t.align || t.relative, a = t.matrix || [1, 0, 0, 1, 0, 0], r = t.offsetX || 0, o = t.offsetY || 0, "relative" === u || !0 === u ? (r -= c[0] * a[0] + c[1] * a[2], o -= c[0] * a[1] + c[1] * a[3], _ = "+=") : (r += a[4], o += a[5], u && (u = "string" == typeof u ? l.selector(u) : u && u[0] ? u : [u]) && u[0] && (h = u[0].getBBox() || { x: 0, y: 0 }, r -= h.x, o -= h.y)), i = [], s = c.length, a && "1,0,0,1,0,0" !== a.join(",")) for (n = 0; n < s; n += 2)i.push({ x: _ + (c[n] * a[0] + c[n + 1] * a[2] + r), y: _ + (c[n] * a[1] + c[n + 1] * a[3] + o) }); else for (n = 0; n < s; n += 2)i.push({ x: _ + (c[n] + r), y: _ + (c[n + 1] + o) }); return i
                                          }
                            }), o._gsDefine && o._gsQueue.pop()(),
                                   //export to AMD/RequireJS and CommonJS/Node (precursor to full modular build system coming at a later date)
                                   function (n) { "use strict"; var l = function () { return (o.GreenSockGlobals || o).MorphSVGPlugin }; a = [i(47)], s = l, void 0 !== (r = "function" == typeof s ? s.apply(t, a) : s) && (e.exports = r) }()
                     }).call(t, i(24))
              },/***/
       204:/***/
              function (e, t) { e.exports = "uniform float delta;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tuv.y = 1.0 - uv.y;\n\n\tvec4 color = texture(iChannel0, uv).rgba;\n\tvec2 colorGrad = texture(iChannel1, uv).rb;\n\n\tbool filled = delta >= colorGrad.x;\n\tbool erased = colorGrad.y >= 0.0 && colorGrad.y <= delta;\n\n\tcolor.rgb *= color.a;\n\tfragColor = color * (filled && !erased ? 1.0 : 0.0);\n}\n" },/***/
       205:/***/
              function (e, t) { e.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAl8AAABhCAYAAADoUMTpAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+IEmuOgAAIABJREFUeJztnXuMJct91z9ndvZ5uZ5jk9hJHNhjg2KI5OxYoGAiyLbhvwSxc2OQeG9fMBLIhLtXgAwRcPvyB+EPpDtRBOSPiNsbRP5LMhehJEqU0AsS4WU8GwcsHGz3EnyJnYdnbd/Xvg5/VNc9NT1V1dXVdfqcM/P7SKUzc7qr6td1uqq//avXhPXkA8BHgWvAdwOXgAtN2G7OuQ8cApURBEEQBEEQls58Po+OO0loRwq+C3gemAGXUaLrEnCxCVqA2ey+D5TAPlAv3VJBEARBEM4sp0F8XQG+H+XlusxCeLkE2LmO9G4DBSLCBEEQBEFYAkPE11ZCO2L5VuATwC7wsAmPLOGxEbq4ieqSvLUEewVBEARBEKJZtfi6BHwc+CaOi66HKJHVFl2PgSdN6GIHeAk1Fmya2G5BEARBEIQoVi2+clQX4gMWoksLLp/wChFfmusoL9huKqMFQRAEQRBiWaX4+jDwLhaCy9bdaIqwJ/TzfJlcRXnARIAJgiAIgrBSViW+LgAfxC26XN4vLcDm9BdgO8AB0gUpCIIgCMIKWZX4ej9qpmVbeLW7GU1Pl/57bnz25SpKgAmCIAiCIKyEVYmvq/hnM7Y9Xe3xXjFdj5rrqGUoBEEQBEEQRmcV4us88DR20dU1yF6HOXGeL80LqIVcBUEQBEEQRmUV4usdHPdo2TxdNsGVWoDtD4grCIIgCIIQxarE1xy7+PIJr7kjxHID8X4JgiAIgjAyq+p21OIr1NM1xy3ChlAMjC8IgiAIgtCL7QFxp8Aeau2sXdRAdht3UXssVqiZhqZwCulW9IWh7CVIQxAEQRAEIZiYjbVzlGi5EZnnV4DPAP8KeA34HU14yhKuGOEyxzfdvoRaL2yIgAR4hpPLT3wD8G7U2mDvavKaN7Z/Gfg88MbAfAVBEARB2FCGbKzdR7jkqG66q9G5Kd4JfBfwh4H/Cfw48Bbhnq7251AylPi6DHwb8F6U2LrIQuy1xd9l4JNNvC8nskMQBEEQhDNAiOdrFzUz0NWtOJQ58KvAv2bhAbti+XR5vs4PzP8O8DHg96H2mTyHEl6XLHleMf7W3/8syov39YF2CIIgCIKwIQzxfHWJrxwlvHaicwjnMUoIfQZ7t6MpwFKKrznwJ1Gia7tJU6ffFlq2vy8B/xf4BPDqQFsEQRAEQdgAhogv32zHfeBlxhFeoMTPHwO+z3IsZmxaKBOU6Npm4fHSwkr/f7EVLrTCtwM/CXzrEu0UBEEQBOEU4BJfJfDciHaYfDPw51Gergl+4RUryh63/t/j5Pgu07NlCjAtuC6ivG46vAv4UcYTq4IgCIIgbCA28VUAN5ec76OO4+eB70EJMS2wJq0QyxzlZWvn5xpX1vZ62bxfWoB9B/CPB9gmCIIgCMIppy2+9lD7Hi6bkE2xJ6jB/u/GLrpiBZgt3gXssxq7vF82AfYXgO+OtE0QBEEQhFOOKb6mqO7GMWh7nlxMULMQfycnPV99PGDtbsY2Ps+XywPWFl3nWYwd+5eBdgmCIAiCcMYwxVfJuIPrQ5kA70PZFiO+bN2Mbdqer/asxi7PV1uAvR81U1QQBEEQBOEYWnxdB/4Ex7f2WScmwLegxM0W/bxeIefZPF+27ka9vIVr3Jf2fE2AW4H2DSUjbIFaV6iMsI8a85eNZLuQngr771ysziRBcFLgbpcE4dSiV7j/e8AD7IPbt0gz0H0oE+A9qC1+ugTYY/p51y6gxNd5Tnq1LrY+23+3uxy1oL2GGrN22MOOVXDd8rce9/cKahX/A+BoTKMEQRAE4bSyBfxu4DtRW/y82Xzq8MD4fNiEx6zOM7aNWgXfJwb7Ci+A/8XJAfeuwfaumY7blnw3fePuG6i13mpUt/RshbYIgiAIwqlgC/jTKNHVDi4xpsNDwmYtpkYvfuryevUVXmBfQV9/hiwxob1ebTZdfGl2UMuPHCLdV4IgCIIwiC3gDwBvNMEmwtqCzCbCYrxhDwfYfY7jkwW61g3z8Tonx3p1zXa0DbK3cW2AXevIDqpL8hDVpSoIgiAIQk+2UAuDvuEIfTxiWoSFMqTrcqvJkyZPl/gJ4WvY943UgqtrlmNX3tkA29aVa6gBsafFsycIgiAIfagmk8ncEoqQyNsoz4850H7L+DTDOUfYbv39hJOeKRsx3YMmFxOl8yZKdOmuQ9Obdd4StnGP8Vo3uiZITFl4sGZNyDg+CN/FDvBTwLOMtz6cIAiCIGw82ygPF5yc4egTX23BpcNj4299POXYLJNUMy+/ynHxZYor16e+thAy1nfa9BF226Yor1YBXO1IQw/It6UjCIIgCEKLLeA1lPfLF1xdkroL0uySNMeCrWpQfihPUOPFbOO7bN2Nm+LxGsoRi9mNzwL3Os4/QMaACYIgCEIQWywElkuE2USXTYS1Q3t5inVEe71c471s47u6ulNPGyVKWN32nLODdD0KgiAIQhDbKK/GN3JyUVU9bss2xqvdPfeIxZioJyixZa6Wr4OvG3IVvIUSWrau1PZ3saLrNCxOesRiu6SbjnOuobopi+WbIwiCIAibyzbwy8CHsY/38gkvLbq0CHtsBC3CtPgyRZjefmfVPGLR5eiaTNBnbJeLdV/hvg958+kSYC+gPGD1CLYIgiAIwkayDXwS+CAnxZfp+TI9QabXS3u8HreCKby2UF14W6guSt0FOQGeZnXdeK+zEF6m0DSvPYVIPA2eL5McNRbMNSOyQDYVFwRBEAQn28CvAF8E3slJ8eXrbnxkCY9RM+WeBp5qgilgLrI+aFGohZa+5tR7WJ4mz5cmR13XjuXYTdSm4ilEp7kUxhGnsyy72EWVA5yNGaVZ87nK33vGYiutmvXw5GbNZ006e/S9dZbq1qwJKa9Zpwmrr6NZ81mzmvvWbLNXZYNJ1nyu3T2uFwj9eeB7cYuvdnejue7VBdSG1+9DCbhNmAn4EGW7vlZ93am5s4Q014Ea2GexAXebvDnel70m7OLeHeA+qoGrULMs64h81hldBhn2ZT709a9yw/Nd1G+824Qd4C6LpUsOCGvoZiyu17e23J2e6fZBL6uiy9z2QgFqbGzVhDKxDTZmqJeYDHtduGvYElomOf7r1Neo7611ZYZ9n9mak+2B/n1z7PeYvuaScOE0w//bmHW0DExTY75smRxysq6H3Lsx90kfQtpss+4ss83aZVEWrvbkPqoc9D1eB6RrCsr29zZmk8kk86RXz+fzY/k+A/wN4G8CzwN/G/gE8APAPwT+EfCDwD9FPVj/OfA/UN138w0Kj1FeuvZkgGWEW54fIBWZJ/9lot+Ybfn2reQ5qhLElHFJ94bfuSd+0dPWZeWxR/8yOLKkXUbYkDniVJbzqgC7uoT3zGNnV6hIs2vEFFUmrns4pNxdja+LypFe1rKr7GnPQYctOf3vrbG2ECsc+VcRcQrLeX1+3wr/Nc8Iu//NUNNvJxBX+plxTuy923V9fbhFXJsdW3d87KHu15j2pKT7+ZFFpu0KxXw+P5bBBdQm238F+KvAXwM+DjwH/C3g7wJ/H3gRNU7sUWKDxgpvjZjXjOWTefJfNqUn75DKNUU9OIaW8xHdQtfVUNUBdoZQeeybeeKlKAPzQVk4zik8NmSOOJVxzn4Pe3zXe2vgteqwT3wDvku82G/fO30eZpUjnaw5vkecGNR1oG3L0HvriOWP3ywceVcRcYrm+Iz4h/Ec+zXnxP82+n4NoXLEz5rjKe7dmF4JzS7Dyta8t/qIUhsz+othVyg8+WSJ8ng7r7b4AlVZvw/4c8BfRN1wHwP+OvD9wI8BX09syCrCGMKxOlG6yyHz2LBs9jx5Zx1xp6SpxGYoPfkVnngpGoEYm1KJgDmLh6/rOguPHZkjTtUcL3vYoePY6JNOSDikvwAbInBcIQ/Mu3LEz/B7TvvcA7o8UtavZXrACkeeVUScAmVrit83M/Lr8+LhCyE9IZXHnjyRHbF1J1XZxtSdNsuox6UjryxxPlbxBWos1B8HPoryhP1Z4C+huhhTGrAO4cES086spZuezGPDspl68i464qUWXl0VyGdr1eeiLfga58wRZxkN2RHpux2Lnjbkjjxcdg0NfR4iu0uywXfdJpUjbpHQjoOOvGJCHXBtsRSOPKuIOPukfZmZks5Tq0OXkK0c8VLbMad/3UndXumQB9qgyZdkxxz78yNLnEcxn8/fHnBv8hD4BeADwO9FFfo/YL1mKqbifPM5J+0MRz1A+LRzhBrQaRtoOfPEO3DEaXOHxSDaGf5BnZqbqEal7Vo/Qq3Sf9MS53qTfh1gk43c8b0e7NpGj+txDe5up3HIogxmuAeT7uBegy2GGe5JFTbuY2+89gmz6w6LgcUz/NequYa6n7KO86aE1Uk9IFefmzV2XO2It9/EqQPyaOMq43uNLYeEl8cNVHm4zjOvb8rxSRMurrIZCyg/5/g+5pr1rh03POfo+n1Ev/sk6zjHxksdx826o6+vy5Y+deeA7vZKl3NfO1424nWRNeeHYJZJRtjvc5OwYSxL5w9yOroZ+4SHCdLIIso6lsxjxxhUjrwrx/m543wd9DgT1xvZjG5Pgdn9YuLzfMSOg/BdT+6I0zUO5wj/oNQp/QdRF55ryHqkM0c1aEUTL2Mxu9XWYHWl3fV7w2Jpk9jrg27PW4W/+3mX7t+t6rCh6ohvlm/mSGNKXDdY1wMlx+/ZqDuuLZbCkV8VEadvPcqJ8+aUuF8uM7rvVZ/3q+phR013W1kGpFN47IHu8tZ2uNgNsKPqsAH8k7xCbZkF2DLneP2bsXj5MEPtuRbb+Tpkrm5HTW5JdIwZgusSYkVY7EM8lsxjyxgUjrwrx/mV43wdp48bvPakVfTM3yXYunClVzvO3/PYPGfh5QhBe9BC7svCk04WmEZNvxeLKf7fqKJfmZeetLS3zGVHbNm0yTvSGvpgPSCsTLrsaJdNV3cXdHctZQFp9KVw5FVFxFnGNbdDHpBm17AK3zOiCrSjz3Nmt8OeOf42x1c+ZQ879jrSyjrid738lKTrRq0D0qgccYv5fE5X8Bnmu8gxZwyuOvQRnCFu09RkHnvGoHDkfeQ4X4+jqBledr43odoRxyd+8p75zzxpFY44tSdO2TN/TelJs8seCBNfh/QXp4UnvYOeaWlKT5q+B9KsOd6+X4oIG/JIGypPvJgyLjvS0/UwRIRock9aRY90QikceVURcZZxzbHtw8yTjq+tqxLboekShGXHtRScrDu+OC582sKXXuaJF1smXQKsK83KES9afM06DDLDpi43ERt83rCatGuXhJJ5bBqDYkD+eyxu4Flk/j4x5UqzdpzfVwD6un9s90LuOT9G3Jh0vRUWnrhZR9xY23zCeMi1uh4iLsFvYnbZ1gNsKB02+NKsHHG67lcXXS/Jc+LGrtSOtKqItLooIvJyxRlyzV3PvJiXhdKTnouqw44hPStd3XazgDRyFuOoYutw4cjfV3997VsZaQf4JxtlHXErR9xo8dXlnnSFs9wl2fdNKyWZxb6uCp6SwpF3yINQMxtoQ+2wIXecnzvOn9Ova8XVkJWO830NyND7p6thLTxxM0+8WNtyT3q+sVUh+Oztk/YQATjz2OCi8sQpI+1YxjitMnF6PgpHXlVEnGVcsw6ziDRzT3quOlV54tQRNvSxqY+wmw2wwTcMwFYuM8/5NcOdHiWLZ1ZJ+LVVDpuCxFd7S51bhM1Cs6FnCz6MjL9J6Fmic9S+mLpPXVjQpzzqgXm53kpnnvPvO47lgXnmuGf/2BqxKe6ZU7cZfv8cOfIdyivE2eYSQfcYvnVNhZppZiPrkU6fF4Q2NepahtqgKSLt8P02sfeDK82rkemNSew1155jr3Qcd+H7bWIEQxERp02J+77t8+JSD7DhCPfWe7Zy8dlVMHy7ogJ4FvW8yBlpyzpTfE1J8+Pq5RseJ0hr3flt1DTx3wN804ptWRUpPX67qHvwAPtbxWHz/T7HZ/n0rXz6DcfGTcIHPNvQ05vbZJ60UommMlE6JrFCKXN8n+paK8f3fe/HKapx32/StHn+KxYzmDIjbt0zLxd3B6Tle8DH/nab/CIZe81V5DEfKcvRtYxLDIXj+6v092hlTXoVJ9vsIxb7ORYcrzuusskCvwMlIstQQz3UTTpDRVwvzHW+bhG27lAo5gbbj9mMDbdD0Q3yj6Cu7R3AHwL+D/Cp1Zm1ElxCJfRGnqLuvZywdWlgsYbRyyivUcxb5D7udYFyugdvX3ccc8VziQK9Nk4KatzrrsVSRcSZ4W5LXqJ7zaIhuH6XNjPUA2GP7nbvuvH5Auo32yfdGM8hv7+rnt3n9G0638WyrnkdxGg1Ulq7dJfhjEWb3bVWmq47N1jUnZJ+dcfVdg71oK8ULb70A3BZaOH1iOOCbxP5EvDPms+nUN2sj5rwfuCdwH/gbHS/gvthF9Jg7RG+2KiLm5HxatyLrt7CL74Kx/e+LjVXA5K6Ya9IK77qiDizhPmnRnv4XcI7hB36LT7bRZ0wLc06CIaxWdY1V0tKtw8pr61GtVW2l91d/KKmYJijZof+dc/1Ul5F2rAW6G7HkLe/FGyjlqnYRF4Hfg74YdQ1PGUJl4H3AN+5IhvHJvMc62osSuCnGOe+89lg4yrucQZTzzGfYHO96VWeODGM6jp3MFtx/pnj+11UeQ8RXoKwCqrE6dU9z582NrzAuG32zHNsHdq6aLQXaujsoz5s2jZFXwU+Dfw3lDfrSvNperweorofdfgA8Bqn/+3Td9/4rr0k7TY4sVSoMVo2712O/Q3Q9aKSckzGpjNbtQEW9MNjlWJfEDYRXXdSetRDmXmObfTzVYsv3/5VKdmUbseHwKvAF5rPByjR9QBlvxZepgAzxdcT4I8AnwO+NrLtY+Kb0VY7jhWECS89y+6Q4284u6gKmZGmMSixi68b2Pd7dHXPH7Dhb2KnnAO6hdc9FoPu2w17xuK+24RZf4KQioLutvY+i7pTGd9PWezxmCEvP2+zzfL3IXzSBJ3fOvIEJZJeB36rCW+hxNVllN2m8DJFV1t8PTE+/yjw0yNex5jkuB9CvqUfusbKvMhiJXIbVSu9gmFetLJJw3YttzgutnZxN0LFABtOG7Xj+/uM42WvWv/n+Afi30f9zmVgmhnq9w4d3C8Im0qGv5teTz7xtdnm82APVddC607tOaaHEWwk2yxncdA5C9GlhYjObxW8BbzJYgrsRdS6ZI9RN88DlKB60ISLqPFw51phG7WURlt8tb1eOnwY+MUm79NG4TnmGvuUd6T5EfpVpprF5rhDxvGU2EVhznHx5fJ6hawD5GqYso54fUk1A28IteP7HVbTWPomE91F/QZ9vJYViw2UV9EVI5w9MtLWnVngebnn2H0W9SCUgyaUhL00155j69DWRbNF2guYs+iOe4ASPVrYXEmYT18mqIZ/2nxuo8TRI+ACSmzpcMkIl5twxfKpQ3vQffu7D45wfWNT4PZ63cG/r6KL54lvXIZ29+1jX3R1h0XjEzvQXuNqoFK//GSJ04vB93ss42XPxwy3QNKeuNj7R7qZhbFIWW9muNvvdjvla7Mzy/l9bAgl5WLGa8MWaQbHzlFeH90lp4WX9jit0xpfWyw8WBdawSbAbELMFWwC7NvHuazRyPF3HRaeY66H4D2GLb45tGE6wt1Vqr0mroH2epxQF65Gaod0DeuM9fDE+BrkbCwjGmaeYyXxyzxMkW5HYTyykdIy6+4u7jFaQ3fl6NPmufIZc6JgclKILy26dJedFlym+Lo0MI+hXGj9v4USX6YAc3m/tPDSXi+XCLN5va4A713eZY1Ohl8k3SbOe1VGxNHMSDNhpHB8fw3VULi6rlzx2lSeY6nW2MsTpZOCVxzfL3M9QRu+Rn7IIo0b3fALG4fphR9K4fi+PVHK1ys2tO70GXjvyusqactkliitINp7O/ah3cVoeru06HoT1eW3jgPttV0uAaZF2GVOer9sAsz83xRiv2usC1oyOfDvcFcaPWh5bIpE6dS4BUOJ3aN0n/BG6MiT/k3SbKy9ivJ3sewGs2pCV1q+B0gdmbdeqFUQxqRIkEZO/4lSNoZ0uRc9z+9a9HXo0Kkc1ZvzhSavbGB6QfZsEVeITzguukyPlxneYL3X9fIJsEucFGHtMWDm/0+1PvXfs7EuZknMUDfkyx3n5cRXyNjKk5N2vTCXV8/Vleeb4WPD14iUDGtEStZrGvcB7s3L9xlWLzJUl9911H1Z435zrT3pxNqwjyw3IYzPVYYNz5h2xO+T9izShn36D43wvbimLpMbKCdDTbd329X2B71Ib9G/37Y9tsvV1ahDu8svhifdpwzCnMlojgEzux7bnjCbELMNyP/skm1fFjPUA/2Q7m695wl7a3I9jHP6C4+cbkHYlwr34E4bZc/0S0/614hvRErGW6svlCPc5bODul9ixOaUk/faVRZvru00a09aMZ7CkvVYIFg4mzxHnOd4in+R4ducrCvt/01ibMiJn5Xuaxtvkr5MrtItolza6fpkMuls2/p4vlwzGdtdjW8Yn2+gvD9DeNjYuey9EtvjwLrGgLlCe2bkqse7hTJjsX7RIepBdpNub8ptwkVD5fh+h36en1ukF16aIvA8W2MVgu+BfxNV9rPAtKastxgocAvua6jyy3qkp9f18T1A2u1Z5UnvBuGNthZ961rWwtnhZfq9qOl64/M4FZbvatwvi9cJf/nU7dSQNrtC1W8XL9PvGTLDXyZ6/TIftedY5+8T6vmyje9qz2hsdzfqcD4gfRePjPhD0oHwPSXP4e6G7BJhNs/XFwbaPYSqIxyxWPvsCyh36wuEu4VfpN8bh887dgN1L/rS22vOealHnn0pcQuG9nkxHOB2oYMq+0P8A0CnqHKqWW8xcIT/99xB3XMl/rfMGao8PoW/sXQJW195v4yqC6789fiumvXzLgpnl+dYrHPoEhwzVN3y1RtQ7XjtOFZ64t1kseadDd1OHZKmnbqFv23WL6+555wZShgd0i1GuxxTlc+WyWRyMJlMsslkMp1MJrPJZLI3mUzetm27IwE4LrzM8MDxaR5/T0faXbQH6g+ZOdmn63KCEmF6oVXb6vXtBVV1mLfCJyPtTcGypsKHrAhuo8S/RthVFm91h6h7c8pie4qxxjTt419O4y7DFjzM8b917TT5v9DkdYhqHGdN2KQlDg5Qb6y+xvdmE/Rsq6r5PsO/JpFJjrux3McvnK6jHlD3WGwtNGPzylo4W+j28mXU+oqHqDqg28uQenMHv7e/RLX1rrb3OuoFyqy7us3u2lWib3t+hGoTPuU5p/0M0WWSEd6WvEKYZ7HGvTcwqDbnRLszmUwO5vP5221VxUnRoFepf4DaJPoI+A3giygvyWeBXwH+O/CfgH8P/ALwM8C/AX6iOWZL1xceeY496DjuCw8i4+lyeNSk8SZqG6KvoW6grwC/Dfwm8GXgS8CvA/8P+C/23yQp2YDrigkVwwZL7yW25whVUWzHikgbpx155pHpmuxy3POYqixKx7HCY0vmSTMVLrtShDwgf9c9MqQeVI5jmcMG1/lFgP0uCo99sWSONFPeD5rCkU+VOE4XmSPNodfsSjNznF85zr/lSSs2HBLWTZc6b+3Zj60L+RLKom+ZaHYj8ijm8/nbS03YuoPmHPd4meO8tAixdTfqz9eBp3tcBChvkmtB1jlKBL1FXIUYstCr9oTZxoS1Z0Wa4ScG5Llu3AWeQTUa9YB0DoBnE9gDi+0tYmdZujjCPb7gHsPWJdMcomzvM8Dfhy6LOlF6qcnxj9mI5VnCfo9b+Lsf+3AXWedLGJeadO0m9NtWa590dVfnO4QStRVdyPCQPvTeamw+nx+iJpz1IYfFOl+l5YTHnOxubA+w7xrvNelplE8gadX4EPh6z3Rh2Jpm7XTa48Jsa4S9BfxIojxXxX1UpfsISuGHzGgMoUQ1JEMqT8y+YikoE6Z1iCrXoaJANxpjl0VfclRDlaLRvI+6L8secfYY/hC5w3IEvyD42EXd6x9i+AvbD7HwvIeSN/GGELOPqosKdQ13EqQFatxb3zIBYD6f79NPgF2dTCZ7WpC03/Tbwss2yN5cXsImvN4gbJzV40CDTbfda6iuvlUz4fh2RaYg+0HSK/NlcxclBF5EPdj0gMlqCXmVxFee26iuz2WJjRnuMUp9ZhmFcIQSBc/Qv1G9z6LRWHfhpdlHle9t4uqHvuYZcfdlTnxZP48IL2G16Be2F+lff+6g2nXfjGsft5r4fdtss51KWXdqVH18JsImzSvA+xi4gG0jwD5E+Iv0numZmqHGcrkWULV5vWzBjPMM8AGPAb5uxjbmmCsdnga+MTD+mNxl/A2EN5ld1EMxwz0I/Q7K83bA8rvWSuzi6zbL38JnrwkZ9sGh91GiQ5fFJguBKYvr9Q0Q1gPhU1/zWSprYTOosA/gfpGTAsGsPxn2Aex6clBJ2he0zMjXtftHxbh1Z9ewyVaG2i6zLamHZDifnxwB1azxlTX26MkHsHhZPJjP54ftbsEXgB/gZBejayHVB63v2iLszwC/f8jFGTwy0jbHlr0L+JZEeaTgPqqw6xXbscmYN6yerTJm3jX2huxDjO9h0hUYluOBXDdmLCZ01Ixbj85aWQvrR0W4+LKRNZ8149adGYt6W42YbxeZ8XeVOnGb+AqlvZTDi8D3AN/GybFe7W5H0wvVFmY62Lod+3i7TGyzBp4Av9akGbKHYmzefcgR4TWUI1ZXgV3TqvVU7rHZlO7EVNSsrv6ctbIWTh/VivKtWc/nXrVqA1zYBqF/DDWeyiW+2vs4tgfdm2O+2qQQP3PL56+yWNbCx4OBeXfxLOkGpQvjM8U9HiL1WC9BEAThjGITX58GPo59MVVb96JLeL2OEkQmQ4SXueaKbQ2WLwL/trHDRdvTl5LQKe/C+rKH3et1DxHVgiAIQiJcyy/8LKr78Su4PV+upSZMEbZF+GzGUNo3xDGyAAADMklEQVTeLVOEvQb8OMoTZvOC9V36IoR7qLFA5RLSFsalcHwvXi9BEAQhGb61rz4DfBS1SntbfLkEmOn5eg34O6QZY9V3VNvPAP8CteK8SWrP1202a5q/4CbHPeOtHNUSQRAE4VTTJUZeRXVBfgfwvcAHsQ+4N8NvAZ8D/jfKa3aX8I2aXYR6rCbG51eBHwbeDfwp4JsH2mCi98OqEqYprBbXWC9ZYkAQBEFISqgn6JebcAUlpN6Bml2ohdgXUV2Ur3LyQVUxXHxpJhwXWOZ3rv8/j1pC473AXwYuA98Qkfd91IO4RETXaSPDfY8W45khCIIgnAX6dsO9DvxSzzgl8FzPODYmlr9twqsdZ6v5/CzKu3EHJRz1wo6uxR31YmwVi0XZhNNJ4fj+FdZz+rQgCIKwwSxz9p/mEDUo3bV6dR8mnrDV+nvL+E7/bdok47QEUOLbtRqyDLQXBEEQkpNqs+kuigRp2LxdNgHmEl6mOBMEjWus1z2ke1kQBEFYAmOJr5LhO7H7vF0usXXO8vdvDrRDOD3McG+gXYxnhiAIgnCWGEt8wfCHma1rsf1pii1TdOngW4BVOHsUju/15ApBEARBSM7YXXAV7vE1Xcw5ubVRe0V9M7xmCZ8G/mO09cJpw9xI2eQIGRMoCML4uNqkGpn8s3ak3Fh72eyhbiDbFi4huMZ2uboZddhuwufjTRdOISKwBEFYJ6RNOiOM2e0IyqOQobp1+uISXuewC632318Cfn2Q9YIgCIIgCAMZW3yBUvauGWZdhHq6TOG1DZwH/vMgqwVBEARBEBKwCvEFavbjM/T3gIV4vmzC678Cv5bAbkEQBEEQhEGsSnyBmk2W0W8JipDuxnaoURttC4IgCIIgrJxVii9QXZC7wA/1iOMSXjYB9jngRxPaKwiCIAiCMIhViy9Qg/BvAR9B7bvYRdv7ZYqtc6huxm3gJ4F/glqGQhAEQRAEYS1Yx612MiDHvfI4wEMWa3611/36JeAllNdLEARBEAQhOUPW+VpH8aWZooRYxsnNj5+wEF+/AXwK+Gng54BXxzRSEARBEISzx2kVXz6mqO5KQRAEQRCE0Rkivv4/VoH/EOoIdwcAAAAASUVORK5CYII=" },/***/
       206:/***/
              function (e, t) { e.exports = "uniform float delta;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tuv.y = 1.0 - uv.y;\n\n\tvec4 color = texture(iChannel0, uv).rgba;\n\tfloat colorGrad = texture(iChannel1, uv).r;\n\n\tcolor.rgb *= color.a;\n\tfragColor = color * smoothstep( colorGrad - 1.0 / 24.0, colorGrad, (delta * (1.0 + 1.0 / 24.0) - 1.0 / 24.0) );\n}\n" },/***/
       213:/***/
              function (e, t, i) {
                     "use strict";
                     // CONCATENATED MODULE: ./src/component/Icon/Icon.vue
                     function n(e) { this.$style = i(284) }
                     // CONCATENATED MODULE: ./src/component/button/MainButton/MainButton.vue
                     function s(e) { this.$style = i(292) }
                     // CONCATENATED MODULE: ./src/component/button/CircleButton/CircleButton.vue
                     function a(e) { this.$style = i(309) }
                     // CONCATENATED MODULE: ./src/util/loadImages.ts
                     function r(e) { function t(t, i, r) { a[r] = i, ++s, n && n(i, s / e.length), s === e.length && t(a) } var i = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], n = arguments[2], s = 0, a = []; return new ye.a(function (n) { var s = ""; i && (s = Ze(Qe).getVariable(Ye.VERSIONED_STATIC_ROOT)), e.forEach(function (e, i) { var a = new Image; a.onload = function () { return t(n, a, i) }, a.src = s + e }) }) }
                     // CONCATENATED MODULE: ./src/component/AnimatedTitle/AnimatedTitle.vue
                     function o(e) { this.$style = i(318) }
                     // CONCATENATED MODULE: ./src/component/ExperienceInstructions/ExperienceInstructions.vue
                     function l(e) { this.$style = i(346) }
                     // CONCATENATED MODULE: ./src/component/ContentBar/ContentBar.vue
                     function h(e) { this.$style = i(347) }
                     // CONCATENATED MODULE: ./src/component/VoiceOver/VoiceOver.vue
                     function u(e) { this.$style = i(348) }
                     // CONCATENATED MODULE: ./src/component/ImageGallery/ImageGallery.vue
                     function c(e) { this.$style = i(355) }
                     // CONCATENATED MODULE: ./src/component/ImageCompare/ImageCompare.vue
                     function d(e) { this.$style = i(356) }
                     // CONCATENATED MODULE: ./src/component/CutSectionDragger/CutSectionDragger.vue
                     function _(e) { this.$style = i(357) }
                     // CONCATENATED MODULE: ./src/component/InformationOverlay/InformationOverlay.vue
                     function p(e) { this.$style = i(354) }
                     // CONCATENATED MODULE: ./src/component/ExperienceHotspot/ExperienceHotspot.vue
                     function v(e) { this.$style = i(364) }
                     // CONCATENATED MODULE: ./src/component/TempleHotspotMap/TempleHotspotMap.vue
                     function f(e) { this.$style = i(366) }
                     // CONCATENATED MODULE: ./src/component/TempleInfo/TempleInfo.vue
                     function g(e) { this.$style = i(365) }
                     // CONCATENATED MODULE: ./src/component/TempleInstruction/TempleInstruction.vue
                     function m(e) { this.$style = i(367) }
                     // CONCATENATED MODULE: ./src/component/MapOverlay/MapOverlay.vue
                     function y(e) { this.$style = i(368) }
                     // CONCATENATED MODULE: ./src/component/ReconstructionOverlay/ReconstructionOverlay.vue
                     function E(e) { this.$style = i(369) }
                     // CONCATENATED MODULE: ./src/component/AudioHotspot/AudioHotspot.vue
                     function T(e) { this.$style = i(385) }
                     // CONCATENATED MODULE: ./src/component/OverlayTransition/OverlayTransition.vue
                     function A(e) { this.$style = i(386) }
                     // CONCATENATED MODULE: ./src/page/OnboardingPage/OnboardingPage.vue
                     function b(e) { this.$style = i(314) }
                     // CONCATENATED MODULE: ./src/component/button/PlayButton/PlayButton.vue
                     function R(e) { this.$style = i(390) }
                     // CONCATENATED MODULE: ./src/component/mobile/Introduction/Introduction.vue
                     function w(e) { this.$style = i(389) }
                     // CONCATENATED MODULE: ./src/component/mobile/VideoPlayer/VideoPlayer.vue
                     function I(e) { this.$style = i(392) }
                     // CONCATENATED MODULE: ./src/component/mobile/IntroductionVideo/IntroductionVideo.vue
                     function P(e) { this.$style = i(391) }
                     // CONCATENATED MODULE: ./src/component/mobile/MapTransition/MapTransition.vue
                     function L(e) { this.$style = i(393) }
                     // CONCATENATED MODULE: ./src/component/mobile/TempleIntro/TempleIntro.vue
                     function k(e) { this.$style = i(398) }
                     // CONCATENATED MODULE: ./src/component/mobile/EndScreen/EndScreen.vue
                     function C(e) { this.$style = i(399) }
                     // CONCATENATED MODULE: ./src/component/mobile/CreditsScreen/CreditsScreen.vue
                     function M(e) { this.$style = i(400) }
                     // CONCATENATED MODULE: ./src/component/mobile/PageDragger/PageDragger.vue
                     function x(e) { this.$style = i(388) }
                     // CONCATENATED MODULE: ./src/component/mobile/TempleImageView/TempleImageView.vue
                     function O(e) { this.$style = i(402) }
                     // CONCATENATED MODULE: ./src/component/mobile/TemplePanoramaView/TemplePanoramaView.vue
                     function S(e) { this.$style = i(403) }
                     // CONCATENATED MODULE: ./src/component/mobile/TempleView/TempleView.vue
                     function D(e) { this.$style = i(401) }
                     // CONCATENATED MODULE: ./src/page/MobileHomePage/MobileHomePage.vue
                     function N(e) { this.$style = i(387) }
                     // CONCATENATED MODULE: ./src/component/MaskedVideo/MaskedVideo.vue
                     function F(e) { this.$style = i(406) }
                     // CONCATENATED MODULE: ./src/component/intro/IntroVideo/IntroVideo.vue
                     function V(e) { this.$style = i(405) }
                     // CONCATENATED MODULE: ./src/page/EndPage/EndPage.vue
                     function B(e) { this.$style = i(404) }
                     // CONCATENATED MODULE: ./src/page/WebglPage/WebglPage.vue
                     function U(e) { this.$style = i(407) }
                     // CONCATENATED MODULE: ./src/webgl/getStaticDir.ts
                     function H() { return "" + Ze(Qe).getVariable(Ye.VERSIONED_STATIC_ROOT) }
                     // CONCATENATED MODULE: ./src/component/SupportOverlay/SupportOverlay.vue
                     function G(e) { this.$style = i(443) }
                     // CONCATENATED MODULE: ./src/component/intro/IntroLogo/IntroLogo.vue
                     function $(e) { this.$style = i(445) }
                     // CONCATENATED MODULE: ./src/component/intro/IntroContent/IntroContent.vue
                     function z(e) { this.$style = i(446) }
                     // CONCATENATED MODULE: ./src/component/intro/IntroCredits/IntroCredits.vue
                     function W(e) { this.$style = i(447) }
                     // CONCATENATED MODULE: ./src/util/lerp.ts
                     function K(e, t) { return e + (t - e) * (arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : .1) }
                     // CONCATENATED MODULE: ./src/component/LoaderBar/LoaderBar.vue
                     function Y(e) { this.$style = i(448) }
                     // CONCATENATED MODULE: ./src/component/SitePreloader/SitePreloader.vue
                     function X(e) { this.$style = i(444) }
                     // CONCATENATED MODULE: ./src/component/footer/QualitySelectorButton/QualitySelectorButton.vue
                     function j(e) { this.$style = i(451) }
                     // CONCATENATED MODULE: ./src/component/footer/QualitySelector/QualitySelector.vue
                     function q(e) { this.$style = i(450) }
                     // CONCATENATED MODULE: ./src/component/footer/FooterNavigation/FooterNavigation.vue
                     function Z(e) { this.$style = i(449) }
                     // CONCATENATED MODULE: ./src/App/App.vue
                     function Q(e) { this.$style = i(442) } Object.defineProperty(t, "__esModule", { value: !0 });
                     // EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/object/keys.js
                     var J = i(27), ee =/*#__PURE__*/i.n(J), te = (i(218), i(221), i(227), i(229), i(231), i(233), i(234), i(235), i(236), i(238), i(239), i(240), i(241), i(242), i(244), i(245), i(246), i(247), i(248), i(249), i(250), i(252), i(254), i(255), i(143), i(262), i(263), i(264), i(265), i(266), i(267), i(268), i(145), i(269), i(270), i(271), i(273), i(274), i(275), i(276), i(277), i(278), i(281), i(149)), ie =/*#__PURE__*/i.n(te), ne = (i(282), i(283), i(10));
                     // CONCATENATED MODULE: ./src/settings/index.js
                     // disable sensible defaults of vue-types
                     ne.a.sensibleDefaults = !1;
                     // EXTERNAL MODULE: ./node_modules/vue/dist/vue.runtime.esm.js
                     var se, ae = i(74), re = {}, oe = {}, le = {
                            name: "Icon", props: { name: ne.a.string.isRequired }, computed: {
                                   icon: function () {
                                          // eslint-disable-next-line global-require, import/no-dynamic-require
                                          return i(286)("./" + this.name + ".svg")
                                   }
                            }
                     }, he = function () { var e = this, t = e.$createElement; return (e._self._c || t)("span", { class: e.$style.container, domProps: { innerHTML: e._s(e.icon) } }) }, ue = [], ce = { render: he, staticRenderFns: ue }, de = ce, _e = i(5), pe = n, ve = _e(le, de, pe, null, null), fe = ve.exports, ge = fe, me = i(11), ye =/*#__PURE__*/i.n(me), Ee = i(6), Te = { name: "MainButton", props: { label: ne.a.string.isRequired, icon: ne.a.string.def(""), isSmall: ne.a.bool.def(!1), isInverted: ne.a.bool.def(!1) }, data: function () { return { isActive: !1 } }, mounted: function () { Ee.TweenLite.set(this.$el, { autoAlpha: 0 }) }, methods: { transitionIn: function () { var e = this; return new ye.a(function (t) { e.isActive = !0, Ee.TweenLite.to(e.$el, .5, { autoAlpha: 1, ease: Ee.Linear.easeNone, onComplete: function () { return t() } }) }) }, transitionOut: function () { var e = this; return new ye.a(function (t) { Ee.TweenLite.to(e.$el, .5, { autoAlpha: 0, ease: Ee.Linear.easeNone, onComplete: function () { e.isActive = !1, t() } }) }) }, handleClick: function () { this.$emit("click") } } }, Ae = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("button", { class: [e.$style.button, e.isSmall ? e.$style.isSmall : null, e.isActive ? e.$style.isActive : null, e.isInverted ? e.$style.isInverted : null, e.icon ? e.$style.hasIcon : null], on: { click: e.handleClick } }, [e.icon ? i("Icon", { ref: "icon", class: e.$style.icon, attrs: { name: e.icon } }) : e._e(), e._v(" "), i("span", { ref: "label", class: e.$style.label }, [e._v(e._s(e.label))])], 1) }, be = [], Re = { render: Ae, staticRenderFns: be }, we = Re, Ie = i(5), Pe = s, Le = Ie(Te, we, Pe, null, null), ke = Le.exports, Ce = ke, Me = { name: "CircleButton", props: { icon: ne.a.string.isRequired, textLabel: ne.a.string, hasHover: ne.a.bool.def(!0), inverted: ne.a.bool.def(!1), darkTextLabel: ne.a.bool.def(!1), leftAlign: ne.a.bool.def(!1) }, data: function () { return { isActive: !1, isHover: !1 } }, mounted: function () { this.contentElements = this.getContentElements(), Ee.TweenLite.set(this.contentElements, { autoAlpha: 0 }) }, methods: { transitionIn: function () { var e = this; return this.isActive = !0, new ye.a(function (t) { Ee.TweenLite.to(e.contentElements, .2, { autoAlpha: 1, ease: Ee.Linear.easeNone, delay: .1 }), t() }) }, transitionOut: function () { var e = this; return this.isActive = !1, new ye.a(function (t) { Ee.TweenLite.to(e.contentElements, .2, { autoAlpha: 0, ease: Ee.Linear.easeNone }), t() }) }, handleClick: function () { this.$emit("click") }, getContentElements: function () { var e = []; return this.$refs.icon && e.push(this.$refs.icon.$el), this.$refs.label && e.push(this.$refs.label), e } }, beforeDestroy: function () { this.renderer && (this.renderer.dispose(), this.renderer = null) } }, xe = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("button", { class: [e.$style.button, e.inverted ? e.$style.isInverted : null, e.darkTextLabel ? e.$style.hasDarkTextLabel : null, e.hasHover ? e.$style.hasHover : null, e.leftAlign ? e.$style.leftAlign : null, e.isActive ? null : "no-pointer-events", e.isActive ? e.$style.isActive : null], on: { click: e.handleClick } }, [i("Icon", { ref: "icon", class: [e.$style.icon, "icon-" + e.icon], attrs: { name: e.icon } }), e._v(" "), e.textLabel ? i("div", { ref: "label", class: ["copy-03", e.$style.textLabel], domProps: { innerHTML: e._s(e.textLabel) } }) : e._e()], 1) }, Oe = [], Se = { render: xe, staticRenderFns: Oe }, De = Se, Ne = i(5), Fe = a, Ve = Ne(Me, De, Fe, null, null), Be = Ve.exports, Ue = Be, He = { Icon: ge, MainButton: Ce, CircleButton: Ue }, Ge = i(310), $e = i(188), ze =/*#__PURE__*/i.n($e), We = { PRODUCTION: "production", DEVELOPMENT: "development", STAGING: "staging", LOCAL: "local" }, Ke = { LOCALE: "locale", API: "api", HERITAGE: "heritage", BAGAN: "bagan", GOOGLE_AC: "google-ac", GOOGLE_AC_PROJECT: "google-ac-project", CYARK: "cyark", DAYDREAM: "daydream", PRIVACY: "privacy" }, Ye = { LOCALE_ENABLED: "locale-enabled", LOCALE_ROUTING_ENABLED: "locale-routing-enabled", STATIC_ROOT: "static-root", PUBLIC_PATH: "public-path", VERSIONED_STATIC_ROOT: "versioned-static-root", MINIMUM_LOAD_DURATION: "minimum-load-duration" }, Xe = { DEFAULT_LOCALE: "default-locale", AVAILABLE_LOCALES: "available-locales" }, je = {}, qe = function (e, t) { je[e] = t }, Ze = function (e) { return je[e] }, Qe = "configManager", Je = function () { var e = Ze(Qe), t = e.getProperty(Xe.AVAILABLE_LOCALES).map(function (e) { return "string" == typeof e ? { code: e, urlPrefix: e, translationKey: e } : e }), i = { persistent: !1, defaultCode: e.getProperty(Xe.DEFAULT_LOCALE), languages: t }; return { localeEnabled: e.getVariable(Ye.LOCALE_ENABLED), localeRoutingEnabled: e.getVariable(Ye.LOCALE_ROUTING_ENABLED), config: i } }, et = Je, tt = i(0), it =/*#__PURE__*/i.n(tt), nt = i(1), st =/*#__PURE__*/i.n(nt); !function (e) {
                            // app flow
                            e.PAGE = "page", e.FLOW = "flow",
                                   // content
                                   e.HOTSPOT = "hotspot", e.VIDEO = "video", e.VO = "vo",
                                   // actions
                                   e.WEBVR = "webvr", e.QUALITY = "quality", e.MAP = "map"
                     }(se || (se = {})); var at = function () { function e() { it()(this, e), this.dataLayer = window.dataLayer, this.gtag = window.gtag } return st()(e, [{ key: "push", value: function (e, t) { this.gtag && this.gtag("event", t.action, { event_category: e, event_label: t.label, value: t.value }) } }]), e }(), rt = at, ot = i(31), lt =/*#__PURE__*/i.n(ot), ht = lt.a.mobile || lt.a.tablet, ut = lt.a.ios, ct = ht, dt = i(9), _t =/*#__PURE__*/i.n(dt), pt = i(13), vt = i(2), ft =/*#__PURE__*/i.n(vt), gt = i(3), mt =/*#__PURE__*/i.n(gt), yt = i(7), Et =/*#__PURE__*/i.n(yt), Tt = i(4), At =/*#__PURE__*/i.n(Tt), bt = i(45), Rt =/*#__PURE__*/i.n(bt), wt = i(53), It =/*#__PURE__*/i.n(wt), Pt = i(46), Lt =/*#__PURE__*/i.n(Pt), kt = function () {/**
       * Requires a HTMLCanvasElement and a shader program as a plain text string
       *
       * @param container
       * @param shader
       * @param _animationLoop
       */
                            function e(t) {
                                   var i = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2]; if (it()(this, e), this._container = t, this._animationLoop = i, this._width = 0, this._height = 0,
                                          // image input
                                          this._textures = [],// <slotIndex> = texture ID
                                          this._time = 0, this._activeIndex = -1, n || console.error("Use ImageEffectRender.createTemporary to create a ImageEffectRender"), e._dummyTex || (e._dummyTex = document.createElement("canvas"), e._dummyTex.width = e._dummyTex.height = 16), this._canvas = document.createElement("canvas"), this._gl = this._canvas.getContext("experimental-webgl", { premultipliedAlpha: !0 }), !this._gl) return void console.error("ImageEffectRender: Failed to request a 3D context, aborting...")
                            } return st()(e, [{
                                   key: "addImage",/**
           * Add Image to the GL, This can be an HTMLImageElement or a rendered Canvas
           *
           * @param image
           * @param slotIndex
           * @param clampToEdge
           */
                                   value: function (e, t) { var i = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2]; t >= 4 && console.log("ImageEffectRender: A maximum of 4 slots is available, slotIndex is out of bounds."), this._textures[t] || (this._textures[t] = this._gl.createTexture()), this._gl.useProgram(this._program), this._gl.uniform1i(this._gl.getUniformLocation(this._program, "iChannel" + t), t), this._gl.uniform2f(this._gl.getUniformLocation(this._program, "iChannelResolution" + t), e.width, e.height), this._gl.bindTexture(this._gl.TEXTURE_2D, this._textures[t]), this._gl.texImage2D(this._gl.TEXTURE_2D, 0, this._gl.RGBA, this._gl.RGBA, this._gl.UNSIGNED_BYTE, e), this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_WRAP_S, i ? this._gl.CLAMP_TO_EDGE : this._gl.REPEAT), this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_WRAP_T, i ? this._gl.CLAMP_TO_EDGE : this._gl.REPEAT), this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_MIN_FILTER, this._gl.LINEAR), this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_MAG_FILTER, this._gl.LINEAR) }
                            }, { key: "play", value: function () { this._requestAnimationID || this.draw(0) } }, { key: "stop", value: function () { this._requestAnimationID && (window.cancelAnimationFrame(this._requestAnimationID), this._requestAnimationID = null) } }, { key: "setUniformFloat", value: function (e, t) { this._gl.useProgram(this._program), this._gl.uniform1f(this._gl.getUniformLocation(this._program, e), t) } }, { key: "setUniformInt", value: function (e, t) { this._gl.useProgram(this._program), this._gl.uniform1i(this._gl.getUniformLocation(this._program, e), t) } }, { key: "setUniformVec2", value: function (e, t, i) { this._gl.useProgram(this._program), this._gl.uniform2f(this._gl.getUniformLocation(this._program, e), t, i) } }, { key: "setUniformVec3", value: function (e, t, i, n) { this._gl.useProgram(this._program), this._gl.uniform3f(this._gl.getUniformLocation(this._program, e), t, i, n) } }, { key: "setUniformVec4", value: function (e, t, i, n, s) { this._gl.useProgram(this._program), this._gl.uniform4f(this._gl.getUniformLocation(this._program, e), t, i, n, s) } }, {
                                   key: "draw", value: function () {
                                          var e = this, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0; this._time = t / 1e3,
                                                 // determine if screen has been resized. If so, adjust viewport
                                                 this._canvas.width === this._width && this._canvas.height === this._height || (this._gl.viewport(0, 0, this._canvas.width, this._canvas.height), this._width = this._canvas.width, this._height = this._canvas.height),
                                                 // clear
                                                 this._gl.clear(this._gl.COLOR_BUFFER_BIT), this._gl.useProgram(this._program),
                                                 // global uniforms
                                                 this._gl.uniform1f(this._uniformGlobalTime, this._time), this._gl.uniform1f(this._uniformTime, this._time), this._gl.uniform2f(this._uniformResolution, this._canvas.width, this._canvas.height);
                                          // texture/channel uniforms
                                          for (var i = 0; i < this._textures.length; ++i)this._gl.activeTexture(this._gl.TEXTURE0 + i), this._gl.bindTexture(this._gl.TEXTURE_2D, this._textures[i]);
                                          // render NDC quad
                                          this._gl.bindBuffer(this._gl.ARRAY_BUFFER, this._quadVBO), this._gl.enableVertexAttribArray(this._posAttributeIndex), this._gl.vertexAttribPointer(this._posAttributeIndex, 2, this._gl.FLOAT, !1, 16, 0),// 4 32-bit values = 4 4-byte values
                                                 this._gl.enableVertexAttribArray(this._uvAttributeIndex), this._gl.vertexAttribPointer(this._uvAttributeIndex, 2, this._gl.FLOAT, !1, 16, 8), this._gl.drawArrays(this._gl.TRIANGLE_STRIP, 0, 4), this._animationLoop && (this._requestAnimationID = window.requestAnimationFrame(function (t) { return e.draw(t) }))
                                   }
                            }, { key: "updateSize", value: function () { this._canvas.width = this._container.offsetWidth, this._canvas.height = this._container.offsetHeight } }, {
                                   key: "compileShader", value: function (e) {
                                          this._program = this._gl.createProgram(); var t = this._gl.createShader(this._gl.VERTEX_SHADER), i = this._gl.createShader(this._gl.FRAGMENT_SHADER); this._gl.shaderSource(t, "\n            attribute vec2 aPos;\n            attribute vec2 aUV;\n            \n            varying vec2 vUV0;\n            \n            void main(void) {\n                vUV0 = aUV;\n                gl_Position = vec4(aPos, 0.0, 1.0);\n            }\n        "), this._gl.compileShader(t); var n = this._gl.getShaderParameter(t, this._gl.COMPILE_STATUS); n || (console.error("ImageEffectRender: Vertex shader compilation failed:"), console.error(this._gl.getShaderInfoLog(t))); e = "\n            #ifdef GL_ES\n                precision highp float;\n            #endif\n            \n            varying vec2 vUV0;\n            \n            uniform vec2 iResolution;\n            uniform float iTime;\n            uniform float iGlobalTime;\n            uniform vec4 iMouse;\n            \n            uniform highp sampler2D iChannel0;\n            uniform highp sampler2D iChannel1;\n            uniform highp sampler2D iChannel2;\n            uniform highp sampler2D iChannel3;\n            \n            uniform vec2 iChannelResolution0;\n            uniform vec2 iChannelResolution1;\n            uniform vec2 iChannelResolution2;\n            uniform vec2 iChannelResolution3;\n            \n            void mainImage(out vec4, vec2);\n            \n            vec4 texture(sampler2D tex, vec2 uv) {\n                return texture2D(tex, uv);\n            }\n            \n            void main(void) {\n            \tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n                mainImage(gl_FragColor, gl_FragCoord.xy);\n            }\n        " + e, this._gl.shaderSource(i, e), this._gl.compileShader(i), n = this._gl.getShaderParameter(i, this._gl.COMPILE_STATUS), n || (console.error("ImageEffectRender: Shader compilation failed:"), console.error(this._gl.getShaderInfoLog(i))),
                                                 // link shaders
                                                 this._gl.attachShader(this._program, t), this._gl.attachShader(this._program, i), this._gl.linkProgram(this._program), n = this._gl.getProgramParameter(this._program, this._gl.LINK_STATUS), n || (console.error("ImageEffectRender: Program linking failed:"), console.error(this._gl.getProgramInfoLog(this._program))),
                                                 // get attribute locations
                                                 this._posAttributeIndex = this._gl.getAttribLocation(this._program, "aPos"), this._uvAttributeIndex = this._gl.getAttribLocation(this._program, "aUV"),
                                                 // get uniform locations
                                                 this._gl.useProgram(this._program), this._uniformGlobalTime = this._gl.getUniformLocation(this._program, "iGlobalTime"), this._uniformTime = this._gl.getUniformLocation(this._program, "iTime"), this._uniformResolution = this._gl.getUniformLocation(this._program, "iResolution")
                                   }
                            }, {
                                   key: "generateNDCQuad", value: function () {
                                          var e = new Float32Array([
                                                 // pos  // uv
                                                 -1, 1, 0, 1, -1, -1, 0, 0, 1, 1, 1, 1, 1, -1, 1, 0]); this._quadVBO = this._gl.createBuffer(), this._gl.bindBuffer(this._gl.ARRAY_BUFFER, this._quadVBO), this._gl.bufferData(this._gl.ARRAY_BUFFER, e, this._gl.STATIC_DRAW)
                                   }
                            }, { key: "renderTime", get: function () { return this._time } }], [{
                                   key: "createTemporary", value: function (t, i) {
                                          var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2], s = null;
                                          // before creating a context, determine if we already reached the maximum number of contexts
                                          if (e.IERActive.length >= e.MAX_IMAGE_EFFECT_RENDERERS) return console.error("Maximum number of ImageEffectRender's reached; \n\t\t\t\tno new ImageEffectRenderer created. \n\t\t\t\tClear other ImageEffectRender's before creating new ones."), s;
                                          // determine if there's an ImageEffectRender in the IERPool and if so, re-use its context
                                          if (e.IERPool.length > 0) { for (var a = !1, r = 0; r < e.IERPool.length; r++)e.IERPool[r]._shader === i && (s = e.IERPool[r], e.IERPool.splice(r, 1), a = !0); a || (s = e.IERPool[0], e.IERPool.splice(0, 1)) } else s = new e(t, n, !0); s._animationLoop = n, s._container = t, t.appendChild(s._canvas), s.updateSize(), s._quadVBO || s.generateNDCQuad(), s._shader !== i && (s._program && (s._gl.deleteProgram(s._program), s._program = null), s.compileShader(i), s._shader = i),
                                                 // gl configuration
                                                 s._gl.clearColor(0, 0, 0, 0), s._gl.viewport(0, 0, s._canvas.width, s._canvas.height), s._gl.clear(s._gl.COLOR_BUFFER_BIT), s._gl.enable(s._gl.BLEND), s._gl.blendFunc(s._gl.ONE, s._gl.ONE_MINUS_SRC_ALPHA), s._width = s._canvas.width, s._height = s._canvas.height; for (var o = 0; o < 4; o++)s.addImage(e._dummyTex, o);
                                          // store current ImageEffectRender in the list of active IERs
                                          return e.IERActive.push(s), s._activeIndex = e.IERActive.length - 1, s
                                   }
                            }, {
                                   key: "releaseTemporary", value: function (t) {
                                          t.stop(), t._canvas.parentNode.removeChild(t._canvas),
                                          // remove from active IER instances
                                          e.IERActive.splice(t._activeIndex, 1),
                                          // add current instance to pool
                                          e.IERPool.push(t)
                                   }
                            }]), e
                     }(); kt.MAX_ANIMATION_FRAMES = 255, kt.MAX_IMAGE_EFFECT_RENDERERS = 10,
                            // (global) context resource management
                            kt.IERActive = [], kt.IERPool = [];/* harmony default export */
                     var Ct, Mt = kt, xt = function (e) {
                            function t(e, i) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null; it()(this, t); var a = mt()(this, (t.__proto__ || ft()(t)).call(this)); return a._canvasWrapper = e, a._shader = i, a._params = n, a.onTick = s, a._counter = 0, a._counterHover = 0, a._totalFrames = 0, a.draw = function () { a._renderer.setUniformFloat("delta", a._counter / Mt.MAX_ANIMATION_FRAMES), a._renderer.setUniformFloat("deltaHover", a._counterHover / Mt.MAX_ANIMATION_FRAMES), a._renderer.draw(), a.onTick && a.onTick(a._totalFrames, a._counter) }, a._speed = a._params && a._params.speed ? a._params.speed : 1, a._renderer = Mt.createTemporary(a._canvasWrapper, a._shader), a } return At()(t, e), st()(t, [{ key: "play", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, t = this, i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, n = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2]; return Ee.TweenLite.killTweensOf(this), new ye.a(function (s) { var a, r = null !== i ? i : n ? t._counter : t._counterHover, o = null !== e ? e : t._totalFrames; Ee.TweenLite.fromTo(t, Math.abs(o - r) / (30 * t._speed), It()({}, n ? "_counter" : "_counterHover", r), (a = {}, It()(a, n ? "_counter" : "_counterHover", o), It()(a, "roundProps", "_counter,_counterHover"), It()(a, "ease", Ee.Linear.easeNone), It()(a, "onUpdate", t.draw), It()(a, "onComplete", function () { return s() }), a)) }) } }, { key: "dispose", value: function () { Ee.TweenLite.killTweensOf(this), Mt.releaseTemporary(this._renderer), this._renderer = null, Et()(t.prototype.__proto__ || ft()(t.prototype), "dispose", this).call(this) } }, { key: "currentFrame", set: function (e) { this._counter = parseInt(e.toString(), 10), this.draw() }, get: function () { return this._counter } }, { key: "currentHoverFrame", set: function (e) { this._counterHover = e, this.draw() } }, { key: "baseImage", set: function (e) { this._baseImage = e, this._renderer.addImage(e, 0), this._renderer.draw() } }, { key: "maskImage", set: function (e) { this._maskImage = e, this._renderer.addImage(e, 1), this._renderer.draw() } }, {
                                   key: "hoverImage", set: function (e) {
                                          // this._baseImage = image;
                                          this._renderer.addImage(e, 2), this._renderer.draw()
                                   }
                            }, { key: "totalFrames", set: function (e) { this._totalFrames = e } }]), t
                     }(Lt.a), Ot = xt, St = { SIMPLE_MASK: "simple", ACTIVATION_BUTTON_DEFAULT: "activation-button-default", ACTIVATION_BUTTON_ACTIVE: "activation-button-active", MAIN_BUTTON_MASK: "main-button-mask", CHAR_0: "char-0", CHAR_1: "char-1", CHAR_2: "char-2", CHAR_3: "char-3", CHAR_4: "char-4", CHAR_5: "char-5", CHAR_6: "char-6", CHAR_7: "char-7", CHAR_8: "char-8", CHAR_9: "char-9", HOME_FRONT: "home-front", HOME_BACK: "home-back", INTRO_MASK: "intro-mask", PRELOADER_IMAGE: "preloader-image", PRELOADER_MASK: "preloader-mask", QUALITY_SELECTOR_BACKGROUND: "quality-selector-background", QUALITY_SELECTOR_MASK: "quality-selector-background-mask", QUALITY_SELECTOR_ITEM: "quality-selector-item", TITLESCREEN_EN_MASK: "titlescreen-en-mask", TITLESCREEN_BU_MASK: "titlescreen-bu-mask", TITLESCREEN_BU_IMAGE: "titlescreen-bu-image", LOADER_BAR_IMAGE: "loader-bar", LOADER_BAR_MASK: "loader-bar-mask", BUTTON_CIRCLE: "button-circle", TEMPLE_AOK: "temple-aok", TEMPLE_KMG: "temple-kmg", TEMPLE_EYK: "temple-eyk", HOME_IMAGE_MOBILE: "home-image-mobile", MASK_OVERLAY: "mask-overlay", TEMP_GRADIENT: "tmp" }, Dt = (Ct = {}, It()(Ct, St.SIMPLE_MASK, { url: "webgl/simple.png" }), It()(Ct, St.ACTIVATION_BUTTON_ACTIVE, { url: "webgl/activation-button/activate-background.png" }), It()(Ct, St.ACTIVATION_BUTTON_DEFAULT, { url: "webgl/activation-button/default-background.png" }), It()(Ct, St.MAIN_BUTTON_MASK, { url: "webgl/button/shape-mask.png" }), It()(Ct, St.CHAR_0, { url: "webgl/char/number_0.png" }), It()(Ct, St.CHAR_1, { url: "webgl/char/number_1.png" }), It()(Ct, St.CHAR_2, { url: "webgl/char/number_2.png" }), It()(Ct, St.CHAR_3, { url: "webgl/char/number_3.png" }), It()(Ct, St.CHAR_4, { url: "webgl/char/number_4.png" }), It()(Ct, St.CHAR_5, { url: "webgl/char/number_5.png" }), It()(Ct, St.CHAR_6, { url: "webgl/char/number_6.png" }), It()(Ct, St.CHAR_7, { url: "webgl/char/number_7.png" }), It()(Ct, St.CHAR_8, { url: "webgl/char/number_8.png" }), It()(Ct, St.CHAR_9, { url: "webgl/char/number_9.png" }), It()(Ct, St.INTRO_MASK, { url: "webgl/intro/mask.jpg" }), It()(Ct, St.PRELOADER_IMAGE, { url: "webgl/preloader/image.jpg" }), It()(Ct, St.PRELOADER_MASK, { url: "webgl/preloader/mask-preloader-half.jpg", totalFrames: 220 }), It()(Ct, St.QUALITY_SELECTOR_BACKGROUND, { url: "webgl/quality-selector/background.png" }), It()(Ct, St.QUALITY_SELECTOR_MASK, { url: "webgl/quality-selector/mask-background.png" }), It()(Ct, St.QUALITY_SELECTOR_ITEM, { url: "webgl/quality-selector/mask-item.png" }), It()(Ct, St.TITLESCREEN_EN_MASK, { url: "webgl/title/title-en.png" }), It()(Ct, St.TITLESCREEN_BU_MASK, { url: "webgl/title/title-bu.png" }), It()(Ct, St.TITLESCREEN_BU_IMAGE, { url: "webgl/title/title-bu-image.png" }), It()(Ct, St.TEMP_GRADIENT, { url: "webgl/gradient-2.jpg" }), It()(Ct, St.HOME_FRONT, { url: "image/front-4.png" }), It()(Ct, St.HOME_BACK, { url: "image/back-2.jpg" }), It()(Ct, St.LOADER_BAR_IMAGE, { url: "loader-bar/bar.png" }), It()(Ct, St.LOADER_BAR_MASK, { url: "loader-bar/mask.png" }), It()(Ct, St.BUTTON_CIRCLE, { url: "webgl/button/button-circle.png" }), It()(Ct, St.MASK_OVERLAY, { url: "webgl/mask-overlay.png" }), Ct); ct && (Dt[St.HOME_IMAGE_MOBILE] = { url: "mobile/intro-background.png" });/* harmony default export */
                     var Nt = Dt, Ft = function () { function e() { var t = this; it()(this, e), this._loadedImages = {}, this.handleImagesLoaded = function (e, i) { e.forEach(function (e, n) { var s = t.getDataFromImageUrl(i[n]); t._loadedImages[s.key] = s.data, t._loadedImages[s.key].image = e }) } } return st()(e, [{ key: "loadImages", value: function () { var t = this, i = arguments.length > 0 && void 0 !== arguments[0] && arguments[0], n = arguments[1], s = void 0; return s = i ? this.getImageUrlsFromName(ct ? e.PRELOADER_IMAGES_MOBILE : e.PRELOADER_IMAGES) : this.getImageUrlsFromName(ee()(Nt)), r(s, !0, n).then(function (e) { return t.handleImagesLoaded(e, s) }) } }, { key: "getImage", value: function (e) { return this._loadedImages[e] ? this._loadedImages[e].image : null } }, { key: "getImages", value: function (e) { var t = this; return e.map(function (e) { return t.getImage(e) }) } }, { key: "getImageData", value: function (e) { return this._loadedImages[e] || null } }, { key: "getImageUrlsFromName", value: function (e) { return e.map(function (e) { return Nt[e] && Nt[e].url }) } }, { key: "getDataFromImageUrl", value: function (e) { var t = ee()(Nt).find(function (t) { return Nt[t].url === e }); return { key: t, data: Nt[t] } } }]), e }(), Vt = Ft; Ft.PRELOADER_IMAGES = [St.SIMPLE_MASK, St.PRELOADER_IMAGE, St.PRELOADER_MASK, St.HOME_FRONT, St.HOME_BACK, St.CHAR_0, St.CHAR_1, St.CHAR_2, St.CHAR_3, St.CHAR_4, St.CHAR_5, St.CHAR_6, St.CHAR_7, St.CHAR_8, St.CHAR_9, St.LOADER_BAR_IMAGE, St.LOADER_BAR_MASK], Ft.PRELOADER_IMAGES_MOBILE = [St.LOADER_BAR_IMAGE, St.LOADER_BAR_MASK, St.TITLESCREEN_BU_IMAGE, St.BUTTON_CIRCLE, St.HOME_IMAGE_MOBILE];
                     // CONCATENATED MODULE: ./src/util/webgl/effectImageLoaderInstance.ts
                     var Bt = new Vt, Ut = Bt, Ht = i(345), Gt = function (e) { function t(e, i, n) { it()(this, t); var s = mt()(this, (t.__proto__ || ft()(t)).call(this)); return s._canvas = e, s._copyElement = i, s._params = n, s._direction = "default", s._maskImage = Ut.getImage(St.TEMP_GRADIENT), s.createTextCanvas(), s.initRenderer(), s } return At()(t, e), st()(t, [{ key: "start", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; return this._direction = 0 === e ? "reverse" : "default", this._renderer.play(e) } }, { key: "initRenderer", value: function () { this._renderer = new Ot(this._canvas, Ht, this._params, this.onTick.bind(this)), this._renderer.baseImage = this._textCanvasElement, this._renderer.maskImage = this._maskImage, this._renderer.totalFrames = 200 } }, { key: "createTextCanvas", value: function () { var e = window.devicePixelRatio; this._textCanvasElement = document.createElement("canvas"); var i = this._canvas.offsetWidth * t._FONT_MULTIPLICATION * e, n = this._canvas.offsetHeight * t._FONT_MULTIPLICATION * e; this._textCanvasElement.width = i, this._textCanvasElement.height = n, this._textCanvasElement.style.width = i / e + "px", this._textCanvasElement.style.height = n / e + "px", this._textCanvasCtx = this._textCanvasElement.getContext("2d"), this._textCanvasCtx.clearRect(0, 0, i, n); var s = parseInt(window.getComputedStyle(this._copyElement).fontSize, 10), a = s * t._FONT_MULTIPLICATION * e; this._textCanvasCtx.textAlign = "center", this._textCanvasCtx.fillStyle = this._params.color || "white", this._textCanvasCtx.font = a + "px BRUX", this._textCanvasCtx.fillText(this._copyElement.innerText, i / 2, .9 * a), this._copyElement.style.color = this._params.color || "white" } }, { key: "onTick", value: function (e, t) { t === Math.floor(.65 * e) && (Ee.TweenMax.to("default" === this._direction ? this._copyElement : this._textCanvasElement, .5, { alpha: 1 }), Ee.TweenMax.to("default" === this._direction ? this._textCanvasElement : this._copyElement, .5, { alpha: 0 })) } }, { key: "dispose", value: function () { this._renderer && (this._renderer.dispose(), this._renderer = null), Et()(t.prototype.__proto__ || ft()(t.prototype), "dispose", this).call(this) } }]), t }(Rt.a), $t = Gt; Gt._FONT_MULTIPLICATION = 4;
                     // CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/eslint-loader!./src/component/AnimatedTitle/AnimatedTitle.js
                     /* harmony default export */
                     var zt, Wt = { name: "AnimatedTitle", props: { text: ne.a.string.isRequired, color: { required: !1 }, fontSize: { required: !1 }, speed: { required: !1, default: 1 } }, methods: { init: function () { this.renderer = new $t(this.$refs.canvas, this.$refs.copy, { color: this.color, speed: this.speed }) }, transitionIn: function () { return this.renderer.start() }, transitionOut: function () { return this.renderer.start(0) } }, beforeDestroy: function () { this.renderer && (this.renderer.dispose(), this.renderer = null) } }, Kt = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("h2", { class: e.$style.title, style: { fontSize: e.fontSize } }, [i("div", { ref: "canvas", class: e.$style.canvas }), e._v(" "), i("span", { ref: "copy", class: e.$style.copy, domProps: { innerHTML: e._s(e.text) } })]) }, Yt = [], Xt = { render: Kt, staticRenderFns: Yt }, jt = Xt, qt = i(5), Zt = o, Qt = qt(Wt, jt, Zt, null, null), Jt = Qt.exports, ei = Jt, ti = { name: "ExperienceInstructions", methods: { transitionIn: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0; Ee.TweenLite.fromTo([this.$refs.wrapper], .75, { autoAlpha: 0, y: 25 }, { autoAlpha: 1, y: 0, delay: e, ease: Ee.Power2.easeOut }) }, transitionOut: function () { Ee.TweenLite.to([this.$refs.wrapper], .6, { autoAlpha: 0, y: 0, ease: Ee.Linear.easeNone }) } } }, ii = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("ul", { ref: "wrapper", class: e.$style.instructions }, [i("li", { class: e.$style.listItem }, [i("div", { class: e.$style.icon }, [i("div", { class: e.$style.keyLine }, [i("span", { class: [e.$style.key, e.$style.up, e.$style.isActive] })]), e._v(" "), i("div", { class: e.$style.keyLine }, [i("span", { class: [e.$style.key, e.$style.left] }), e._v(" "), i("span", { class: [e.$style.key, e.$style.down, e.$style.isActive] }), e._v(" "), i("span", { class: [e.$style.key, e.$style.right] })])]), e._v(" "), i("p", { class: [e.$style.copy, "copy-02"] }, [e._v("Use the arrow keys to move")])]), e._v(" "), i("li", { class: e.$style.listItem }, [i("div", { class: e.$style.icon }, [i("span", { class: e.$style.mouse })]), e._v(" "), i("p", { class: [e.$style.copy, "copy-02"] }, [e._v("Click and drag to look around")])])]) }, ni = [], si = { render: ii, staticRenderFns: ni }, ai = si, ri = i(5), oi = l, li = ri(ti, ai, oi, null, null), hi = li.exports, ui = hi; !function (e) { e[e.LEFT = 0] = "LEFT", e[e.CENTER = 1] = "CENTER", e[e.RIGHT = 2] = "RIGHT" }(zt || (zt = {})); var ci = function (e) {
                            function t(e, i) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null; it()(this, t); var a = mt()(this, (t.__proto__ || ft()(t)).call(this)); return a._wrapper = e, a._canvas = i, a._color = s, a._progress = 0, a._direction = zt.CENTER, a._images = Ut.getImages([St.LOADER_BAR_IMAGE, St.LOADER_BAR_MASK]), null !== n && (a.direction = n), a.initRenderer(), a } return At()(t, e), st()(t, [{
                                   key: "draw", value: function () {
                                          var e = this._canvas.width, t = this._canvas.height; this._ctx.clearRect(0, 0, e, t), this._color && (this._ctx.fillStyle = this._color, this._ctx.fillRect(0, 0, e, t), this._ctx.globalCompositeOperation = "destination-in"),
                                                 // Original
                                                 this._ctx.drawImage(this._images[0], 0, 0, e, t), this._ctx.globalCompositeOperation = "destination-in", this._ctx.drawImage(this._images[1], this.getStartX(e), 0, Math.max(.01, e * this._progress), t), this._ctx.globalCompositeOperation = "source-over"
                                   }
                            }, { key: "getStartX", value: function (e) { switch (this._direction) { case zt.LEFT: return 0; case zt.RIGHT: return e - e * this._progress; default: case zt.CENTER: return e * (1 - this._progress) / 2 } } }, { key: "initRenderer", value: function () { this._canvas.width = this._wrapper.offsetWidth, this._canvas.height = this._wrapper.offsetHeight, this._ctx = this._canvas.getContext("2d"), this.draw() } }, { key: "dispose", value: function () { Et()(t.prototype.__proto__ || ft()(t.prototype), "dispose", this).call(this) } }, { key: "progress", set: function (e) { this._progress = e, this.draw() } }, { key: "direction", set: function (e) { this._direction = e } }]), t
                     }(Rt.a), di = ci, _i = { name: "ContentBar", props: { progress: ne.a.number.isRequired, direction: ne.a.number, color: ne.a.string }, mounted: function () { this.renderer = new di(this.$el, this.$refs.canvas, null !== this.direction ? this.direction : null, this.color) }, watch: { progress: function (e) { this.renderer.progress = e }, direction: function (e) { this.renderer.direction = e } }, beforeDestroy: function () { this.renderer && (this.renderer.dispose(), this.renderer = null) } }, pi = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: e.$style.contentBar }, [i("canvas", { ref: "canvas", class: e.$style.canvas })]) }, vi = [], fi = { render: pi, staticRenderFns: vi }, gi = fi, mi = i(5), yi = h, Ei = mi(_i, gi, yi, null, null), Ti = Ei.exports, Ai = Ti, bi = i(349), Ri =/*#__PURE__*/i.n(bi), wi = function () {
                            function e() { it()(this, e) } return st()(e, null, [{
                                   key: "randomInRange",/**
           * Creates a random number within a given range.
           *
           * @method randomInRange
           * @static
           * @param {number} start Lowest number of the range.
           * @param {number} end Highest number of the range.
           * @return {number} A new random number within the range.
           * @example
           * This example creates a random number between 10 and 20:
           * ```
           * var scale:number = NumberUtils.randomInRange(10, 20);
           * ```
           */
                                   value: function (e, t) { var i = t - e; return e + (i - Math.random() * i) }
                            }, { key: "normalizedValue", value: function (e, t, i) { var n = i - t; return 0 === n ? t : 1 / n * (e - t) } }, { key: "angle", value: function (e, t) { return 180 * Math.atan2(t, e) / Math.PI } }, { key: "interpolate", value: function (e, t, i) { return t + (i - t) * e } }, { key: "format", value: function (t) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : ",", n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : ".", s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : NaN, a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : NaN, r = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : "0"; isNaN(s) || (t = e.roundToPrecision(t, s)); var o = t.toString(), l = o.indexOf("."); t < 0 && (o = o.substr(1)); for (var h = -1 !== l ? o.substr(l + 1) : ""; h.length < s;)h += "0"; var u = Math.floor(Math.abs(t)).toString(), c = ""; if (n) { for (var d = Math.ceil(u.length / 3) - 1, _ = 0; _ < d; ++_)c = n + u.substr(u.length - 3 * (_ + 1), 3) + c; c = u.substr(0, u.length - 3 * d) + c } else c = u; if (a && r && "" !== r) for (t < 0 && a--; c.length < a;)c = r + c; return (isNaN(s) || s > 0) && (c += h ? i + h : ""), t < 0 && (c = "-" + c), c } }, { key: "roundToPrecision", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, i = Math.pow(10, t); return Math.round(e * i) / i } }, { key: "floorToPrecision", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, i = Math.pow(10, t); return Math.floor(e * i) / i } }, { key: "ceilToPrecision", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, i = Math.pow(10, t); return Math.ceil(e * i) / i } }, { key: "roundToNearest", value: function (t) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1; if (0 === i) return t; var n = Math.round(e.roundToPrecision(t / i, 10)) * i; return e.roundToPrecision(n, 10) } }, { key: "floorToNearest", value: function (t) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1; return 0 === i ? t : Math.floor(e.roundToPrecision(t / i, 10)) * i } }, { key: "ceilToNearest", value: function (t) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1; return 0 === i ? t : Math.ceil(e.roundToPrecision(t / i, 10)) * i } }]), e
                     }(), Ii = wi, Pi = function e() { it()(this, e) }; Pi.INFO = "info", Pi.VOICE_OVER = "voice_over"; var Li, ki = function () { function e(t) { it()(this, e), this._data = t } return st()(e, [{ key: "getHotspotById", value: function (e) { var t = this.hotspots.find(function (t) { return t.id === e }); return t || (console.warn("Can't find hotspot with id: " + e), null) } }, { key: "hasHotspotId", value: function (e) { return this.hotspots.some(function (t) { return t.id === e }) } }, { key: "getKeypointById", value: function (e) { var t = this.keypoints.find(function (t) { return t.id === e }); return t || (console.warn("Can't find keypoint with id: " + e), null) } }, { key: "getKeypointByPathId", value: function (e) { var t = this.keypoints.find(function (t) { return t.pathId === e }); return t || (console.warn("Can't find keypoint with pathId: " + e), null) } }, { key: "getKeypointByPathLocation", value: function (e) { var t = this.keypoints.find(function (t) { return t.pathLocations && t.pathLocations.indexOf(e) > -1 }); return t || (console.warn("Can't find keypoint with pathLocation: " + e), null) } }, { key: "getProgressBetweenKeypoints", value: function (e, t) { var i = this.getKeypointByPathId(e); if (i) { var n = this.getNextKeyPoint(i.id); return n ? Ii.interpolate(t, this.getKeyPointLocationByBrowserVersion(i), this.getKeyPointLocationByBrowserVersion(n)) : i.location } return .5 } }, { key: "getTempleKeypoints", value: function () { return this.keypoints.filter(function (e) { return e.isTemple }) } }, { key: "getPathItemById", value: function (e) { var t = this.pathData.find(function (t) { return t.id === e }); return t || (console.warn("Can't find pathItem with id: " + e), null) } }, { key: "getPathItemsByLocationId", value: function (e) { return this.pathData.filter(function (t) { return t.locationId === e }) } }, { key: "getNextKeyPoint", value: function (e) { var t = this.keypoints.findIndex(function (t) { return t.id === e }); return this.keypoints[t + 1] || null } }, { key: "getKeyPointLocationByBrowserVersion", value: function (e) { return ct && e.mobileLocation ? e.mobileLocation : e.location } }, { key: "hotspots", get: function () { return this._data.hotspots } }, { key: "keypoints", get: function () { return this._data.keypoints } }, { key: "pathData", get: function () { return this._data.pathData } }]), e }(), Ci = ki; !function (e) { e[e.LOW = 0] = "LOW", e[e.MEDIUM = 1] = "MEDIUM", e[e.HIGH = 2] = "HIGH", e[e.AUTO = 3] = "AUTO" }(Li || (Li = {}));
                     // CONCATENATED MODULE: ./src/webgl/FlowEnum.ts
                     var Mi; !function (e) { e.INTRO = "INTRO", e.PATH_INTRO_TO_AOK = "PATH_INTRO_TO_AOK", e.AOK_INSIDE = "AOK_INSIDE", e.PATH_AOK_TO_KMG = "PATH_AOK_TO_KMG", e.KMG_OUTSIDE = "KMG_OUTSIDE", e.PATH_KMG_TO_EYK = "PATH_KMG_TO_EYK", e.EYK_OUTSIDE = "EYK_OUTSIDE", e.EYK_INSIDE = "EYK_INSIDE", e.PATH_EYK_TO_FUTURE = "PATH_EYK_TO_FUTURE", e.FUTURE = "FUTURE" }(Mi || (Mi = {})); var xi; !function (e) { e[e.INTRO_EFFECT = 0] = "INTRO_EFFECT", e[e.CAMERA_PATH = 1] = "CAMERA_PATH", e[e.TEMPLE_ORBIT = 2] = "TEMPLE_ORBIT", e[e.TEMPLE_INSIDE = 3] = "TEMPLE_INSIDE" }(xi || (xi = {}));
                     // CONCATENATED MODULE: ./src/store/module/application/application.js
                     var Oi, Si = { namespaced: !0, state: { volume: 1, webglQualityLevel: Li.MEDIUM, webglLoadingPercentage: 0, audioLoadingPercentage: 0, imageLoadingPercentage: 0, isImageLoadComplete: !1, isPreloaderComplete: !1, isContentVisible: !0, isWebglPlaying: !1, isWebVREnabled: !1, isMapOverlayVisible: !1, webglFlowLocationType: null, webglFlowLocation: null, isWebglOverlaySize: !1, experienceUiVisible: !0, hasMapOverlay: !1 }, getters: { allImagesLoaded: function (e) { return 1 === e.imageLoadingPercentage && e.isImageLoadComplete }, totalLoadingPercentage: function (e) { return (e.webglLoadingPercentage + e.imageLoadingPercentage + e.audioLoadingPercentage) / 3 }, isCloseTempleButtonVisible: function (e) { return (e.webglFlowLocationType === xi.TEMPLE_INSIDE || e.webglFlowLocationType === xi.TEMPLE_ORBIT) && e.webglFlowLocation !== Mi.FUTURE }, isWebVRButtonVisible: function (e) { return e.webglFlowLocationType === xi.TEMPLE_INSIDE } }, mutations: (Oi = {}, It()(Oi, "updateVolume", function (e, t) { e.volume = t }), It()(Oi, "setContentVisibility", function (e, t) { e.isContentVisible = t }), It()(Oi, "setWebglLoadedPercentage", function (e, t) { e.webglLoadingPercentage = t }), It()(Oi, "setAudioLoadingPercentage", function (e, t) { e.audioLoadingPercentage = t }), It()(Oi, "setImageLoadedPercentage", function (e, t) { e.imageLoadingPercentage = t }), It()(Oi, "setImageLoadComplete", function (e, t) { e.isImageLoadComplete = t }), It()(Oi, "setPreloaderComplete", function (e, t) { e.isPreloaderComplete = t }), It()(Oi, "setWebglPlayState", function (e, t) { e.isWebglPlaying = t }), It()(Oi, "setWebglQualityLevel", function (e, t) { e.webglQualityLevel = t }), It()(Oi, "setWebglFlowLocation", function (e, t) { e.webglFlowLocation = t.location, e.webglFlowLocationType = t.type }), It()(Oi, "setWebVREnabled", function (e, t) { e.isWebVREnabled = t }), It()(Oi, "setMapOverlayVisibility", function (e, t) { e.isMapOverlayVisible = t }), It()(Oi, "setExperienceUiVisibility", function (e, t) { e.experienceUiVisible = t }), It()(Oi, "setHasMapOverlay", function (e, t) { e.hasMapOverlay = t }), It()(Oi, "setWebglOverlaySize", function (e, t) { e.isWebglOverlaySize = t }), Oi), actions: It()({}, "loadImageAssets", function (e) { var t = e.commit; return Ut.loadImages(!1, function (e, i) { t("setImageLoadedPercentage", i) }).then(function () { return t("setImageLoadComplete", !0) }) }) }, Di = { UPDATE_VOLUME: "application/updateVolume", SET_CONTENT_VISIBILITY: "application/setContentVisibility", SET_AUDIO_LOADED_PERCENTAGE: "application/setAudioLoadingPercentage", SET_WEBGL_LOADED_PERCENTAGE: "application/setWebglLoadedPercentage", SET_IMAGE_LOADED_PERCENTAGE: "application/setImageLoadedPercentage", SET_IMAGE_LOAD_COMPLETE: "application/setImageLoadComplete", SET_WEBGL_QUALITY_LEVEL: "application/setWebglQualityLevel", SET_WEBGL_PLAYSTATE: "application/setWebglPlayState", SET_WEBGL_FLOW_LOCATION: "application/setWebglFlowLocation", SET_PRELOADER_COMPLETE: "application/setPreloaderComplete", SET_WEBVR_ENABLED: "application/setWebVREnabled", SET_MAP_OVERLAY_VISIBILITY: "application/setMapOverlayVisibility", SET_EXPERIENCE_UI_VISIBILITY: "application/setExperienceUiVisibility", SET_WEBGL_OVERLAY_SIZE: "application/setWebglOverlaySize", SET_HAS_MAP_OVERLAY: "application/setHasMapOverlay", LOAD_IMAGE_ASSETS: "application/loadImageAssets" }, Ni = Si, Fi = i(26), Vi =/*#__PURE__*/i.n(Fi), Bi = function (e) { function t(e, i, n, s, a) { it()(this, t); var r = mt()(this, (t.__proto__ || ft()(t)).call(this, e, n, s, a)); return r.data = i, r } return At()(t, e), st()(t, [{ key: "clone", value: function () { return new t(this.type, this.data, this.bubbles, this.cancelable) } }]), t }(Vi.a), Ui = Bi; Bi.PLAY = "VideoEvent.PLAY", Bi.PAUSE = "VideoEvent.PAUSE", Bi.ENDED = "VideoEvent.ENDED", Bi.TIME_UPDATE = "VideoEvent.TIME_UPDATE";
                     // CONCATENATED MODULE: ./src/util/AudioPlayer.ts
                     var Hi = function (e) { function t(e, i, n) { it()(this, t); var s = mt()(this, (t.__proto__ || ft()(t)).call(this)); return s._audioElement = e, s._progressBar = i, s._staticPath = n, s._hasTicker = !1, s.handleAudioPlay = function () { s.startProgressTicker(), s.dispatchEvent(new Ui(Ui.PLAY)) }, s.handleAudioPause = function () { s.stopProgressTicker(), s.dispatchEvent(new Ui(Ui.PAUSE)) }, s.handleAudioEnded = function () { s.stopProgressTicker(), s.dispatchEvent(new Ui(Ui.ENDED)) }, s.tick = function () { var e = s._audioElement.currentTime / s._audioElement.duration; s.setProgress(e), s.dispatchEvent(new Ui(Ui.TIME_UPDATE, { progress: e })) }, s._audioElement.addEventListener("play", s.handleAudioPlay), s._audioElement.addEventListener("pause", s.handleAudioPause), s._audioElement.addEventListener("ended", s.handleAudioEnded), s.setProgress(0), s } return At()(t, e), st()(t, [{ key: "playAudio", value: function (e) { console.log("VO: play('" + e + "')"), this._audioElement.src = this._staticPath + e, this._audioElement.currentTime = 0, this._audioElement.play() } }, { key: "togglePlayPause", value: function () { this._audioElement.paused ? this.play() : this.pause() } }, { key: "play", value: function () { this._audioElement.play() } }, { key: "pause", value: function () { this._audioElement.pause() } }, { key: "stop", value: function () { console.log("VO: stop('" + this._audioElement.src + "')"), this.stopProgressTicker(), this._audioElement.pause() } }, { key: "setProgress", value: function (e) { this._progressBar && Ee.TweenLite.set(this._progressBar, { drawSVG: 100 * e + "%" }) } }, { key: "startProgressTicker", value: function () { this._hasTicker || (this._hasTicker = !0, Ee.TweenLite.ticker.addEventListener("tick", this.tick)) } }, { key: "stopProgressTicker", value: function () { this._hasTicker = !1, Ee.TweenLite.ticker.removeEventListener("tick", this.tick) } }, { key: "dispose", value: function () { this.stopProgressTicker(), Et()(t.prototype.__proto__ || ft()(t.prototype), "dispose", this).call(this) } }, { key: "volume", set: function (e) { this._audioElement.volume = e } }, { key: "duration", get: function () { return this._audioElement.duration } }]), t }(Lt.a), Gi = Hi, $i = function () {
                            function e() { it()(this, e) } return st()(e, null, [{
                                   key: "getExtension",/**
           * @public
           * @method static getExtension
           */
                                   value: function () { return lt.a.ios ? ".aac" : ".ogg" }
                            }]), e
                     }(), zi = $i, Wi = {
                            name: "VoiceOver", computed: _t()({}, Object(pt.c)("application", ["webglFlowLocation", "isMapOverlayVisible", "volume"]), { content: function () { if (this.webglFlowLocation) { var e = this.$experience.getPathItemsByLocationId(this.webglFlowLocation).find(function (e) { return e.type === Pi.VOICE_OVER }); if (e) return e } return null } }), data: function () { return { isPlaying: !1, isActive: !1, isVisible: !1, VOQueue: [], currentVO: null, needsAutoPlay: !1 } }, mounted: function () { this.player = new Gi(this.$refs.audio, this.$refs.progress, this.$versionRoot), this.player.addEventListener(Ui.PLAY, this.handleAudioPlay), this.player.addEventListener(Ui.PAUSE, this.handleAudioPause), this.player.addEventListener(Ui.ENDED, this.handleAudioComplete), this.player.volume = this.volume, Ee.TweenLite.set([this.$refs.controls, this.$refs.background], { scale: 0 }) }, methods: {
                                   transitionIn: function () { Ee.TweenLite.killTweensOf(this.$refs.background), Ee.TweenLite.killTweensOf(this.$refs.controls), this.isActive = !0, Ee.TweenLite.to(this.$refs.background, .5, { scale: 1, ease: Ee.Expo.easeOut }), Ee.TweenLite.to(this.$refs.controls, 1, { scale: 1, delay: .25, ease: Ee.Expo.easeOut }) }, transitionOut: function () { var e = this; Ee.TweenLite.killTweensOf(this.$refs.background), Ee.TweenLite.killTweensOf(this.$refs.controls), Ee.TweenLite.to(this.$refs.controls, .5, { scale: 0, delay: .2, ease: Ee.Expo.easeIn }), Ee.TweenLite.to(this.$refs.background, .5, { scale: 0, delay: .2, ease: Ee.Expo.easeIn, onComplete: function () { e.player.setProgress(0) } }) }, onPlayPauseClick: function () { this.player.togglePlayPause() }, handleAudioPlay: function () { this.isPlaying = !0, this.isVisible = !0, this.$tracker.push(se.VO, { action: "play", label: this.currentVO }) }, handleAudioPause: function () {
                                          var e = this; this.isPlaying = !1, Ee.TweenLite.delayedCall(.5, function () {
                                                 // add a delay in case "stop" kind of pause
                                                 e.currentVO && e.$tracker.push(se.VO, { action: "pause", label: e.currentVO })
                                          })
                                   }, handleAudioComplete: function () {
                                          this.isPlaying = !1, this.isVisible = !1, this.$tracker.push(se.VO, { action: "complete", label: this.currentVO }),
                                          // remove played track from the queue
                                          this.player.setProgress(0), this.VOQueue = [].concat(Ri()(this.VOQueue)).slice(1), this.currentVO = null
                                   }, start: function () { this.currentVO && this.player.playAudio(this.currentVO) }, play: function (e) {
                                          // if parent asks to play
                                          this.stop(),
                                                 // add new sound in queue
                                                 this.VOQueue = [e + zi.getExtension()]
                                   }, pause: function () { this.player.togglePlayPause() }, stop: function () { this.player.stop(), this.currentVO = null, this.VOQueue = [], this.player.setProgress(0), this.isPlaying = !1, this.isVisible = !1, this.needsAutoPlay = !1 }
                            }, watch: {
                                   isMapOverlayVisible: function (e) {
                                          if (e && this.isPlaying) this.player.pause(), this.needsAutoPlay = !0; else if (e || "PATH_INTRO_TO_AOK" !== this.webglFlowLocation) this.needsAutoPlay && (this.player.play(), this.needsAutoPlay = !1); else {
                                                 // BEGIN JOURNEY CLICK
                                                 var t = "" + this.content.src + zi.getExtension(); t !== this.VOQueue[this.VOQueue.length - 1] && this.VOQueue.push(t)
                                          }
                                   }, isVisible: function (e) { e ? this.transitionIn() : this.transitionOut() }, VOQueue: function () {
                                          // console.log('VOQueue', this.VOQueue, this.currentVO);
                                          !this.VOQueue.length || this.currentVO || (this.currentVO = this.VOQueue[0], this.isVisible = !0, this.start())
                                   }, content: function (e) { if (e && !this.isMapOverlayVisible) { var t = "" + e.src + zi.getExtension(); t !== this.VOQueue[this.VOQueue.length - 1] && this.VOQueue.push(t) } }, volume: function (e) { this.player && (this.player.volume = e) }
                            }, beforeDestroy: function () { this.player && (this.player.dispose(), this.player = null) }
                     }, Ki = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: [e.$style.voiceOver, e.isVisible ? "is-visible" : null] }, [i("span", { directives: [{ name: "show", rawName: "v-show", value: e.isPlaying, expression: "isPlaying" }], staticClass: "u-pulse" }), e._v(" "), i("div", { ref: "background", class: e.$style.background }), e._v(" "), i("svg", { directives: [{ name: "show", rawName: "v-show", value: e.isActive, expression: "isActive" }], class: e.$style.progress, attrs: { viewBox: "0 0 64 64" } }, [i("circle", { ref: "progress", class: e.$style.progressStroke, attrs: { cx: "32", cy: "32", r: "30", "stroke-width": "2.5", fill: "none", "stroke-linecap": "square" } })]), e._v(" "), i("button", { ref: "controls", class: [e.$style.controls, e.isPlaying ? e.$style.isPlaying : null], on: { click: e.onPlayPauseClick } }, [i("Icon", { attrs: { name: "play-pause" } })], 1), e._v(" "), i("audio", { ref: "audio" })]) }, Yi = [], Xi = { render: Ki, staticRenderFns: Yi }, ji = Xi, qi = i(5), Zi = u, Qi = qi(Wi, ji, Zi, null, null), Ji = Qi.exports, en = Ji, tn =
                                   // CONCATENATED MODULE: ./src/util/loadApiWithGlobalCallback.ts
                                   /**
                                    * Loads an API at the specified url that executes a callback defined as a global variable on
                                    * the window object.
                                    *
                                    * @param url The url of the API to load.
                                    * @param callbackName The name of the callback that the API will execute once it has finished loading.
                                    * @returns {Promise<void>} A promise that resolves when the loaded API has executed the callback.
                                    */
                                   function (e, t) { return new ye.a(function (i, n) { var s = window.setTimeout(function () { n("Loading API timed out: " + e) }, 4e3); window[t] = function () { clearTimeout(s), i(), window[t] = null }; var a = document.createElement("script"), r = document.getElementsByTagName("script")[0]; a.src = e, r.parentNode.insertBefore(a, r) }) }("https://www.youtube.com/iframe_api", "onYouTubeIframeAPIReady"), nn = { ready: tn }, sn = nn, an = { name: "ImageGallery", props: { images: ne.a.array.isRequired, current: ne.a.number.isRequired } }, rn = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("ul", { class: e.$style.gallery }, e._l(e.images, function (t, n) { return i("li", { key: n, class: [e.$style.item, n === e.current ? e.$style.activeItem : null] }, [i("span", { class: e.$style.image, style: { backgroundImage: "url(" + t.src + ")", backgroundPosition: t.alignment ? t.alignment : "center center" } })]) })) }, on = [], ln = { render: rn, staticRenderFns: on }, hn = ln, un = i(5), cn = c, dn = un(an, hn, cn, null, null), _n = dn.exports, pn = _n, vn = i(194), fn =/*#__PURE__*/i.n(vn), gn = {
                                          name: "ImageCompare", props: { images: ne.a.array }, data: function () { return { isInstructionsVisible: !0, isDragging: !1 } }, mounted: function () { this.position = .5, this.draggable = fn.a.create(this.$refs.knob, { type: "x", bounds: this.$refs.dragger, dragClickables: !0, zIndexBoost: !1, onDrag: this.onDrag, onDragEnd: this.onDragEnd })[0] }, methods: {
                                                 transitionIn: function () { var e = this; this.position = .5, this.$nextTick(function () { e.$refs.dragIcon.transitionIn(), e.draggable.applyBounds() }) }, transitionOut: function () {
                                                        // if (this.timeout) clearTimeout(this.timeout);
                                                        this.isInstructionsVisible = !0, this.position = .5, this.setMaskPositions()
                                                 }, onDrag: function () {
                                                        // if (this.timeout) clearTimeout(this.timeout);
                                                        this.isDragging = !0, this.isInstructionsVisible = !1, this.position = this.draggable.x / this.draggable.maxX, this.setMaskPositions()
                                                 }, onDragEnd: function () { var e = this; this.isDragging = !1, Ee.TweenLite.to(this, 1, { position: .5, ease: Ee.Expo.easeOut, onUpdate: function () { e.setKnobPosition(), e.setMaskPositions() } }) }, setMaskPositions: function () { var e = this; this.$refs.image && (this.$refs.image.forEach(function (t, i) { var n = 0 === i ? 0 : e.$el.offsetWidth * e.position, s = e.$el.offsetWidth * (0 === i ? e.position : 1); Ee.TweenLite.set(t, { clip: "rect(0px " + s + "px " + e.$el.offsetHeight + "px " + n + "px)" }) }), Ee.TweenLite.set(this.$refs.line, { x: this.$el.offsetWidth * this.position })), Ee.TweenLite.set([this.$refs.dots], { x: this.draggable.maxX * this.position }) }, setKnobPosition: function () { Ee.TweenLite.set(this.$refs.knob, { x: this.draggable.maxX * this.position }) }
                                          }, watch: { images: function (e) { var t = this; e.length > 0 && this.$nextTick(function () { t.setKnobPosition(), t.setMaskPositions() }) } }
                                   }, mn = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: e.$style.compare }, [e._l(e.images, function (t, n) { return i("span", { key: n, ref: "image", refInFor: !0, class: e.$style.image, style: { backgroundImage: "url(" + t.src + ")" } }) }), e._v(" "), i("span", { ref: "line", class: e.$style.line }), e._v(" "), i("div", { ref: "dragger", class: e.$style.dragger }, [i("div", { ref: "dots", class: ["a-dots-wrapper", e.$style.dragLine, e.isInstructionsVisible ? e.$style.isVisible : null] }, e._l(2, function (t) { return i("div", { key: t, class: ["a-dots-container", e.$style.dragContainer] }, e._l(15, function (e) { return i("span", { key: e }) })) })), e._v(" "), e.isMobileVersion ? [i("div", { class: [e.$style.bottomInfo, e.isInstructionsVisible ? e.$style.isVisible : null] }, [i("div", { class: e.$style.splitMessage }, [e._v("Before and After")]), e._v(" "), i("p", { staticClass: "copy-02", class: e.$style.description }, [e._v("Before-and-after models can be compared to show which changes in the structure were directly related to the earthquake.  Close examination of the surviving and damaged areas may also show what types of construction and restoration will perform better in future seismic events.")])])] : [i("div", { class: [e.$style.templeInfo] }, [i("h2", { class: ["heading-02", e.$style.templeTitle] }, [e._v("Before and After")]), e._v(" "), i("p", { staticClass: "copy-02" }, [e._v("Before-and-after models can be compared to show which changes in the structure were directly related to the earthquake.  Close examination of the surviving and damaged areas may also show what types of construction and restoration will perform better in future seismic events.")])])], e._v(" "), i("div", { ref: "knob", class: e.$style.knob }, [i("CircleButton", { ref: "dragIcon", class: [e.$style.draggerKnob, e.isDragging ? e.$style.isDragging : null], attrs: { icon: "drag", hasHover: !1 } })], 1)], 2)], 2) }, yn = [], En = { render: mn, staticRenderFns: yn }, Tn = En, An = i(5), bn = d, Rn = An(gn, Tn, bn, null, null), wn = Rn.exports, In = wn, Pn = i(151), Ln =/*#__PURE__*/i.n(Pn), kn = i(152), Cn =/*#__PURE__*/i.n(kn), Mn = i(153), xn =/*#__PURE__*/i.n(Mn), On = i(154), Sn =/*#__PURE__*/i.n(On), Dn = i(155), Nn =/*#__PURE__*/i.n(Dn), Fn = i(156), Vn =/*#__PURE__*/i.n(Fn), Bn = i(157), Un =/*#__PURE__*/i.n(Bn), Hn = i(158), Gn =/*#__PURE__*/i.n(Hn), $n = i(160), zn =/*#__PURE__*/i.n($n), Wn = i(161), Kn =/*#__PURE__*/i.n(Wn), Yn = i(162), Xn =/*#__PURE__*/i.n(Yn), jn = i(163), qn =/*#__PURE__*/i.n(jn), Zn = i(159), Qn =/*#__PURE__*/i.n(Zn), Jn = i(164), es =/*#__PURE__*/i.n(Jn), ts = i(165), is =/*#__PURE__*/i.n(ts), ns = i(166), ss =/*#__PURE__*/i.n(ns), as = i(167), rs =/*#__PURE__*/i.n(as), os = i(168), ls =/*#__PURE__*/i.n(os), hs = i(169), us =/*#__PURE__*/i.n(hs), cs = i(170), ds =/*#__PURE__*/i.n(cs), _s = i(171), ps =/*#__PURE__*/i.n(_s), vs = i(172), fs =/*#__PURE__*/i.n(vs), gs = i(173), ms =/*#__PURE__*/i.n(gs), ys = i(174), Es =/*#__PURE__*/i.n(ys), Ts = { "arrow-left": Ln.a, "arrow-right": Cn.a, cross: xn.a, decagon: Sn.a, drag: Nn.a, eyk: Vn.a, "google-ac": Un.a, headphone: Gn.a, "hotspot-compare": zn.a, "hotspot-drone": Kn.a, "hotspot-image-gallery": Xn.a, "hotspot-image": qn.a, "hotspot-inside": Qn.a, "hotspot-slices": es.a, "hotspot-video": is.a, "map-direction": ss.a, "map-path": rs.a, map: ls.a, "pano-360": us.a, "path-top": ds.a, "play-circle": ps.a, "play-pause": fs.a, sound: ms.a, vr: Es.a }, As = i(109), bs =/*#__PURE__*/i.n(As), Rs = function (e) { function t(e) { it()(this, t); var i = mt()(this, (t.__proto__ || ft()(t)).call(this)); return i._refs = e, i._circleRadius = 63, i._center = { x: 64, y: 64 }, i._progress = 0, i._buttons = i._refs.button, bs.a, i.setProgress(), i.setButtonPositions(), i } return At()(t, e), st()(t, [{ key: "gotoIndex", value: function (e) { var t = this, i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : .8; Ee.TweenLite.to(this, i, { _progress: 100 / this._buttons.length * e / 100, ease: Ee.Expo.easeOut, onUpdate: function () { return t.setProgress() } }) } }, { key: "setProgress", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this._progress; Ee.TweenLite.set(this._refs.progress, { drawSVG: 100 * e + "%" }) } }, { key: "setButtonPositions", value: function () { var e = this, t = 2 * Math.PI / this._buttons.length, i = 2 * Math.PI / 4; this._buttons.forEach(function (n, s) { var a = t * s + i, r = e._center.x + Math.cos(a) * e._circleRadius, o = e._center.y + Math.sin(a) * e._circleRadius; Ee.TweenLite.set(n, { x: r, y: o }) }) } }]), t }(Lt.a), ws = Rs, Is = i(65), Ps =/*#__PURE__*/i.n(Is), Ls = i(192), ks =/*#__PURE__*/i.n(Ls), Cs = function (e) {/**
       * Add an event listener on a HTML element.
       *
       * @param {NativeEventDispatcher} eventDispatcher the HTML element to listen to.
       * @param {string} type the type of event to listen to.
       * @param {EventListener} listener the method which is called when the eventDispatcher dispatches an event to the
       * specified type
       * @param {boolean} useCapture If true, useCapture indicates that the user wishes to initiate capture. After
       * initiating capture, all events of the specified type will be dispatched to the registered listener before being
       * dispatched to any EventTarget beneath it in the DOM tree. Events which are bubbling upward through the tree will
       * not trigger a listener designated to use capture.
       */
                                          function t(e, i, n, s) { it()(this, t); var a = mt()(this, (t.__proto__ || ft()(t)).call(this)); return a.eventDispatcher = e, a.type = i, a.listener = n, a.useCapture = s, a._isDestructed = !1, e.addEventListener(i, n, s), a }/**
       * Removes the event listener on the HTML element
       */
                                          return At()(t, e), st()(t, [{ key: "dispose", value: function () { this.eventDispatcher && this.type && this.listener && this.eventDispatcher.removeEventListener(this.type, this.listener, this.useCapture), this.eventDispatcher = null, this.type = null, this.listener = null, this._isDestructed = !0, Et()(t.prototype.__proto__ || ft()(t.prototype), "dispose", this).call(this) } }]), t
                                   }(ks.a), Ms = Cs, xs = function () {
                                          function e() { it()(this, e) } return st()(e, null, [{
                                                 key: "loadImage",/**
         * @public static
         * @method loadImage
         * @param source
         * @returns {Promise}
         */
                                                 value: function (e) {
                                                        return new ye.a(function (t, i) {
                                                               var n = new Image;
                                                               // Set to Anonymous to allow cross domain assets on canvas
                                                               // tmpImage.crossOrigin = 'Anonymous';
                                                               n.onload = function (e) { t(n) }, n.onerror = function (e) { i("Could not start image load; error processing image") }, n.src = e
                                                        })
                                                 }
                                          }, {
                                                 key: "loadImages", value: function (t) {
                                                        var i = 0, n = t.length, s = []; return new ye.a(function (a, r) {
                                                               t.forEach(function (t, r) {
                                                                      e.loadImage(t).then(function (e) {
                                                                             ++i, s.push({ image: e, index: r }), n == i && (
                                                                                    // Sort image in same order as they were sent.
                                                                                    s.sort(function (e, t) { return e.index - t.index }), a(s))
                                                                      }).catch(function (e) { return console.log("[Unable to load image", e) })
                                                               })
                                                        })
                                                 }
                                          }, { key: "loadScript", value: function (e) { return new ye.a(function (t) { var i = document.createElement("script"), n = !1; i.type = "text/javascript", i.src = e, i.onload = i.onreadystatechange = function () { n || this.readyState && "complete" !== this.readyState || (n = !0, t()) }; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(i, s) }) } }]), e
                                   }(), Os = xs, Ss = function () {
                                          function e(t, i, n) { var s = this; it()(this, e), this._element = t, this._canvas = i, this._innerCircleFactorSize = .15, this._innerCircleSize = 0, this._imageSizeFactor = .8, this._fillColor = "rgb(238, 140, 0)", this._size = { w: 0, h: 0 }, this._rotation = 0, this._isLoaded = !1, this._ctx = this._canvas.getContext("2d"), Os.loadImage(n).then(function (e) { s._image = e, s._isLoaded = !0, s.draw() }), this.handleResizeListener = new Ms(window, "resize", Ps()(this.handleResize.bind(this), 100)), this.handleResize() }/**
       * @public
       * @method changeRotation
       */
                                          return st()(e, [{ key: "changeRotation", value: function (e) { var t = this, i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : .5; this._rotateTween = Ee.TweenLite.to(this, i, { _rotation: e, ease: Ee.Expo.easeOut, onUpdate: function () { t.draw() } }) } }, { key: "setRotation", value: function (e) { this._rotation = e, this.draw() } }, {
                                                 key: "draw", value: function () {
                                                        if (this._isLoaded) {
                                                               this._ctx.clearRect(0, 0, this._size.w, this._size.h),
                                                               // Apply Image Normal Image
                                                               this._ctx.drawImage(this._image, this._size.w * (1 - this._imageSizeFactor) / 2, this._size.w * (1 - this._imageSizeFactor) / 2, this._size.w * this._imageSizeFactor, this._size.w * this._imageSizeFactor), this._ctx.save(), this._ctx.globalCompositeOperation = "source-atop",
                                                               // Apply filled orange Image
                                                               this._ctx.drawImage(this._image, this._size.w * (1 - this._imageSizeFactor) / 2, this._size.w * (1 - this._imageSizeFactor) / 2, this._size.w * this._imageSizeFactor, this._size.w * this._imageSizeFactor),
                                                               // Rotate rect
                                                               this._ctx.translate(this._size.w / 2, this._size.h / 2), this._ctx.rotate(this._rotation * (Math.PI / 180)),
                                                               // Draw Rect
                                                               this._ctx.fillStyle = this._fillColor, this._ctx.strokeStyle = this._fillColor, this._ctx.fillRect(-this._size.w / 2, this._innerCircleSize / 2, this._size.w, this._size.h), this._ctx.globalCompositeOperation = "source-over"; this.drawTriangle(-this._size.w / 2, this._innerCircleSize / 2, 6), this.drawTriangle(this._size.w / 2 - 6, this._innerCircleSize / 2, 6),
                                                                      // Draw line indicator
                                                                      this._ctx.beginPath(), this._ctx.moveTo(-this._size.w / 2, this._innerCircleSize / 2), this._ctx.lineTo(this._size.w / 2, this._innerCircleSize / 2), this._ctx.stroke(), this._ctx.closePath(), this._ctx.restore()
                                                        }
                                                 }
                                          }, { key: "drawTriangle", value: function (e, t, i) { this._ctx.beginPath(), this._ctx.moveTo(e, t), this._ctx.lineTo(e + i / 2, t + i), this._ctx.lineTo(e + i, t), this._ctx.fill(), this._ctx.closePath() } }, { key: "setSize", value: function () { this._size = { w: this._canvas.offsetWidth, h: this._canvas.offsetHeight } } }, { key: "setCanvasSize", value: function () { this._canvas.width = this._size.w, this._canvas.height = this._size.h } }, { key: "setInnerCircleSize", value: function () { this._innerCircleSize = this._size.w * this._innerCircleFactorSize } }, { key: "handleResize", value: function () { this.setSize(), this.setInnerCircleSize(), this.setCanvasSize(), this.draw() } }, { key: "dispose", value: function () { this.handleResizeListener && (this.handleResizeListener.dispose(), this.handleResizeListener = null), this._rotateTween && (this._rotateTween.kill(), this._rotateTween = null) } }]), e
                                   }(), Ds = Ss, Ns = {
                                          name: "CutSectionDragger", data: function () { return { isActive: !1, activeItem: 0, totalSections: 7, stepDelay: 3, stepStartDelay: 1 } }, mounted: function () { this.slider = new ws(this.$refs); var e = window.URL || window.webkitURL || window, t = new Blob([Ts.eyk], { type: "image/svg+xml" }), i = e.createObjectURL(t); this.cutSectionImage = new Ds(this.$refs.centerImage, this.$refs.canvas, i) }, methods: {
                                                 transitionIn: function () {
                                                        var e = this; this.isActive = !0, this.slider.gotoIndex(this.activeItem, 0), this.$nextTick(function () {
                                                               e.cutSectionImage.handleResize(), e.cutSectionImage.setRotation(360 / e.totalSections * e.activeItem),
                                                               // trigger user hint
                                                               e.onAnimationTrigger = e.onAnimationTrigger.bind(e), e.animateSlider = e.animateSlider.bind(e), e.animateSlider(e.activeItem + 1, e.stepStartDelay)
                                                        })
                                                 }, transitionOut: function () { this.isActive = !1, this.activeItem = 0 }, onButtonClick: function (e) { Ee.TweenMax.killTweensOf(this.onAnimationTrigger), Ee.TweenMax.killTweensOf(this.animateSlider), this.activeItem = e }, changeCutSection: function (e) { var t = 360 / this.totalSections * e; this.cutSectionImage.changeRotation(t) }, animateSlider: function (e) {
                                                        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
                                                        // swap to new index
                                                        Ee.TweenMax.delayedCall(t, this.onAnimationTrigger, [e]);
                                                        // swap again 4s later
                                                        var i = e + 1 > this.totalSections - 1 ? 0 : e + 1; Ee.TweenMax.delayedCall(t + this.stepDelay, this.animateSlider, [i, 0])
                                                 }, onAnimationTrigger: function (e) { this.activeItem = e }
                                          }, watch: { activeItem: function (e) { this.isActive && (this.slider.gotoIndex(e), this.changeCutSection(e), this.$emit("change", e)) } }, beforeDestroy: function () { Ee.TweenMax.killTweensOf(this.onAnimationTrigger), Ee.TweenMax.killTweensOf(this.animateSlider), this.slider && (this.slider.dispose(), this.slider = null), this.cutSectionImage && (this.cutSectionImage.dispose(), this.cutSectionImage = null), this.activeItem = 0 }
                                   }, Fs = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: e.$style.wrapper }, [i("svg", { class: e.$style.lines, attrs: { viewBox: "0 0 128 128" } }, [i("circle", { attrs: { cx: "64", cy: "64", r: "63", fill: "none", "stroke-width": "1.5", stroke: "#d8d3d1", "stroke-linecap": "round", "stroke-dasharray": "0.5 8" } }), e._v(" "), i("circle", { ref: "progress", class: e.$style.progress, attrs: { cx: "64", cy: "64", r: "63", fill: "none", "stroke-width": "2" } })]), e._v(" "), i("div", { ref: "centerImage", staticClass: "canvas-wrapper abs-fill", class: e.$style.centerImage }, [i("canvas", { ref: "canvas", staticClass: "js-canvas abs-fill" })]), e._v(" "), e._l(new Array(e.totalSections), function (t, n) { return i("button", { key: n, ref: "button", refInFor: !0, class: [e.$style.button, n <= e.activeItem ? e.$style.isActive : null], on: { click: function (t) { e.onButtonClick(n) } } }) })], 2) }, Vs = [], Bs = { render: Fs, staticRenderFns: Vs }, Us = Bs, Hs = i(5), Gs = _, $s = Hs(Ns, Us, Gs, null, null), zs = $s.exports, Ws = zs, Ks = function e() { it()(this, e) }, Ys = Ks; Ks.VIDEO = "video", Ks.VIDEO_JUMP = "video-jump", Ks.GALLERY = "gallery", Ks.COMPARE = "compare", Ks.CUT_SECTION = "cutsection", Ks.RECONSTRUCTION = "reconstruction", Ks.AUDIO_FRAGMENT = "audio", Ks.NEXT = "next";
                     // CONCATENATED MODULE: ./src/lib/webgl/utils/input/Key.ts
                     /**
                      * Created by johan on 2-10-2015.
                      */
                     var Xs = function e() { it()(this, e) }; Xs.BACKSPACE = 8, Xs.TAB = 9, Xs.ENTER = 13, Xs.SHIFT = 16, Xs.CTRL = 17, Xs.ALT = 18, Xs.PAUSE = 19, Xs.CAPS_LOCK = 20, Xs.ESCAPE = 27, Xs.SPACE = 32, Xs.PAGE_UP = 33, Xs.PAGE_DOWN = 34, Xs.END = 35, Xs.HOME = 36, Xs.LEFT_ARROW = 37, Xs.UP_ARROW = 38, Xs.RIGHT_ARROW = 39, Xs.DOWN_ARROW = 40, Xs.INSERT = 45, Xs.DELETE = 46, Xs.KEY_0 = 48, Xs.KEY_1 = 49, Xs.KEY_2 = 50, Xs.KEY_3 = 51, Xs.KEY_4 = 52, Xs.KEY_5 = 53, Xs.KEY_6 = 54, Xs.KEY_7 = 55, Xs.KEY_8 = 56, Xs.KEY_9 = 57, Xs.KEY_A = 65, Xs.KEY_B = 66, Xs.KEY_C = 67, Xs.KEY_D = 68, Xs.KEY_E = 69, Xs.KEY_F = 70, Xs.KEY_G = 71, Xs.KEY_H = 72, Xs.KEY_I = 73, Xs.KEY_J = 74, Xs.KEY_K = 75, Xs.KEY_L = 76, Xs.KEY_M = 77, Xs.KEY_N = 78, Xs.KEY_O = 79, Xs.KEY_P = 80, Xs.KEY_Q = 81, Xs.KEY_R = 82, Xs.KEY_S = 83, Xs.KEY_T = 84, Xs.KEY_U = 85, Xs.KEY_V = 86, Xs.KEY_W = 87, Xs.KEY_X = 88, Xs.KEY_Y = 89, Xs.KEY_Z = 90, Xs.LEFT_META = 91, Xs.RIGHT_META = 92, Xs.SELECT = 93, Xs.NUMPAD_0 = 96, Xs.NUMPAD_1 = 97, Xs.NUMPAD_2 = 98, Xs.NUMPAD_3 = 99, Xs.NUMPAD_4 = 100, Xs.NUMPAD_5 = 101, Xs.NUMPAD_6 = 102, Xs.NUMPAD_7 = 103, Xs.NUMPAD_8 = 104, Xs.NUMPAD_9 = 105, Xs.MULTIPLY = 106, Xs.ADD = 107, Xs.SUBTRACT = 109, Xs.DECIMAL = 110, Xs.DIVIDE = 111, Xs.F1 = 112, Xs.F2 = 113, Xs.F3 = 114, Xs.F4 = 115, Xs.F5 = 116, Xs.F6 = 117, Xs.F7 = 118, Xs.F8 = 119, Xs.F9 = 120, Xs.F10 = 121, Xs.F11 = 122, Xs.F12 = 123, Xs.NUM_LOCK = 144, Xs.SCROLL_LOCK = 145, Xs.SEMICOLON = 186, Xs.EQUALS = 187, Xs.COMMA = 188, Xs.DASH = 189, Xs.PERIOD = 190, Xs.FORWARD_SLASH = 191, Xs.GRAVE_ACCENT = 192, Xs.OPEN_BRACKET = 219, Xs.BACK_SLASH = 220, Xs.CLOSE_BRACKET = 221, Xs.SINGLE_QUOTE = 222;/* harmony default export */
                     var js = Xs, qs = {
                            name: "InformationOverlay", props: { id: ne.a.string }, data: function () { return { isOpen: !1, images: [], videoId: null, title: "", description: "", type: null, hotspotTypes: Ys, currentImage: 0, ytVolume: 0 } }, computed: _t()({}, Object(pt.c)("application", ["volume"]), { isMobileVersion: function () { return ct }, isVideoActive: function () { return "video" === this.type || "video-jump" === this.type } }), watch: { volume: function (e) { this.player && (0 === e ? this.player.mute() : this.player.unMute()) }, ytVolume: function (e) { e !== this.volume && this.$store.commit(Di.UPDATE_VOLUME, e) } }, methods: {
                                   addKeyEvents: function () { this.hasKeyEvents = !0, window.addEventListener("keyup", this.handleKeyUp) }, show: function () { var e = this, t = this.$experience.getHotspotById(this.id); ct || (t.type !== Ys.CUT_SECTION ? this.$store.commit(Di.SET_WEBGL_PLAYSTATE, !1) : this.$store.commit(Di.SET_WEBGL_OVERLAY_SIZE, !0)), Ee.TweenLite.set(this.$el, { autoAlpha: 0 }), this.isOpen = !0, this.$refs.closeButton.transitionIn(), this.$nextTick(function () { return e.init(t) }), this.hasKeyEvents || this.addKeyEvents() }, hide: function () { ct || (this.$store.commit(Di.SET_WEBGL_PLAYSTATE, !0), this.$store.commit(Di.SET_WEBGL_OVERLAY_SIZE, !1), this.$webgl.disableEYKHotspot()), this.isOpen = !1, this.player && (this.player.stopVideo(), this.stopCheckVolume()), this.$emit("stopVoiceOver"), this.$refs.closeButton.transitionOut(), this.clearOverlay(), this.$emit("closeOverlay") }, onCloseClick: function () { this.hide() }, onEnter: function () { this.$refs.previousButton && this.$refs.previousButton.transitionIn(), this.$refs.nextButton && this.$refs.nextButton.transitionIn() }, init: function (e) {
                                          switch (this.type = e.type, this.title = e.title || "", this.description = ct && e.mobile && e.mobile.description ? e.mobile.description : e.description || "", this.audioFile = e.audioFile || "", e.type) {
                                                 case Ys.VIDEO: case Ys.VIDEO_JUMP: this.videoId = e.videoId, this.initVideoPlayer(); break; case Ys.GALLERY: this.setImageData(e.images); break; case Ys.COMPARE: this.setImageData(e.images), this.$refs.imageCompare.transitionIn();
                                                        // this.startVoiceOver();
                                                        break; case Ys.CUT_SECTION: this.$emit("hideMask"), this.$refs.cutSection && this.$refs.cutSection.transitionIn(), this.$webgl.enableEYKClippingPlaneHotspot(0, !1), this.startVoiceOver(); break; default:
                                                        // eslint-disable-next-line no-console
                                                        console.error("couldn't find an item with this id: " + this.id)
                                          }Ee.TweenLite.to(this.$el, 0, { autoAlpha: 1, delay: 0, ease: Ee.Linear.easeNone, clearProps: "autoAlpha" })
                                   }, startVoiceOver: function () { this.audioFile && this.$emit("startVoiceOver", this.audioFile) }, initVideoPlayer: function () {
                                          var e = this; if (this.checkYTVolume = this.checkYTVolume.bind(this), this.player) this.player.loadVideoById(this.videoId); else {
                                                 var t = this.getRandomId(); this.$refs.player.id = t, sn.ready.then(function () {
                                                        // eslint-disable-next-line
                                                        e.player = new YT.Player(t, { height: "1280", width: "720", videoId: e.videoId, playerVars: { showinfo: 0, rel: 0, modestbranding: 1 }, events: { onStateChange: e.onPlayerStateChange } })
                                                 })
                                          }
                                   }, onPlayerStateChange: function (e) {
                                          this.stopCheckVolume(), 1 === e.data ? (
                                                 // update youtube volume
                                                 this.ytVolume = this.volume, 0 === this.volume ? this.player.mute() : this.player.unMute(), this.checkYTVolume(), this.$tracker.push(se.VIDEO, { action: "play", label: "YouTube | " + this.player.getVideoData().title })) : 2 === e.data ? this.$tracker.push(se.VIDEO, { action: "pause", label: "YouTube | " + this.player.getVideoData().title }) : 0 === e.data && this.$tracker.push(se.VIDEO, { action: "complete", label: "YouTube | " + this.player.getVideoData().title })
                                   }, checkYTVolume: function () { this.ytVolume = this.player.isMuted() ? 0 : 1, Ee.TweenMax.delayedCall(.5, this.checkYTVolume) }, stopCheckVolume: function () { Ee.TweenMax.killTweensOf(this.checkYTVolume) }, setImageData: function (e) { var t = this; this.images = e.map(function (e) { return _t()({}, e, { src: t.$versionRoot + e.src }) }) }, onPreviousClick: function () { this.currentImage = (this.currentImage + this.images.length - 1) % this.images.length }, onNextClick: function () { this.currentImage = (this.currentImage + 1) % this.images.length }, onCutSectionChange: function (e) { this.$webgl.enableEYKClippingPlaneHotspot(e) }, clearOverlay: function () { this.$refs.imageCompare.transitionOut(), this.$refs.cutSection && this.$refs.cutSection.transitionOut(), this.currentImage = 0, this.images.length = 0, this.videoId = null, this.title = "", this.description = "" }, getRandomId: function () { return Math.random().toString(36).slice(2) }, handleKeyUp: function (e) { if (this.isOpen) switch (e.keyCode) { case js.ESCAPE: this.onCloseClick(); break; case js.LEFT_ARROW: this.type === Ys.GALLERY && this.onPreviousClick(); break; case js.RIGHT_ARROW: this.type === Ys.GALLERY && this.onNextClick() } }
                            }, beforeDestroy: function () { window.removeEventListener("keyup", this.handleKeyUp), this.$emit("stopVoiceOver") }, components: { ImageGallery: pn, ImageCompare: In, CutSectionDragger: Ws }
                     }, Zs = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("section", { class: [e.isMobileVersion && e.isOpen ? "mobile-overlay-open" : null, e.$style.overlay, e.isOpen ? e.$style.isOpen : null, e.type === e.hotspotTypes.CUT_SECTION ? e.$style.isCutSection : null] }, [i("div", { class: [e.$style.gallery] }, [i("div", { class: [e.$style.playerWrapper, e.isVideoActive ? e.$style.isActive : null] }, [i("div", { ref: "player", class: e.$style.player })]), e._v(" "), i("ImageGallery", { directives: [{ name: "show", rawName: "v-show", value: e.type === e.hotspotTypes.GALLERY, expression: "type === hotspotTypes.GALLERY" }], attrs: { images: e.images, current: e.currentImage } }), e._v(" "), i("ImageCompare", { directives: [{ name: "show", rawName: "v-show", value: e.type === e.hotspotTypes.COMPARE, expression: "type === hotspotTypes.COMPARE" }], ref: "imageCompare", attrs: { images: e.images } })], 1), e._v(" "), i("div", { directives: [{ name: "show", rawName: "v-show", value: e.title.length > 0, expression: "title.length > 0" }], class: e.$style.content }, [i("header", { class: e.$style.header }, [i("h2", { class: ["heading-02", e.$style.title] }, [e._v("\n\t\t\t\t" + e._s(e.title) + "\n\t\t\t")])]), e._v(" "), i("div", { class: e.$style.copy }, [i("p", { staticClass: "copy-02" }, [e._v(e._s(e.description))])]), e._v(" "), i("transition", { on: { enter: e.onEnter } }, [e.images.length > 1 ? i("ul", { class: e.$style.navigation }, [i("li", [i("CircleButton", { ref: "previousButton", class: e.$style.navigationButton, attrs: { hasHover: !e.isMobileVersion, icon: "arrow-left" }, on: { click: e.onPreviousClick } })], 1), e._v(" "), i("li", [i("CircleButton", { ref: "nextButton", class: e.$style.navigationButton, attrs: { hasHover: !e.isMobileVersion, icon: "arrow-right" }, on: { click: e.onNextClick } })], 1)]) : e._e()]), e._v(" "), e.isMobileVersion ? e._e() : i("CutSectionDragger", { directives: [{ name: "show", rawName: "v-show", value: e.type === e.hotspotTypes.CUT_SECTION, expression: "type === hotspotTypes.CUT_SECTION" }], ref: "cutSection", on: { change: e.onCutSectionChange } })], 1), e._v(" "), i("CircleButton", { ref: "closeButton", class: [e.$style.button, e.$style.close], attrs: { icon: "cross", inverted: !0 }, on: { click: e.onCloseClick } })], 1) }, Qs = [], Js = { render: Zs, staticRenderFns: Qs }, ea = Js, ta = i(5), ia = p, na = ta(qs, ea, ia, null, null), sa = na.exports, aa = sa, ra = function () {
                            function e(t) { it()(this, e), this.viewModel = t, this.setupMouseHoverTimeline() }/**
       * @public
       * @method onMouseEnter
       */
                            return st()(e, [{ key: "onMouseEnter", value: function () { var e = this; return new ye.a(function (t) { e._mouseEnterResolveMethod = t, e._mouseHoverTimeline.play() }) } }, { key: "onMouseLeave", value: function () { this._mouseHoverTimeline.reverse() } }, { key: "setupMouseHoverTimeline", value: function () { var e = this; this._mouseHoverTimeline = new Ee.TimelineLite({ paused: !0, onComplete: function () { e._mouseEnterResolveMethod && (e._mouseEnterResolveMethod(), e._mouseEnterResolveMethod = null) } }), this._mouseHoverTimeline.fromTo(this.viewModel.$refs.bg, .4, { right: "100%" }, { right: 0, ease: Ee.Expo.easeOut }), this._mouseHoverTimeline.fromTo(this.viewModel.$refs.text, .4, { opacity: 0 }, { opacity: 1 }, "-=0.2") } }, { key: "dispose", value: function () { this._mouseHoverTimeline && (this._mouseHoverTimeline.kill(), this._mouseHoverTimeline = null) } }]), e
                     }(), oa = ra, la = {
                            name: "ExperienceHotspot", props: { id: ne.a.string.isRequired, index: ne.a.number }, data: function () { return { isVisible: !1, hasMouseHover: !1 } }, computed: { hotspotData: function () { return this.$experience.getHotspotById(this.id) }, icon: function () { if (this.hotspotData) switch (this.hotspotData.type) { case Ys.VIDEO: return "hotspot-video"; case Ys.VIDEO_JUMP: return "hotspot-video-jump"; case Ys.GALLERY: return this.hotspotData.images.length > 1 ? "hotspot-image-gallery" : "hotspot-image"; case Ys.COMPARE: return "hotspot-compare"; case Ys.NEXT: return "hotspot-inside"; case Ys.CUT_SECTION: return "hotspot-slices"; case Ys.RECONSTRUCTION: return "hotspot-compare-building"; case Ys.AUDIO_FRAGMENT: return "sound"; default: return "hotspot-image" }return "hotspot-image" } }, mounted: function () { this.transitionController = new oa(this), this.$emit("hotspotReady", this.id, this, this.index) }, methods: {
                                   setPosition: function (e) {
                                          if (ct) Ee.TweenLite.set(this.$el, { x: this.$el.parentNode.offsetWidth * e.x, y: this.$el.parentNode.offsetHeight * e.y }), this.isVisible !== e.visible && this.setVisibility(e.visible); else if (e.visible) {
                                                 // const scale = Math.max(60, Math.min(100 / data.z, 100)) / 100;
                                                 var t = (100 - Math.max(0, Math.min(60, 2 * e.z))) / 100; this.hasMouseHover ? (Ee.TweenLite.set(this.$el, { x: window.innerWidth * e.x, y: window.innerHeight * e.y, zIndex: Math.max(0, Math.round(100 - e.z)) }), Ee.TweenLite.to(this.$el, .2, { scale: Math.max(t, .7) })) : (Ee.TweenLite.set(this.$el, { x: window.innerWidth * e.x, y: window.innerHeight * e.y, zIndex: Math.max(0, Math.round(100 - e.z)) }), Ee.TweenLite.to(this.$el, .1, { scale: t })), this.setVisibility(!0)
                                          } else this.setVisibility(!1)
                                   }, setVisibility: function (e) { this.isVisible = e }, handleClick: function () { if (this.hotspotData.type === Ys.NEXT) return void this.$webgl.gotoNextLocation(); this.$emit("hotspotClick", this.id) }, handleMouseLeave: function () { this.hasMouseHover = !1, this.transitionController.onMouseLeave() }, handleMouseEnter: function () { this.hasMouseHover = !0, this.transitionController.onMouseEnter() }
                            }, beforeDestroy: function () { this.hasMouseHover = !1, this.transitionController && (this.transitionController.dispose(), this.transitionController = null) }
                     }, ha = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: [e.$style.hotspot, e.isVisible ? null : e.$style.isInactive, e.hotspotData.order ? e.$style.hasOrder : null, e.hotspotData.hotspot.primary ? e.$style.primary : null], on: { click: e.handleClick, mouseenter: e.handleMouseEnter, mouseleave: e.handleMouseLeave } }, [i("span", { ref: "primaryBg", class: e.$style.primaryBg }), e._v(" "), e.hotspotData.order ? i("span", { staticClass: "copy-02", class: e.$style.order }, [e._v(e._s(e.hotspotData.order))]) : e._e(), e._v(" "), i("Icon", { class: [e.$style.icon, "icon-" + e.hotspotData.type, e.icon], attrs: { name: e.icon } }), e._v(" "), i("p", { ref: "label", class: e.$style.label }, [i("span", { ref: "bg", class: e.$style.bg }), e._v(" "), i("span", { ref: "text", class: e.$style.labelText }, [e._v(e._s(e.hotspotData.hotspot.title))])])], 1) }, ua = [], ca = { render: ha, staticRenderFns: ua }, da = ca, _a = i(5), pa = v, va = _a(la, da, pa, null, null), fa = va.exports, ga = fa, ma = i(189), ya =/*#__PURE__*/i.n(ma), Ea = function (e) { function t(e, i, n, s, a) { it()(this, t); var r = mt()(this, (t.__proto__ || ft()(t)).call(this, e, n, s, a)); return r.data = i, r } return At()(t, e), st()(t, [{ key: "clone", value: function () { return new t(this.type, this.data, this.bubbles, this.cancelable) } }]), t }(Vi.a); Ea.CHANGED = "HotspotIconEvent.CHANGED";/* harmony default export */
                     var Ta, Aa = Ea, ba = { name: "TempleHotspotMap", props: { isVisible: ne.a.bool.isRequired, image: ne.a.string }, data: function () { return { cameraHotspotId: "CAMERA", currentHotspotLocation: "", hotspots: [] } }, methods: { activate: function () { this.$webgl.addHotspotEvent(Aa.CHANGED, this.handleHotspotChange) }, deactivate: function () { this.$webgl.removeHotspotEvent(Aa.CHANGED, this.handleHotspotChange), this.hotspots = [], this.currentHotspotLocation = "" }, onHotspotClick: function (e) { this.$emit("hotspotClick", e) }, handleHotspotChange: function (e) { var t = this; this.currentHotspotLocation !== e.data.location && (this.currentHotspotLocation = e.data.location, this.hotspotIds = ee()(e.data.data).filter(function (e) { return e === t.cameraHotspotId || t.$experience.hasHotspotId(e) }), this.hotspots = this.hotspotIds.map(function (t) { return _t()({}, e.data.data[t], { id: t }) }), this.hotspots.forEach(function (e) { var i = t.$experience.getHotspotById(e.id); i && i.order && ya()(e, { order: i.order }) })), this.$refs.hotspot && this.$refs.hotspot.forEach(function (i, n) { t.hotspotIds[n] && e.data.data[t.hotspotIds[n]] && (Ee.TweenLite.set(i, { left: 100 * e.data.data[t.hotspotIds[n]].mapX + "%", top: 100 * e.data.data[t.hotspotIds[n]].mapY + "%", rotation: e.data.data[t.hotspotIds[n]].mapRot || 0 }), i.setAttribute("data-visible", e.data.data[t.hotspotIds[n]].visible)) }) }, transitionIn: function () { Ee.TweenLite.fromTo(this.$el, .5, { autoAlpha: 0, x: 25 }, { autoAlpha: 1, x: 0, ease: Ee.Expo.easeOut }) }, transitionOut: function () { Ee.TweenLite.to(this.$el, .3, { autoAlpha: 0 }) } }, watch: { isVisible: function (e) { e ? this.activate() : this.deactivate() } }, beforeDestroy: function () { this.deactivate() } }, Ra = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: [e.$style.map, "AOK_INSIDE" === e.currentHotspotLocation ? e.$style.templeAok : null] }, [e.image ? i("img", { attrs: { src: e.$versionRoot + e.image } }) : e._e(), e._v(" "), e._l(e.hotspots, function (t, n) { return i("span", { key: n, ref: "hotspot", refInFor: !0, class: [e.$style.hotspot, t.id === e.cameraHotspotId ? e.$style.cameraHotspot : null, t.order ? e.$style.hasOrder : null], on: { click: function (i) { e.onHotspotClick(t.id) } } }, [t.order ? i("span", { staticClass: "copy-02", class: e.$style.order }, [e._v(e._s(t.order))]) : e._e(), e._v(" "), t.id === e.cameraHotspotId ? i("Icon", { class: e.$style.direction, attrs: { name: "map-direction" } }) : e._e()], 1) })], 2) }, wa = [], Ia = { render: Ra, staticRenderFns: wa }, Pa = Ia, La = i(5), ka = f, Ca = La(ba, Pa, ka, null, null), Ma = Ca.exports, xa = Ma, Oa = { name: "TempleInfo", props: { darkTheme: ne.a.bool.def(!1) }, computed: _t()({}, Object(pt.c)("application", ["webglFlowLocation"]), { content: function () { if (this.webglFlowLocation) { var e = this.$experience.getPathItemsByLocationId(this.webglFlowLocation).find(function (e) { return e.type === Pi.INFO }); if (e) return e } return null } }), watch: { content: function (e, t) { var i = this; e && !t ? (this.bindedContent = e, this.$nextTick(this.transitionIn)) : e ? this.transitionOut(function () { i.bindedContent = e, i.$nextTick(i.transitionIn) }) : this.transitionOut(function () { i.bindedContent = e }) } }, data: function () { return { isVisible: !1, bindedContent: {} } }, methods: { onHotspotClick: function (e) { this.$emit("hotspotClick", e) }, transitionIn: function () { this.$refs.map.transitionIn(), Ee.TweenMax.staggerFromTo([this.$refs.title, this.$refs.description], 1, { alpha: 0, y: 25 }, { alpha: 1, y: 0, delay: .25, ease: Ee.Expo.easeOut }, .15) }, transitionOut: function (e) { this.$refs.map.transitionOut(), Ee.TweenMax.to([this.$refs.title, this.$refs.description], .3, { alpha: 0, onComplete: function () { e() } }) } }, components: { TempleHotspotMap: xa } }, Sa = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: [e.$style.templeInfo, e.bindedContent ? e.$style.isVisible : null, e.darkTheme ? e.$style.dark : null] }, [i("TempleHotspotMap", { ref: "map", attrs: { isVisible: !(!e.bindedContent || !e.bindedContent.map), image: e.bindedContent ? e.bindedContent.map : null }, on: { hotspotClick: e.onHotspotClick } }), e._v(" "), e.bindedContent ? i("div", { class: e.$style.templeInfoContent }, [i("h2", { ref: "title", class: ["heading-02", e.$style.title] }, [e._v(e._s(e.bindedContent.title))]), e._v(" "), i("p", { ref: "description", staticClass: "copy-02" }, [e._v(e._s(e.bindedContent.description))])]) : e._e()], 1) }, Da = [], Na = { render: Sa, staticRenderFns: Da }, Fa = Na, Va = i(5), Ba = g, Ua = Va(Oa, Fa, Ba, null, null), Ha = Ua.exports, Ga = Ha, $a = { name: "TempleInstruction", computed: _t()({}, Object(pt.c)("application", ["experienceUiVisible", "webglFlowLocation"])), watch: { webglFlowLocation: function (e) { var t = this; switch (e) { case Mi.KMG_INSIDE: case Mi.AOK_INSIDE: this.isVisible = !0; break; case Mi.EYK_INSIDE: Ee.TweenLite.delayedCall(2, function () { t.isVisible = !0 }); break; default: this.isVisible = !1 } }, isVisible: function (e, t) { var i = this; t !== e && (e ? (this.isDisplayed = !0, this.transitionIn().then(function () { i.handleDisappear() })) : this.transitionOut().then(function () { i.isDisplayed = !1 })) } }, data: function () { return { isVisible: !1, isDisplayed: !1 } }, methods: { handleDisappear: function () { this.checkKeysPress(), this.checkTimeOut() }, checkTimeOut: function () { var e = this; Ee.TweenLite.delayedCall(4, function () { e.isVisible = !1 }) }, checkKeysPress: function () { var e = this; document.addEventListener("keydown", function () { e.isVisible = !1 }) }, transitionIn: function () { var e = this; return new ye.a(function (t) { Ee.TweenLite.to(e.$refs.wrapper, 1, { autoAlpha: 1, onComplete: function () { return t() } }) }) }, transitionOut: function () { var e = this; return new ye.a(function (t) { Ee.TweenLite.to(e.$refs.wrapper, 1, { autoAlpha: 0, onComplete: function () { return t() } }) }) } } }, za = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { ref: "wrapper", class: [e.$style.wrapper, e.isDisplayed ? e.$style.isVisible : null] }, [i("div", { class: e.$style.instruction }, [i("div", { class: e.$style.icon }, [i("div", { class: e.$style.keyLine }, [i("span", { class: [e.$style.key, e.$style.up, e.$style.isActive] })]), e._v(" "), i("div", { class: e.$style.keyLine }, [i("span", { class: [e.$style.key, e.$style.left, e.$style.isActive] }), e._v(" "), i("span", { class: [e.$style.key, e.$style.down, e.$style.isActive] }), e._v(" "), i("span", { class: [e.$style.key, e.$style.right, e.$style.isActive] })])]), e._v(" "), i("p", { staticClass: "copy-02" }, [e._v("Use the arrow keys to walk around the temple")])])]) }, Wa = [], Ka = { render: za, staticRenderFns: Wa }, Ya = Ka, Xa = i(5), ja = m, qa = Xa($a, Ya, ja, null, null), Za = qa.exports, Qa = Za, Ja = { namespaced: !0, state: { isScrollActive: !1, isNavigationInverted: !1, currentDetailView: null, mapLocation: 1e-4, isVrActive: !1, useGyroscope: !0 }, getters: {}, mutations: (Ta = {}, It()(Ta, "setScrollActive", function (e, t) { e.isScrollActive = t }), It()(Ta, "setNavigationInverted", function (e, t) { e.isNavigationInverted = t }), It()(Ta, "setCurrentDetailView", function (e, t) { e.currentDetailView = t }), It()(Ta, "setMapLocation", function (e, t) { e.mapLocation = t }), It()(Ta, "setUseGyroscope", function (e, t) { e.useGyroscope = t }), Ta), actions: {} }, er = { SET_SCROLL_ACTIVE: "mobile/setScrollActive", SET_NAVIGATION_INVERTED: "mobile/setNavigationInverted", SET_CURRENT_DETAIL_VIEW: "mobile/setCurrentDetailView", SET_MAP_LOCATION: "mobile/setMapLocation", SET_USE_GYROSCOPE: "mobile/setUseGyroscope" }, tr = Ja, ir = i(200), nr =/*#__PURE__*/i.n(ir), sr = {
                            name: "MapOverlay", data: function () { return { isMobileVersion: ct, maskHeight: 200, currentProgress: 0, hotspots: this.$experience.keypoints } }, computed: _t()({}, Object(pt.c)("application", ["isMapOverlayVisible", "webglFlowLocation"]), Object(pt.c)("mobile", { mobileMapLocation: function (e) { return e.mapLocation } }), { icons: function () { return this.hotspots.map(function (e) { var t = ""; switch (e.id) { case "START": t = null; break; case "AOK": case "KMG": case "EYK": t = "hotspot-compare-building"; break; case "END": t = "play-pause"; break; default: t = null }return t }) } }), mounted: function () {
                                   // eslint-disable-next-line
                                   bs.a,
                                          // eslint-disable-next-line
                                          nr.a, this.currentProgress = 0, this.$store.commit(Di.SET_HAS_MAP_OVERLAY, !0), this.debouncedResize = Ps()(this.handleResize, 150), window.addEventListener("resize", this.debouncedResize), Ee.TweenLite.set(this.$el, { y: window.innerHeight + this.maskHeight })
                            }, methods: { handleResize: function () { var e = window.innerHeight >= window.innerWidth; this.isOpen ? (this.setMobileMapWidth(), this.setPathProgress(this.getCurrentPathProgress(), 0), this.setHotspotPositions()) : !e && ct || this.setMapY() }, onHotspotClick: function (e) { var t = this, i = this.webglFlowLocation, n = e.pathId; Object.prototype.hasOwnProperty.call(e, "pathLocations") && (n = e.pathLocations[0]), n !== Mi.PATH_INTRO_TO_AOK && this.$store.commit(Di.SET_CONTENT_VISIBILITY, !1); this.isMobileVersion ? (this.setPathProgress(e.mobileLocation, 2), Ee.TweenLite.delayedCall(2 * Math.abs(e.mobileLocation - this.currentProgress), function () { t.$emit("mobileTempleClick", e), t.onCloseClick() })) : (this.setPathProgress(e.location, 2), Ee.TweenLite.delayedCall(2 * Math.abs(e.location - this.currentProgress) + .5, function () { t.$webgl.instantJumpToLocation(n), t.$emit("jumpToLocation", n, i), t.onCloseClick() })) }, transitionIn: function () { var e = this; this.setMapY(), this.isOpen = !0, this.$nextTick(function () { e.setMobileMapWidth(), e.setPathProgress(e.getCurrentPathProgress(), 0), e.setHotspotPositions(), Ee.TweenLite.to(e.$el, .7, { y: 0, ease: Ee.Expo.easeOut, onComplete: function () { e.$refs.closeButton.transitionIn() } }) }) }, transitionOut: function () { var e = this; this.$refs.closeButton.transitionOut(), Ee.TweenLite.to(this.$el, .3, { y: window.innerHeight + this.maskHeight, ease: Ee.Power2.easeIn, onComplete: function () { e.isOpen = !1 } }) }, setMapY: function () { Ee.TweenLite.set(this.$el, { y: window.innerHeight + this.maskHeight }) }, onCloseClick: function () { this.$store.commit(Di.SET_MAP_OVERLAY_VISIBILITY, !1) }, setPathProgress: function (e) { var t = this, i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = this.getPathPoints(); 0 === i ? (this.currentProgress = e, this.drawCurrentProgress(n)) : Ee.TweenLite.to(this, i * Math.abs(e - this.currentProgress), { currentProgress: e, ease: Ee.Expo.easeInOut, onUpdate: function () { t.drawCurrentProgress(n) } }) }, drawCurrentProgress: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.getPathPoints(); Ee.TweenLite.set(this.$refs.progressPath, { drawSVG: 100 * this.currentProgress + "%" }), this.drawElementOnPath(this.$refs.progress, this.currentProgress, !0, e) }, drawElementOnPath: function (e, t, i, n) { var s = new Ee.TimelineLite({ paused: !0 }); s.to(e, 1, { bezier: { type: "cubic", values: n, autoRotate: i }, ease: Ee.Linear.easeNone }), s.progress(t) }, setHotspotPositions: function () { var e = this, t = this.getPathPoints(); this.$refs.hotspot.forEach(function (i) { var n = e.$experience.getKeypointById(i.getAttribute("data-id")); e.drawElementOnPath(i, e.getHotspotLocation(n), !1, t) }) }, getPathPoints: function () { var e = this.$refs.followPath, t = e.getAttribute("d"), i = nr.a.pathDataToBezier(t), n = this.getMapScale(); return i.map(function (e) { return { x: e.x * n, y: e.y * n } }) }, getMapScale: function () { return this.isMobileVersion ? this.$refs.mapWrapper.offsetHeight / 1121 : this.$refs.mapWrapper.offsetWidth / 1440 }, setMobileMapWidth: function () { this.isMobileVersion && Ee.TweenLite.set(this.$refs.mapWrapper, { width: this.$refs.mapWrapper.offsetHeight * (749 / 1121) }) }, getLabelPosition: function (e) { return this.isMobileVersion && e.mobileLabelPosition ? e.mobileLabelPosition : e.labelPosition }, getHotspotLocation: function (e) { return this.isMobileVersion && e.mobileLocation ? e.mobileLocation : e.location }, getCurrentPathProgress: function () { if (ct) return this.mobileMapLocation; var e = this.$webgl.getFlowState(), t = void 0; switch (e.type) { case xi.TEMPLE_ORBIT: case xi.TEMPLE_INSIDE: return t = this.$experience.getKeypointByPathLocation(e.location), t ? t.location : null; case xi.CAMERA_PATH: return this.$experience.getProgressBetweenKeypoints(e.location, e.progress); case xi.INTRO_EFFECT: default: return 1e-4 } } }, watch: {
                                   isMapOverlayVisible: function (e) {
                                          // if (!this.isMobileVersion) {
                                          //   this.$store.commit(ApplicationMutationTypes.SET_WEBGL_PLAYSTATE, !visible);
                                          //   this.$store.commit(ApplicationMutationTypes.SET_EXPERIENCE_UI_VISIBILITY, !visible);
                                          // }
                                          e ? this.transitionIn() : (this.transitionOut(), this.$emit("onClose")), this.$tracker.push(se.MAP, { action: e ? "open" : "close", label: ct ? "mobile" : this.webglFlowLocation })
                                   }
                            }, beforeDestroy: function () { this.$store.commit(Di.SET_HAS_MAP_OVERLAY, !1), window.removeEventListener("resize", this.debouncedResize) }
                     }, ar = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: [e.$style.mapOverlay, e.isMapOverlayVisible ? e.$style.isOpen : null] }, [i("div", { ref: "mapWrapper", class: e.$style.mapRatio }, [e.isMobileVersion ? i("svg", { class: e.$style.pathSvg, attrs: { viewBox: "0 0 749 1121" } }, [i("path", { ref: "followPath", attrs: { d: "M385.14,123.44s-164,3.89-140,83.37,280.14,51.49,260,115.07-190.67-2-206,93.37,145.44,79.38,188.68,145.36c42,64-28.16,90-60.5,73.19-107.27-55.63-116.87,86.48,4.61,133.25,88.63,34.12-46.79,230.51-46.79,230.51", fill: "none", "fill-rule": "evenodd" } }), e._v(" "), i("path", { ref: "progressPath", class: e.$style.progressPath, attrs: { d: "M385.14,123.44s-164,3.89-140,83.37,280.14,51.49,260,115.07-190.67-2-206,93.37,145.44,79.38,188.68,145.36c42,64-28.16,90-60.5,73.19-107.27-55.63-116.87,86.48,4.61,133.25,88.63,34.12-46.79,230.51-46.79,230.51", fill: "none", "fill-rule": "evenodd" } })]) : e._e(), e._v(" "), e.isMobileVersion ? e._e() : i("svg", { class: e.$style.pathSvg, attrs: { viewBox: "0 0 1440 880" } }, [i("path", { ref: "followPath", attrs: { d: "M120.1,608.6c0.4,0.4,79.8-36.1,104.4-48.8c50.5-26.1,88-18.7,121.1,18.9\nc34.4,39.1,89.6,27.2,110.6,14.6c35.8-21.5,42.2-52.8,39.8-84c-1.8-23.1,0.9-42.6,22-63.8c19.9-19.9,63.2-27.5,93.8-4.8\nc26.5,19.6,37.2,56.6,40,86.6c2,22.3,4.1,50.2,25.9,62.8c31.7,18.2,70.3,5.2,83.8-39.5c12.8-42.3,30-73.5,74.5-71.2\nc36.8,0,63.8,35.2,64.7,84.6c1.9,97.8,40.8,127.1,98.5,132.7c46.4,4.5,94.4-20.2,110.2-83.3c10-31.9-10.5-77.9,26-105.5\nc22.6-17.1,60-15.6,80,15.9c18.2,32.2,0.4,77.3-42.1,81.9c-24.2,2.6-69.9-10.9-63.9-97.8c2.1-30.5,6.2-50.9,10.1-68.9\nc4.5-20.5,7.3-37.8,0.7-63.5c-14-54.7-53-58.7-86.3-97c-24.2-27.8-44.5-62.3-19.9-96.8c18.5-25.9,55.2-24.5,72.7-12.3\nc13.9,9.6,20.8,22.4,23.2,36.9c2.9,17.5-3.3,39.7-20.5,52.5c-25,18.7-73.1,18.9-96.7-50.3c-15.1-53.5-17.5-69-17.5-69", fill: "none" } }), e._v(" "), i("path", { ref: "progressPath", class: e.$style.progressPath, attrs: { d: "M120.1,608.6c0.4,0.4,79.8-36.1,104.4-48.8c50.5-26.1,88-18.7,121.1,18.9\nc34.4,39.1,89.6,27.2,110.6,14.6c35.8-21.5,42.2-52.8,39.8-84c-1.8-23.1,0.9-42.6,22-63.8c19.9-19.9,63.2-27.5,93.8-4.8\nc26.5,19.6,37.2,56.6,40,86.6c2,22.3,4.1,50.2,25.9,62.8c31.7,18.2,70.3,5.2,83.8-39.5c12.8-42.3,30-73.5,74.5-71.2\nc36.8,0,63.8,35.2,64.7,84.6c1.9,97.8,40.8,127.1,98.5,132.7c46.4,4.5,94.4-20.2,110.2-83.3c10-31.9-10.5-77.9,26-105.5\nc22.6-17.1,60-15.6,80,15.9c18.2,32.2,0.4,77.3-42.1,81.9c-24.2,2.6-69.9-10.9-63.9-97.8c2.1-30.5,6.2-50.9,10.1-68.9\nc4.5-20.5,7.3-37.8,0.7-63.5c-14-54.7-53-58.7-86.3-97c-24.2-27.8-44.5-62.3-19.9-96.8c18.5-25.9,55.2-24.5,72.7-12.3\nc13.9,9.6,20.8,22.4,23.2,36.9c2.9,17.5-3.3,39.7-20.5,52.5c-25,18.7-73.1,18.9-96.7-50.3c-15.1-53.5-17.5-69-17.5-69", fill: "none" } })]), e._v(" "), e._l(e.hotspots, function (t, n) { return i("div", { key: t.id, ref: "hotspot", refInFor: !0, class: e.$style.hotspot, attrs: { "data-id": t.id }, on: { click: function (i) { e.onHotspotClick(t) } } }, [i("span", { class: e.$style.hotspotDot }, [e.icons[n] ? i("Icon", { class: e.$style.hotspotIcon, attrs: { name: e.icons[n] } }) : i("span", { class: e.$style.hotspotIconDot })], 1), e._v(" "), i("span", { class: ["copy-02", e.$style.hotspotLabel], attrs: { "data-position": e.getLabelPosition(t) } }, [e._v("\n\t\t\t\t" + e._s(t.label) + "\n\t\t\t")])]) }), e._v(" "), i("div", { ref: "progress", class: e.$style.progress }, [i("svg", { class: [e.$style.viewRange, e.currentProgress <= .01 ? e.$style.viewDefault : null], attrs: { viewBox: "0 0 50 50" } }, [i("circle", { attrs: { cx: "25", cy: "25", r: "12.5", "stroke-width": "25" } })])])], 2), e._v(" "), i("span", { class: e.$style.north }), e._v(" "), i("CircleButton", { ref: "closeButton", class: [e.$style.button, e.$style.close], attrs: { icon: "cross", inverted: !0 }, on: { click: e.onCloseClick } })], 1) }, rr = [], or = { render: ar, staticRenderFns: rr }, lr = or, hr = i(5), ur = y, cr = hr(sr, lr, ur, null, null), dr = cr.exports, _r = dr, pr = i(201), vr =/*#__PURE__*/i.n(pr), fr = { name: "ReconstructionOverlay", props: { id: ne.a.string }, data: function () { return { currentStep: -1 } }, computed: { totalSteps: function () { return this.hotspotData ? this.hotspotData.steps.length : 0 }, currentStepPadded: function () { return vr()(this.currentStep + 1, 2, "0") }, totalStepsPadded: function () { return vr()(this.totalSteps, 2, "0") }, hotspotData: function () { return this.id ? this.$experience.getHotspotById(this.id) : null } }, methods: { startVoiceOver: function () { this.hotspotData && this.hotspotData.audioFile && this.$emit("startVoiceOver", this.hotspotData.audioFile) }, transitionIn: function () { var e = this; this.$refs.closeButton.transitionIn(), this.$refs.previousButton.transitionIn(), this.$refs.nextButton.transitionIn(), this.forcePosition = !0, this.currentStep = 0, this.$emit("transitionIn"), this.$nextTick(function () { return e.startVoiceOver() }) }, transitionOut: function () { this.$refs.closeButton.transitionOut(), this.$refs.previousButton.transitionOut(), this.$refs.nextButton.transitionOut(), this.currentStep = -1, this.$emit("stopVoiceOver") }, onPreviousClick: function () { this.currentStep = (this.currentStep - 1 + this.totalSteps) % this.totalSteps }, onNextClick: function () { this.currentStep = (this.currentStep + 1) % this.totalSteps }, onCloseClick: function () { this.$emit("close") } }, watch: { currentStep: function (e) { e > -1 ? this.$webgl.enableEYKReconstructionHotspot(e, !this.forcePosition) : this.$webgl.disableEYKHotspot(), this.forcePosition = !1 } }, beforeDestroy: function () { this.$emit("stopVoiceOver") } }, gr = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", [i("CircleButton", { ref: "closeButton", class: [e.$style.button, e.$style.close], attrs: { icon: "cross", inverted: !0 }, on: { click: e.onCloseClick } }), e._v(" "), i("div", { class: e.$style.content }, [e.hotspotData ? e._l(e.hotspotData.steps, function (t, n) { return i("div", { class: [e.$style.inner, "step-" + (n + 1), { "is-active": n === e.currentStep }] }, [i("h2", { class: ["heading-02", e.$style.title] }, [e._v(e._s(t.title))]), e._v(" "), i("p", { class: ["copy-02", e.$style.description] }, [e._v(e._s(t.description))])]) }) : e._e(), e._v(" "), i("ul", { class: e.$style.navigation }, [i("li", [i("CircleButton", { ref: "previousButton", attrs: { icon: "arrow-left" }, on: { click: e.onPreviousClick } })], 1), e._v(" "), i("li", [i("CircleButton", { ref: "nextButton", attrs: { icon: "arrow-right" }, on: { click: e.onNextClick } })], 1)])], 2)], 1) }, mr = [], yr = { render: gr, staticRenderFns: mr }, Er = yr, Tr = i(5), Ar = E, br = Tr(fr, Er, Ar, null, null), Rr = br.exports, wr = Rr, Ir = {
                            name: "AudioHotspot", props: { id: ne.a.string, visible: ne.a.bool.def(!1) }, data: function () { return { isActive: !1, isVisible: !1, isPlaying: !1, progress: 0, bindedData: null, needsPlayTouch: !1 } }, computed: _t()({}, Object(pt.c)("application", ["volume"]), { hotspotData: function () { return this.id ? this.$experience.getHotspotById(this.id) : null } }), mounted: function () { this.player = new Gi(this.$refs.audio, this.$refs.progress, this.$versionRoot), this.player.addEventListener(Ui.PLAY, this.handleAudioPlay), this.player.addEventListener(Ui.PAUSE, this.handleAudioPause), this.player.addEventListener(Ui.ENDED, this.handleAudioComplete), this.player.addEventListener(Ui.TIME_UPDATE, this.handleTimeUpdate), this.player.volume = this.volume }, methods: {
                                   onTogglePlayPause: function () {
                                          this.needsPlayTouch ? (
                                                 // eslint-disable-next-line no-console
                                                 console.log("VO: play('" + this.$refs.audio.src + "')"), this.$refs.audio.play()) : this.player.togglePlayPause()
                                   }, onCloseClick: function () { this.needsPlayTouch = !1, this.$emit("close") }, handleAudioPlay: function () { this.needsPlayTouch = !1, this.isActive = !0, this.isPlaying = !0 }, handleAudioPause: function () { this.isPlaying = !1 }, handleAudioComplete: function () { this.isActive = !1, this.isPlaying = !1, this.$emit("close", !0) }, handleTimeUpdate: function (e) {
                                          // totalDuration
                                          var t = Math.round(this.player.duration); if (!isNaN(t)) { var i = new Date(null); i.setSeconds(t), this.$refs.totalDuration.innerText = i.toISOString().substr(14, 5) }
                                          // currentDuration
                                          var n = Math.round(this.player.duration * e.data.progress); if (!isNaN(n)) { var s = new Date(null); s.setSeconds(n), this.$refs.duration.innerText = s.toISOString().substr(14, 5) }
                                   }, start: function () { this.bindedData && this.bindedData.audioFile && !ut ? this.player.playAudio(this.bindedData.audioFile + zi.getExtension()) : ut && (this.isActive = !1, this.isPlaying = !1, this.$refs.duration.innerText = "00:00", this.$refs.audio.pause(), this.$refs.audio.src = this.$versionRoot + this.bindedData.audioFile + zi.getExtension(), this.$refs.audio.currentTime = 0, this.needsPlayTouch = !0) }, stop: function () { this.player.stop() }, transitionIn: function () { this.isVisible = !0, this.player.setProgress(0), Ee.TweenLite.killTweensOf(this.$refs.background), Ee.TweenLite.killTweensOf(this.$refs.controls), Ee.TweenLite.killTweensOf(this.$refs.contentBackground), Ee.TweenLite.killTweensOf(this.$refs.contentInfo), Ee.TweenLite.killTweensOf(this.$refs.close), Ee.TweenLite.fromTo(this.$refs.background, .5, { scale: 0 }, { scale: 1, ease: Ee.Expo.easeOut }), Ee.TweenLite.fromTo(this.$refs.controls, 1, { scale: 0 }, { scale: 1, delay: .25, ease: Ee.Expo.easeOut }), Ee.TweenLite.fromTo(this.$refs.contentBackground, 1, { css: { transform: "scaleX(0) scaleY(1)" } }, { css: { transform: "scaleX(1) scaleY(1)" }, delay: .75, ease: Ee.Expo.easeInOut }), Ee.TweenLite.fromTo([this.$refs.contentInfo, this.$refs.close], .5, { alpha: 0 }, { alpha: 1, delay: 1.25, ease: Ee.Linear.easeNone }) }, transitionOut: function () {
                                          var e = this; Ee.TweenLite.killTweensOf(this.$refs.background), Ee.TweenLite.killTweensOf(this.$refs.controls), Ee.TweenLite.killTweensOf(this.$refs.contentBackground), Ee.TweenLite.killTweensOf(this.$refs.contentInfo), Ee.TweenLite.killTweensOf(this.$refs.close), this.player.setProgress(0),
                                                 // remove content
                                                 Ee.TweenLite.to([this.$refs.contentInfo, this.$refs.close], .4, { alpha: 0, delay: 0 }), Ee.TweenLite.to(this.$refs.contentBackground, .4, { css: { transform: "scaleX(0) scaleY(1)" }, delay: .2, ease: Ee.Expo.easeIn }),
                                                 // remove dot
                                                 Ee.TweenLite.to(this.$refs.controls, .5, { scale: 0, delay: .8, ease: Ee.Expo.easeIn }), Ee.TweenLite.to(this.$refs.background, .5, { scale: 0, delay: 1, ease: Ee.Expo.easeIn, onComplete: function () { e.isVisible = !1, e.player.setProgress(0) } })
                                   }
                            }, watch: { visible: function () { this.visible ? this.transitionIn() : this.transitionOut() }, hotspotData: function (e) { e && e.audioFile ? (this.bindedData = e, this.start()) : this.stop() }, volume: function (e) { this.player && (this.player.volume = e) } }, beforeDestroy: function () { this.player && (this.stop(), this.player.setProgress(0), this.player.dispose(), this.player = null) }
                     }, Pr = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: [e.$style.audioHotspot, e.isVisible ? e.$style.isVisible : null] }, [i("span", { directives: [{ name: "show", rawName: "v-show", value: e.isPlaying, expression: "isPlaying" }], staticClass: "u-pulse" }), e._v(" "), i("div", { ref: "content", class: e.$style.audioContent }, [i("div", { ref: "contentBackground", class: e.$style.contentBackground }), e._v(" "), i("div", { ref: "contentInfo", class: e.$style.audioInfo }, [e.bindedData ? i("h2", { class: e.$style.title }, [e._v(e._s(e.bindedData.audioTitle))]) : e._e(), e._v(" "), i("p", { class: e.$style.time }, [i("span", { ref: "duration", class: e.$style.duration }, [e._v("00:00")]), e._v(" "), i("span", { ref: "totalDuration", class: e.$style.totalDuration }, [e._v("00:00")])])]), e._v(" "), i("button", { ref: "close", class: e.$style.close, on: { click: e.onCloseClick } }, [i("Icon", { class: e.$style.closeIcon, attrs: { name: "cross" } })], 1)]), e._v(" "), i("div", { class: e.$style.audioPlayer }, [i("div", { ref: "background", class: e.$style.background }), e._v(" "), i("svg", { directives: [{ name: "show", rawName: "v-show", value: e.isActive, expression: "isActive" }], class: e.$style.progress, attrs: { viewBox: "0 0 64 64" } }, [i("circle", { ref: "progress", class: e.$style.progressStroke, attrs: { cx: "32", cy: "32", r: "30", "stroke-width": "2.5", fill: "none", "stroke-linecap": "square" } })]), e._v(" "), i("button", { ref: "controls", class: [e.$style.controls, e.isPlaying ? e.$style.isPlaying : null], on: { click: e.onTogglePlayPause } }, [i("Icon", { attrs: { name: "play-pause" } })], 1), e._v(" "), i("audio", { ref: "audio", attrs: { preload: "auto" } })])]) }, Lr = [], kr = { render: Pr, staticRenderFns: Lr }, Cr = kr, Mr = i(5), xr = T, Or = Mr(Ir, Cr, xr, null, null), Sr = Or.exports, Dr = Sr, Nr = i(204), Fr = { name: "OverlayTransition", props: { visible: ne.a.bool.def(!1), time: ne.a.number.def(1) }, mounted: function () { this.pauseFrame = 24; var e = 1 / this.time; this.renderer = new Ot(this.$el, Nr, { speed: e }), this.renderer.baseImage = this.getFillCanvas(), this.renderer.maskImage = Ut.getImage(St.MASK_OVERLAY), this.renderer.totalFrames = 49 }, methods: { getFillCanvas: function () { var e = this.$el.offsetWidth, t = document.createElement("canvas"); t.width = e, t.height = e; var i = t.getContext("2d"); return i.fillStyle = "#f6f6f6", i.fillRect(0, 0, t.width, t.height), t } }, watch: { visible: function (e) { e ? (this.renderer.currentFrame = 0, this.renderer.play(this.pauseFrame)) : this.renderer.play() } } }, Vr = function () { var e = this, t = e.$createElement; return (e._self._c || t)("div", { class: [e.$style.wrapper, e.visible ? e.$style.isActive : null] }) }, Br = [], Ur = { render: Vr, staticRenderFns: Br }, Hr = Ur, Gr = i(5), $r = A, zr = Gr(Fr, Hr, $r, null, null), Wr = zr.exports, Kr = Wr, Yr = { BED_LOOP: "bedLoop", BELL_AMBIANCE_LOOP: "bellAmbianceLoop", BURMESE_LOOP: "burmeseLoop", WIND_LOOP: "windLoop", INSIDE_TEMPLE_LOOP: "insideTempleLoop", CONTINUE_BUTTON_LOOP: "continueButtonLoop", REAL_TEMPLE_LOOP: "realTemple", RANDOM_LOOP_1: "randomLoop1", RANDOM_LOOP_2: "randomLoop2" }, Xr = { colorMain: "#ee8c00", colorGreyCopy: "#757575", colorGreyCopyLight: "#999999", colorGreyCopyDark: "#555", colorBlack: "#333", colorWebGLBase: "#e0d7d2", colorDarkUiCopy: "#332211", colorDarkLighterUiCopy: "#4f3821" }, jr = {
                            name: "OnboardingPage", data: function () { return { previousButtonCopy: "GO BACK".split(" ").map(function (e) { return "<span>" + e + "</span>" }).join(""), continueButtonCopy: "CONTINUE JOURNEY", informationHotspot: null, reconstructionHotspot: null, audioFileHotspot: null, showBarProgress: 0, showOverlayMask: !1, overlayTime: .4, overlayId: null, hotspots: [] } }, computed: _t()({}, Object(pt.c)("application", ["isContentVisible", "isPreloaderComplete", "isMapOverlayVisible", "hasMapOverlay", "webglFlowLocationType", "webglFlowLocation", "experienceUiVisible"]), Object(pt.b)("application", ["isCloseTempleButtonVisible"]), { darkUILighter: function () { return Xr.colorDarkLighterUiCopy }, hasDarkUiCopy: function () { return !!this.webglFlowLocation && this.webglFlowLocation === Mi.KMG_OUTSIDE } }), mounted: function () { this.onReady() }, methods: {
                                   onReady: function () { var e = this; this.$store.commit(Di.SET_CONTENT_VISIBILITY, !0), this.$nextTick(function () { e.hotspotList = {}, e.contentBarCounter = 0, e.hotspots = e.$experience.hotspots, e._experienceInitialized = !1, Ee.TweenLite.set([e.$refs.title, e.$refs.instructions.$el, e.$refs.introCopy], { autoAlpha: 0 }), e.$refs.title.init(), e.isPreloaderComplete && (e.$webgl.setIntroEffectProgress(0), e.$webgl.instantJumpToLocation(Mi.INTRO), e.transitionIn()) }) }, transitionIn: function () {
                                          var e = this; this.$refs.title.transitionIn(), Ee.TweenLite.delayedCall(200 / 60 / 1.75, function () {
                                                 // this.showContentBar(titleSpeed);
                                                 Ee.TweenLite.fromTo([e.$refs.introCopy], 1.5, { autoAlpha: 0, y: 25 }, { autoAlpha: 1, y: 0, ease: Ee.Power2.easeOut, onStart: function () { e.$refs.instructions.transitionIn(.5) } }), Ee.TweenLite.fromTo([e.$refs.actions], 1, { y: 50 }, { y: 0, ease: Ee.Power2.easeOut, delay: .5, onStart: function () { e.$refs.activateButton.transitionIn(), e.$refs.mapButton.transitionIn() } })
                                          })
                                   }, showContentBar: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 2; this.animateContentBar(1, 0, Ee.Expo.easeOut, e) }, hideContentBar: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 2; this.animateContentBar(0, 0, Ee.Expo.easeIn, e) }, animateContentBar: function (e, t, i, n) { var s = this; Ee.TweenLite.to(this, n, { delay: t, ease: i, contentBarCounter: e, onUpdate: function () { s.showBarProgress = s.contentBarCounter } }) }, restart: function () { this.onReady() }, onMapClick: function () { this.$store.commit(Di.SET_MAP_OVERLAY_VISIBILITY, !this.isMapOverlayVisible) }, onActivationClick: function () {
                                          var e = this, t = { x: 0 }; Ee.TweenLite.to(t, 3, { x: .999, ease: Ee.Linear.easeNone, onUpdate: function () { e.$webgl.setIntroEffectProgress(t.x) } }), this.$refs.title.transitionOut(),
                                                 // this.hideContentBar(2);
                                                 Ee.TweenLite.to(this.$refs.introCopy, 1, { autoAlpha: 0, delay: .75, ease: Ee.Linear.easeNone }), this.$refs.instructions.transitionOut(), this.$refs.activateButton.transitionOut(), this.$refs.mapButton.transitionOut(), Ee.TweenLite.delayedCall(4, function () { e.$store.commit(Di.SET_CONTENT_VISIBILITY, !1) })
                                   }, onCloseTempleClick: function () { this.$audioManager.play(Yr.CONTINUE_BUTTON_LOOP), this.$webgl.gotoNextLocation() }, onPreviousTempleClick: function () { this.$audioManager.play(Yr.CONTINUE_BUTTON_LOOP); var e = Mi.INTRO; switch (this.webglFlowLocation) { case Mi.PATH_INTRO_TO_AOK: case Mi.AOK_INSIDE: e = Mi.INTRO; break; case Mi.PATH_AOK_TO_KMG: case Mi.KMG_OUTSIDE: e = Mi.AOK_INSIDE; break; case Mi.PATH_KMG_TO_EYK: case Mi.EYK_OUTSIDE: e = Mi.KMG_OUTSIDE; break; case Mi.EYK_INSIDE: e = Mi.EYK_OUTSIDE; break; case Mi.PATH_EYK_TO_FUTURE: case Mi.FUTURE: e = Mi.EYK_INSIDE }e === Mi.INTRO ? this.restart() : this.$webgl.instantJumpToLocation(e) }, handleStopVoiceOver: function () { this.$refs.voiceOver && this.$refs.voiceOver.stop() }, handleStartVoiceOver: function (e) { this.$refs.voiceOver && this.$refs.voiceOver.play(e) }, onCloseOverlay: function () { this.$tracker.push(se.HOTSPOT, { action: "close", label: this.overlayId }), this.$webgl.closeHotspot(), this.overlayId = null, this.showOverlayMask = !1, this.$store.commit(Di.SET_EXPERIENCE_UI_VISIBILITY, !0), this.audioFileHotspot = null, this.switchWindAudio(!0) }, onHotspotClick: function (e) { var t = this; this.$tracker.push(se.HOTSPOT, { action: "open", label: e }), this.audioFileHotspot = null, this.handleStopVoiceOver(); var i = this.$experience.getHotspotById(e); i && (i.type !== Ys.AUDIO_FRAGMENT ? (this.$store.commit(Di.SET_EXPERIENCE_UI_VISIBILITY, !1), this.showOverlayMask = !0, this.$webgl.openHotspot(this.webglFlowLocation, e, this.overlayTime).then(function () { t.showOverlayMask = !1, i.type === Ys.RECONSTRUCTION ? t.reconstructionHotspot = e : (t.informationHotspot = e, t.overlayId = e, t.$refs.overlay && t.$nextTick(function () { return t.$refs.overlay.show() })), t.switchWindAudio(!1) })) : this.audioFileHotspot = e) }, onJumpToLocation: function (e, t) { this.handleStopVoiceOver(), this.reconstructionHotspot = null, this.informationHotspot = null, this.$refs.overlay && this.overlayId && this.$refs.overlay.hide(), e === Mi.PATH_INTRO_TO_AOK && t !== Mi.INTRO ? this.restart() : e === Mi.PATH_INTRO_TO_AOK ? (this.$webgl.setIntroEffectProgress(0), this.$webgl.instantJumpToLocation(Mi.INTRO)) : this.initExperience() }, onHotspotReady: function (e, t) { this.hotspotList[e] = t }, initExperience: function () { this._experienceInitialized || (this._experienceInitialized = !0, this.$webgl.addHotspotEvent(Aa.CHANGED, this.handleHotspotChange), this.$webgl.setIntroEffectProgress(1)) }, handleHotspotChange: function (e) { var t = this; this.currentHotspotLocation !== e.data.location && (this.currentHotspotLocation = e.data.location, this.reconstructionHotspot = null, this.informationHotspot = null, this.audioFileHotspot = null, ee()(e.data.data).map(function (t) { return _t()({}, e.data.data[t], { id: t }) })), this.hotspots.forEach(function (i) { t.hotspotList[i.id] && (t.hotspotList[i.id] && e.data.data[i.id] ? t.hotspotList[i.id].setPosition(e.data.data[i.id]) : t.hotspotList[i.id].setVisibility(!1)) }) }, showCloseButton: function () { this.$refs.closeButton.transitionIn(), this.$refs.previousButton.transitionIn() }, hideCloseButton: function () { this.$refs.closeButton.transitionOut(), this.$refs.previousButton.transitionOut() }, hideOverlayMask: function () { this.showOverlayMask = !1 }, onReconstructionClose: function () { this.$tracker.push(se.HOTSPOT, { action: "close", label: this.reconstructionHotspot }), this.reconstructionHotspot = null, this.$webgl.closeHotspot(), this.$store.commit(Di.SET_EXPERIENCE_UI_VISIBILITY, !0), this.audioFileHotspot = null, this.switchWindAudio(!0) }, onAudioHotspotClose: function (e) { this.$tracker.push(se.HOTSPOT, { action: e ? "complete" : "close", label: this.audioFileHotspot }), this.audioFileHotspot = null }, getContinueCopy: function (e) { var t = "CONTINUE JOURNEY"; if (e && this.$experience) { var i = this.$experience.getPathItemsByLocationId(e).find(function (e) { return "continue" === e.type }); i && (t = i.text) } return t.split(" ").map(function (e) { return "<span>" + e + "</span>" }).join("") }, switchWindAudio: function (e) { var t = this.webglFlowLocation; "KMG_OUTSIDE" !== t && "EYK_OUTSIDE" !== t || (e ? (this.$audioManager.stop(Yr.WIND_LOOP), this.$audioManager.play(Yr.WIND_LOOP)) : this.$audioManager.stop(Yr.WIND_LOOP)) }
                            }, watch: {
                                   webglFlowLocation: function (e) {
                                          // change nextButton copy
                                          this.continueButtonCopy = this.getContinueCopy(e), e === Mi.PATH_EYK_TO_FUTURE && (this.$webgl.gotoNextLocation(), this.$router.push(this.PageNames.END))
                                   }, isPreloaderComplete: function (e) { e && this.$nextTick(this.transitionIn) }, isCloseTempleButtonVisible: function (e) { var t = this; e ? this.$nextTick(function () { t.showCloseButton() }) : this.$refs.closeButton && this.hideCloseButton() }, isContentVisible: function (e) { var t = this; e || this.$nextTick(function () { t.initExperience() }) }, isMapOverlayVisible: function (e) {
                                          ct || (this.$store.commit(Di.SET_WEBGL_PLAYSTATE, !e), e || !this.reconstructionHotspot && !this.informationHotspot ? this.$store.commit(Di.SET_EXPERIENCE_UI_VISIBILITY, !e) :
                                                 // do not show ui if any hotspot is active
                                                 this.$store.commit(Di.SET_EXPERIENCE_UI_VISIBILITY, !1))
                                   }, reconstructionHotspot: function (e) { e ? this.$refs.reconstruction.transitionIn() : this.$refs.reconstruction.transitionOut() }
                            }, beforeDestroy: function () { this.$webgl.removeHotspotEvent(Aa.CHANGED, this.handleHotspotChange) }, components: { AnimatedTitle: ei, ExperienceInstructions: ui, ContentBar: Ai, VoiceOver: en, InformationOverlay: aa, ExperienceHotspot: ga, ReconstructionOverlay: wr, AudioHotspot: Dr, MapOverlay: _r, TempleInfo: Ga, TempleInstruction: Qa, OverlayTransition: Kr }
                     }, qr = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("article", { class: [e.$style.onboarding, e.isContentVisible ? null : e.$style.isContentInactive] }, [e.isContentVisible ? i("div", { class: e.$style.introContent }, [i("div", { class: e.$style.title }, [i("AnimatedTitle", { ref: "title", attrs: { text: "EXPLORE", color: e.darkUILighter, speed: "2", fontSize: "10rem" } })], 1), e._v(" "), i("p", { ref: "introCopy", class: ["copy-01", e.$style.introCopy] }, [e._v("\n\t\t\tFollow the path through the earthquake-damaged temples of Bagan\n\t\t")]), e._v(" "), i("ExperienceInstructions", { ref: "instructions" }), e._v(" "), i("div", { ref: "actions", class: e.$style.introActions }, [i("MainButton", { ref: "activateButton", attrs: { label: "Begin Journey" }, on: { click: e.onActivationClick } }), e._v(" "), i("MainButton", { ref: "mapButton", attrs: { label: "Map", icon: "map", isInverted: "" }, on: { click: e.onMapClick } })], 1)], 1) : e._e(), e._v(" "), e.isContentVisible ? e._e() : [i("CircleButton", { directives: [{ name: "show", rawName: "v-show", value: e.experienceUiVisible, expression: "experienceUiVisible" }], ref: "closeButton", class: [e.$style.button, e.$style.closeButton], attrs: { icon: "arrow-right", textLabel: e.continueButtonCopy, inverted: !0, darkTextLabel: e.hasDarkUiCopy }, on: { click: e.onCloseTempleClick } }), e._v(" "), i("CircleButton", { directives: [{ name: "show", rawName: "v-show", value: e.experienceUiVisible, expression: "experienceUiVisible" }], ref: "previousButton", class: [e.$style.button, e.$style.previousButton], attrs: { icon: "arrow-left", textLabel: e.previousButtonCopy, inverted: !0, leftAlign: !0, darkTextLabel: e.hasDarkUiCopy }, on: { click: e.onPreviousTempleClick } }), e._v(" "), e._l(e.hotspots, function (t) { return i("ExperienceHotspot", { directives: [{ name: "show", rawName: "v-show", value: e.experienceUiVisible, expression: "experienceUiVisible" }], key: t.id, attrs: { id: t.id }, on: { hotspotClick: e.onHotspotClick, hotspotReady: e.onHotspotReady } }) }), e._v(" "), i("TempleInfo", { directives: [{ name: "show", rawName: "v-show", value: e.experienceUiVisible, expression: "experienceUiVisible" }], ref: "templeInfo", attrs: { darkTheme: e.hasDarkUiCopy }, on: { hotspotClick: e.onHotspotClick } }), e._v(" "), i("TempleInstruction", { directives: [{ name: "show", rawName: "v-show", value: e.experienceUiVisible, expression: "experienceUiVisible" }], ref: "templeInstruction" }), e._v(" "), i("VoiceOver", { directives: [{ name: "show", rawName: "v-show", value: e.experienceUiVisible, expression: "experienceUiVisible" }], ref: "voiceOver" }), e._v(" "), i("ReconstructionOverlay", { directives: [{ name: "show", rawName: "v-show", value: null !== e.reconstructionHotspot, expression: "reconstructionHotspot !== null" }], ref: "reconstruction", attrs: { id: e.reconstructionHotspot }, on: { close: e.onReconstructionClose, transitionIn: e.hideOverlayMask, startVoiceOver: e.handleStartVoiceOver, stopVoiceOver: e.handleStopVoiceOver } }), e._v(" "), i("AudioHotspot", { attrs: { id: e.audioFileHotspot, visible: null !== e.audioFileHotspot }, on: { close: e.onAudioHotspotClose } }), e._v(" "), i("InformationOverlay", { directives: [{ name: "show", rawName: "v-show", value: null !== e.informationHotspot, expression: "informationHotspot !== null" }], ref: "overlay", attrs: { id: e.overlayId }, on: { closeOverlay: e.onCloseOverlay, hideMask: e.hideOverlayMask, startVoiceOver: e.handleStartVoiceOver, stopVoiceOver: e.handleStopVoiceOver } }), e._v(" "), i("OverlayTransition", { attrs: { visible: e.showOverlayMask, time: e.overlayTime } })], e._v(" "), i("MapOverlay", { on: { jumpToLocation: e.onJumpToLocation } })], 2) }, Zr = [], Qr = { render: qr, staticRenderFns: Zr }, Jr = Qr, eo = i(5), to = b, io = eo(jr, Jr, to, null, null), no = io.exports, so = no, ao = { name: "PlayButton", methods: { handleClick: function () { this.$emit("click") } } }, ro = function () { var e = this, t = e.$createElement; return (e._self._c || t)("button", { class: e.$style.playButton, on: { click: e.handleClick } }) }, oo = [], lo = { render: ro, staticRenderFns: oo }, ho = lo, uo = i(5), co = R, _o = uo(ao, ho, co, null, null), po = _o.exports, vo = po, fo = { beforeCreate: function () { this.$emit("itemInit") }, mounted: function () { this.$el.classList.add("page-dragger-item"), this.$emit("itemRendered", this) }, methods: { transitionIn: function () { }, transitionOut: function () { }, updateScroll: function () { } } }, go = i(112), mo =/*#__PURE__*/i.n(go), yo = function (e) { function t(e) { it()(this, t); var i = mt()(this, (t.__proto__ || ft()(t)).call(this)); return i._refs = e, i.createBackgroundCanvas(), i.createLogoAnimation(), i._debouncedResize = Ps()(i.handleResize, 150), window.addEventListener("resize", i._debouncedResize), i } return At()(t, e), st()(t, [{ key: "resumeLogoAnimation", value: function () { this._logoAnimationTimeline.play() } }, { key: "cancelLogoAnimation", value: function () { this._logoAnimationTimeline.pause() } }, { key: "createLogoAnimation", value: function () { Ee.TweenLite.set(this._refs.logoBu, { autoAlpha: 0 }); var e = new Ee.TimelineMax({ repeat: -1 }); e.to(this._refs.logoEn, .8, { autoAlpha: 0, ease: Ee.Linear.easeNone }, "+=3"), e.to(this._refs.logoBu, .8, { autoAlpha: 1, ease: Ee.Linear.easeNone }, "-=0.4"), e.to(this._refs.logoBu, .8, { autoAlpha: 0, ease: Ee.Linear.easeNone }, "+=3"), e.to(this._refs.logoEn, .8, { autoAlpha: 1, ease: Ee.Linear.easeNone }, "-=0.4"), this._logoAnimationTimeline = e } }, { key: "createBackgroundCanvas", value: function () { var e = this; this._canvas = document.createElement("canvas"), this._canvas.width = this._refs.background.offsetWidth, this._canvas.height = this._refs.background.offsetHeight, this._backgroundImage = Ut.getImage(St.HOME_IMAGE_MOBILE), r(["mobile/map-transition-mask.png"], !0).then(function (t) { e._maskImage = t[0], e.drawBackgroundImage() }), this._ctx = this._canvas.getContext("2d"), this._refs.background.appendChild(this._canvas) } }, { key: "drawBackgroundImage", value: function () { var e = this._canvas, t = e.width, i = e.height; this._ctx.globalCompositeOperation = "source-over", this._ctx.clearRect(0, 0, t, i); var n = t / this._backgroundImage.width, s = [0, 0, t, i], a = [0, 0, this._backgroundImage.width, this._backgroundImage.height], r = mo()(s, a, "cover").map(function (e) { return e * n }); this._ctx.drawImage(this._backgroundImage, r[0], 0, r[2], r[3]), this._ctx.globalCompositeOperation = "destination-out"; var o = this._maskImage.height * n; this._ctx.drawImage(this._maskImage, 0, i - o, t, o) } }, { key: "handleResize", value: function () { this._maskImage && (this._canvas.width = this._refs.background.offsetWidth, this._canvas.height = this._refs.background.offsetHeight, this.drawBackgroundImage()) } }, { key: "dispose", value: function () { window.removeEventListener("resize", this._debouncedResize), this._debouncedResize = null, Et()(t.prototype.__proto__ || ft()(t.prototype), "dispose", this).call(this) } }]), t }(Lt.a), Eo = yo, To = { name: "Introduction", mixins: [fo], data: function () { return { barProgress: 0, burmeseLogo: Ut.getImage(St.TITLESCREEN_BU_IMAGE).getAttribute("src") } }, mounted: function () { var e = this; this.renderer = new Eo(this.$refs), this.$nextTick(function () { e.barProgress = 1 }) }, methods: { transitionIn: function () { this.renderer.resumeLogoAnimation() }, transitionOut: function () { this.renderer.cancelLogoAnimation() }, updateScroll: function (e) { var t = e - 1, i = window.innerWidth * (167 / 750); Ee.TweenLite.set(this.$refs.background, { y: -i * t }), Ee.TweenLite.set(this.$refs.logo, { y: .25 * window.innerHeight * t, opacity: 1 - Math.min(1, 2 * Math.max(0, t - .5)) }), Ee.TweenLite.set(this.$refs.startExploring, { opacity: 1 - Math.min(1, 4 * t) }) } }, beforeDestroy: function () { this.renderer && (this.renderer.dispose(), this.renderer = null) }, components: { ContentBar: Ai, PlayButton: vo } }, Ao = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: e.$style.introduction }, [i("div", { class: e.$style.clouds }), e._v(" "), i("div", { ref: "background", class: e.$style.background }), e._v(" "), i("div", { ref: "logo", class: e.$style.siteLogo }, [i("h3", { ref: "topLogo", class: e.$style.logoGoogle }, [i("Icon", { attrs: { name: "google-ac" } })], 1), e._v(" "), i("h1", { class: e.$style.logo }, [i("span", { ref: "logoEn", class: e.$style.logoEn }, [e._v("Bagan")]), e._v(" "), i("span", { ref: "logoBu", class: e.$style.logoBu, style: { backgroundImage: "url(" + e.burmeseLogo + ")" } })]), e._v(" "), i("ContentBar", { class: e.$style.contentBar, attrs: { progress: e.barProgress } })], 1), e._v(" "), i("div", { ref: "startExploring", class: ["copy-01", e.$style.startExploring] }, [e._v("\n\t\tScroll to explore"), i("span", { class: e.$style.arrow })])]) }, bo = [], Ro = { render: Ao, staticRenderFns: bo }, wo = Ro, Io = i(5), Po = w, Lo = Io(To, wo, Po, null, null), ko = Lo.exports, Co = ko, Mo = { name: "VideoPlayer", props: { src: ne.a.string.isRequired, location: ne.a.string.isRequired }, data: function () { return { isVisible: !1, isPlaying: !1 } }, mounted: function () { this.$refs.video.addEventListener("play", this.handlePlay), this.$refs.video.addEventListener("pause", this.handlePause), this.$refs.video.addEventListener("ended", this.handleEnded), void 0 !== window.orientation && window.addEventListener("orientationchange", this.handleOrientationChange) }, methods: { play: function () { this.$emit("hideMenu"), this.isVisible = !0, this.$refs.video.play(), this.$refs.closeButton.transitionIn() }, pause: function () { this.$refs.video.pause() }, stop: function () { this.isPlaying = !1, this.$emit("showMenu"), this.$refs.closeButton.transitionOut(), this.isVisible = !1, this.pause(), this.$refs.video.currentTime = 0 }, handlePlay: function () { this.isPlaying = !0, this.$tracker.push(se.VIDEO, { action: "play", label: "static | " + this.location }) }, handlePause: function () { this.isPlaying = !1, this.$refs.video.currentTime !== this.$refs.video.duration && this.$tracker.push(se.VIDEO, { action: "pause", label: "static | " + this.location }) }, handleEnded: function () { this.isPlaying = !1, this.$tracker.push(se.VIDEO, { action: "complete", label: "static | " + this.location }), this.stop() }, handleOrientationChange: function () { var e = this; Ee.TweenLite.delayedCall(.5, function () { switch (window.orientation) { case -90: case 90: e.pause(), e.$refs.closeButton.transitionOut(); break; default: e.isVisible && e.play() } }) }, onCloseClick: function () { this.stop() }, onVideoClick: function () { this.$refs.video.paused ? this.play() : this.pause() } }, beforeDestroy: function () { this.$refs.video.removeEventListener("play", this.handlePlay), this.$refs.video.removeEventListener("pause", this.handlePause), this.$refs.video.removeEventListener("ended", this.handleEnded), void 0 !== window.orientation && window.removeEventListener("orientationchange", this.handleOrientationChange) } }, xo = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: [e.$style.wrapper, e.isVisible ? e.$style.isPlaying : null] }, [i("video", { ref: "video", attrs: { playsinline: "", src: e.src, crossorigin: "anonymous" }, on: { click: e.onVideoClick } }), e._v(" "), i("CircleButton", { ref: "closeButton", class: [e.$style.button, e.$style.close], attrs: { icon: "cross", hasHover: !1 }, on: { click: e.onCloseClick } })], 1) }, Oo = [], So = { render: xo, staticRenderFns: Oo }, Do = So, No = i(5), Fo = I, Vo = No(Mo, Do, Fo, null, null), Bo = Vo.exports, Uo = Bo, Ho = function () { return lt.a.chrome && !ct ? ".webm" : ".mp4" }, Go = { getExtension: Ho }, $o = { name: "IntroductionVideo", mixins: [fo], data: function () { return { videoUrl: "https://storage.googleapis.com/gweb-arts-exp-bagan.appspot.com/video/intro" + Go.getExtension() } }, methods: { updateScroll: function (e) { (e < .84 || e > 1.12) && this.$store.commit(er.SET_NAVIGATION_INVERTED, !1), (e < .5 || e > 1.5) && this.$refs.player.isPlaying && this.$refs.player.stop() }, handlePlayClick: function () { this.$refs.player.play() }, onShowMenu: function () { this.$emit("showMenu") }, onHideMenu: function () { this.$emit("hideMenu") } }, components: { PlayButton: vo, VideoPlayer: Uo } }, zo = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: e.$style.introductionVideo }, [i("span", { ref: "background", class: e.$style.background }), e._v(" "), i("p", { class: ["copy-01", e.$style.copy] }, [e._v("\n\t\tDiscover how innovative digital conservation is helping a local community rebuild and protect their cultural heritage.\n\t")]), e._v(" "), i("PlayButton", { class: e.$style.playButton, on: { click: e.handlePlayClick } }), e._v(" "), i("VideoPlayer", { ref: "player", attrs: { src: e.videoUrl, location: "intro" }, on: { hideMenu: e.onHideMenu, showMenu: e.onShowMenu } })], 1) }, Wo = [], Ko = { render: zo, staticRenderFns: Wo }, Yo = Ko, Xo = i(5), jo = P, qo = Xo($o, Yo, jo, null, null), Zo = qo.exports, Qo = Zo, Jo = function () {
                            function e() { it()(this, e) } return st()(e, null, [{ key: "cacheIsPathRequested", value: function (t) { return e._clientCache[t] } }, { key: "cacheRegisterRequested", value: function (t, i) { e._clientCache[t] = i } }, { key: "cacheRegisterCallback", value: function (t, i) { e._clientCacheCallbacks[t] || (e._clientCacheCallbacks[t] = []), e._clientCacheCallbacks[t].push(i) } }, { key: "cacheRequestDone", value: function (t, i) { for (var n = e._clientCacheCallbacks[t], s = 0; s < n.length; s++)n[s](i); e._clientCacheCallbacks[t] = null, e._clientCache[t] = !1 } }, { key: "cacheRequestError", value: function (t) { for (var i = e._clientCacheCallbacks[t], n = 0; n < i.length; n++)i[n](null); e._clientCacheCallbacks[t] = null, e._clientCache[t] = !1 } }, {
                                   key: "loadText", value: function (t, i) {
                                          if (e.cacheRegisterCallback(t, i), !e.cacheIsPathRequested(t)) {
                                                 var n = new XMLHttpRequest; e.cacheRegisterRequested(t, n), n.onreadystatechange = function (i) {
                                                        // console.log("xhr changed ", xhr.readyState, xhr.status, event);
                                                        4 === n.readyState && (200 === n.status ? e.cacheRequestDone(t, n.responseText) : e.cacheRequestError(t))
                                                 }, n.open("GET", t, !0), n.send()
                                          }
                                   }
                            }, { key: "loadArrayBuffer", value: function (t, i) { if (e.cacheRegisterCallback(t, i), !e.cacheIsPathRequested(t)) { var n = new XMLHttpRequest; e.cacheRegisterRequested(t, n), n.open("GET", t, !0), n.responseType = "arraybuffer", n.send(), n.onreadystatechange = function (i) { 4 === n.readyState && e.cacheRequestDone(t, n.response) } } } }, { key: "loadImage", value: function (t, i) { if (e.cacheRegisterCallback(t, i), e.cacheIsPathRequested(t)) return e.cacheIsPathRequested(t); var n = new Image; e.cacheRegisterRequested(t, n), n.crossOrigin = "Anonymous", n.src = t, n.onload = function () { e.cacheRequestDone(t, n) }, n.onerror = function () { console.log("TextureLoader: could not load image", t), e.cacheRequestDone(t, n) }, n.src = t } }, { key: "loadMultipleImages", value: function (t, i) { for (var n = this, s = t.length, a = [], r = 0; r < t.length; ++r)e.loadImage(t[r], function (e) { return function (t) { s--, a[e] = t, 0 === s && i.call(n, a) } }(r)) } }, { key: "loadMultipleTexts", value: function (t, i) { for (var n = this, s = t.length, a = [], r = 0; r < t.length; ++r)e.loadText(t[r], function (e) { return function (t) { s--, a[e] = t, 0 === s && i.apply(n, a) } }(r)) } }, { key: "posMod", value: function (e, t) { return (e % t + t) % t } }, { key: "fract", value: function (e) { return e - Math.floor(e) } }, { key: "lerp", value: function (e, t, i) { return (1 - i) * e + i * t } }, { key: "clamp01", value: function (e) { return e < 0 ? 0 : e > 1 ? 1 : e } }, { key: "gain01", value: function (e, t) { return e > .5 ? 1 - .5 * Math.pow(2 - 2 * e, t) : .5 * Math.pow(2 * e, t) } }, { key: "smootherStep01", value: function (e) { return (e = Math.min(Math.max(e, 0), 1)) * e * e * (e * (6 * e - 15) + 10) } }, { key: "smoothStep01", value: function (e) { return (e = Math.min(Math.max(e, 0), 1)) * e * (3 - 2 * e) } }, { key: "invSmoothStep01", value: function (e) { return e + (e - e * e * (3 - 2 * e)) } }, { key: "smoothStep", value: function (t, i, n) { return (n = e.clamp((n - t) / (i - t), 0, 1)) * n * (3 - 2 * n) } }, { key: "step", value: function (t, i, n) { return e.clamp01((n - t) / (i - t)) } }, { key: "nearestPowerOfTwo", value: function (e) { return Math.pow(2, Math.round(Math.log(e) / Math.log(2))) } }, { key: "clamp", value: function (e, t, i) { return Math.min(Math.max(e, t), i) } }, { key: "degToRad", value: function (e) { return e * (Math.PI / 180) } }, { key: "radToDeg", value: function (e) { return e * (180 / Math.PI) } }, { key: "latLongToCartesian", value: function (e, t, i, n) { var s = this.degToRad(t), a = this.degToRad(i) + Math.PI; return e.z = n * Math.cos(s) * Math.cos(a), e.x = n * Math.cos(s) * Math.sin(a), e.y = n * Math.sin(s), e } }]), e
                     }(); Jo._clientCache = {}, Jo._clientCacheCallbacks = {};/* harmony default export */
                     var el = Jo, tl = function () {
                            function e() { it()(this, e), this.averageFps = 0, this._manualUpdate = !1, e._instance && alert("do not create additional instances of the time class"), this.fps = 60, this.deltaTime = 1 / this.fps, this.time = 0, this.update() } return st()(e, [{ key: "updateManual", value: function () { this._manualUpdate = !0, this.updateDeltaTime() } }, { key: "update", value: function () { var e = this; this._manualUpdate || (this.updateDeltaTime(), window.requestAnimationFrame(function (t) { return e.update() })) } }, {
                                   key: "updateDeltaTime", value: function () {
                                          var e = performance.now(); this.deltaTime = .001 * e - this.time, this.deltaTime > .05 && (this.deltaTime = .05),
                                                 // if (this.deltaTime === 0) {
                                                 // 	this.deltaTime = 1 / 60;
                                                 // }
                                                 this.time = .001 * e, this.fps = 1 / this.deltaTime, this.averageFps > 0 ? this.averageFps = el.lerp(this.fps, this.averageFps, .95) : this.averageFps = 1 / 60
                                   }
                            }, { key: "testPerformance", value: function (e) { console.time("timer0"), e.call(this), console.timeEnd("timer0") } }], [{ key: "getInstance", value: function () { return e._instance || (e._instance = new e), e._instance } }]), e
                     }(), il = tl, nl = i(17), sl = function () {
                            function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0; it()(this, e), this.v = nl.vec3.fromValues(t, i, n) } return st()(e, [{
                                   key: "clone",/* CLONE, COPY, SET */
                                   value: function () { return new e(this.x, this.y, this.z) }
                            }, { key: "copy", value: function (e) { return nl.vec3.copy(this.v, e.v), this } }, { key: "setValues", value: function (e, t, i) { return nl.vec3.set(this.v, e, t, i), this } }, { key: "length", value: function () { return nl.vec3.length(this.v) } }, { key: "toString", value: function () { return this.x + "," + this.y + "," + this.z } }, { key: "equals", value: function (e) { return e.x === this.x && e.y === this.y && e.z === this.z } }, { key: "normalize", value: function () { return nl.vec3.normalize(this.v, this.v), this } }, { key: "negate", value: function () { return nl.vec3.negate(this.v, this.v), this } }, { key: "multiplyScalar", value: function (e) { return nl.vec3.scale(this.v, this.v, e), this } }, { key: "multiply", value: function (e) { return nl.vec3.multiply(this.v, this.v, e.v), this } }, { key: "divide", value: function (e) { return nl.vec3.divide(this.v, this.v, e.v), this } }, { key: "add", value: function (e) { return nl.vec3.add(this.v, this.v, e.v), this } }, { key: "subtract", value: function (e) { return nl.vec3.subtract(this.v, this.v, e.v), this } }, { key: "subtractScalar", value: function (e) { return this.x -= e, this.y -= e, this.z -= e, this } }, { key: "rotateX", value: function (e, t) { return nl.vec3.rotateX(this.v, this.v, e.v, t), this } }, { key: "rotateY", value: function (e, t) { return nl.vec3.rotateY(this.v, this.v, e.v, t), this } }, { key: "transform", value: function (e) { return nl.vec3.transformMat4(this.v, this.v, e), this } }, { key: "transformMat3", value: function (e) { return nl.vec3.transformMat3(this.v, this.v, e), this } }, { key: "randomize", value: function () { return this.x = 2 * Math.random() - 1, this.y = 2 * Math.random() - 1, this.z = 2 * Math.random() - 1, this } }, { key: "randomize01", value: function () { return this.x = Math.random(), this.y = Math.random(), this.z = Math.random(), this } }, { key: "randomizeSphere", value: function () { do { this.randomize() } while (this.length() > 1); return this } }, { key: "smoothstep", value: function () { return this.x = e.smoothstep1(this.x), this.y = e.smoothstep1(this.y), this.z = e.smoothstep1(this.z), this } }, { key: "x", get: function () { return this.v[0] }, set: function (e) { this.v[0] = e } }, { key: "y", get: function () { return this.v[1] }, set: function (e) { this.v[1] = e } }, { key: "z", get: function () { return this.v[2] }, set: function (e) { this.v[2] = e } }], [{ key: "smoothstep1", value: function (e) { return e * e * (3 - 2 * e) } }, { key: "dot", value: function (e, t) { return nl.vec3.dot(e.v, t.v) } }, { key: "distance", value: function (e, t) { return nl.vec3.distance(e.v, t.v) } }, { key: "multiplyScalar", value: function (e, t, i) { return e.x = t.x * i, e.y = t.y * i, e.z = t.z * i, e } }, { key: "cross", value: function (e, t, i) { return nl.vec3.cross(e.v, t.v, i.v), e } }, { key: "add", value: function (e, t, i) { return nl.vec3.add(e.v, t.v, i.v), e } }, { key: "subtract", value: function (e, t, i) { return nl.vec3.subtract(e.v, t.v, i.v), e } }, { key: "lerp", value: function (e, t, i, n) { return nl.vec3.lerp(e.v, t.v, i.v, n), e } }, { key: "fract", value: function (e, t) { return e.x = t.x - Math.floor(t.x), e.y = t.y - Math.floor(t.y), e.x = t.z - Math.floor(t.z), e } }, { key: "floor", value: function (e, t) { return nl.vec3.floor(e.v, t.v), e } }, { key: "bezier", value: function (e, t, i, n, s, a) { nl.vec3.bezier(e.v, t.v, i.v, n.v, s.v, a) } }]), e
                     }(); sl.ZERO = new sl, sl.RIGHT = new sl(1, 0, 0), sl.UP = new sl(0, 1, 0), sl.DOWN = new sl(0, -1, 0), sl.FORWARD = new sl(0, 0, 1), sl.ONE = new sl(1, 1, 1);/* harmony default export */
                     var al = sl, rl = function () { function e() { it()(this, e), this.isDestructed = !1 } return st()(e, [{ key: "destruct", value: function () { this.isDestructed = !0 } }]), e }(), ol = rl, ll = function e() { it()(this, e) };
                     // public static context: WebGLRenderingContext;
                     //
                     // public static BYTE                           = 0x1400;
                     // public static UNSIGNED_BYTE                  = 0x1401;
                     // public static SHORT                          = 0x1402;
                     // public static UNSIGNED_SHORT                 = 0x1403;
                     // public static INT                            = 0x1404;
                     // public static UNSIGNED_INT                   = 0x1405;
                     // public static FLOAT                          = 0x1406;
                     ll.ACTIVE_ATTRIBUTES = 35721, ll.ACTIVE_ATTRIBUTE_MAX_LENGTH = 35722, ll.ACTIVE_TEXTURE = 34016, ll.ACTIVE_UNIFORMS = 35718, ll.ACTIVE_UNIFORM_MAX_LENGTH = 35719, ll.ALIASED_LINE_WIDTH_RANGE = 33902, ll.ALIASED_POINT_SIZE_RANGE = 33901, ll.ALPHA = 6406, ll.ALPHA_BITS = 3413, ll.ALWAYS = 519, ll.ARRAY_BUFFER = 34962, ll.ARRAY_BUFFER_BINDING = 34964, ll.ATTACHED_SHADERS = 35717, ll.BACK = 1029, ll.BLEND = 3042, ll.BLEND_COLOR = 32773, ll.BLEND_DST_ALPHA = 32970, ll.BLEND_DST_RGB = 32968, ll.BLEND_EQUATION = 32777, ll.BLEND_EQUATION_ALPHA = 34877, ll.BLEND_EQUATION_RGB = 32777, ll.BLEND_SRC_ALPHA = 32971, ll.BLEND_SRC_RGB = 32969, ll.BLUE_BITS = 3412, ll.BOOL = 35670, ll.BOOL_VEC2 = 35671, ll.BOOL_VEC3 = 35672, ll.BOOL_VEC4 = 35673, ll.BROWSER_DEFAULT_WEBGL = 37444, ll.BUFFER_SIZE = 34660, ll.BUFFER_USAGE = 34661, ll.BYTE = 5120, ll.CCW = 2305, ll.CLAMP_TO_EDGE = 33071, ll.COLOR_ATTACHMENT0 = 36064, ll.COLOR_BUFFER_BIT = 16384, ll.COLOR_CLEAR_VALUE = 3106, ll.COLOR_WRITEMASK = 3107, ll.COMPILE_STATUS = 35713, ll.COMPRESSED_TEXTURE_FORMATS = 34467, ll.CONSTANT_ALPHA = 32771, ll.CONSTANT_COLOR = 32769, ll.CONTEXT_LOST_WEBGL = 37442, ll.CULL_FACE = 2884, ll.CULL_FACE_MODE = 2885, ll.CURRENT_PROGRAM = 35725, ll.CURRENT_VERTEX_ATTRIB = 34342, ll.CW = 2304, ll.DECR = 7683, ll.DECR_WRAP = 34056, ll.DELETE_STATUS = 35712, ll.DEPTH_ATTACHMENT = 36096, ll.DEPTH_BITS = 3414, ll.DEPTH_BUFFER_BIT = 256, ll.DEPTH_CLEAR_VALUE = 2931, ll.DEPTH_COMPONENT = 6402, ll.DEPTH_COMPONENT16 = 33189, ll.DEPTH_FUNC = 2932, ll.DEPTH_RANGE = 2928, ll.DEPTH_STENCIL = 34041, ll.DEPTH_STENCIL_ATTACHMENT = 33306, ll.DEPTH_TEST = 2929, ll.DEPTH_WRITEMASK = 2930, ll.DITHER = 3024, ll.DONT_CARE = 4352, ll.DST_ALPHA = 772, ll.DST_COLOR = 774, ll.DYNAMIC_DRAW = 35048, ll.ELEMENT_ARRAY_BUFFER = 34963, ll.ELEMENT_ARRAY_BUFFER_BINDING = 34965, ll.EQUAL = 514, ll.FASTEST = 4353, ll.FLOAT = 5126, ll.FLOAT_MAT2 = 35674, ll.FLOAT_MAT3 = 35675, ll.FLOAT_MAT4 = 35676, ll.FLOAT_VEC2 = 35664, ll.FLOAT_VEC3 = 35665, ll.FLOAT_VEC4 = 35666, ll.FRAGMENT_SHADER = 35632, ll.FRAMEBUFFER = 36160, ll.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME = 36049, ll.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE = 36048, ll.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE = 36051, ll.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL = 36050, ll.FRAMEBUFFER_BINDING = 36006, ll.FRAMEBUFFER_COMPLETE = 36053, ll.FRAMEBUFFER_INCOMPLETE_ATTACHMENT = 36054, ll.FRAMEBUFFER_INCOMPLETE_DIMENSIONS = 36057, ll.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT = 36055, ll.FRAMEBUFFER_UNSUPPORTED = 36061, ll.FRONT = 1028, ll.FRONT_AND_BACK = 1032, ll.FRONT_FACE = 2886, ll.FUNC_ADD = 32774, ll.FUNC_REVERSE_SUBTRACT = 32779, ll.FUNC_SUBTRACT = 32778, ll.GENERATE_MIPMAP_HINT = 33170, ll.GEQUAL = 518, ll.GREATER = 516, ll.GREEN_BITS = 3411, ll.HIGH_FLOAT = 36338, ll.HIGH_INT = 36341, ll.INCR = 7682, ll.INCR_WRAP = 34055, ll.INFO_LOG_LENGTH = 35716, ll.INT = 5124, ll.INT_VEC2 = 35667, ll.INT_VEC3 = 35668, ll.INT_VEC4 = 35669, ll.INVALID_ENUM = 1280, ll.INVALID_FRAMEBUFFER_OPERATION = 1286, ll.INVALID_OPERATION = 1282, ll.INVALID_VALUE = 1281, ll.INVERT = 5386, ll.KEEP = 7680, ll.LEQUAL = 515, ll.LESS = 513, ll.LINEAR = 9729, ll.LINEAR_MIPMAP_LINEAR = 9987, ll.LINEAR_MIPMAP_NEAREST = 9985, ll.LINES = 1, ll.LINE_LOOP = 2, ll.LINE_STRIP = 3, ll.LINE_WIDTH = 2849, ll.LINK_STATUS = 35714, ll.LOW_FLOAT = 36336, ll.LOW_INT = 36339, ll.LUMINANCE = 6409, ll.LUMINANCE_ALPHA = 6410, ll.MAX_COMBINED_TEXTURE_IMAGE_UNITS = 35661, ll.MAX_CUBE_MAP_TEXTURE_SIZE = 34076, ll.MAX_FRAGMENT_UNIFORM_VECTORS = 36349, ll.MAX_RENDERBUFFER_SIZE = 34024, ll.MAX_TEXTURE_IMAGE_UNITS = 34930, ll.MAX_TEXTURE_SIZE = 3379, ll.MAX_VARYING_VECTORS = 36348, ll.MAX_VERTEX_ATTRIBS = 34921, ll.MAX_VERTEX_TEXTURE_IMAGE_UNITS = 35660, ll.MAX_VERTEX_UNIFORM_VECTORS = 36347, ll.MAX_VIEWPORT_DIMS = 3386, ll.MEDIUM_FLOAT = 36337, ll.MEDIUM_INT = 36340, ll.MIRRORED_REPEAT = 33648, ll.NEAREST = 9728, ll.NEAREST_MIPMAP_LINEAR = 9986, ll.NEAREST_MIPMAP_NEAREST = 9984, ll.NEVER = 512, ll.NICEST = 4354, ll.NONE = 0, ll.NOTEQUAL = 517, ll.NO_ERROR = 0, ll.NUM_COMPRESSED_TEXTURE_FORMATS = 34466, ll.ONE = 1, ll.ONE_MINUS_CONSTANT_ALPHA = 32772, ll.ONE_MINUS_CONSTANT_COLOR = 32770, ll.ONE_MINUS_DST_ALPHA = 773, ll.ONE_MINUS_DST_COLOR = 775, ll.ONE_MINUS_SRC_ALPHA = 771, ll.ONE_MINUS_SRC_COLOR = 769, ll.OUT_OF_MEMORY = 1285, ll.PACK_ALIGNMENT = 3333, ll.POINTS = 0, ll.POLYGON_OFFSET_FACTOR = 32824, ll.POLYGON_OFFSET_FILL = 32823, ll.POLYGON_OFFSET_UNITS = 10752, ll.RED_BITS = 3410, ll.RENDERBUFFER = 36161, ll.RENDERBUFFER_ALPHA_SIZE = 36179, ll.RENDERBUFFER_BINDING = 36007, ll.RENDERBUFFER_BLUE_SIZE = 36178, ll.RENDERBUFFER_DEPTH_SIZE = 36180, ll.RENDERBUFFER_GREEN_SIZE = 36177, ll.RENDERBUFFER_HEIGHT = 36163, ll.RENDERBUFFER_INTERNAL_FORMAT = 36164, ll.RENDERBUFFER_RED_SIZE = 36176, ll.RENDERBUFFER_STENCIL_SIZE = 36181, ll.RENDERBUFFER_WIDTH = 36162, ll.RENDERER = 7937, ll.REPEAT = 10497, ll.REPLACE = 7681, ll.RGB = 6407, ll.RGB5_A1 = 32855, ll.RGB565 = 36194, ll.RGBA = 6408, ll.RGBA4 = 32854, ll.SAMPLER_2D = 35678, ll.SAMPLER_CUBE = 35680, ll.SAMPLES = 32937, ll.SAMPLE_ALPHA_TO_COVERAGE = 32926, ll.SAMPLE_BUFFERS = 32936, ll.SAMPLE_COVERAGE = 32928, ll.SAMPLE_COVERAGE_INVERT = 32939, ll.SAMPLE_COVERAGE_VALUE = 32938, ll.SCISSOR_BOX = 3088, ll.SCISSOR_TEST = 3089, ll.SHADER_COMPILER = 36346, ll.SHADER_SOURCE_LENGTH = 35720, ll.SHADER_TYPE = 35663, ll.SHADING_LANGUAGE_VERSION = 35724; ll.SHORT = 5122, ll.SRC_ALPHA = 770, ll.SRC_ALPHA_SATURATE = 776, ll.SRC_COLOR = 768, ll.STATIC_DRAW = 35044, ll.STENCIL_ATTACHMENT = 36128, ll.STENCIL_BACK_FAIL = 34817, ll.STENCIL_BACK_FUNC = 34816, ll.STENCIL_BACK_PASS_DEPTH_FAIL = 34818, ll.STENCIL_BACK_PASS_DEPTH_PASS = 34819, ll.STENCIL_BACK_REF = 36003, ll.STENCIL_BACK_VALUE_MASK = 36004, ll.STENCIL_BACK_WRITEMASK = 36005, ll.STENCIL_BITS = 3415, ll.STENCIL_BUFFER_BIT = 1024, ll.STENCIL_CLEAR_VALUE = 2961, ll.STENCIL_FAIL = 2964, ll.STENCIL_FUNC = 2962, ll.STENCIL_INDEX = 6401, ll.STENCIL_INDEX8 = 36168, ll.STENCIL_PASS_DEPTH_FAIL = 2965, ll.STENCIL_PASS_DEPTH_PASS = 2966, ll.STENCIL_REF = 2967, ll.STENCIL_TEST = 2960, ll.STENCIL_VALUE_MASK = 2963, ll.STENCIL_WRITEMASK = 2968, ll.STREAM_DRAW = 35040, ll.SUBPIXEL_BITS = 3408, ll.TEXTURE = 5890, ll.TEXTURE0 = 33984, ll.TEXTURE1 = 33985, ll.TEXTURE2 = 33986, ll.TEXTURE3 = 33987, ll.TEXTURE4 = 33988, ll.TEXTURE5 = 33989, ll.TEXTURE6 = 33990, ll.TEXTURE7 = 33991, ll.TEXTURE8 = 33992, ll.TEXTURE9 = 33993, ll.TEXTURE10 = 33994, ll.TEXTURE11 = 33995, ll.TEXTURE12 = 33996, ll.TEXTURE13 = 33997, ll.TEXTURE14 = 33998, ll.TEXTURE15 = 33999, ll.TEXTURE16 = 34e3, ll.TEXTURE17 = 34001, ll.TEXTURE18 = 34002, ll.TEXTURE19 = 34003, ll.TEXTURE20 = 34004, ll.TEXTURE21 = 34005, ll.TEXTURE22 = 34006, ll.TEXTURE23 = 34007, ll.TEXTURE24 = 34008, ll.TEXTURE25 = 34009, ll.TEXTURE26 = 34010, ll.TEXTURE27 = 34011, ll.TEXTURE28 = 34012, ll.TEXTURE29 = 34013, ll.TEXTURE30 = 34014, ll.TEXTURE31 = 34015, ll.TEXTURE_2D = 3553, ll.TEXTURE_BINDING_2D = 32873, ll.TEXTURE_BINDING_CUBE_MAP = 34068, ll.TEXTURE_CUBE_MAP = 34067, ll.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070, ll.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072, ll.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074, ll.TEXTURE_CUBE_MAP_POSITIVE_X = 34069, ll.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071, ll.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073, ll.TEXTURE_MAG_FILTER = 10240, ll.TEXTURE_MIN_FILTER = 10241, ll.TEXTURE_WRAP_S = 10242, ll.TEXTURE_WRAP_T = 10243, ll.TRIANGLES = 4, ll.TRIANGLE_FAN = 6, ll.TRIANGLE_STRIP = 5, ll.UNPACK_ALIGNMENT = 3317, ll.UNPACK_COLORSPACE_CONVERSION_WEBGL = 37443, ll.UNPACK_FLIP_Y_WEBGL = 37440, ll.UNPACK_PREMULTIPLY_ALPHA_WEBGL = 37441, ll.UNSIGNED_BYTE = 5121, ll.UNSIGNED_INT = 5125, ll.UNSIGNED_SHORT = 5123, ll.UNSIGNED_SHORT_4_4_4_4 = 32819, ll.UNSIGNED_SHORT_5_5_5_1 = 32820, ll.UNSIGNED_SHORT_5_6_5 = 33635, ll.VALIDATE_STATUS = 35715, ll.VENDOR = 7936, ll.VERSION = 7938, ll.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING = 34975, ll.VERTEX_ATTRIB_ARRAY_ENABLED = 34338, ll.VERTEX_ATTRIB_ARRAY_NORMALIZED = 34922, ll.VERTEX_ATTRIB_ARRAY_POINTER = 34373, ll.VERTEX_ATTRIB_ARRAY_SIZE = 34339, ll.VERTEX_ATTRIB_ARRAY_STRIDE = 34340, ll.VERTEX_ATTRIB_ARRAY_TYPE = 34341, ll.VERTEX_SHADER = 35633, ll.VIEWPORT = 2978, ll.ZERO = 0;/* harmony default export */
                     var hl = ll, ul = function () {
                            function e() { it()(this, e) } return st()(e, null, [{ key: "log", value: function () { if (e.ENABLED) { for (var t = arguments.length, i = Array(t), n = 0; n < t; n++)i[n] = arguments[n]; console.log(i) } } }, {
                                   key: "error", value: function () {
                                          if (e.ENABLED) {
                                                 // console.trace();
                                                 for (var t = arguments.length, i = Array(t), n = 0; n < t; n++)i[n] = arguments[n]; console.error(i)
                                          }
                                   }
                            }, { key: "logToScreen", value: function (t) { e.ENABLED && (e._screenLogDiv || (e._screenLogDiv = e.createDebugDiv()), e._screenLogDiv.innerHTML = t) } }, { key: "logAppendToScreen", value: function (t) { e.ENABLED && (e._screenLogDiv || (e._screenLogDiv = e.createDebugDiv()), e._screenLogDiv.innerHTML += t) } }, { key: "logArray", value: function (t) { if (e.ENABLED) { for (var i = t.length, n = "", s = 0; s < i; s++)n += t[s], n += ","; n = n.substring(0, n.length - 1), console.log(n) } } }, { key: "log2dArray", value: function (t) { if (e.ENABLED) { for (var i = t.length, n = "", s = 0; s < i; s++)for (var a = 0; a < t[s].length; a++)n += t[s][a], n += ","; n = n.substring(0, n.length - 1), console.log(n) } } }, { key: "createDebugDiv", value: function () { var e = document.createElement("div"); return document.body.appendChild(e), e.style.position = "absolute", e.style.left = "160px", e.style.top = "0px", e.style.color = "#fff", e.style.backgroundColor = "#000", e.style.display = "block", e.style.width = "158px", e.style.height = "94px", e.style.padding = "1px", e.style.font = "10px Helvetica,Arial,sans-serif", e.style.lineHeight = "14px", e } }]), e
                     }(); ul.ENABLED = !1;/* harmony default export */
                     var cl = ul, dl = function () {
                            function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; it()(this, e), this.v = nl.vec2.fromValues(t, i) } return st()(e, [{
                                   key: "clone",/* CLONE, COPY, SET */
                                   value: function () { return new e(this.x, this.y) }
                            }, { key: "copy", value: function (e) { return nl.vec2.copy(this.v, e.v), this } }, { key: "setValues", value: function (e, t) { return nl.vec2.set(this.v, e, t), this } }, { key: "length", value: function () { return nl.vec2.length(this.v) } }, { key: "squaredLength", value: function () { return nl.vec2.squaredLength(this.v) } }, { key: "toString", value: function () { return this.x + "," + this.y } }, { key: "equals", value: function (e) { return e.x === this.x && e.y === this.y } }, { key: "normalize", value: function () { return nl.vec2.normalize(this.v, this.v), this } }, { key: "negate", value: function () { return nl.vec2.negate(this.v, this.v), this } }, { key: "multiplyScalar", value: function (e) { return nl.vec2.scale(this.v, this.v, e), this } }, { key: "multiply", value: function (e) { return nl.vec2.multiply(this.v, this.v, e.v), this } }, { key: "add", value: function (e) { return nl.vec2.add(this.v, this.v, e.v), this } }, { key: "subtract", value: function (e) { return nl.vec2.subtract(this.v, this.v, e.v), this } }, { key: "subtractScalar", value: function (e) { return this.x -= e, this.y -= e, this } }, { key: "rotate", value: function (e, t) { var i = Math.sin(t), n = Math.cos(t); this.x -= e.x, this.y -= e.y; var s = this.x * n - this.y * i, a = this.x * i + this.y * n; return this.x = s + e.x, this.y = a + e.y, this } }, { key: "x", get: function () { return this.v[0] }, set: function (e) { this.v[0] = e } }, { key: "y", get: function () { return this.v[1] }, set: function (e) { this.v[1] = e } }], [{ key: "dot", value: function (e, t) { return nl.vec2.dot(e.v, t.v) } }, { key: "distance", value: function (e, t) { return nl.vec2.distance(e.v, t.v) } }, { key: "multiplyScalar", value: function (e, t, i) { return e.x = t.x * i, e.y = t.y * i, e } }, { key: "cross", value: function (e, t) { return e.x * t.y - e.y * t.x } }, { key: "add", value: function (e, t, i) { return nl.vec2.add(e.v, t.v, i.v), e } }, { key: "subtract", value: function (e, t, i) { return nl.vec2.subtract(e.v, t.v, i.v), e } }, { key: "lerp", value: function (e, t, i, n) { return nl.vec2.lerp(e.v, t.v, i.v, n), e } }, { key: "fract", value: function (t, i) { return e.subtract(i, e.floor(t, i), t), t } }, { key: "floor", value: function (e, t) { return e.x = Math.floor(t.x), e.y = Math.floor(t.y), e } }]), e
                     }(); dl.ZERO = new dl(0, 0);/* harmony default export */
                     var _l = dl, pl = function (e) { function t(e, i) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0; it()(this, t); var s = mt()(this, (t.__proto__ || ft()(t)).call(this)); return s._loc = e.shader.uniformLocations[i], s._loc || cl.log("FloatUniform: uniform does not exist on shader: ", e.name, i), s._renderer = e.renderer, s._program = e.shader.program, s.set(n), s } return At()(t, e), st()(t, [{ key: "set", value: function (e) { e != this._value && (this._value = e, this._renderer.renderState.setProgram(this._program), this._renderer.context.uniform1f(this._loc, this._value)) } }, { key: "getValue", value: function () { return this._value } }, { key: "destruct", value: function () { this._loc = null, this._renderer = null, this._program = null, Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this) } }]), t }(ol), vl = pl, fl = function () { function e(t, i) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : new _l; it()(this, e), this._value = n, this._loc = t.shader.uniformLocations[i], this._loc || cl.log("FloatUniform: uniform does not exist on shader: ", i), this._renderer = t.renderer, this._program = t.shader.program } return st()(e, [{ key: "set", value: function (e) { e.x == this._value.x && e.y == this._value.y || (this._value = e, this._renderer.renderState.setProgram(this._program), this._renderer.context.uniform2fv(this._loc, this._value.v)) } }, { key: "getValue", value: function () { return this._value } }]), e }(), gl = fl, ml = function () { function e(t, i) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : new al; it()(this, e), this._value = n.clone(), this._loc = t.shader.uniformLocations[i], this._loc || cl.log("FloatUniform: uniform does not exist on shader: ", i), this._renderer = t.renderer, this._program = t.shader.program } return st()(e, [{ key: "set", value: function (e) { e.x == this._value.x && e.y == this._value.y && e.z == this._value.z || (this._value.copy(e), this._renderer.renderState.setProgram(this._program), this._renderer.context.uniform3fv(this._loc, this._value.v)) } }, { key: "getValue", value: function () { return this._value } }]), e }(), yl = ml, El = function (e) {
                            function t(e, i) {
                                   var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null; it()(this, t); var s = mt()(this, (t.__proto__ || ft()(t)).call(this));
                                   // NOTE: Depth test needs to be true for depth write to work. If you want to write without reading, set depthTest
                                   // to true and depthFunc to GL.ALWAYS"
                                   return s._shaderDefines = [], s.drawType = hl.TRIANGLES, s.depthTest = !0, s.depthWrite = !0, s.blend = !1, s.culling = hl.BACK, s.blendFuncSeparate = !1, s.renderer = e, s.name = i, s.shader = n, s.id = t.staticId++, s.setDefaultBlending(), s
                            } return At()(t, e), st()(t, [{
                                   key: "setActive", value: function () {
                                          // even if there is no material switch for the renderer, a uniform might have been set on a different program
                                          this.renderer.renderState.setProgram(this.shader.program); for (var e = 0; e < this.shader.textureUniforms.length; e++)this.shader.textureUniforms[e].bind(); this.renderer.renderState.material != this && (this.renderer.renderState.material = this, this.renderer.renderState.setDepthTest(this.depthTest), this.renderer.renderState.setDepthMask(this.depthWrite), this.renderer.renderState.setDepthFunc(this.depthFunc), this.renderer.renderState.setCulling(this.culling), this.renderer.renderState.setBlendEnabled(this.blend), this.blend && (this.renderer.renderState.setBlendEquation(this.blendEquation), this.blendFuncSeparate ? this.renderer.renderState.setBlendFuncSeparate(this.sourceBlendRGB, this.destinationBlendRGB, this.sourceBlendAlpha, this.destinationBlendAlpha) : this.renderer.renderState.setBlendFunc(this.sourceBlend, this.destinationBlend)))
                                   }
                            }, { key: "setDefaultBlending", value: function () { this.depthTest = !0, this.depthWrite = !0, this.blend = !1, this.blendEquation = hl.FUNC_ADD, this.sourceBlend = hl.ZERO, this.destinationBlend = hl.ONE } }, { key: "setAlphaBlending", value: function () { this.depthWrite = !1, this.depthTest = !0, this.blend = !0, this.blendEquation = hl.FUNC_ADD, this.setBlendUnified(hl.SRC_ALPHA, hl.ONE_MINUS_SRC_ALPHA) } }, { key: "setPreMultipliedAlphaBlending", value: function () { this.depthWrite = !1, this.depthTest = !0, this.blend = !0, this.blendEquation = hl.FUNC_ADD, this.setBlendUnified(hl.ONE, hl.ONE_MINUS_SRC_ALPHA) } }, {
                                   key: "setMaxBlending", value: function () {
                                          this.depthWrite = !1, this.depthTest = !1, this.blend = !0, this.blendEquation = 32776,// requires enabling EXT_blend_minmax
                                          this.sourceBlend = hl.ONE, this.destinationBlend = hl.ONE, this.setBlendUnified(hl.ONE, hl.ONE)
                                   }
                            }, { key: "setAdditiveBlending", value: function () { this.depthWrite = !1, this.depthTest = !0, this.blend = !0, this.blendEquation = hl.FUNC_ADD, this.setBlendUnified(hl.ONE, hl.ONE) } }, { key: "setMultiplyBlending", value: function () { this.depthWrite = !1, this.depthTest = !0, this.blend = !0, this.blendEquation = hl.FUNC_ADD, this.setBlendUnified(hl.ZERO, hl.SRC_COLOR) } }, { key: "setSubtractiveBlending", value: function () { this.depthWrite = !1, this.depthTest = !1, this.blend = !0, this.blendEquation = hl.FUNC_SUBTRACT, this.setBlendUnified(hl.ONE, hl.ONE_MINUS_SRC_ALPHA) } }, { key: "setBlendUnified", value: function (e, t) { this.blendFuncSeparate = !1, this.sourceBlend = e, this.destinationBlend = t } }, { key: "setBlendSeparate", value: function (e, t, i, n) { this.blendFuncSeparate = !0, this.sourceBlendRGB = e, this.sourceBlendAlpha = i, this.destinationBlendRGB = t, this.destinationBlendAlpha = n } }, { key: "setCullingBackFace", value: function () { this.culling = hl.BACK } }, { key: "setCullingFrontFace", value: function () { this.culling = hl.FRONT } }, { key: "setCullingDisabled", value: function () { this.culling = hl.NONE } }, { key: "setDrawTypePoints", value: function () { this.drawType = hl.POINTS } }, { key: "setDrawTypeLines", value: function () { this.drawType = hl.LINES } }, { key: "setDrawTypeLineStrip", value: function () { this.drawType = hl.LINE_STRIP } }, { key: "setDrawTypeTriangles", value: function () { this.drawType = hl.TRIANGLES } }, { key: "setDrawTypeTriangleFan", value: function () { this.drawType = hl.TRIANGLE_FAN } }, { key: "setDrawTypeTriangleStrip", value: function () { this.drawType = hl.TRIANGLE_STRIP } }, { key: "setFloat", value: function (e, t) { var i = this.getLoc(e); i && this.renderer.context.uniform1f(i, t) } }, { key: "setInt", value: function (e, t) { var i = this.getLoc(e); i && this.renderer.context.uniform1i(i, t) } }, { key: "setFloats", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 0, a = this.getLoc(e); a && this.renderer.context.uniform4f(a, t, i, n, s) } }, { key: "setShaderVector", value: function (e, t) { var i = this.renderer.context, n = this.getLoc(e); if (n) switch (t.length) { case 1: i.uniform1f(n, t[0]); break; case 2: i.uniform2f(n, t[0], t[1]); break; case 3: i.uniform3f(n, t[0], t[1], t[2]); break; case 4: i.uniform4f(n, t[0], t[1], t[2], t[3]) } } }, { key: "setMatrix", value: function (e, t) { var i = this.getLoc(e); i && this.renderer.context.uniformMatrix4fv(i, !1, t) } }, { key: "setMatrix3x3", value: function (e, t) { var i = this.getLoc(e); i && this.renderer.context.uniformMatrix3fv(i, !1, t) } }, { key: "setMatrix2x2", value: function (e, t) { var i = this.getLoc(e); i && this.renderer.context.uniformMatrix2fv(i, !1, t) } }, { key: "setMatrixArray", value: function (e, t) { for (var i = 0; i < t.length; i++) { var n = e + "[" + i + "]"; this.setMatrix(n, t[i]) } } }, { key: "setMatrixArray2", value: function (e, t) { var i = this.getLoc(e); i && this.renderer.context.uniformMatrix4fv(i, !1, t) } }, { key: "setMatrixFloatArray", value: function (e, t) { var i = this.getLoc(e); i && this.renderer.context.uniformMatrix4fv(i, !1, t) } }, { key: "setTexture", value: function (e, t) { var i = this.shader.getTextureUniformByName(e); i ? i.set(t) : cl.log("setTexture: uniform not present in shader: ", e, this.name) } }, { key: "setFloat32Array", value: function (e, t) { var i = this.getLoc(e); i && this.renderer.context.uniform1fv(i, t) } }, { key: "setInt32Array", value: function (e, t) { var i = this.getLoc(e); i && this.renderer.context.uniform1iv(i, t) } }, { key: "setColor", value: function (e, t) { var i = this.getLoc(e); i && this.renderer.context.uniform4f(i, t.r, t.g, t.b, t.a) } }, { key: "setVector3", value: function (e, t) { var i = this.getLoc(e); i && this.renderer.context.uniform3fv(i, t.v) } }, { key: "setVector3Array", value: function (e, t) { var i = this.getLoc(e); i && this.renderer.context.uniform3fv(i, t) } }, { key: "setVector2", value: function (e, t) { var i = this.getLoc(e); i && this.renderer.context.uniform2fv(i, t.v) } }, { key: "setVector2Array", value: function (e, t) { var i = this.getLoc(e); i && this.renderer.context.uniform2fv(i, t) } }, { key: "setVector4", value: function (e, t) { var i = this.getLoc(e); i && this.renderer.context.uniform4fv(i, t.v) } }, { key: "setVector4Array", value: function (e, t) { var i = this.getLoc(e); i && this.renderer.context.uniform4fv(i, t) } }, {
                                   key: "getLoc", value: function (e) {
                                          var t = this.shader.uniformLocations[e]; if (this.renderer.renderState.setProgram(this.shader.program), !1 !== t && !t) {
                                                 if (
                                                        // this is used by uniform arrays: the uniform was not found in the shader text, but does exist after
                                                        // compiling can be used for caching of all uniforms
                                                        t = this.renderer.context.getUniformLocation(this.shader.program, e)) return this.shader.uniformLocations[e] = t, t; this.shader.uniformLocations[e] = !1, cl.log("uniform not present in shader: ", this.name, e)
                                          } return t
                                   }
                            }, { key: "hasUniform", value: function (e) { return !!this.shader.uniformLocations[e] } }, { key: "addFloatUniform", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; return new vl(this, e, t) } }, { key: "addVector2Uniform", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new _l; return new gl(this, e, t) } }, { key: "addVector3Uniform", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new al; return new yl(this, e, t) } }, { key: "addShaderDefines", value: function () { for (var e = arguments.length, t = Array(e), i = 0; i < e; i++)t[i] = arguments[i]; for (var n = 0; n < t.length; n++)-1 === this._shaderDefines.indexOf(t[n]) && this._shaderDefines.push(t[n]) } }, { key: "getShaderDefines", value: function () { return this._shaderDefines } }, { key: "clearShaderDefines", value: function () { this._shaderDefines = [] } }, { key: "destruct", value: function () { this.shader && (this.shader.destruct(), this.shader = null), Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this) } }]), t
                     }(ol); El.staticId = 0;/* harmony default export */
                     var Tl = El, Al = function e(t, i, n) { it()(this, e), this.name = t, this.stride = i, this.loc = n }, bl = Al, Rl = function () {
                            function e(t, i, n, s) { it()(this, e), this.name = i, this._samplerIndex = s, t.renderer.renderState.setProgram(t.program), t.renderer.context.uniform1i(n, s) } return st()(e, [{ key: "set", value: function (e) { this._texture = e } }, {
                                   key: "bind", value: function () {
                                          //make sure the texture is bound to the slot which is sampled from
                                          this._texture && this._texture.bindToSlot(this._samplerIndex)
                                   }
                            }]), e
                     }(), wl = Rl, Il = function e() { it()(this, e) }; Il.READ_BUFFER = 3074, Il.UNPACK_ROW_LENGTH = 3314, Il.UNPACK_SKIP_ROWS = 3315, Il.UNPACK_SKIP_PIXELS = 3316, Il.PACK_ROW_LENGTH = 3330, Il.PACK_SKIP_ROWS = 3331, Il.PACK_SKIP_PIXELS = 3332, Il.COLOR = 6144, Il.DEPTH = 6145, Il.STENCIL = 6146, Il.RED = 6403, Il.RGB8 = 32849, Il.RGBA8 = 32856, Il.RGB10_A2 = 32857, Il.TEXTURE_BINDING_3D = 32874, Il.UNPACK_SKIP_IMAGES = 32877, Il.UNPACK_IMAGE_HEIGHT = 32878, Il.TEXTURE_3D = 32879, Il.TEXTURE_WRAP_R = 32882, Il.MAX_3D_TEXTURE_SIZE = 32883, Il.UNSIGNED_INT_2_10_10_10_REV = 33640, Il.MAX_ELEMENTS_VERTICES = 33e3, Il.MAX_ELEMENTS_INDICES = 33001, Il.TEXTURE_MIN_LOD = 33082, Il.TEXTURE_MAX_LOD = 33083, Il.TEXTURE_BASE_LEVEL = 33084, Il.TEXTURE_MAX_LEVEL = 33085, Il.MIN = 32775, Il.MAX = 32776, Il.DEPTH_COMPONENT24 = 33190, Il.MAX_TEXTURE_LOD_BIAS = 34045, Il.TEXTURE_COMPARE_MODE = 34892, Il.TEXTURE_COMPARE_FUNC = 34893, Il.CURRENT_QUERY = 34917, Il.QUERY_RESULT = 34918, Il.QUERY_RESULT_AVAILABLE = 34919, Il.STREAM_READ = 35041, Il.STREAM_COPY = 35042, Il.STATIC_READ = 35045, Il.STATIC_COPY = 35046, Il.DYNAMIC_READ = 35049, Il.DYNAMIC_COPY = 35050, Il.MAX_DRAW_BUFFERS = 34852, Il.DRAW_BUFFER0 = 34853, Il.DRAW_BUFFER1 = 34854, Il.DRAW_BUFFER2 = 34855, Il.DRAW_BUFFER3 = 34856, Il.DRAW_BUFFER4 = 34857, Il.DRAW_BUFFER5 = 34858, Il.DRAW_BUFFER6 = 34859, Il.DRAW_BUFFER7 = 34860, Il.DRAW_BUFFER8 = 34861, Il.DRAW_BUFFER9 = 34862, Il.DRAW_BUFFER10 = 34863, Il.DRAW_BUFFER11 = 34864, Il.DRAW_BUFFER12 = 34865, Il.DRAW_BUFFER13 = 34866, Il.DRAW_BUFFER14 = 34867, Il.DRAW_BUFFER15 = 34868, Il.MAX_FRAGMENT_UNIFORM_COMPONENTS = 35657, Il.MAX_VERTEX_UNIFORM_COMPONENTS = 35658, Il.SAMPLER_3D = 35679, Il.SAMPLER_2D_SHADOW = 35682, Il.FRAGMENT_SHADER_DERIVATIVE_HINT = 35723, Il.PIXEL_PACK_BUFFER = 35051, Il.PIXEL_UNPACK_BUFFER = 35052, Il.PIXEL_PACK_BUFFER_BINDING = 35053, Il.PIXEL_UNPACK_BUFFER_BINDING = 35055, Il.FLOAT_MAT2x3 = 35685, Il.FLOAT_MAT2x4 = 35686, Il.FLOAT_MAT3x2 = 35687, Il.FLOAT_MAT3x4 = 35688, Il.FLOAT_MAT4x2 = 35689, Il.FLOAT_MAT4x3 = 35690, Il.SRGB = 35904, Il.SRGB8 = 35905, Il.SRGB8_ALPHA8 = 35907, Il.COMPARE_REF_TO_TEXTURE = 34894, Il.RGBA32F = 34836, Il.RGB32F = 34837, Il.RGBA16F = 34842, Il.RGB16F = 34843, Il.VERTEX_ATTRIB_ARRAY_INTEGER = 35069, Il.MAX_ARRAY_TEXTURE_LAYERS = 35071, Il.MIN_PROGRAM_TEXEL_OFFSET = 35076, Il.MAX_PROGRAM_TEXEL_OFFSET = 35077, Il.MAX_VARYING_COMPONENTS = 35659, Il.TEXTURE_2D_ARRAY = 35866, Il.TEXTURE_BINDING_2D_ARRAY = 35869, Il.R11F_G11F_B10F = 35898, Il.UNSIGNED_INT_10F_11F_11F_REV = 35899, Il.RGB9_E5 = 35901, Il.UNSIGNED_INT_5_9_9_9_REV = 35902, Il.TRANSFORM_FEEDBACK_BUFFER_MODE = 35967, Il.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS = 35968, Il.TRANSFORM_FEEDBACK_VARYINGS = 35971, Il.TRANSFORM_FEEDBACK_BUFFER_START = 35972, Il.TRANSFORM_FEEDBACK_BUFFER_SIZE = 35973, Il.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN = 35976, Il.RASTERIZER_DISCARD = 35977, Il.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS = 35978, Il.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS = 35979, Il.INTERLEAVED_ATTRIBS = 35980, Il.SEPARATE_ATTRIBS = 35981, Il.TRANSFORM_FEEDBACK_BUFFER = 35982, Il.TRANSFORM_FEEDBACK_BUFFER_BINDING = 35983, Il.RGBA32UI = 36208, Il.RGB32UI = 36209, Il.RGBA16UI = 36214, Il.RGB16UI = 36215, Il.RGBA8UI = 36220, Il.RGB8UI = 36221, Il.RGBA32I = 36226, Il.RGB32I = 36227, Il.RGBA16I = 36232, Il.RGB16I = 36233, Il.RGBA8I = 36238, Il.RGB8I = 36239, Il.RED_INTEGER = 36244, Il.RGB_INTEGER = 36248, Il.RGBA_INTEGER = 36249, Il.SAMPLER_2D_ARRAY = 36289, Il.SAMPLER_2D_ARRAY_SHADOW = 36292, Il.SAMPLER_CUBE_SHADOW = 36293, Il.UNSIGNED_INT_VEC2 = 36294, Il.UNSIGNED_INT_VEC3 = 36295, Il.UNSIGNED_INT_VEC4 = 36296, Il.INT_SAMPLER_2D = 36298, Il.INT_SAMPLER_3D = 36299, Il.INT_SAMPLER_CUBE = 36300, Il.INT_SAMPLER_2D_ARRAY = 36303, Il.UNSIGNED_INT_SAMPLER_2D = 36306, Il.UNSIGNED_INT_SAMPLER_3D = 36307, Il.UNSIGNED_INT_SAMPLER_CUBE = 36308, Il.UNSIGNED_INT_SAMPLER_2D_ARRAY = 36311, Il.DEPTH_COMPONENT32F = 36012, Il.DEPTH32F_STENCIL8 = 36013, Il.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269, Il.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING = 33296, Il.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE = 33297, Il.FRAMEBUFFER_ATTACHMENT_RED_SIZE = 33298, Il.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE = 33299, Il.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE = 33300, Il.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE = 33301, Il.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE = 33302, Il.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE = 33303, Il.FRAMEBUFFER_DEFAULT = 33304, Il.DEPTH_STENCIL_ATTACHMENT = 33306, Il.DEPTH_STENCIL = 34041, Il.UNSIGNED_INT_24_8 = 34042, Il.DEPTH24_STENCIL8 = 35056, Il.UNSIGNED_NORMALIZED = 35863, Il.DRAW_FRAMEBUFFER_BINDING = 36006,/* Same as FRAMEBUFFER_BINDING */
                            Il.READ_FRAMEBUFFER = 36008, Il.DRAW_FRAMEBUFFER = 36009, Il.READ_FRAMEBUFFER_BINDING = 36010, Il.RENDERBUFFER_SAMPLES = 36011, Il.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER = 36052, Il.MAX_COLOR_ATTACHMENTS = 36063, Il.COLOR_ATTACHMENT1 = 36065, Il.COLOR_ATTACHMENT2 = 36066, Il.COLOR_ATTACHMENT3 = 36067, Il.COLOR_ATTACHMENT4 = 36068, Il.COLOR_ATTACHMENT5 = 36069, Il.COLOR_ATTACHMENT6 = 36070, Il.COLOR_ATTACHMENT7 = 36071, Il.COLOR_ATTACHMENT8 = 36072, Il.COLOR_ATTACHMENT9 = 36073, Il.COLOR_ATTACHMENT10 = 36074, Il.COLOR_ATTACHMENT11 = 36075, Il.COLOR_ATTACHMENT12 = 36076, Il.COLOR_ATTACHMENT13 = 36077, Il.COLOR_ATTACHMENT14 = 36078, Il.COLOR_ATTACHMENT15 = 36079, Il.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE = 36182, Il.MAX_SAMPLES = 36183, Il.HALF_FLOAT = 5131, Il.RG = 33319, Il.RG_INTEGER = 33320, Il.R8 = 33321, Il.RG8 = 33323, Il.R16F = 33325, Il.R32F = 33326, Il.RG16F = 33327, Il.RG32F = 33328, Il.R8I = 33329, Il.R8UI = 33330, Il.R16I = 33331, Il.R16UI = 33332, Il.R32I = 33333, Il.R32UI = 33334, Il.RG8I = 33335, Il.RG8UI = 33336, Il.RG16I = 33337, Il.RG16UI = 33338, Il.RG32I = 33339, Il.RG32UI = 33340, Il.VERTEX_ARRAY_BINDING = 34229, Il.R8_SNORM = 36756, Il.RG8_SNORM = 36757; Il.RGB8_SNORM = 36758, Il.RGBA8_SNORM = 36759, Il.SIGNED_NORMALIZED = 36764, Il.COPY_READ_BUFFER = 36662, Il.COPY_WRITE_BUFFER = 36663, Il.COPY_READ_BUFFER_BINDING = 36662,/* Same as COPY_READ_BUFFER */
                                   Il.COPY_WRITE_BUFFER_BINDING = 36663,/* Same as COPY_WRITE_BUFFER */
                                   Il.UNIFORM_BUFFER = 35345, Il.UNIFORM_BUFFER_BINDING = 35368, Il.UNIFORM_BUFFER_START = 35369, Il.UNIFORM_BUFFER_SIZE = 35370, Il.MAX_VERTEX_UNIFORM_BLOCKS = 35371, Il.MAX_FRAGMENT_UNIFORM_BLOCKS = 35373, Il.MAX_COMBINED_UNIFORM_BLOCKS = 35374, Il.MAX_UNIFORM_BUFFER_BINDINGS = 35375, Il.MAX_UNIFORM_BLOCK_SIZE = 35376, Il.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS = 35377, Il.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS = 35379, Il.UNIFORM_BUFFER_OFFSET_ALIGNMENT = 35380, Il.ACTIVE_UNIFORM_BLOCKS = 35382, Il.UNIFORM_TYPE = 35383, Il.UNIFORM_SIZE = 35384, Il.UNIFORM_BLOCK_INDEX = 35386, Il.UNIFORM_OFFSET = 35387, Il.UNIFORM_ARRAY_STRIDE = 35388, Il.UNIFORM_MATRIX_STRIDE = 35389, Il.UNIFORM_IS_ROW_MAJOR = 35390, Il.UNIFORM_BLOCK_BINDING = 35391, Il.UNIFORM_BLOCK_DATA_SIZE = 35392, Il.UNIFORM_BLOCK_ACTIVE_UNIFORMS = 35394, Il.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES = 35395, Il.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER = 35396, Il.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER = 35398, Il.INVALID_INDEX = 4294967295, Il.MAX_VERTEX_OUTPUT_COMPONENTS = 37154, Il.MAX_FRAGMENT_INPUT_COMPONENTS = 37157, Il.MAX_SERVER_WAIT_TIMEOUT = 37137, Il.OBJECT_TYPE = 37138, Il.SYNC_CONDITION = 37139, Il.SYNC_STATUS = 37140, Il.SYNC_FLAGS = 37141, Il.SYNC_FENCE = 37142, Il.SYNC_GPU_COMMANDS_COMPLETE = 37143, Il.UNSIGNALED = 37144, Il.SIGNALED = 37145, Il.ALREADY_SIGNALED = 37146, Il.TIMEOUT_EXPIRED = 37147, Il.CONDITION_SATISFIED = 37148, Il.WAIT_FAILED = 37149, Il.SYNC_FLUSH_COMMANDS_BIT = 1, Il.VERTEX_ATTRIB_ARRAY_DIVISOR = 35070, Il.ANY_SAMPLES_PASSED = 35887, Il.ANY_SAMPLES_PASSED_CONSERVATIVE = 36202, Il.SAMPLER_BINDING = 35097, Il.RGB10_A2UI = 36975, Il.INT_2_10_10_10_REV = 36255, Il.TRANSFORM_FEEDBACK = 36386, Il.TRANSFORM_FEEDBACK_PAUSED = 36387, Il.TRANSFORM_FEEDBACK_ACTIVE = 36388, Il.TRANSFORM_FEEDBACK_BINDING = 36389, Il.TEXTURE_IMMUTABLE_FORMAT = 37167, Il.MAX_ELEMENT_INDEX = 36203, Il.TEXTURE_IMMUTABLE_LEVELS = 33503;/* harmony default export */
                     var Pl = Il, Ll = function (e) {
                            function t(e) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : []; it()(this, t); var n = mt()(this, (t.__proto__ || ft()(t)).call(this)); return n.uniformLocations = {}, n.id = t.staticId, t.staticId++, n.renderer = e, n.shaderDefines = i, n } return At()(t, e), st()(t, [{ key: "load", value: function (e, t, i, n) { var s = this; el.loadMultipleTexts([t, i], function () { for (var t = arguments.length, i = Array(t), a = 0; a < t; a++)i[a] = arguments[a]; s.loadIncludes(i, function (t) { s.init(e, t[0], t[1], n) }) }) } }, { key: "loadIncludes", value: function (e, t) { for (var i = this, n = /^#include\s+(\S+)/, s = [], a = 0; a < e.length; a++)for (var r = this.renderer.userShaderPath, o = e[a].split("\n"), l = 0; l < o.length; l++) { var h = o[l]; h = h.trim(); var u = void 0; null !== (u = n.exec(h)) && s.push([r + u[1], u]) } if (s.length) { for (var c = [], d = 0; d < s.length; d++)c[d] = s[d][0]; el.loadMultipleTexts(c, function () { for (var n = arguments.length, a = Array(n), r = 0; r < n; r++)a[r] = arguments[r]; for (var o = 0; o < e.length; o++)for (var l = 0; l < s.length; l++)e[o] = e[o].replace(s[l][1][0], "\n\n///// Start " + c[l] + "\n\n" + a[l] + "\n\n///// End " + c[l] + "\n\n"); i.loadIncludes(e, t) }) } else t.call(this, e) } }, {
                                   key: "init", value: function (e, i, n, s) {
                                          if (this.name = e, this.shaderDefines && this.shaderDefines.length > 0) { for (var a = "", r = 0; r < this.shaderDefines.length; r++)a += "#define " + this.shaderDefines[r] + "\n"; cl.log("adding defines: ", this.name, a), i = a + i, n = a + n } i = t.stripUniformDuplicates(i), n = t.stripUniformDuplicates(n),
                                                 // allow renderer to have to custom parsing logic unique to each type
                                                 // of renderer
                                                 i = this.renderer.preprocessShaderString(i), n = this.renderer.preprocessShaderString(n); var o = this.renderer.context, l = this.compileShader(o, i, o.VERTEX_SHADER), h = this.compileShader(o, n, o.FRAGMENT_SHADER); this.program = this.LinkProgram(o, l, h),
                                                        // https://bocoup.com/weblog/counting-uniforms-in-webgl
                                                        this.getUniforms(o, this.program), this.getAttributes(o, this.program), s && s.call(this)
                                   }
                            }, {
                                   key: "compileShader", value: function (e, t, i) {
                                          var n = e.createShader(i); if (e.shaderSource(n, t), e.compileShader(n), e.getShaderParameter(n, e.COMPILE_STATUS)) return n; var s = e.getShaderInfoLog(n); cl.error("compileShader: error: " + this.name, (i === hl.VERTEX_SHADER ? "vs" : "fs") + " \n" + s), console.log("%c compileShader: " + this.name + (i === hl.VERTEX_SHADER ? " vs" : " fs"), "background: #fff0f0; color: red"), console.log(s); for (var a = /ERROR: (\d+):(\d+):/, r = s.split("\n"), o = [], l = 0; l < r.length; l++) { var h = r[l], u = void 0; null !== (u = a.exec(h)) && (o[u[2] - 1] = h) }
                                          // create error console log
                                          r = t.split("\n"); var c = []; c[0] = ""; for (var d = 0; d < r.length; d++)c[0] += "%c" + r[d] + "\n", c[d + 1] = o[d] ? "background: #fff0f0; color: red" : "background: white; color: black", o[d] && (c[0] += " --\x3e " + o[d] + "\n"); return console.log.apply(console, c), console.log("%c compileShader: " + this.name + (i === hl.VERTEX_SHADER ? " vs" : " fs"), "background: #fff0f0; color: red"), null
                                   }
                            }, { key: "LinkProgram", value: function (e, t, i) { var n = e.createProgram(); if (e.attachShader(n, t), e.attachShader(n, i), e.linkProgram(n), e.getProgramParameter(n, e.LINK_STATUS)) return n; throw console.log("LinkProgram", this.name), new Error("Program link error:\n" + e.getProgramInfoLog(n)) } }, { key: "getUniforms", value: function (e, t) { var i = e.getProgramParameter(t, e.ACTIVE_UNIFORMS); this.textureUniforms = [], this.uniformLocations = {}, this.textureUnits = []; for (var n = 0, s = 0; s < i; s++) { var a = e.getActiveUniform(t, s), r = e.getUniformLocation(this.program, a.name); this.uniformLocations[a.name] = r, a.type !== hl.SAMPLER_2D && a.type !== hl.SAMPLER_CUBE && a.type !== Pl.SAMPLER_3D || (this.textureUnits[a.name] = n, this.textureUniforms.push(new wl(this, a.name, r, n)), n++) } } }, { key: "getAttributes", value: function (e, i) { var n = e.getProgramParameter(i, e.ACTIVE_ATTRIBUTES); this.attributes = []; for (var s = 0; s < n; s++) { var a = e.getActiveAttrib(i, s), r = e.getAttribLocation(this.program, a.name), o = t.getStride(a.type); this.attributes.push(new bl(a.name, o, r)) } } }, {
                                   key: "getAttributeByName", value: function (e) {
                                          // return this.attributes[name];
                                          // tested: this is not slower than: this.attributes[name]
                                          for (var t = 0; t < this.attributes.length; t++)if (this.attributes[t].name === e) return this.attributes[t]; return null
                                   }
                            }, {
                                   key: "getTextureUniformByName", value: function (e) {
                                          // tested: this is not slower than: this.textureUniforms[name]
                                          for (var t = 0; t < this.textureUniforms.length; t++)if (this.textureUniforms[t].name === e) return this.textureUniforms[t]; return null
                                   }
                            }, { key: "destruct", value: function () { this.program = null, this.uniformLocations = null, this.textureUnits = null, this.attributes = null, this.renderer = null, Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this) } }], [{ key: "stripUniformDuplicates", value: function (e) { for (var t = "", i = {}, n = /^uniform\s+(\S*)\s+(\S*);/, s = e.split("\n"), a = 0; a < s.length; a++) { var r = s[a]; r = r.trim(); var o = void 0; if (null !== (o = n.exec(r))) { var l = o[2]; i[l] && (r = "// " + r), i[l] = !0 } t += r + "\n" } return t } }, { key: "getStride", value: function (e) { switch (e) { case hl.FLOAT: return 1; case hl.FLOAT_VEC2: return 2; case hl.FLOAT_VEC3: return 3; case hl.FLOAT_VEC4: return 4; default: return cl.error("attribute type not handled: " + e), -1 } } }]), t
                     }(ol); Ll.staticId = 0;/* harmony default export */
                     var kl = Ll, Cl = function (e) { function t(e, i, n) { var s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null, a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : null, r = arguments.length > 5 && void 0 !== arguments[5] && arguments[5]; it()(this, t); var o = mt()(this, (t.__proto__ || ft()(t)).call(this, e, n)); return r ? (o._vsPath = s, o._fsPath = a) : (o._vsPath = o.renderer.userShaderPath, o._vsPath += s || n + "/" + n, o._fsPath = o.renderer.userShaderPath, o._fsPath += a || n + "/" + n), o._vsPath += ".vs.glsl", o._fsPath += ".fs.glsl", i.add(o), o } return At()(t, e), st()(t, [{ key: "load", value: function (e) { var t = this, i = new kl(this.renderer, this.getShaderDefines()); i.load(this.name, this._vsPath, this._fsPath, function () { t.shader = i, e.call(t) }) } }]), t }(Tl), Ml = Cl, xl = function (e) {
                            function t(e) { it()(this, t); var i = mt()(this, (t.__proto__ || ft()(t)).call(this)); i.renderer = e, i.renderer.textureCount++; var n = i.renderer.context; return i.textureGL = n.createTexture(), i } return At()(t, e), st()(t, [{
                                   key: "bindToSlot", value: function () {
                                          // override
                                          arguments.length > 0 && void 0 !== arguments[0] && arguments[0]
                                   }
                            }, { key: "setTextureSize", value: function (e, t, i) { } }, {
                                   key: "destruct", value: function () {
                                          if (!this.isDestructed) { var e = this.renderer.context; this.textureGL && (e.deleteTexture(this.textureGL), this.textureGL = null), this.renderer = null }
                                          // always call this last
                                          Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this)
                                   }
                            }]), t
                     }(ol), Ol = xl, Sl = function () {
                            function e() { it()(this, e) } return st()(e, null, [{ key: "checkFloatCompatibility", value: function (t, i) { if (!t.extensionManager.texture_float) if (t.extensionManager.texture_half_float) { if (i === e.RGB_FLOAT) return e.RGB_HALF_FLOAT; if (i === e.RGBA_FLOAT) return e.RGBA_HALF_FLOAT } else console.log("Texture: setFormatType: not supported: ", i); return i } }, { key: "checkHalfFloatCompatibility", value: function (t, i) { if (!t.extensionManager.texture_half_float) if (t.extensionManager.texture_float) { if (i === e.RGB_HALF_FLOAT) return e.RGB_FLOAT; if (i === e.RGBA_HALF_FLOAT) return e.RGBA_FLOAT } else console.log("Texture: setFormatType: not supported: ", i); return i } }, { key: "validateFormatType", value: function (t, i) { switch (i) { case e.RGB_FLOAT: i = this.checkFloatCompatibility(t, i); case e.RGBA_FLOAT: i = this.checkFloatCompatibility(t, i); case e.RGBA_HALF_FLOAT: i = this.checkHalfFloatCompatibility(t, i); case e.RGB_HALF_FLOAT: i = this.checkHalfFloatCompatibility(t, i) }return i } }, { key: "getFormat", value: function (t, i) { switch (i) { case e.RGBA_UNSIGNED_BYTE: return hl.RGBA; case e.RGB_UNSIGNED_BYTE: case e.RGB_FLOAT: return hl.RGB; case e.RGBA_FLOAT: case e.RGBA_HALF_FLOAT: return hl.RGBA; case e.RGB_HALF_FLOAT: return hl.RGB; case e.LUMINANCE_UNSIGNED_BYTE: case e.LUMINANCE_FLOAT: return hl.LUMINANCE; case e.DEPTH_UINTSHORT: case e.DEPTH_FLOAT: return hl.DEPTH_COMPONENT; default: return cl.error("can not yet get format for formatType: ", i), -1 } } }, { key: "getType", value: function (t, i) { switch (i) { case e.RGBA_UNSIGNED_BYTE: case e.RGB_UNSIGNED_BYTE: return hl.UNSIGNED_BYTE; case e.RGBA_FLOAT: case e.RGB_FLOAT: return hl.FLOAT; case e.RGBA_HALF_FLOAT: case e.RGB_HALF_FLOAT: return e.getHalfFloatType(t); case e.LUMINANCE_UNSIGNED_BYTE: return hl.UNSIGNED_BYTE; case e.LUMINANCE_FLOAT: return hl.FLOAT; case e.DEPTH_UINTSHORT: return hl.UNSIGNED_SHORT; case e.DEPTH_FLOAT: return hl.FLOAT; default: return cl.error("can not yet get type for formatType: ", i), -1 } } }, { key: "getHalfFloatType", value: function (e) { var t = e.extensionManager.texture_half_float; return t ? t.HALF_FLOAT_OES : -1 } }, {
                                   key: "getInternalFormat", value: function (t) {
                                          switch (t) {
                                                 case e.RGBA_UNSIGNED_BYTE: return Pl.RGBA8; case e.RGB_UNSIGNED_BYTE: return Pl.RGB8; case e.RGBA_FLOAT: return Pl.RGBA32F; case e.RGB_FLOAT: return Pl.RGB32F; case e.RGBA_HALF_FLOAT: return Pl.RGBA16F; case e.RGB_HALF_FLOAT: return Pl.RGB16F; case e.LUMINANCE_UNSIGNED_BYTE: return Pl.R8; case e.LUMINANCE_FLOAT: return Pl.R16F; case e.DEPTH_UINTSHORT:
                                                        // TODO: test if correct
                                                        return Pl.DEPTH_COMPONENT24; case e.DEPTH_FLOAT: return Pl.DEPTH_COMPONENT32F; default: return cl.error("can not yet get type for formatType: ", t), -1
                                          }
                                   }
                            }]), e
                     }(), Dl = Sl; Sl.ALPHA_UNSIGNED_BYTE = "ALPHA UNSIGNED_BYTE", Sl.ALPHA_FLOAT = "ALPHA FLOAT", Sl.RGBA_UNSIGNED_BYTE = "RGBA UNSIGNED_BYTE", Sl.RGBA_FLOAT = "RGBA FLOAT", Sl.RGBA_HALF_FLOAT = "RGBA HALF_FLOAT", Sl.RGB_HALF_FLOAT = "RGB HALF_FLOAT", Sl.RGB_UNSIGNED_BYTE = "RGB UNSIGNED_BYTE", Sl.RGB_FLOAT = "RGB_FLOAT", Sl.LUMINANCE_UNSIGNED_BYTE = "LUMINANCE UNSIGNED_BYTE", Sl.LUMINANCE_FLOAT = "LUMINANCE FLOAT", Sl.DEPTH_UINTSHORT = "DEPTH_UINTSHORT", Sl.DEPTH_FLOAT = "DEPTH_FLOAT";
                     // CONCATENATED MODULE: ./src/lib/webgl/renderer/render/MaxParams.ts
                     /**
                      * Created by MM-Johan on 7/21/2015.
                      */
                     // http://alteredqualia.com/tmp/webgl-maxparams-test/
                     var Nl = function e(t) { it()(this, e), this.MAX_VERTEX_ATTRIBS = t.getParameter(t.MAX_VERTEX_ATTRIBS), this.MAX_VARYING_VECTORS = t.getParameter(t.MAX_VARYING_VECTORS), this.MAX_VERTEX_UNIFORM_VECTORS = t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS), this.MAX_FRAGMENT_UNIFORM_VECTORS = t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS), this.MAX_TEXTURE_IMAGE_UNITS = t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS), this.MAX_VERTEX_TEXTURE_IMAGE_UNITS = t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS), this.MAX_TEXTURE_SIZE = t.getParameter(t.MAX_TEXTURE_SIZE), this.MAX_CUBE_MAP_TEXTURE_SIZE = t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE), this.MAX_VIEWPORT_DIMS = t.getParameter(t.MAX_VIEWPORT_DIMS), this.MAX_RENDERBUFFER_SIZE = t.getParameter(t.MAX_RENDERBUFFER_SIZE), this.MAX_COMBINED_TEXTURE_IMAGE_UNITS = t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS); var i = t.getExtension("WEBGL_debug_renderer_info"); this.UNMASKED_RENDERER = i && t.getParameter(i.UNMASKED_RENDERER_WEBGL), this.UNMASKED_VENDOR = i && t.getParameter(i.UNMASKED_VENDOR_WEBGL); for (var n in this) this.hasOwnProperty(n) && cl.log(n, this[n]) }, Fl = Nl, Vl = function () {
                            function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1; it()(this, e), this.v = nl.vec4.fromValues(t, i, n, s) } return st()(e, [{
                                   key: "clone",/* CLONE, COPY, SET */
                                   value: function () { return new e(this.x, this.y, this.z, this.w) }
                            }, { key: "copy", value: function (e) { return nl.vec4.set(this.v, e.x, e.y, e.z, e.w), this } }, { key: "setValues", value: function (e, t, i, n) { return nl.vec4.set(this.v, e, t, i, n), this } }, { key: "dot", value: function (e) { return nl.vec4.dot(this.v, e.v) } }, { key: "transform", value: function (e) { return nl.vec4.transformMat4(this.v, this.v, e), this } }, { key: "x", get: function () { return this.v[0] }, set: function (e) { this.v[0] = e } }, { key: "y", get: function () { return this.v[1] }, set: function (e) { this.v[1] = e } }, { key: "z", get: function () { return this.v[2] }, set: function (e) { this.v[2] = e } }, { key: "w", get: function () { return this.v[3] }, set: function (e) { this.v[3] = e } }], [{ key: "dot", value: function (e, t) { return nl.vec4.dot(e.v, t.v) } }, { key: "transform", value: function (e, t) { return nl.vec4.transformMat4(e.v, e.v, t), e } }]), e
                     }(); Vl.ZERO = new Vl;/* harmony default export */
                     var Bl = Vl, Ul = function (e) {
                            function t() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1; return it()(this, t), mt()(this, (t.__proto__ || ft()(t)).call(this, e, i, n, s)) } return At()(t, e), st()(t, [{ key: "r", get: function () { return this.v[0] }, set: function (e) { this.v[0] = e } }, { key: "g", get: function () { return this.v[1] }, set: function (e) { this.v[1] = e } }, { key: "b", get: function () { return this.v[2] }, set: function (e) { this.v[2] = e } }, { key: "a", get: function () { return this.v[3] }, set: function (e) { this.v[3] = e } }]), st()(t, [{ key: "isEqualTo", value: function (e) { return this.r == e.r && this.g == e.g && this.b == e.b && this.a == e.a } }, { key: "clampCeil", value: function (e) { this.r > e && (this.r = e), this.g > e && (this.g = e), this.b > e && (this.b = e), this.a > e && (this.a = e) } }, { key: "toRGBString", value: function () { return "rgb(" + Math.round(255 * this.r) + "," + Math.round(255 * this.g) + "," + Math.round(255 * this.b) + ")" } }, { key: "getHex", value: function () { return "#" + t.componentToHex(this.r) + t.componentToHex(this.g) + t.componentToHex(this.b) } }, { key: "setRGBA255", value: function (e) { this.r = e[0] / 255, this.g = e[1] / 255, this.b = e[2] / 255, this.a = e[3], console.log("setRGBA255: ", e, this.r, this.g, this.b, this.a) } }, { key: "getRGBA255", value: function () { return [Math.round(255 * this.r), Math.round(255 * this.g), Math.round(255 * this.b), this.a] } }, { key: "setFromHex", value: function (e) { e = e.replace(/[^0-9A-F]/gi, ""); var t = parseInt(e, 16); this.r = (t >> 16 & 255) / 255, this.g = (t >> 8 & 255) / 255, this.b = (255 & t) / 255, this.a = 1 } }, {
                                   key: "setFromHSV",
                                   // provide normalized hsv
                                   value: function (e, t, i) { var n = 0, s = 0, a = 0, r = Math.floor(6 * e), o = 6 * e - r, l = i * (1 - t), h = i * (1 - o * t), u = i * (1 - (1 - o) * t); switch (r % 6) { case 0: n = i, s = u, a = l; break; case 1: n = h, s = i, a = l; break; case 2: n = l, s = i, a = u; break; case 3: n = l, s = h, a = i; break; case 4: n = u, s = l, a = i; break; case 5: n = i, s = l, a = h }this.r = n, this.g = s, this.b = a }
                            }, { key: "getRgbaString", value: function () { return "rgba(" + Math.round(255 * this.r) + ", " + Math.round(255 * this.g) + ", " + Math.round(255 * this.b) + ", " + this.a + ")" } }], [{
                                   key: "componentToHex", value: function (e) {
                                          e *= 255;
                                          // c = Math.round(c);
                                          var t = e.toString(16); return 1 === t.length ? "0" + t : t
                                   }
                            }, { key: "fromHex", value: function (e) { var i = new t; return i.setFromHex(e), i } }, { key: "fromRGB255", value: function (e) { var i = new t; return i.setRGBA255(e), i } }, { key: "getRandom", value: function () { return new t(Math.random(), Math.random(), Math.random()) } }, { key: "colorFromString", value: function (e) { var i = [], n = []; n[0] = e.substr(0, Math.floor(e.length / 3)), n[1] = e.substr(Math.floor(e.length / 3), Math.floor(2 * e.length / 3)), n[2] = e.substr(Math.floor(2 * e.length / 3), e.length); for (var s = 0; s < n.length; s++)for (var a = 0; a < n[s].length; a++)s in i || (i[s] = 0), i[s] += n[s].charCodeAt(a); return new t(i[0] / 128 % 1, i[1] / 128 % 1, i[2] / 128 % 1, 1) } }, { key: "fromHSV", value: function (e, i, n) { var s = new t; return s.setFromHSV(e, i, n), s } }]), t
                     }(Bl), Hl = Ul, Gl = function (e) {
                            function t(e) { it()(this, t); var i = mt()(this, (t.__proto__ || ft()(t)).call(this)); return i._depthMask = !0, i._depthTest = !0, i._depthFunc = -1, i._culling = -1, i._cullingEnabled = !0, i._blendEquation = -1, i._blendEnabled = !0, i._sourceBlend = -1, i._destinationBlend = -1, i._renderer = e, i.setBlendEnabled(!i._blendEnabled), i.setCullingEnabled(!i._cullingEnabled), i.setDepthMask(!i._depthMask), i.setDepthTest(!i._depthTest), i.enabledAttribArrays = [], i._textureSlots = [], i } return At()(t, e), st()(t, [{ key: "bindTextureToSlot", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; this._textureSlots[t] != e && (this._renderer.context.activeTexture(hl.TEXTURE0 + t), this._renderer.context.bindTexture(hl.TEXTURE_2D, e), this._textureSlots[t] = e) } }, { key: "bindTexture3DToSlot", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; this._textureSlots[t] != e && (this._renderer.context.activeTexture(hl.TEXTURE0 + t), this._renderer.context.bindTexture(Pl.TEXTURE_3D, e), this._textureSlots[t] = e) } }, { key: "bindCubeTextureToSlot", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; this._textureSlots[t] != e && (this._renderer.context.activeTexture(hl.TEXTURE0 + t), this._renderer.context.bindTexture(hl.TEXTURE_CUBE_MAP, e), this._textureSlots[t] = e) } }, { key: "setProgram", value: function (e) { return e != this._program && (this._program = e, this._renderer.context.useProgram(this._program), !0) } }, { key: "setDepthMask", value: function (e) { e != this._depthMask && (this._renderer.context.depthMask(e), this._depthMask = e) } }, { key: "getDepthMask", value: function () { return this._depthMask } }, { key: "setDepthTest", value: function (e) { e != this._depthTest && (e ? this._renderer.context.enable(hl.DEPTH_TEST) : this._renderer.context.disable(hl.DEPTH_TEST), this._depthTest = e) } }, { key: "setDepthFunc", value: function (e) { e != this._depthFunc && (e ? this._renderer.context.depthFunc(e) : this._renderer.context.depthFunc(this._renderer.context.LESS), this._depthFunc = e) } }, { key: "setCullingEnabled", value: function (e) { e != this._cullingEnabled && (e ? this._renderer.context.enable(hl.CULL_FACE) : this._renderer.context.disable(hl.CULL_FACE), this._cullingEnabled = e) } }, { key: "setCulling", value: function (e) { e != this._culling && (e == hl.NONE ? this.setCullingEnabled(!1) : (this.setCullingEnabled(!0), this._renderer.context.cullFace(e)), this._culling = e) } }, { key: "setBlendEquation", value: function (e) { e != this._blendEquation && (this._renderer.context.blendEquation(e), this._blendEquation = e) } }, { key: "setBlendEnabled", value: function (e) { e != this._blendEnabled && (e ? this._renderer.context.enable(hl.BLEND) : this._renderer.context.disable(hl.BLEND), this._blendEnabled = e) } }, { key: "setBlendFunc", value: function (e, t) { e == this._sourceBlend && t == this._destinationBlend || (this._renderer.context.blendFunc(e, t), this._sourceBlend = e, this._destinationBlend = t) } }, {
                                   key: "setBlendFuncSeparate", value: function (e, t, i, n) {
                                          this._renderer.context.blendFuncSeparate(e, t, i, n),
                                          //reset for setBlendFunc
                                          this._sourceBlend = -1
                                   }
                            }, {
                                   key: "destruct", value: function () {
                                          this._renderer = null, this._program = null, this.mesh = null, this.material = null, this.enabledAttribArrays = null,
                                          // always call this last
                                          Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this)
                                   }
                            }]), t
                     }(ol), $l = Gl, zl = function () { function e() { it()(this, e), this.maxAnisotropy = 0 } return st()(e, [{ key: "enableExtensions", value: function (t) { this.color_buffer_float = e.enableExtension(t, "WEBGL_color_buffer_float") || e.enableExtension(t, "EXT_color_buffer_float"), this.color_buffer_half_float = e.enableExtension(t, "EXT_color_buffer_half_float"), this.texture_float = e.enableExtension(t, "OES_texture_float"), this.texture_float_linear = e.enableExtension(t, "OES_texture_float_linear"), this.texture_half_float = e.enableExtension(t, "OES_texture_half_float"), this.texture_half_float_linear = e.enableExtension(t, "OES_texture_half_float_linear"), this.shader_texture_lod = e.enableExtension(t, "EXT_shader_texture_lod"), this.standard_derivatives = e.enableExtension(t, "OES_standard_derivatives"), this.blend_minmax = e.enableExtension(t, "EXT_blend_minmax"), this.seamless_cube_map = e.enableExtension(t, "OES_seamless_cube_map"), this.vertex_array_object = e.enableExtension(t, "OES_vertex_array_object"), this.filter_anisotropic = e.enableExtension(t, "texture_filter_anisotropic"), this.filter_anisotropic || (this.filter_anisotropic = e.enableExtension(t, "MOZ_EXT_texture_filter_anisotropic")), this.filter_anisotropic || (this.filter_anisotropic = e.enableExtension(t, "WEBKIT_EXT_texture_filter_anisotropic")), this.filter_anisotropic && (this.maxAnisotropy = t.getParameter(this.filter_anisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT), cl.log("MAX_TEXTURE_MAX_ANISOTROPY_EXT: ", this.maxAnisotropy)), this.frag_depth = e.enableExtension(t, "EXT_frag_depth"), this.depth_texture = e.enableExtension(t, "WEBGL_depth_texture"), this.element_index_uint = e.enableExtension(t, "OES_element_index_uint"), this.enableTextureCompression(t) } }, { key: "enableTextureCompression", value: function (t) { var i = e.enableExtension(t, "WEBKIT_WEBGL_compressed_texture_s3tc"); if (i) { var n = t.getParameter(t.COMPRESSED_TEXTURE_FORMATS); if (n.length > 0) for (var s in n) n[s] === i.COMPRESSED_RGB_S3TC_DXT1_EXT && cl.log("support found for texture compression: RGB_S3TC_DXT1"), n[s] === i.COMPRESSED_RGBA_S3TC_DXT1_EXT && cl.log("support found for texture compression: RGBA_S3TC_DXT1"), n[s] === i.COMPRESSED_RGBA_S3TC_DXT3_EXT && cl.log("support found for texture compression: RGBA_S3TC_DXT3"), n[s] === i.COMPRESSED_RGBA_S3TC_DXT5_EXT && cl.log("support found for texture compression: RGBA_S3TC_DXT5"); else cl.log("no support found for texture compression ") } } }, { key: "getMinMaxSupported", value: function () { return null !== this.blend_minmax } }], [{ key: "enableExtension", value: function (e, t) { var i = e.getExtension(t); return i ? cl.log("enabled extension " + t) : cl.log("extension " + t + " is not supported"), i } }]), e }(), Wl = zl, Kl = function (e) {
                            function t(e, i, n, s, a, r) {
                                   it()(this, t); var o = mt()(this, (t.__proto__ || ft()(t)).call(this));
                                   // LogGL.log ("VertexAttribute: length: " +  this.getBufferLength(), name, "storeData", storeData);
                                   // used for interleaved
                                   // if(!this.buffer)this.data = data;
                                   return o.vertexCount = -1, o._renderer = e, o.stride = s, o.name = i, o.storeData = a, o.vertexCount = n.length / s, r ? (o.buffer = o._renderer.context.createBuffer(), o.setData(n, a)) : o.data = n, o
                            }
                            // used only when not interleaved
                            return At()(t, e), st()(t, [{
                                   key: "setData", value: function (e, t) {
                                          if (t || !this.buffer ? this.data = e : this.data = null, 0 === e.length)
                                                 // LogGL.log("probably a mesh file could not be loaded");
                                                 throw "VertexAttribute: no data: probably a mesh file could not be loaded"; if (this.buffer) {
                                                        var i = this._renderer.context; i.bindBuffer(hl.ARRAY_BUFFER, this.buffer),
                                                               // use DYNAMIC_DRAW when creating dynamic meshes
                                                               i.bufferData(hl.ARRAY_BUFFER, e.byteLength, hl.STATIC_DRAW), i.bufferSubData(hl.ARRAY_BUFFER, 0, e)
                                                 }
                                   }
                            }, { key: "getBufferLength", value: function () { if (this.data) return this.data.length; var e = this._renderer.context; return e.bindBuffer(hl.ARRAY_BUFFER, this.buffer), e.getBufferParameter(hl.ARRAY_BUFFER, hl.BUFFER_SIZE) / 4 } }, { key: "destruct", value: function () { this._renderer.context.deleteBuffer(this.buffer), this.buffer = null, this._renderer = null, this.data = null, Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this) } }], [{ key: "serialize", value: function (e) { return null === e.data ? (console.error("Trying to serialize vertex attribute " + e.name + " without saved data"), {}) : { name: e.name, data: e.data, stride: e.stride, storeData: e.storeData } } }, { key: "deserialize", value: function (e) { return { name: e.name, data: e.data, stride: e.stride, storeData: e.storeData } } }]), t
                     }(ol), Yl = Kl, Xl = function e(t, i) { it()(this, e), this.name = t, this.stride = i }; Xl.POSITION = new Xl("aPos", 3), Xl.TEXCOORD0 = new Xl("aUV0", 2), Xl.TEXCOORD1 = new Xl("aUV1", 2), Xl.NORMAL = new Xl("aNormal", 3), Xl.COLOR0 = new Xl("aColor0", 3), Xl.COLOR1 = new Xl("aColor1", 3), Xl.TANGENT = new Xl("aTangent", 4);/* harmony default export */
                     var jl = Xl, ql = function (e) {
                            function t(e) { var i = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2]; it()(this, t); var s = mt()(this, (t.__proto__ || ft()(t)).call(this)); return s._vertexCount = 0, s._isInterleavedBufferDirty = !0, s._attributeNames = {}, s.renderer = e, s.attributes = [], s._vertexCount = 0, s.id = t.id++, s.interleaved = i, s.isDynamic = n, s }
                            // used for saving meshes with fewer attributes. Not tested for rendering.
                            return At()(t, e), st()(t, [{
                                   key: "clone", value: function () {
                                          // note that the attributes are references.
                                          for (var e = new t(this.renderer, this.interleaved, this.isDynamic), i = 0; i < this.attributes.length; i++)e.attributes.push(this.attributes[i]); return e._vertexCount = this._vertexCount, e
                                   }
                            }, { key: "interleaveData", value: function () { if (this._isInterleavedBufferDirty && this.interleaved) { this.interleavedStrideSum = 0; for (var e = 0; e < this.attributes.length; e++)this.interleavedStrideSum += this.attributes[e].stride; for (var t = new Float32Array(this.interleavedStrideSum * this._vertexCount), i = 0, n = 0; n < this._vertexCount; n++)for (var s = 0; s < this.attributes.length; s++)for (var a = this.attributes[s], r = 0; r < a.stride; r++)t[i++] = a.data[n * a.stride + r]; for (var o = 0; o < this.attributes.length; o++)this.attributes[o].storeData || (this.attributes[o].data = null); this.interleavedBuffer = this.renderer.context.createBuffer(); var l = this.renderer.context; l.bindBuffer(hl.ARRAY_BUFFER, this.interleavedBuffer), l.bufferData(hl.ARRAY_BUFFER, t, l.STATIC_DRAW), this._isInterleavedBufferDirty = !1, cl.log("Mesh: finalize", this.attributes.length) } } }, { key: "setAttribute", value: function (e, t, i) { var n = arguments.length > 3 && void 0 !== arguments[3] && arguments[3]; this.setData(i, e, t, n) } }, { key: "setPositions", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], i = jl.POSITION; this.setData(e, i.name, i.stride, t) } }, { key: "getPositions", value: function () { return this.getData(jl.POSITION.name) } }, { key: "setNormals", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], i = jl.NORMAL; this.setData(e, i.name, i.stride, t) } }, { key: "getNormals", value: function () { return this.getData(jl.NORMAL.name) } }, { key: "setColors", value: function (e) { var t = jl.COLOR0; this.setData(e, t.name, t.stride) } }, { key: "getColors", value: function () { return this.getData(jl.COLOR0.name) } }, { key: "setColors1", value: function (e) { var t = jl.COLOR1; this.setData(e, t.name, t.stride) } }, { key: "getColors1", value: function () { return this.getData(jl.COLOR1.name) } }, { key: "setUV0", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], i = jl.TEXCOORD0; this.setData(e, i.name, i.stride, t) } }, { key: "getUV0", value: function () { return this.getData(jl.TEXCOORD0.name) } }, { key: "setUV1", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], i = jl.TEXCOORD1; this.setData(e, i.name, i.stride, t) } }, { key: "getUV1", value: function () { return this.getData(jl.TEXCOORD1.name) } }, { key: "setTangents", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], i = jl.TANGENT; this.setData(e, i.name, i.stride, t) } }, { key: "getTangents", value: function () { return this.getData(jl.TANGENT.name) } }, {
                                   key: "setData", value: function (e, t, i) {
                                          var n = arguments.length > 3 && void 0 !== arguments[3] && arguments[3]; this._attributeNames = {}; var s = this.getAttributeIndex(t), a = e.length / i; s < 0 ?
                                                 // create new buffer
                                                 this.attributes.push(new Yl(this.renderer, t, e, i, n, !this.interleaved)) :
                                                 // write new data to attribute
                                                 this.attributes[s].vertexCount === a ?
                                                        // replace data
                                                        // LogGL.log('replacing attribute data: ', name, data.length / stride, data);
                                                        this.attributes[s].setData(e, n) : (
                                                               // create new buffer
                                                               // LogGL.log('replacing attribute', name, data.length / stride);
                                                               this.attributes[s].destruct(), this.attributes[s] = new Yl(this.renderer, t, e, i, n, !this.interleaved)), this._vertexCount = a, this.interleaved && (this._isInterleavedBufferDirty = !0)
                                   }
                            }, {
                                   key: "deleteAttribute", value: function (e) {
                                          var t = this.getAttributeIndex(e); t >= 0 && this.attributes.splice(t, 1), this._isInterleavedBufferDirty = !0,
                                                 // this.finalize();
                                                 this._attributeNames = {}
                                   }
                            }, { key: "hasAttribute", value: function (e) { var t = this._attributeNames[e]; if (!0 === t || !1 === t) return t; var i = this.getAttributeIndex(e); return this._attributeNames[e] = i >= 0, this._attributeNames[e] } }, { key: "getAttribute", value: function (e) { var t = this.getAttributeIndex(e); return t >= 0 ? this.attributes[t] : null } }, { key: "getAttributeIndex", value: function (e) { for (var t = 0; t < this.attributes.length; t++)if (this.attributes[t].name === e) return t; return -1 } }, { key: "getData", value: function (e) { var t = this.getAttribute(e); return t && t.data ? t.data : (cl.log("Mesh: getData", e, "no data"), null) } }, { key: "setIndices", value: function (e) { if (!(e instanceof Uint16Array)) throw "Indices need to be of type Uint16Array"; this.indexType = hl.UNSIGNED_SHORT, this.indices = e; var t = this.renderer.context; this.indexBuffer || (this.indexBuffer = t.createBuffer()), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer), t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.indices, t.STATIC_DRAW) } }, { key: "setIndices32", value: function (e) { if (!(e instanceof Uint32Array)) throw "Indices need to be of type Uint32Array"; if (this.renderer.extensionManager.element_index_uint) { this.indexType = hl.UNSIGNED_INT, this.indices = e; var t = this.renderer.context; this.indexBuffer || (this.indexBuffer = t.createBuffer()), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer), t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.indices, t.STATIC_DRAW) } else cl.log("mesh: setIndices32: extension not supported: element_index_uint: using 16 bits indices"), this.setIndices(new Uint16Array(e)) } }, { key: "getNumVertices", value: function () { return this._vertexCount } }, { key: "isSkinned", value: function () { return this.hasAttribute("aSkinIndex") } }, { key: "destruct", value: function () { if (!this.isDestructed) { var e = this.renderer.context; if (this.interleavedBuffer && (e.deleteBuffer(this.interleavedBuffer), this.interleavedBuffer = null), this.indexBuffer = null, this.indices = null, this.attributes) { for (var i = 0; i < this.attributes.length; i++)this.attributes[i].destruct(); this.attributes = null } this.renderer = null, Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this) } } }]), t
                     }(ol); ql.id = 0;/* harmony default export */
                     var Zl = ql, Ql = i(66), Jl =/*#__PURE__*/i.n(Ql), eh = function e() {
                            it()(this, e), this.down = !1, this.downThisFrame = !1, this.downByTouch = !1,// touch device
                            // click event can be canceled by mouse move (after .25 sec) or time out (for touch devices)
                            this.clickCanceled = !1, this.downTime = 0
                     }, th = function (e) {
                            function t(e) { it()(this, t); var i = mt()(this, (t.__proto__ || ft()(t)).call(this)); i._mousePos = new _l, i._previousMousePos = new _l, i._mouseVelocity = new _l, i._normalized = new _l, i._screen = new _l, i._wheelCallbacks = [], i._mouseClickCallbacks = [], i._mouseDownCallbacks = [], i._buttons = [], i._manualUpdate = !1, i._resetSpeed = !1, i._preventDefault = !0, i._mouseClick = !1, i._mouseClickPrev = !1, i._canvas = e; for (var n = 0; n < 3; n++)i._buttons.push(new eh); return i._touchStartListener = function (e) { i._preventDefault && e.preventDefault(), i._resetSpeed = !0, i.mouseDown(0), i._buttons[0].downByTouch = !0, i.setMousePosition(e.targetTouches[0]), i._mouseClick = !0; for (var t = 0; t < i._mouseDownCallbacks.length; t++)i._mouseDownCallbacks[t].call(i) }, i._touchMoveListener = function (e) { i.setMousePosition(e.targetTouches[0]) }, i._endListener = function (e) { for (var t = 0; t < i._buttons.length; t++)i._buttons[t].down = !1, i._buttons[t].downThisFrame = !1, i._buttons[t].downByTouch = !1 }, i._upListener = function (e) { if (i._resetSpeed = !0, !i._buttons[0].clickCanceled) { i._mouseClick = !0; for (var t = 0; t < i._mouseClickCallbacks.length; t++)i._mouseClickCallbacks[t].call(i) } for (var n = 0; n < i._buttons.length; n++)i._buttons[n].down = !1, i._buttons[n].downThisFrame = !1, i._buttons[n].downByTouch = !1 }, i._mouseDownListener = function (e) { e.preventDefault(), i.mouseDown(e.which - 1), i.setMousePosition(e); for (var t = 0; t < i._mouseDownCallbacks.length; t++)i._mouseDownCallbacks[t].call(i) }, i._mouseMoveListener = function (e) { i.setMousePosition(e); for (var t = 0; t < 3; t++)i._buttons[t].downTime > .25 && (i._buttons[t].clickCanceled = !0) }, i._mouseWheelListener = function (e) { for (var t = 0; t < i._wheelCallbacks.length; t++)i._wheelCallbacks[t].call(i, Jl()(e.wheelDelta)) }, i._canvas.addEventListener("touchstart", i._touchStartListener, !1), i._canvas.addEventListener("touchmove", i._touchMoveListener, !1), i._canvas.addEventListener("touchend", i._upListener, !1), i._canvas.addEventListener("touchcancel", i._endListener, !1), i._canvas.addEventListener("mousedown", i._mouseDownListener, !1), i._canvas.addEventListener("mousemove", i._mouseMoveListener, !1), i._canvas.addEventListener("mouseup", i._upListener, !1), i._canvas.addEventListener("mousecancel", i._endListener, !1), i._canvas.addEventListener("mouseout", i._endListener, !1), i._canvas.addEventListener("mousewheel", i._mouseWheelListener, !1), i.updateLoop(), i } return At()(t, e), st()(t, [{ key: "setPreventDefault", value: function (e) { this._preventDefault = e } }, { key: "mouseDown", value: function (e) { this._resetSpeed = !0, this._buttons[e].down = !0, this._buttons[e].downThisFrame = !0, this._buttons[e].clickCanceled = !1, this._buttons[e].downByTouch = !1, this._buttons[e].downTime = 0 } }, { key: "addWheelEvent", value: function (e) { this._wheelCallbacks.push(e) } }, { key: "addMouseClickEvent", value: function (e) { this._mouseClickCallbacks.push(e) } }, { key: "addMouseDownEvent", value: function (e) { this._mouseDownCallbacks.push(e) } }, { key: "setMousePosition", value: function (e) { this._mousePos.x = e.pageX, this._mousePos.y = e.pageY } }, { key: "getPixelPos", value: function () { return this._mousePos } }, { key: "getNormalizedPos", value: function () { return this._normalized } }, { key: "getScreenPos", value: function () { return this._screen } }, { key: "getNormalizedVelocity", value: function () { return this._mouseVelocity } }, { key: "getButton", value: function (e) { return this._buttons[e] } }, { key: "getMouseDown", value: function () { return this._buttons[0].down } }, { key: "getMouseClick", value: function () { return this._mouseClick } }, { key: "getMouseDownThisFrame", value: function () { return this._buttons[0].downThisFrame } }, { key: "getMouseDownRight", value: function () { return this._buttons[2].down } }, { key: "getMouseDownThisFrameRight", value: function () { return this._buttons[2].downThisFrame } }, { key: "updateManual", value: function () { this._manualUpdate = !0, this.update() } }, { key: "updateLoop", value: function () { var e = this; this.isDestructed || this._manualUpdate || (this.update(), window.requestAnimationFrame(function () { return e.updateLoop() })) } }, { key: "update", value: function () { this._normalized.x = this._mousePos.x / this._canvas.clientWidth, this._normalized.y = this._mousePos.y / this._canvas.clientHeight, this._screen.x = 2 * this._normalized.x - 1, this._screen.y = -(2 * this._normalized.y - 1), this._resetSpeed ? (this._resetSpeed = !1, this._mouseVelocity.setValues(0, 0)) : (this._mouseVelocity.x = this._normalized.x - this._previousMousePos.x, this._mouseVelocity.y = this._normalized.y - this._previousMousePos.y), this._previousMousePos.copy(this._normalized); for (var e = 0; e < 3; e++) { var t = this._buttons[e]; t.downTime > 0 && (t.downThisFrame = !1), this._buttons[e].down && (t.downTime += il.getInstance().deltaTime) } !0 === this._mouseClickPrev && (this._mouseClick = !1), this._mouseClickPrev = this._mouseClick } }, { key: "cancelClick", value: function () { for (var e = 0; e < this._buttons.length; e++)this._buttons[e].clickCanceled = !0 } }, {
                                   key: "destruct", value: function () {
                                          this._canvas && (this._canvas.removeEventListener("touchstart", this._touchStartListener, !1), this._canvas.removeEventListener("touchmove", this._touchMoveListener, !1), this._canvas.removeEventListener("touchend", this._upListener, !1), this._canvas.removeEventListener("touchcancel", this._endListener, !1), this._canvas.removeEventListener("mousedown", this._mouseDownListener, !1), this._canvas.removeEventListener("mousemove", this._mouseMoveListener, !1), this._canvas.removeEventListener("mouseend", this._endListener, !1), this._canvas.removeEventListener("mousecancel", this._endListener, !1), this._canvas.removeEventListener("mouseout", this._endListener, !1), this._canvas.removeEventListener("mousewheel", this._mouseWheelListener, !1), this._canvas.removeEventListener("mouseup", this._upListener, !1)), this._normalized = null, this._mouseVelocity = null, this._previousMousePos = null,
                                          // always call this last
                                          Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this)
                                   }
                            }]), t
                     }(ol), ih = th, nh = function (e) {
                            function t(e, i, n, s) {
                                   var a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : "", r = arguments.length > 5 && void 0 !== arguments[5] && arguments[5], o = !(arguments.length > 6 && void 0 !== arguments[6]) || arguments[6], l = arguments.length > 7 && void 0 !== arguments[7] && arguments[7], h = !(arguments.length > 8 && void 0 !== arguments[8]) || arguments[8], u = !(arguments.length > 9 && void 0 !== arguments[9]) || arguments[9]; it()(this, t); var c = mt()(this, (t.__proto__ || ft()(t)).call(this)); if (c.textureCount = 0, c.isWebgl2 = !1, c._renderSize = new _l, c._canvas = i, c._canvas.addEventListener("resize", function () { return c.handleCanvasResize() }), n === t.webgl2ContextName ? c.isWebgl2 = !0 : r || c.getAlphaIsCorrect() || (
                                          // on some macs, in chrome, when alpha is false, alpha is set to 63 and the canvas is alpha blended
                                          // with white this counters the issue
                                          r = !0),
                                          // preserveDrawingBuffer should be false
                                          c.context = c.getCanvas().getContext(n, { alpha: r, stencil: l, preserveDrawingBuffer: !o, premultipliedAlpha: h, antialias: u }), !c.context) return cl.error("could not get a 3d context: aborting"), mt()(c); c.maxParams = new Fl(c.context), c.userShaderPath = s, c.libShaderPath = a, c.renderState = new $l(c), t.staticExtensionManager = c.extensionManager = new Wl, c.extensionManager.enableExtensions(c.context); var d = c.libShaderPath ? c.libShaderPath : "inc/scriptlib/webgl/renderer/";
                                   // this._copyTextureMaterial.setAlphaBlending();
                                   return d += "defaultShader/default", c._copyTextureMaterial = new Ml(c, e, "default", d, d, !0), c._copyTextureMaterial.depthTest = !1, c._copyTextureMaterial.depthWrite = !1, c._clearColor = new Hl(.5, .5, .5, 1), c._quad = c.createQuad(), c
                            } return At()(t, e), st()(t, [{ key: "getAlphaIsCorrect", value: function () { var e = document.createElement("canvas"); e.width = 1, e.height = 1; var t = e.getContext("experimental-webgl", { alpha: !1, preserveDrawingBuffer: !1 }); t.clearColor(1, 0, 0, 1), t.clear(t.COLOR_BUFFER_BIT | t.DEPTH_BUFFER_BIT); var i = document.createElement("canvas"), n = i.getContext("2d"); n.drawImage(e, 0, 0); var s = n.getImageData(0, 0, 1, 1), a = 255 === s.data[3]; return a || cl.log("alpha bug detected"), a } }, { key: "init", value: function () { cl.log("renderer: textureCount", this.textureCount), this.unSetRenderTexture(), this.handleCanvasResize() } }, { key: "getRenderContext", value: function () { return cl.error("GetRenderContext(): no implementation defined, no context available."), null } }, { key: "preprocessShaderString", value: function (e) { return e } }, {
                                   key: "draw", value: function (e, t) {
                                          // implement in derived class
                                          arguments.length > 2 && void 0 !== arguments[2] && arguments[2], arguments.length > 3 && void 0 !== arguments[3] && arguments[3]
                                   }
                            }, { key: "startBatch", value: function (e, t) { } }, {
                                   key: "drawElements", value: function (e, t) {
                                          // implement in derived class
                                          arguments.length > 2 && void 0 !== arguments[2] && arguments[2], arguments.length > 3 && void 0 !== arguments[3] && arguments[3]
                                   }
                            }, { key: "endBatch", value: function () { } }, { key: "createQuad", value: function () { var e = new Zl(this), t = new Float32Array([-1, -1, 0, -1, 1, 0, 1, 1, 0, 1, -1, 0]); e.setPositions(t); var i = new Float32Array([0, 0, 0, 1, 1, 1, 1, 0]); e.setUV0(i); var n = new Uint16Array([0, 2, 1, 2, 0, 3]); return e.setIndices(n), e } }, { key: "getCanvas", value: function () { return this._canvas } }, { key: "getMouseListener", value: function () { return this._mouseListener || (this._mouseListener = new ih(document.body)), this._mouseListener } }, { key: "getRenderWidth", value: function () { return this._renderWidth } }, { key: "getRenderHeight", value: function () { return this._renderHeight } }, { key: "getRenderSize", value: function () { return this._renderSize } }, { key: "handleCanvasResize", value: function () { this.setRenderSize(this.getCanvas().width, this.getCanvas().height) } }, { key: "enablePointsprites", value: function () { this.context.enable(34370) } }, { key: "blit", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, n = arguments.length > 3 && void 0 !== arguments[3] && arguments[3], s = i || this._copyTextureMaterial; t && this.setRenderTexture(t), e && s.setTexture("uTexture", e), n && this.clear(), this.draw(this._quad, s), t && this.unSetRenderTexture() } }, {
                                   key: "setRenderTexture", value: function (e) {
                                          // TODO: scale event based
                                          e.scaleToCanvas && e.setTextureSize(Math.round(this.getCanvas().width * e.sizeMultiplier), Math.round(this.getCanvas().height * e.sizeMultiplier)), e.setAsTarget(), this.setRenderSize(e.width, e.height)
                                   }
                            }, {
                                   key: "unSetRenderTexture", value: function () {
                                          var e = this.context; e.bindFramebuffer(e.FRAMEBUFFER, null), e.bindRenderbuffer(e.RENDERBUFFER, null),
                                                 // TODO: write this out (not needed when repeatedly rendering to texture)
                                                 this.setRenderSize(this.getCanvas().width, this.getCanvas().height)
                                   }
                            }, { key: "clearWithColor", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0; this.context.clearColor(e, t, i, n), this.clear(), this.context.clearColor(this._clearColor.r, this._clearColor.g, this._clearColor.b, this._clearColor.a) } }, { key: "clearRenderTexture", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 0; this.setRenderTexture(e), this.clearWithColor(t, i, n, s), this.unSetRenderTexture() } }, { key: "getAspect", value: function () { return this._renderWidth / this._renderHeight } }, { key: "clearDepth", value: function () { this.renderState.setDepthMask(!0), this.context.clear(hl.DEPTH_BUFFER_BIT) } }, { key: "setClearColor", value: function (e, t, i) { var n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0; this._clearColor.setValues(e, t, i, n), this.context.clearColor(e, t, i, n) } }, { key: "getClearColor", value: function () { return this._clearColor } }, {
                                   key: "clear", value: function () {
                                          this.context.depthMask(!0), this.context.clear(hl.COLOR_BUFFER_BIT | hl.DEPTH_BUFFER_BIT),
                                          // restore to settings in render state
                                          this.context.depthMask(this.renderState.getDepthMask())
                                   }
                            }, { key: "setRenderSize", value: function (e, t) { this._renderWidth === e && this._renderHeight === t || (this._renderWidth = e, this._renderHeight = t, this._renderSize.x = e, this._renderSize.y = t, this.context.viewport(0, 0, this._renderWidth, this._renderHeight)) } }, { key: "setScissor", value: function (e, t, i, n) { var s = arguments.length > 4 && void 0 !== arguments[4] && arguments[4]; e = el.clamp01(e), t = el.clamp01(t), i = el.clamp01(i), n = el.clamp01(n); var a = i - e, r = n - t, o = this._renderWidth, l = this._renderHeight; this.context.enable(hl.SCISSOR_TEST), this.context.scissor(e * o, t * l, a * o, r * l), s && this.context.viewport(e * o, t * l, a * o, r * l) } }, { key: "setScissorPixels", value: function (e, t, i, n) { this.context.enable(hl.SCISSOR_TEST), this.context.scissor(e, t, i - e, n - t) } }, { key: "unSetScissor", value: function () { this.context.disable(hl.SCISSOR_TEST) } }, { key: "setViewPort", value: function (e, t, i, n) { this._renderWidth = i, this._renderHeight = n, this.context.viewport(e, t, this._renderWidth, this._renderHeight) } }, { key: "unsetViewPort", value: function () { this.context.viewport(0, 0, this._canvas.width, this._canvas.height) } }, { key: "setChannelMask", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0], t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], i = arguments.length > 2 && void 0 !== arguments[2] && arguments[2], n = arguments.length > 3 && void 0 !== arguments[3] && arguments[3]; this.context.colorMask(e, t, i, n) } }, { key: "clearChannelMask", value: function () { this.context.colorMask(!0, !0, !0, !0) } }, { key: "setStencilEnabled", value: function (e) { e ? this.context.enable(hl.STENCIL_TEST) : this.context.disable(hl.STENCIL_TEST) } }, { key: "startDrawToStencil", value: function () { var e = this.context; this.setStencilEnabled(!0), e.stencilFunc(hl.ALWAYS, 1, 255), e.stencilOp(hl.KEEP, hl.KEEP, hl.REPLACE), e.stencilMask(255) } }, { key: "setStencilFuncEqual", value: function (e) { this.context.stencilFunc(e ? hl.EQUAL : hl.NOTEQUAL, 1, 255) } }, {
                                   key: "destruct", value: function () {
                                          if (!this.isDestructed) {
                                                 cl.log("Renderer: destruct"), this._clearColor = null; for (var e = this.context, i = e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS), n = 0; n < i; ++n)e.activeTexture(e.TEXTURE0 + n), e.bindTexture(e.TEXTURE_2D, null), e.bindTexture(e.TEXTURE_CUBE_MAP, null); e.bindBuffer(e.ARRAY_BUFFER, null), e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, null), e.bindRenderbuffer(e.RENDERBUFFER, null), e.bindFramebuffer(e.FRAMEBUFFER, null), e.useProgram(null), this._quad && (this._quad.destruct(), this._quad = null), this._copyTextureMaterial && (this._copyTextureMaterial.destruct(), this._copyTextureMaterial = null), this._canvas.removeEventListener("resize", this.handleCanvasResize), this._canvas = null, this.context = null, this.renderState = null, this.extensionManager = null, this._mouseListener && (this._mouseListener.destruct(), this._mouseListener = null),
                                                        // always call this last
                                                        Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this)
                                          }
                                   }
                            }]), t
                     }(ol); nh.webgl2ContextName = "webgl2", nh.webgl1ContextName = "experimental-webgl";/* harmony default export */
                     var sh = nh, ah = function (e) {
                            function t(e, i, n) { var s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : "", a = arguments.length > 4 && void 0 !== arguments[4] && arguments[4], r = !(arguments.length > 5 && void 0 !== arguments[5]) || arguments[5], o = arguments.length > 6 && void 0 !== arguments[6] && arguments[6], l = !(arguments.length > 7 && void 0 !== arguments[7]) || arguments[7], h = !(arguments.length > 8 && void 0 !== arguments[8]) || arguments[8]; it()(this, t); var u = mt()(this, (t.__proto__ || ft()(t)).call(this, e, i, sh.webgl1ContextName, n, s, a, r, o, l, h)); return u._vertexArrayObjects = {}, u } return At()(t, e), st()(t, [{ key: "init", value: function () { Et()(t.prototype.__proto__ || ft()(t.prototype), "init", this).call(this) } }, { key: "getRenderContext", value: function () { return this.context } }, { key: "preprocessShaderString", value: function (e) { return "#define WEBGL1\n" + e } }, { key: "setDefaultUniforms", value: function (e) { var t = this._renderWidth, i = this._renderHeight; e.setFloats("_ScreenParams", 1 / t, 1 / i, t / i, i / t), e.setFloat("_Time", il.getInstance().time) } }, {
                                   key: "initVAO", value: function (e, t) {
                                          var i = this.extensionManager.vertex_array_object, n = i.createVertexArrayOES();
                                          // LogGL.log("initVAO", mesh.id, material.id, material.name);
                                          return i.bindVertexArrayOES(n), this.setStates(e, t), i.bindVertexArrayOES(null), n
                                   }
                            }, {
                                   key: "setStates", value: function (e, t) {
                                          var i = this.context;
                                          // LogGL.log("setStates: attribute count: ", mesh.attributes.length);
                                          if (e.interleaved) {
                                                 e.interleaveData(), i.bindBuffer(i.ARRAY_BUFFER, e.interleavedBuffer); for (var n = 0, s = 0; s < e.attributes.length; s++) {
                                                        var a = e.attributes[s], r = t.shader.getAttributeByName(a.name); r && (
                                                               // commented for performance
                                                               /*                    if (va.stride != sa.stride) {
                                                                                                  LogGL.log("Renderer: setStates: strides don't match: ", va.stride, sa.stride);
                                                                                                  continue;
                                                                                                  }*/
                                                               i.enableVertexAttribArray(r.loc), i.vertexAttribPointer(r.loc, r.stride, i.FLOAT, !1, 4 * e.interleavedStrideSum, n)), n += 4 * a.stride
                                                 }
                                          } else for (var o = 0; o < e.attributes.length; o++) {
                                                 var l = e.attributes[o], h = t.shader.getAttributeByName(l.name); h && (
                                                        // commented for performance
                                                        /*                    if (va.stride != sa.stride) {
                                                                                           LogGL.log("Renderer: setStates: strides don't match: ", va.stride, sa.stride);
                                                                                           continue;
                                                                                           }*/
                                                        i.bindBuffer(i.ARRAY_BUFFER, l.buffer), i.enableVertexAttribArray(h.loc), i.vertexAttribPointer(h.loc, h.stride, i.FLOAT, !1, 4 * h.stride, 0))
                                          } e.indexBuffer && i.bindBuffer(i.ELEMENT_ARRAY_BUFFER, e.indexBuffer)
                                   }
                            }, { key: "getVAO", value: function (e, t) { var i = void 0, n = this._vertexArrayObjects[e.id]; return n ? (i = n[t.id]) || (i = this.initVAO(e, t), n[t.id] = i) : (n = {}, i = this.initVAO(e, t), n[t.id] = i, this._vertexArrayObjects[e.id] = n), i } }, { key: "drawVAO", value: function (e, t, i) { var n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : -1; i.setActive(); var a = this.extensionManager.vertex_array_object; a.bindVertexArrayOES(e), this.drawElements(t, i, n, s), a.bindVertexArrayOES(null) } }, {
                                   key: "draw", value: function (e, t) {
                                          var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : -1; t.setActive(); var s = this.extensionManager.vertex_array_object; !s || e.isDynamic ? (
                                                 // TODO: remove this when vertexArrayObject extension is broadly supported
                                                 this.setStates(e, t), this.drawElements(e, t, i, n)) : (s.bindVertexArrayOES(this.getVAO(e, t)), this.drawElements(e, t, i, n), s.bindVertexArrayOES(null))
                                   }
                            }, { key: "startBatch", value: function (e, t) { t.setActive(), this.extensionManager.vertex_array_object ? this.extensionManager.vertex_array_object.bindVertexArrayOES(this.getVAO(e, t)) : this.setStates(e, t) } }, {
                                   key: "drawElements", value: function (e, t) {
                                          var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : -1; if (e.indices) n > 0 ?
                                                 // TODO : startIndex * 2 is used because it is assumed the index buffer has a 2 bytes stride
                                                 this.context.drawElements(t.drawType, Math.min(n, e.indices.length), e.indexType, 2 * i) : this.context.drawElements(t.drawType, e.indices.length, e.indexType, 0); else { var s = e.getNumVertices() - i; n > 0 ? this.context.drawArrays(t.drawType, i, Math.min(s, n)) : this.context.drawArrays(t.drawType, i, s) }
                                   }
                            }, { key: "endBatch", value: function () { this.extensionManager.vertex_array_object && this.extensionManager.vertex_array_object.bindVertexArrayOES(null) } }, {
                                   key: "destruct", value: function () {
                                          if (!this.isDestructed) {
                                                 cl.log("RendererWebGL1: destruct"); var e = this.extensionManager.vertex_array_object; if (e && this._vertexArrayObjects) for (var i = 0; i < this._vertexArrayObjects.length; i++)
                                                        // TODO: test
                                                        e.deleteVertexArrayOES(this._vertexArrayObjects[i]);
                                                 // always call this last
                                                 Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this)
                                          }
                                   }
                            }]), t
                     }(sh), rh = ah, oh = function (e) {
                            function t(e, i, n) {
                                   var s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : "", a = arguments.length > 4 && void 0 !== arguments[4] && arguments[4], r = !(arguments.length > 5 && void 0 !== arguments[5]) || arguments[5], o = arguments.length > 6 && void 0 !== arguments[6] && arguments[6]; it()(this, t);
                                   // todo: discuss how we want to manage VAOs; store in renderer, store in mesh?
                                   var l = mt()(this, (t.__proto__ || ft()(t)).call(this, e, i, "webgl2", n, s, a, r, o));
                                   // super(preloader, canvas,Renderer.webgl2ContextName, shaderPath, transparent, autoClear, stencil);
                                   return l._vertexArrayObjects = {}, l._vertexArrayObjects = {}, l
                            } return At()(t, e), st()(t, [{ key: "init", value: function () { Et()(t.prototype.__proto__ || ft()(t.prototype), "init", this).call(this) } }, { key: "getRenderContext", value: function () { return this.context } }, { key: "preprocessShaderString", value: function (e) { var t = e.indexOf("#version"), i = ""; return t > -1 && (i = e.substr(t, e.indexOf("\n", t) - t)), e = e.replace(i, ""), e = i + "\n#define WEBGL2\n" + e } }, { key: "getVAO", value: function (e, t) { var i = null, n = this._vertexArrayObjects[e.id]; return n ? (i = n[t.id]) || (i = this.initVAO(e, t), n[t.id] = i) : (n = [], i = this.initVAO(e, t), n[t.id] = i, this._vertexArrayObjects[e.id] = n), i } }, {
                                   key: "initVAO", value: function (e, t) {
                                          var i = this.getRenderContext(), n = i.createVertexArray(); i.bindVertexArray(n);
                                          // if mesh has interleaved data, store all interleaved data into the vertex buffer.
                                          var s = 0; e.interleaved && (e.interleaveData(), this.context.bindBuffer(this.context.ARRAY_BUFFER, e.interleavedBuffer));// otherwise, buffers are already filled/configured within mesh attributes
                                          for (var a = 0; a < e.attributes.length; a++) { var r = e.attributes[a], o = t.shader.getAttributeByName(r.name); if (o) { if (r.stride !== o.stride) { cl.log("Renderer: initVAO: strides don't match: ", r.stride, o.stride); continue } e.interleaved ? (i.enableVertexAttribArray(o.loc), i.vertexAttribPointer(o.loc, o.stride, i.FLOAT, !1, 4 * e.interleavedStrideSum, s)) : (i.bindBuffer(i.ARRAY_BUFFER, r.buffer), i.enableVertexAttribArray(o.loc), i.vertexAttribPointer(o.loc, o.stride, i.FLOAT, !1, 4 * o.stride, 0)) } e.interleaved && (s += 4 * r.stride) } return e.indexBuffer && i.bindBuffer(i.ELEMENT_ARRAY_BUFFER, e.indexBuffer), n
                                   }
                            }, { key: "draw", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : -1; t.setActive(); var s = this.getVAO(e, t); this.context.bindVertexArray(s), this.drawElements(e, t, i, n) } }, { key: "startBatch", value: function (e, t) { t.setActive(); var i = this.getVAO(e, t); this.getRenderContext().bindVertexArray(i) } }, { key: "drawElements", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : -1; if (e.indices) this.context.drawElements(t.drawType, e.indices.length, e.indexType, 0); else { var s = e.getNumVertices() - i; n > 0 ? this.context.drawArrays(t.drawType, i, Math.min(s, n)) : this.context.drawArrays(t.drawType, i, s) } } }, {
                                   key: "drawInstanced", value: function (e, t, i, n) {
                                          t.setActive(); var s = this._vertexArrayObjects && void 0 !== this._vertexArrayObjects[e.id] && void 0 !== this._vertexArrayObjects[e.id][t.id], a = this.getVAO(e, t), r = this.getRenderContext();
                                          // configure instanced arrays for each vertex attribute; only if it hasn't been configured before
                                          if (r.bindVertexArray(a), !s) for (var o = 0; o < n.attributes.length; ++o) { var l = n.attributes[o]; r.bindBuffer(r.ARRAY_BUFFER, l.buffer), r.enableVertexAttribArray(l.index), r.vertexAttribPointer(l.index, l.nrComponents, r.FLOAT, !1, l.bufferStride, l.bufferOffset), r.vertexAttribDivisor(l.index, 1) }
                                          // then draw
                                          e.indices ? r.drawElementsInstanced(t.drawType, e.indices.length, e.indexType, 0, i) : r.drawArraysInstanced(t.drawType, 0, e.getNumVertices(), i)
                                   }
                            }, {
                                   key: "destruct", value: function () {
                                          if (!this.isDestructed) {
                                                 if (cl.log("RendererWebGL2: destruct"), this._vertexArrayObjects) for (var e in this._vertexArrayObjects) for (var i = 0; i < this._vertexArrayObjects[e].length; ++i)this.getRenderContext().deleteVertexArray(this._vertexArrayObjects[e][i]);
                                                 // always call this last
                                                 Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this)
                                          }
                                   }
                            }]), t
                     }(sh), lh = oh, hh = function (e) {
                            function t(e) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : Dl.RGBA_UNSIGNED_BYTE, n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2], s = !(arguments.length > 3 && void 0 !== arguments[3]) || arguments[3], a = !(arguments.length > 4 && void 0 !== arguments[4]) || arguments[4]; it()(this, t); var r = mt()(this, (t.__proto__ || ft()(t)).call(this, e)); return r.width = -1, r.height = -1, r.filterLinearEnabled = !0, r.useMips = !1, r._mipsCreated = !1, r.wrapModeClamp = !0, r.tSize = new _l, e instanceof rh ? r.formatType = Dl.validateFormatType(e, i) : e instanceof lh && (r.formatType = i, r.internalFormat = Dl.getInternalFormat(i)), r.format = Dl.getFormat(r.renderer, r.formatType), r.type = Dl.getType(r.renderer, r.formatType), r.useMips = n, s ? r.setFilteringLinear() : r.setFilteringNearest(), r.setWrapModeClamp(a), r }
                            // material.setTexture will lead to this
                            return At()(t, e), st()(t, [{ key: "bindToSlot", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0; this.renderer.renderState.bindTextureToSlot(this.textureGL, e) } }, { key: "bind", value: function () { this.renderer.context.activeTexture(hl.TEXTURE0 + this.renderer.maxParams.MAX_TEXTURE_IMAGE_UNITS - 1), this.renderer.context.bindTexture(hl.TEXTURE_2D, this.textureGL) } }, {
                                   key: "setTextureSize", value: function (e, t) {
                                          if (e !== this.width || t !== this.height) {
                                                 if (this.width = e, this.height = t, this.bind(), this.renderer instanceof rh) {
                                                        var i = this.renderer.context;
                                                        //TODO: store flipY state?
                                                        i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL, 0), i.texImage2D(hl.TEXTURE_2D, 0, this.format, this.width, this.height, 0, this.format, this.type, null)
                                                 } else if (this.renderer instanceof lh) {
                                                        var n = this.renderer.context;
                                                        //TODO: store flipY state?
                                                        n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL, 0), n.texImage2D(hl.TEXTURE_2D, 0, this.internalFormat, this.width, this.height, 0, this.format, this.type, null)
                                                 } cl.log("expensive operation: setTextureSize: ", e, t, "format: ", this.format)
                                          }
                                   }
                            }, { key: "setFilteringLinear", value: function () { this.setFiltering(!0) } }, { key: "setFilteringNearest", value: function () { this.setFiltering(!1) } }, { key: "setFiltering", value: function (e) { this.filterLinearEnabled = e; var t = this.renderer.context; this.bind(); var i = void 0; i = this._mipsCreated ? e ? hl.LINEAR_MIPMAP_LINEAR : hl.NEAREST_MIPMAP_LINEAR : e ? hl.LINEAR : hl.NEAREST, t.texParameteri(hl.TEXTURE_2D, hl.TEXTURE_MAG_FILTER, e ? hl.LINEAR : hl.NEAREST), t.texParameteri(hl.TEXTURE_2D, hl.TEXTURE_MIN_FILTER, i) } }, { key: "setFilterAnisotropic", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 4; if (this.setFilteringLinear(), this.renderer.extensionManager.filter_anisotropic) { var t = this.renderer.context; e = Math.min(this.renderer.extensionManager.maxAnisotropy, e), t.texParameterf(t.TEXTURE_2D, this.renderer.extensionManager.filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT, e) } } }, { key: "setWrapModeClamp", value: function (e) { this.wrapModeClamp = e; var t = this.renderer.context; this.bind(); var i = e ? hl.CLAMP_TO_EDGE : hl.REPEAT; t.texParameteri(hl.TEXTURE_2D, hl.TEXTURE_WRAP_S, i), t.texParameteri(hl.TEXTURE_2D, hl.TEXTURE_WRAP_T, i) } }, { key: "setWrapModeClampHorizontal", value: function (e) { this.setWrapModeClampForDirection(e, hl.TEXTURE_WRAP_S) } }, { key: "setWrapModeClampVertical", value: function (e) { this.setWrapModeClampForDirection(e, hl.TEXTURE_WRAP_T) } }, { key: "setWrapModeClampForDirection", value: function (e, t) { var i = this.renderer.context; this.bind(); var n = e ? hl.CLAMP_TO_EDGE : hl.REPEAT; i.texParameteri(hl.TEXTURE_2D, t, n) } }, { key: "generateMips", value: function () { if (t.isPOT(this.width, this.height)) { var e = this.renderer.context; this.bind(), e.generateMipmap(e.TEXTURE_2D), this.useMips = !0, this._mipsCreated = !0, this.filterLinearEnabled ? this.setFilteringLinear() : this.setFilteringNearest() } else cl.error("can't generate mips: npot: ", this.width, this.height) } }, { key: "disableMips", value: function () { this.useMips = !1, this._mipsCreated = !1, this.filterLinearEnabled ? this.setFilteringLinear() : this.setFilteringNearest() } }, {
                                   key: "setData", value: function (e, t, i) {
                                          var n = arguments.length > 3 && void 0 !== arguments[3] && arguments[3], s = this.renderer.context; if (this.bind(),
                                                 // TODO: check if GL.UNPACK_ALIGNMENT, 1 is needed
                                                 // gl.pixelStorei(GL.PACK_ALIGNMENT, 1);
                                                 s.pixelStorei(hl.UNPACK_ALIGNMENT, 1), s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL, n ? 1 : 0), s.pixelStorei(hl.UNPACK_COLORSPACE_CONVERSION_WEBGL, hl.NONE), this.renderer instanceof rh) s.texImage2D(hl.TEXTURE_2D, 0, this.format, t, i, 0, this.format, this.type, e); else if (this.renderer instanceof lh) { var a = this.renderer.context; a.texImage2D(hl.TEXTURE_2D, 0, this.internalFormat, t, i, 0, this.format, this.type, e) } this.width = t, this.height = i
                                   }
                            }, { key: "getData", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, i = this.renderer.context; e || (e = t.getFramebuffer(this.renderer)), i.bindFramebuffer(hl.FRAMEBUFFER, e), i.framebufferTexture2D(hl.FRAMEBUFFER, hl.COLOR_ATTACHMENT0, hl.TEXTURE_2D, this.textureGL, 0); var n = void 0; switch (this.formatType) { case Dl.RGBA_FLOAT: n = new Float32Array(this.width * this.height * 4); break; case Dl.RGB_FLOAT: n = new Float32Array(this.width * this.height * 3); break; case Dl.RGBA_UNSIGNED_BYTE: n = new Uint8Array(this.width * this.height * 4); break; case Dl.RGB_UNSIGNED_BYTE: n = new Uint8Array(this.width * this.height * 3); break; case Dl.LUMINANCE_UNSIGNED_BYTE: n = new Uint8Array(this.width * this.height); break; default: cl.error("can not yet get data for format type: ", this.formatType) }return i.readPixels(0, 0, this.width, this.height, this.format, this.type, n), i.bindFramebuffer(i.FRAMEBUFFER, null), n } }, { key: "getPixel", value: function (e, i) { var n = this.renderer.context, s = t.getFramebuffer(this.renderer); n.bindFramebuffer(hl.FRAMEBUFFER, s), n.framebufferTexture2D(hl.FRAMEBUFFER, hl.COLOR_ATTACHMENT0, hl.TEXTURE_2D, this.textureGL, 0); var a = new Uint8Array(4); return n.readPixels(e, i, 1, 1, hl.RGBA, hl.UNSIGNED_BYTE, a), n.bindFramebuffer(n.FRAMEBUFFER, null), a } }, { key: "getSize", value: function () { return this.tSize.x = this.width, this.tSize.y = this.height, this.tSize } }, { key: "getAspect", value: function () { return this.width / this.height } }, { key: "destruct", value: function () { if (!t._framebuffer) { this.renderer.context.deleteFramebuffer(t._framebuffer), t._framebuffer = null } Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this) } }], [{ key: "isPOT", value: function (e, t) { return 0 == (e & e - 1) && 0 == (t & t - 1) } }, { key: "getFramebuffer", value: function (e) { if (!t._framebuffer) { var i = e.context; t._framebuffer = i.createFramebuffer() } return t._framebuffer } }]), t
                     }(Ol); hh._framebuffer = null;/* harmony default export */
                     var uh, ch = hh, dh = function (e) {
                            function t(e) { var i = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], n = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2], s = !(arguments.length > 3 && void 0 !== arguments[3]) || arguments[3], a = arguments.length > 4 && void 0 !== arguments[4] && arguments[4]; return it()(this, t), mt()(this, (t.__proto__ || ft()(t)).call(this, e, a ? Dl.RGB_UNSIGNED_BYTE : Dl.RGBA_UNSIGNED_BYTE, i, n, s)) } return At()(t, e), st()(t, [{
                                   key: "setURL", value: function (e) {
                                          var t = this, i = new Image;
                                          // image.crossOrigin = "Anonymous";
                                          i.crossOrigin = "", i.src = e, i.complete ? this.setImage(i) : i.onload = function () { return t.setImage(i) }, this.image = i
                                   }
                            }, {
                                   key: "setImage", value: function (e) {
                                          var t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
                                          // LogGL.log ("setImageData", image, image.width, image.height);
                                          if (!this.isDestructed) {
                                                 var i = this.renderer.context; this.bind(), i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL, t ? 1 : 0), i.pixelStorei(hl.UNPACK_COLORSPACE_CONVERSION_WEBGL, hl.NONE), i.pixelStorei(hl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !1), i.texImage2D(hl.TEXTURE_2D, 0, hl.RGBA, hl.RGBA, hl.UNSIGNED_BYTE, e),
                                                        // gl.texImage2D(GL.TEXTURE_2D, 0, GL.RGB, GL.RGB, GL.UNSIGNED_BYTE, image);
                                                        this.formatType = Dl.RGBA_UNSIGNED_BYTE, e instanceof HTMLVideoElement ? (this.width = e.videoWidth, this.height = e.videoHeight) : (this.width = e.width, this.height = e.height), 0 == (this.width & this.width - 1) && 0 == (this.height & this.height - 1) ?
                                                               // powers of two
                                                               this.useMips && this.generateMips() : (this.wrapModeClamp || console.error("Trying to wrap non-power of two texture. These can only be clamped!"), this.setWrapModeClamp(!0)), t && i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL, 0), this.image = e
                                          }
                                   }
                            }], [{ key: "loadFromURL", value: function (e, i) { var n = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2], s = !(arguments.length > 3 && void 0 !== arguments[3]) || arguments[3], a = new t(e); return a.setURL(i), a.setWrapModeClamp(n), s ? a.setFilteringLinear() : a.setFilteringNearest(), a } }, { key: "createFromImage", value: function (e, i) { var n = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2], s = arguments.length > 3 && void 0 !== arguments[3] && arguments[3], a = arguments.length > 4 && void 0 !== arguments[4] && arguments[4], r = arguments.length > 5 && void 0 !== arguments[5] && arguments[5], o = new t(e, s); return o.setImage(i, n), o.setWrapModeClamp(r), a ? o.setFilteringLinear() : o.setFilteringNearest(), o } }, { key: "getImageData", value: function (e, t) { var i = e.context, n = i.createTexture(), s = i.createFramebuffer(); i.bindFramebuffer(hl.FRAMEBUFFER, s), i.framebufferTexture2D(hl.FRAMEBUFFER, hl.COLOR_ATTACHMENT0, hl.TEXTURE_2D, n, 0); var a = t.width, r = t.height, o = new Uint8Array(a * r * 4); return i.readPixels(0, 0, a, r, hl.RGBA, hl.RGBA, o), i.deleteFramebuffer(s), o } }]), t
                     }(ch), _h = dh, ph = function (e) { function t(e, i, n) { var s = arguments.length > 3 && void 0 !== arguments[3] && arguments[3], a = !(arguments.length > 4 && void 0 !== arguments[4]) || arguments[4], r = !(arguments.length > 5 && void 0 !== arguments[5]) || arguments[5], o = !(arguments.length > 6 && void 0 !== arguments[6]) || arguments[6]; it()(this, t); var l = mt()(this, (t.__proto__ || ft()(t)).call(this, e, s, a, r, "jpg" === n.split(".").pop())); return l._flipY = !0, l.loaded = !1, l._flipY = o, l._url = n, i.add(l), l } return At()(t, e), st()(t, [{ key: "load", value: function (e) { var t = this, i = new Image; i.crossOrigin = "Anonymous", i.onload = function () { t.setImage(i, t._flipY), t.loaded = !0, e.call(t) }, i.onerror = function () { cl.error("TextureLoader: could not load image", t._url), e.call(t) }, i.src = this._url } }]), t }(_h), vh = ph, fh = function (e) { function t(e) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, s = !(arguments.length > 3 && void 0 !== arguments[3]) || arguments[3]; it()(this, t); var a = mt()(this, (t.__proto__ || ft()(t)).call(this, e)); return a.createPlane(i, n, s), a.interleaveData(), a } return At()(t, e), st()(t, [{ key: "createPlane", value: function () { for (var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, i = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2], n = (e + 1) * (t + 1), s = new Float32Array(3 * n), a = new Float32Array(2 * n), r = new Float32Array(3 * n), o = 0, l = 0, h = 0, u = 0; u < t + 1; u++)for (var c = 0; c < e + 1; c++)s[o++] = c / e * 2 - 1, i ? (s[o++] = 0, s[o++] = u / t * 2 - 1) : (s[o++] = u / t * 2 - 1, s[o++] = 0), a[l++] = c / e, a[l++] = u / t, i ? (r[h++] = 0, r[h++] = 1, r[h++] = 0) : (r[h++] = 0, r[h++] = 0, r[h++] = 1); this.setPositions(s), this.setUV0(a), this.setNormals(r); var d = e * t * 2, _ = new Uint16Array(3 * d), p = e + 1; o = 0; for (var u = 0; u < t; u++)for (var c = 0; c < e; c++)_[o++] = u * p + c, _[o++] = (u + 1) * p + c, _[o++] = u * p + c + 1, _[o++] = (u + 1) * p + c, _[o++] = (u + 1) * p + c + 1, _[o++] = u * p + c + 1; this.setIndices(_) } }]), t }(Zl), gh = fh; !function (e) { e.EYK = "EYK", e.KMG = "KMG", e.AOK = "AOK" }(uh || (uh = {})); var mh = function () {
                            function e(t, i, n, s, a, r) {
                                   it()(this, e), this._textures = [], this._center = new al, this._introCenter = new al, this._introFade = 0, this._frameCounter = 0, this._frameDt = 0, this._wasFullyVisible = !1, this._renderer = t, this._name = n, this._pauseFrameEn = a, this._endFrameEn = r, e._material || (e._material = new Ml(t, i, "title"), e._material.setCullingDisabled(), e._material.setPreMultipliedAlphaBlending(), e._material.depthTest = !1, e._materialNoAnimation = new Ml(t, i, "title"), e._materialNoAnimation.setCullingDisabled(), e._materialNoAnimation.setPreMultipliedAlphaBlending(), e._materialNoAnimation.addShaderDefines("NO_ANIMATION"), e._materialNoAnimation.depthTest = !0, e._mesh = new gh(t, 1, 1)), n = n.toLocaleLowerCase(), this._textures[0] = new vh(t, i, s + "webgl/temple-names/title_" + n + ".png", !0, !0), this._textures[1] = new vh(t, i, s + "webgl/temple-names/mask_title_" + n + ".png", !0, !0), this._textures[2] = new vh(t, i,
                                          // root + 'webgl/temple-names/' + name + '_intro.png',
                                          s + "webgl/temple-names/" + n + "_intro-2.png", !0, !0)
                            } return st()(e, [{ key: "setFlowData", value: function (e, t, i) { this._center.copy(e), this._progressHide = i, this._progressVisible = t } }, { key: "setIntroCenter", value: function (e) { this._introCenter.copy(e) } }, { key: "drawIntroTitle", value: function (t, i) { var n = .5 * il.getInstance().deltaTime; if (this._introFade = el.clamp01(this._introFade + (i ? n : -n)), this._introFade > 0) { var s = this._textures[2]; e._materialNoAnimation.setMatrix("_ViewProjection", t.getViewProjection()), e._materialNoAnimation.setVector3("_Center", this._introCenter), e._materialNoAnimation.setFloat("_Aspect", t.projection.getAspect()), e._materialNoAnimation.setFloat("_TitleAspect", s.height / s.width), e._materialNoAnimation.setFloat("_Fade", this._introFade), e._materialNoAnimation.setFloat("_TitleScale", e._titleScales[this._name]), e._materialNoAnimation.setTexture("_Texture", s), this._renderer.draw(e._mesh, e._materialNoAnimation) } } }, { key: "draw", value: function (t, i) { var n = il.getInstance().deltaTime, s = i > this._progressVisible && i < this._progressHide; if (this._frameDt += s && !this._wasFullyVisible || !s && this._wasFullyVisible || !s && this._frameCounter > 0 && this._frameCounter < this._endFrameEn ? n : 0, this._frameDt > 0 || this._frameCounter === this._pauseFrameEn) { var a = this._pauseFrameEn, r = this._endFrameEn; this._frameDt > e.FPS_REC && (this._frameDt -= e.FPS_REC, this._frameCounter++), this._frameCounter >= r && (this._frameCounter = 0, this._frameDt = 0, this._wasFullyVisible = !1), this._frameCounter === a && (this._wasFullyVisible || (this._frameDt = 0), this._wasFullyVisible = !0); var o = this._textures[0], l = this._textures[1]; e._material.setMatrix("_ViewProjection", t.getViewProjection()), e._material.setVector3("_Center", this._center), e._material.setFloat("_Aspect", t.projection.getAspect()), e._material.setFloat("_TitleAspect", o.height / o.width), e._material.setTexture("_Texture", o), e._material.setTexture("_Mask", l), e._material.setFloat("_FrameCounter", this._frameCounter), this._renderer.draw(e._mesh, e._material) } } }]), e
                     }(); mh.FPS_REC = 1 / 30, mh._titleScales = { AOK: 12, KMG: 35, EYK: 50 };/* harmony default export */
                     var yh = mh, Eh = i(397), Th =/*#__PURE__*/i.n(Eh), Ah = i(107), bh =/*#__PURE__*/i.n(Ah), Rh = function (e) { function t(e, i, n, s, a) { it()(this, t); var r = mt()(this, (t.__proto__ || ft()(t)).call(this, e, n, s, a)); return r.data = i, r } return At()(t, e), st()(t, [{ key: "clone", value: function () { return new t(this.type, this.data, this.bubbles, this.cancelable) } }]), t }(Vi.a), wh = Rh; Rh.START = "AnimationEvent.START", Rh.UPDATE = "AnimationEvent.UPDATE", Rh.UPDATE_HOVER = "AnimationEvent.UPDATE_HOVER", Rh.COMPLETE = "AnimationEvent.COMPLETE";
                     // CONCATENATED MODULE: ./src/component/mobile/PageDragger/PageDraggerRenderer.ts
                     var Ih = function (e) {
                            function t(e) { it()(this, t); var i = mt()(this, (t.__proto__ || ft()(t)).call(this)); return i._dragger = e, i._isDisabled = !0, i._currentItem = 0, i.handleResize = function () { if (window.innerHeight >= window.innerWidth) { i.setElementHeights(); var e = -i.elementHeight * i._currentItem; i._draggable && (i._draggable.applyBounds(i.bounds), i._draggable.y = e), Ee.TweenLite.set(i._dragger, { y: e }), i.handleDrag() } }, i.rebindPosition = function (e) { i._currentItem = e, i.handleResize() }, i } return At()(t, e), st()(t, [{ key: "init", value: function (e) { this._scrollElements = e, this._isDisabled = !1, this._draggable ? this._draggable.enable() : (this.createDraggable(), this._debouncedResize = Ps()(this.handleResize, 150), window.addEventListener("resize", this._debouncedResize)) } }, { key: "disable", value: function () { this._isDisabled = !0, this._draggable && this._draggable.disable() } }, { key: "setElementHeights", value: function () { this._scrollElements.forEach(function (e) { return e.style.height = "" }), this._dragger.style.height = ""; var e = this.elementHeight; this._dragger.style.height = e * Math.max(1, this._scrollElements.length) + "px", this._scrollElements.forEach(function (t) { return t.style.height = e + "px" }) } }, { key: "createDraggable", value: function () { this.setElementHeights(), Th.a, this._draggable = fn.a.create(this._dragger, { type: "y", throwProps: !0, zIndexBoost: !1, maxDuration: 1, dragClickables: !0, bounds: this.bounds, snap: this.getThrowSnap.bind(this), onDrag: this.handleDrag.bind(this), onThrowUpdate: this.handleDrag.bind(this) })[0] } }, {
                                   key: "handleDrag", value: function () {
                                          var e = this, t = this.elementHeight, i = -this._draggable.y / t, n = Math.floor(i), s = i - n; this._scrollElements[n] && (
                                                 // Top Item scrollPercentage
                                                 this.dispatchEvent(new wh(wh.UPDATE, { index: n, progress: 1 + s })),
                                                 // Bottom Item scrollPercentage
                                                 this.dispatchEvent(new wh(wh.UPDATE, { index: n + 1, progress: s })), Ee.TweenMax.staggerTo(this._scrollElements, 0, { cycle: { y: function (i) { return e.getItemScrollY(n, i, s, t) } } }, 0))
                                   }
                            }, { key: "getItemScrollY", value: function (e, i, n, s) { return 0 === i ? 0 : i === e ? s * n * t.SCROLL_UP_PARALLAX_PERCENTAGE : 0 } }, { key: "getThrowSnap", value: function (e) { var t = this._currentItem, i = this.elementHeight, n = -t * i, s = .25 * i; return this._currentItem = e > n + s ? t - 1 : e < n - s ? t + 1 : t, this._currentItem = Math.abs(Math.min(this._scrollElements.length - 1, this._currentItem)), t !== this._currentItem && this.dispatchEvent(new bh.a(bh.a.CHANGE)), -this._currentItem * this.elementHeight } }, { key: "dispose", value: function () { this._draggable && (this._draggable.kill(), this._draggable = null), this._debouncedResize && (window.removeEventListener("resize", this._debouncedResize), this._debouncedResize = null), Et()(t.prototype.__proto__ || ft()(t.prototype), "dispose", this).call(this) } }, { key: "currentItem", get: function () { return this._currentItem } }, { key: "elementHeight", get: function () { return this._scrollElements[0] ? this._scrollElements[0].offsetHeight : window.innerHeight } }, { key: "bounds", get: function () { return { minY: -this.elementHeight * (this._scrollElements.length - 1), maxY: 0 } } }]), t
                     }(Lt.a), Ph = Ih; Ih.SCROLL_UP_PARALLAX_PERCENTAGE = .75;
                     // CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/eslint-loader!./src/component/mobile/MapTransition/MapTransition.js
                     /* harmony default export */
                     var Lh = {
                            name: "MapTransition", props: { id: ne.a.string.isRequired, title: ne.a.string.isRequired, isFirstMap: { required: !1, default: !1 } }, mixins: [fo], data: function () { return { names: uh } }, mounted: function () {
                                   this.updateScroll(0),
                                   // eslint-disable-next-line
                                   nr.a,
                                   // eslint-disable-next-line
                                   bs.a, this.createPathTimelines()
                            }, methods: {
                                   createPathTimelines: function () { var e = this; this.paths = {}, ee()(uh).forEach(function (t) { var i = nr.a.pathDataToBezier("#path-" + t, { align: "#dot-" + t }); e.paths[t] = { timeline: new Ee.TimelineLite({ paused: !0 }) }, Ee.TweenLite.set("#dot-" + t, { xPercent: -50, yPercent: -50 }), e.paths[t].timeline.to("#dot-" + t, 2, { bezier: { values: i, type: "cubic" } }, 0), e.paths[t].timeline.fromTo(e.$el.querySelector("#path-" + t), 2, { drawSVG: "0%" }, { drawSVG: "100%" }, 0) }) }, updateScroll: function (e) {
                                          if (this.paths && this.paths[this.id]) { var t = Math.min(1, Math.max(0, Ii.normalizedValue(e, .2, 1))); this.paths[this.id].timeline.progress(t) } e > .84 && this.$store.commit(er.SET_NAVIGATION_INVERTED, !0), Ee.TweenLite.set(this.$refs.mask, { yPercent: -100 * Math.min(1, e) }),
                                                 // 0.228 = mask height percentage based on window width
                                                 Ee.TweenLite.set([this.$refs.background, this.$refs.path], { y: .228 * window.innerWidth * (1 - Math.min(1, e)) }), Ee.TweenLite.set(this.$refs.revealNext, { y: Math.min(0, -this.$el.offsetHeight * Ph.SCROLL_UP_PARALLAX_PERCENTAGE * (e - 1)) })
                                   }
                            }
                     }, kh = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: [e.$style.transition, e.isFirstMap ? "is-first-map" : null] }, [i("span", { ref: "mask", class: e.$style.mask }), e._v(" "), i("span", { ref: "background", class: e.$style.background, attrs: { "data-item": e.id.toLowerCase() } }), e._v(" "), i("div", { ref: "path", class: e.$style.path }, [e.id === e.names.AOK ? i("Icon", { class: e.$style.beginPath, attrs: { name: "path-top" } }) : e._e(), e._v(" "), i("svg", { attrs: { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 750 1115.49" } }, [i("g", { staticClass: "left", class: [e.$style.pathGroup, (n = {}, n[e.$style.isVisible] = e.id === e.names.AOK, n)] }, [i("path", { class: e.$style.pathProgress, attrs: { id: "path-AOK", d: "M305-0.9c0,47.4-13,60.9-65,115c-47.5,49.4-50.3,148.9-10,204c47.3,64.6,81.7,66.4,170,63.3\n\tc70.2-2.4,119.5,63.8,116.1,138.7" } }), e._v(" "), i("path", { class: e.$style.pathLine, attrs: { d: "M421,1114.6c-19-21.2,13.9-68-0.7-137.5c-14.7-70-75.3-80.7-107.3-95\n\tc-41.2-18.4-96.2-29.7-96.2-111.7c0-55.3,28.2-100,120.2-100c119.1,0,178.5-76,179.1-150.3c0.6-71-33.8-134.7-116.1-138.7\n\tc-61.7-3-113.4,17.7-170-63.3c-51-73-22.3-170.3,10-204c35.3-36.8,66.3-56.8,65-115" } })]), e._v(" "), i("g", { staticClass: "right", class: [e.$style.pathGroup, (s = {}, s[e.$style.isVisible] = e.id === e.names.KMG, s)] }, [i("path", { class: e.$style.pathProgress, attrs: { id: "path-KMG", d: "M464,0.3c0,0-1,7.9-1,54.4c0,37,20.3,91.3-23.7,150.7C410.1,244.8,475,261,475,315\n\tc0,38.3-46,70.5-101.6,45.5c-40-18-89.1-20.9-122.4,12.5c-11.5,11.5-53.2,47.7-54.4,118.9" } }), e._v(" "), i("path", { class: e.$style.pathLine, attrs: { d: "M352,1115.4c-20.9-23.6-145-15.4-145-107.4c0-90,70-104,133-104c65,0,147-36,147-133\n\tc0-73-53-128-141-128c-51,0-120-16-143-96c-14.8-51.4-11.5-114.5,48-174c43.5-43.5,104.2-21.4,122.4-12.5\n\tC424.3,385.6,475,356,475,315c0-53.4-66-69.7-35.7-109.7C484.9,145.3,463,94,463,54.7c0-4.7,1-54.4,1-54.4" } })]), e._v(" "), i("g", { class: [e.$style.pathGroup, (a = {}, a[e.$style.isVisible] = e.id === e.names.EYK, a)] }, [i("path", { class: e.$style.pathProgress, attrs: { id: "path-EYK", d: "M258,0c0,16,29.5,34.8,84.4,34.8C417,34.8,505,60.5,505,170.7c0,68.2-43,144.3-168,144.3\n\tc-86.1,0-128.3,60-128.3,100.7c0,77.3,75.2,101.9,112.3,117c36.3,14.8,90,37.8,90,123.3" } }), e._v(" "), i("path", { class: e.$style.pathLine, attrs: { d: "M258,0c0,0,2.2,34.8,84.4,34.8c101.3,0,162.6,49,162.6,135.9c0,89.8-68.1,144.3-168,144.3\n\tc-97,0-128.3,68.8-128.3,100.7c0,42.3,21.3,86,112.3,117c36.1,12.3,90,40,90,123.3c0,167-231,64-231,329.3c0,118.7,0,131.7,0,131.7" } })]), e._v(" "), i("g", { class: [e.$style.dot, (r = {}, r[e.$style.isVisible] = e.id === e.names.AOK, r)], attrs: { id: "dot-AOK", x: "0", y: "0" } }, [i("path", { attrs: { d: "M20.12.54A16,16,0,1,1,.54,11.89v0A16,16,0,0,1,20.12.54Z", fill: "#fff" } }), e._v(" "), i("path", { class: e.$style.dotFill, attrs: { d: "M16.79,11A5.5,5.5,0,1,1,10,14.88,5.5,5.5,0,0,1,16.79,11Z" } })]), e._v(" "), i("g", { class: [e.$style.dot, (o = {}, o[e.$style.isVisible] = e.id === e.names.KMG, o)], attrs: { id: "dot-KMG", x: "0", y: "0" } }, [i("path", { attrs: { d: "M20.12.54A16,16,0,1,1,.54,11.89v0A16,16,0,0,1,20.12.54Z", fill: "#fff" } }), e._v(" "), i("path", { class: e.$style.dotFill, attrs: { d: "M16.79,11A5.5,5.5,0,1,1,10,14.88,5.5,5.5,0,0,1,16.79,11Z" } })]), e._v(" "), i("g", { class: [e.$style.dot, (l = {}, l[e.$style.isVisible] = e.id === e.names.EYK, l)], attrs: { id: "dot-EYK", x: "0", y: "0" } }, [i("path", { attrs: { d: "M20.12.54A16,16,0,1,1,.54,11.89v0A16,16,0,0,1,20.12.54Z", fill: "#fff" } }), e._v(" "), i("path", { class: e.$style.dotFill, attrs: { d: "M16.79,11A5.5,5.5,0,1,1,10,14.88,5.5,5.5,0,0,1,16.79,11Z" } })])])], 1), e._v(" "), i("h2", { class: e.$style.title, attrs: { "data-id": e.id }, domProps: { innerHTML: e._s(e.title) } }), e._v(" "), i("div", { ref: "revealNext", class: e.$style.revealNext })]); var n, s, a, r, o, l }, Ch = [], Mh = { render: kh, staticRenderFns: Ch }, xh = Mh, Oh = i(5), Sh = L, Dh = Oh(Lh, xh, Sh, null, null), Nh = Dh.exports, Fh = Nh, Vh = {
                            name: "TempleIntro", props: { id: ne.a.string.isRequired, title: ne.a.string.isRequired, description: ne.a.string.isRequired, image: ne.a.string.isRequired, button: ne.a.string.isRequired }, mixins: [fo], data: function () { return { barProgress: 0, barDirection: zt.LEFT } }, mounted: function () { this.buttonThreshold = .75, this.buttonVisible = !1 }, methods: {
                                   updateScroll: function (e) { e > .84 && this.$store.commit(er.SET_NAVIGATION_INVERTED, !0), this.barProgress = Math.min(1, Math.max(0, 3 * e - 2)), e < 1 && this.toggleButtonView(e) }, toggleButtonView: function (e) { e > this.buttonThreshold && !this.buttonVisible ? (this.buttonVisible = !0, this.$refs.button.transitionIn()) : e < this.buttonThreshold && this.buttonVisible && (this.buttonVisible = !1, this.$refs.button.transitionOut()) }, onExploreClick: function () {
                                          var e = this;
                                          // feature detect
                                          "function" == typeof DeviceOrientationEvent.requestPermission ? DeviceOrientationEvent.requestPermission().then(function (t) { "granted" === t ? e.openPanorama(!0) : e.openPanorama(!1) }).catch(function () { setTimeout(function () { e.openPanorama(!1) }, 250) }) : this.openPanorama(!0)
                                   }, openPanorama: function (e) { this.$tracker.push(se.PAGE, { action: "view", label: "mobile " + this.id }), this.$store.commit(er.SET_USE_GYROSCOPE, e), this.$store.commit(er.SET_CURRENT_DETAIL_VIEW, this.id) }
                            }, components: { ContentBar: Ai }
                     }, Bh = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: [e.$style.view, "intro-temple-" + e.id] }, [i("figure", { class: e.$style.imageWrapper, style: { backgroundImage: "url(" + e.$versionRoot + e.image + ")" } }, [i("figcaption", { class: e.$style.title }, [i("h2", { domProps: { innerHTML: e._s(e.title) } }), e._v(" "), i("ContentBar", { class: e.$style.bar, attrs: { progress: e.barProgress, direction: e.barDirection, color: "KMG" === e.id ? "#332211" : null } })], 1)]), e._v(" "), i("div", { class: e.$style.contentWrapper }, [i("div", { class: e.$style.content }, [i("p", { class: ["copy-01", e.$style.copy] }, [e._v("\n\t\t\t\t" + e._s(e.description) + "\n\t\t\t")]), e._v(" "), i("MainButton", { ref: "button", class: e.$style.button, attrs: { label: e.button }, on: { click: e.onExploreClick } })], 1)]), e._v(" "), i("div", { ref: "revealPrevious", class: e.$style.revealPrevious })]) }, Uh = [], Hh = { render: Bh, staticRenderFns: Uh }, Gh = Hh, $h = i(5), zh = k, Wh = $h(Vh, Gh, zh, null, null), Kh = Wh.exports, Yh = Kh, Xh = {
                            name: "EndScreen", mixins: [fo], data: function () { return { barProgress: 0, endData: this.$experience.getKeypointById("END"), videoUrl: "https://storage.googleapis.com/gweb-arts-exp-bagan.appspot.com/video/outro" + Go.getExtension() } }, mounted: function () { this.updateScroll(0) }, methods: {
                                   updateScroll: function (e) {
                                          this.barProgress = e, e > .84 && this.$store.commit(er.SET_NAVIGATION_INVERTED, !0); var t = 1 - Math.min(1, e);
                                          // TweenLite.set(this.$refs.backgroundSolid, {
                                          //   y: window.innerHeight * PageDraggerRenderer.SCROLL_UP_PARALLAX_PERCENTAGE * progress,
                                          // });
                                          Ee.TweenLite.set(this.$refs.figure, { y: window.innerWidth * (this.$refs.mask.offsetHeight / window.innerWidth) * t }),
                                                 // TweenLite.set(this.$refs.mask, {
                                                 //   yPercent: topPercentage * 100,
                                                 // });
                                                 Ee.TweenLite.set(this.$refs.mask, { yPercent: -100 * Math.min(1, e) }), (e < .5 || e > 1.5) && this.$refs.player.isPlaying && this.$refs.player.stop()
                                   }, handlePlayClick: function () { this.$refs.player.play() }, onShowMenu: function () { this.$emit("showMenu") }, onHideMenu: function () { this.$emit("hideMenu") }
                            }, components: { ContentBar: Ai, PlayButton: vo, VideoPlayer: Uo }
                     }, jh = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: e.$style.endScreen }, [i("div", { ref: "mask", class: e.$style.mask }), e._v(" "), i("figure", { ref: "figure", class: e.$style.imageWrapper }, [i("figcaption", { class: e.$style.title }, [i("div", { class: e.$style.contentTitle }, [i("h2", { domProps: { innerHTML: e._s(e.endData.mobile.label) } }), e._v(" "), i("ContentBar", { class: e.$style.titleBar, attrs: { progress: e.barProgress } })], 1)]), e._v(" "), i("PlayButton", { class: e.$style.playButton, on: { click: e.handlePlayClick } })], 1), e._v(" "), i("div", { class: e.$style.contentWrapper }, [i("div", { class: e.$style.content }, [i("p", { class: ["copy-01", e.$style.copy] }, [e._v("\n\t\t\t\t" + e._s(e.endData.mobile.description) + "\n\t\t\t")]), e._v(" "), i("span", { class: e.$style.arrow })])]), e._v(" "), i("VideoPlayer", { ref: "player", class: e.$style.player, attrs: { src: e.videoUrl, location: "outro", crossorigin: "anonymous" }, on: { hideMenu: e.onHideMenu, showMenu: e.onShowMenu } })], 1) }, qh = [], Zh = { render: jh, staticRenderFns: qh }, Qh = Zh, Jh = i(5), eu = C, tu = Jh(Xh, Qh, eu, null, null), iu = tu.exports, nu = iu, su = { name: "CreditsScreen", mixins: [fo], mounted: function () { this.updateScroll(0) }, methods: { updateScroll: function (e) { e > .84 && this.$store.commit(er.SET_NAVIGATION_INVERTED, !0); var t = 1 - Math.min(1, e); Ee.TweenLite.set(this.$refs.backgroundSolid, { y: window.innerHeight * Ph.SCROLL_UP_PARALLAX_PERCENTAGE * e }), Ee.TweenLite.set(this.$refs.background, { y: window.innerWidth * (this.$refs.mask.offsetHeight / window.innerWidth) * t }), Ee.TweenLite.set(this.$refs.mask, { yPercent: 100 * t }) } }, components: { ContentBar: Ai } }, au = function () { var e = this, t = e.$createElement, n = e._self._c || t; return n("div", { class: e.$style.endScreen }, [n("span", { ref: "backgroundSolid", class: e.$style.backgroundSolid }), e._v(" "), n("span", { ref: "background", class: e.$style.background }), e._v(" "), n("div", { ref: "mask", class: e.$style.mask }), e._v(" "), n("div", { class: e.$style.content }, [n("span", { class: e.$style.arrow }), e._v(" "), n("div", { class: e.$style.credits }, [n("div", { class: e.$style.credit }, [n("a", { attrs: { href: e.$config.getURL(e.URLNames.GOOGLE_AC), target: "_blank" } }, [n("Icon", { ref: "google", class: e.$style.googleLogo, attrs: { name: "google-ac" } })], 1), e._v(" "), n("a", { attrs: { href: e.$config.getURL(e.URLNames.CYARK), target: "_blank" } }, [n("Icon", { ref: "cyark", class: e.$style.cyarkLogo, attrs: { name: "cyark" } })], 1)]), e._v(" "), n("div", { class: e.$style.credit }, [n("h4", { class: ["copy-02", e.$style.creditTitle] }, [e._v("Narrated by")]), e._v(" "), n("p", { class: ["copy-02", e.$style.creditName] }, [e._v("Bettany Hughes")])]), e._v(" "), n("div", { class: e.$style.credit }, [n("h4", { class: ["copy-02", e.$style.creditTitle] }, [e._v("Story by")]), e._v(" "), n("p", { class: ["copy-02", e.$style.creditName] }, [e._v("Alexandra Green")])]), e._v(" "), n("div", { class: e.$style.credit }, [n("h4", { class: ["copy-02", e.$style.creditTitle] }, [e._v("Photography and Videography by")]), e._v(" "), n("p", { class: ["copy-02", e.$style.creditName] }, [e._v("Kieran Kesner and Christian Schneider for CyArk")])]), e._v(" "), n("div", { class: e.$style.credit }, [n("h4", { class: ["copy-02", e.$style.creditTitle] }, [e._v("Sponsored by")]), e._v(" "), n("a", { attrs: { href: e.$config.getURL(e.URLNames.DAYDREAM), target: "_blank" } }, [n("img", { class: e.$style.daydreamLogo, attrs: { src: i(205), alt: "" } })])]), e._v(" "), n("div", { class: e.$style.more }, [n("h4", { class: ["copy-02", e.$style.moreTitle] }, [e._v("Discover More")]), e._v(" "), n("ul", { class: e.$style.moreLinks }, [n("li", [n("a", { attrs: { href: e.$config.getURL(e.URLNames.HERITAGE), target: "_blank" } }, [e._v("Open heritage")])]), e._v(" "), n("li", [n("a", { attrs: { href: e.$config.getURL(e.URLNames.BAGAN), target: "_blank" } }, [e._v("Bagan")])])])])]), e._v(" "), n("footer", { class: e.$style.footer }, [n("a", { attrs: { href: e.$config.getURL(e.URLNames.PRIVACY), target: "_blank", alt: "Privacy & Terms" } }, [e._v("Privacy & Terms")])])])]) }, ru = [], ou = { render: au, staticRenderFns: ru }, lu = ou, hu = i(5), uu = M, cu = hu(su, lu, uu, null, null), du = cu.exports, _u = du, pu = [{ id: "PATH_INTRO_TO_AOK", progress: 0 }, { id: "PATH_INTRO_TO_AOK", progress: .25 }, { id: "PATH_INTRO_TO_AOK", progress: .5 }, { id: "PATH_INTRO_TO_AOK", progress: 1 }, { id: "PATH_AOK_TO_KMG", progress: .5 }, { id: "PATH_AOK_TO_KMG", progress: 1 }, { id: "PATH_KMG_TO_EYK", progress: .5 }, { id: "PATH_KMG_TO_EYK", progress: 1 }, { id: "PATH_EYK_TO_FUTURE", progress: 1 }], vu = { name: "PageDragger", props: { forceHotspotUpdate: { required: !1, default: {} } }, computed: _t()({}, Object(pt.c)("mobile", ["isScrollActive"])), data: function () { return { temples: this.$experience.getTempleKeypoints() } }, beforeCreate: function () { this.totalItems = 0, this.scrollItems = [], this.currentItem = 0 }, mounted: function () { this.dragger = new Ph(this.$refs.dragger), this.dragger.addEventListener(bh.a.CHANGE, this.onDraggerChange), this.dragger.addEventListener(wh.UPDATE, this.onItemScrollUpdate) }, methods: { onShowMenu: function () { this.$emit("showMenu") }, onHideMenu: function () { this.$emit("hideMenu") }, onIntroDragStart: function () { this.$store.commit(er.SET_SCROLL_ACTIVE, !1) }, onIntroDragComplete: function () { this.$store.commit(er.SET_SCROLL_ACTIVE, !0) }, onItemInit: function () { this.totalItems += 1 }, onItemRender: function (e) { this.scrollItems.push(e), this.scrollItems.length === this.totalItems && this.$store.commit(er.SET_SCROLL_ACTIVE, !0) }, onItemScrollUpdate: function (e) { this.scrollItems[e.data.index] && this.scrollItems[e.data.index].updateScroll(e.data.progress) }, onDraggerChange: function () { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0], t = this.dragger.currentItem; pu[t] && this.$store.commit(er.SET_MAP_LOCATION, this.$experience.getProgressBetweenKeypoints(pu[t].id, pu[t].progress)), this.scrollItems[this.currentItem] && this.scrollItems[this.currentItem].transitionOut(), this.scrollItems[t] && (this.scrollItems[t].transitionIn(), this.currentItem = t, e && this.scrollItems[t].toggleButtonView && this.scrollItems[t].toggleButtonView(pu[t].progress)) } }, watch: { isScrollActive: function (e) { e ? this.dragger.init(this.scrollItems.map(function (e) { return e.$el })) : this.dragger.disable() }, forceHotspotUpdate: function (e) { var t = pu.findIndex(function (t) { return t.id === e.pathId }); e.isTemple && (t = Math.max(0, t - 1)), this.dragger.rebindPosition(t), this.onDraggerChange(!0) } }, beforeDestroy: function () { this.dragger.dispose(), this.dragger = null }, components: { Introduction: Co, IntroductionVideo: Qo, MapTransition: Fh, TempleIntro: Yh, EndScreen: nu, CreditsScreen: _u } }, fu = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: e.$style.wrapper }, [i("div", { ref: "dragger", class: e.$style.dragger }, [i("Introduction", { ref: "introduction", on: { start: e.onIntroDragStart, complete: e.onIntroDragComplete, itemInit: e.onItemInit, itemRendered: e.onItemRender } }), e._v(" "), i("IntroductionVideo", { on: { itemInit: e.onItemInit, itemRendered: e.onItemRender, hideMenu: e.onHideMenu, showMenu: e.onShowMenu } }), e._v(" "), e._l(e.temples, function (t, n) { return [i("MapTransition", { attrs: { id: t.id, title: t.mobile.label, isFirstMap: 0 === n }, on: { itemInit: e.onItemInit, itemRendered: e.onItemRender } }), e._v(" "), i("TempleIntro", { attrs: { id: t.id, title: t.mobile.label, description: t.mobile.description, button: t.mobile.exploreButton, image: t.mobile.introImage }, on: { itemInit: e.onItemInit, itemRendered: e.onItemRender } })] }), e._v(" "), i("EndScreen", { on: { itemInit: e.onItemInit, itemRendered: e.onItemRender, hideMenu: e.onHideMenu, showMenu: e.onShowMenu } }), e._v(" "), i("CreditsScreen", { on: { itemInit: e.onItemInit, itemRendered: e.onItemRender } })], 2)]) }, gu = [], mu = { render: fu, staticRenderFns: gu }, yu = mu, Eu = i(5), Tu = x, Au = Eu(vu, yu, Tu, null, null), bu = Au.exports, Ru = bu, wu = { name: "TempleImageView", computed: _t()({}, Object(pt.c)("mobile", ["currentDetailView"]), { templeData: function () { return this.currentDetailView ? this.$experience.getKeypointById(this.currentDetailView) : null } }), beforeCreate: function () { this.hotspotList = {} }, mounted: function () { var e = this; r([this.templeData.mobile.image], !0).then(function (t) { return e.init(t) }) }, methods: { init: function (e) { var t = [0, 0, this.$el.offsetWidth, this.$el.offsetHeight], i = mo()([0, 0, e[0].width, e[0].height], t, "cover"); Ee.TweenLite.set(this.$refs.imageWrapper, { width: i[2], height: i[3] }), this.showHotspots() }, onHotspotReady: function (e, t) { var i = this.templeData.mobile.hotspots.find(function (t) { return t.id === e }); this.hotspotList[e] = { component: t, hotspot: i } }, onHotspotClick: function (e) { this.$emit("hotspotClick", e) }, showHotspots: function () { var e = this; ee()(this.hotspotList).forEach(function (t) { e.hotspotList[t].component.setPosition(_t()({}, e.hotspotList[t].hotspot, { visible: !0 })) }) } }, beforeDestroy: function () { this.draggable && (this.draggable.kill(), this.draggable = null) }, components: { ExperienceHotspot: ga } }, Iu = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: e.$style.imageWrapper }, [i("div", { ref: "imageWrapper", class: e.$style.image }, [i("img", { ref: "image", attrs: { src: e.$versionRoot + e.templeData.mobile.image } }), e._v(" "), e._l(e.templeData.mobile.hotspots, function (t) { return i("ExperienceHotspot", { key: t.id, class: e.$style.hotspot, attrs: { id: t.id }, on: { hotspotClick: e.onHotspotClick, hotspotReady: e.onHotspotReady } }) })], 2)]) }, Pu = [], Lu = { render: Iu, staticRenderFns: Pu }, ku = Lu, Cu = i(5), Mu = O, xu = Cu(wu, ku, Mu, null, null), Ou = xu.exports, Su = Ou, Du = function (e) { function t(e, i, n, s, a) { it()(this, t); var r = mt()(this, (t.__proto__ || ft()(t)).call(this, e, n, s, a)); return r.data = i, r } return At()(t, e), st()(t, [{ key: "clone", value: function () { return new t(this.type, this.data, this.bubbles, this.cancelable) } }]), t }(Vi.a), Nu = Du; Du.LOAD_PROGRESS = "WebGLEvent.LOAD_PROGRESS", Du.LOAD_COMPLETE = "WebGLEvent.LOAD_COMPLETE";
                     // EXTERNAL MODULE: ./node_modules/seng-event/lib/util/eventTypeUtils.js
                     var Fu = i(108), Vu = function (e) { function t(e, i, n, s, a) { it()(this, t); var r = mt()(this, (t.__proto__ || ft()(t)).call(this, e, n, s, a)); return r.data = i, r } return At()(t, e), st()(t, [{ key: "clone", value: function () { return new t(this.type, this.data, this.bubbles, this.cancelable) } }]), t }(Vi.a); Vu.CHANGED = "CHANGED", Object(Fu.generateEventTypes)({ PanoViewerEvent: Vu });/* harmony default export */
                     var Bu = Vu, Uu = { name: "TemplePanoramaView", props: { hotspotId: ne.a.string, panoramaId: ne.a.string, canPlay: ne.a.bool }, data: function () { return { iconVisible: !0, isVisible: !1, hotspots: [] } }, beforeCreate: function () { this.isInitialized = !1, this.isFirstHotspotEvent = !0 }, computed: _t()({}, Object(pt.c)("application", ["isWebVREnabled"]), Object(pt.c)("mobile", ["useGyroscope"]), { hasWebVrIcon: function () { return !lt.a.tablet } }), methods: { transitionIn: function () { this.iconVisible = !0, this.isVisible = !0, this.isFirstHotspotEvent = !0, this.isInitialized ? this.$nextTick(this.setPanorama) : this.$nextTick(this.initWebGL) }, transitionOut: function () { this.isVisible && (this.isVisible = !1, this.hotspots = [], this.hotspotList = {}, this.isInitialized && (this.$webgl.pause(!0), this.removePanoramaEvents())) }, setPanorama: function () { this.$webgl.pause(!0), this.initPanoramaEvents(), this.$webgl.setPanorama(this.panoramaId, this.useGyroscope), this.$webgl.play(!0) }, initPanoramaEvents: function () { this.$webgl.addPanoramaHotspotEvent(Bu.CHANGED, this.handleHotspotChange) }, removePanoramaEvents: function () { this.$webgl.removePanoramaHotspotEvent(Bu.CHANGED, this.handleHotspotChange) }, initWebGL: function () { this.$webgl.addEventListener(Nu.LOAD_COMPLETE, this.handleLoadComplete), this.$webgl.initPanorama(this.$refs.canvas), this.isInitialized = !0 }, handleLoadComplete: function () { this.$webgl.removeEventListener(Nu.LOAD_COMPLETE, this.handleLoadComplete), this.$webgl.webglPanoramaInit(), this.setPanorama() }, handleHotspotChange: function (e) { var t = this; this.isFirstHotspotEvent && (this.iconVisible = !1, this.isFirstHotspotEvent = !1, this.hotspotList = {}, this.hotspots = e.data.filter(function (e) { return t.$experience.hasHotspotId(e.id) })), e.data.forEach(function (e) { t.hotspotList[e.id] && t.hotspotList[e.id].setPosition(e) }) }, onHotspotReady: function (e, t, i) { this.hotspotList[e] = t, t.setPosition(this.hotspots[i]) }, onHotspotClick: function (e) { this.$emit("hotspotClick", e) } }, watch: { canPlay: function (e) { e ? this.$webgl.play(!0) : this.$webgl.pause(!0) } }, components: { ExperienceHotspot: ga } }, Hu = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: [e.$style.wrapper, e.isVisible ? e.$style.isVisible : null] }, [i("div", { ref: "canvas", class: e.$style.canvas }), e._v(" "), i("Icon", { class: [e.$style.panoIcon, e.iconVisible ? null : e.$style.isHidden], attrs: { name: "pano-360" } }), e._v(" "), e._l(e.hotspots, function (t, n) { return i("ExperienceHotspot", { key: t.id, attrs: { id: t.id, index: n }, on: { hotspotClick: e.onHotspotClick, hotspotReady: e.onHotspotReady } }) })], 2) }, Gu = [], $u = { render: Hu, staticRenderFns: Gu }, zu = $u, Wu = i(5), Ku = S, Yu = Wu(Uu, zu, Ku, null, null), Xu = Yu.exports, ju = Xu, qu = { name: "TempleView", data: function () { return { overlayId: null, audioFileHotspot: null } }, computed: _t()({}, Object(pt.c)("mobile", ["currentDetailView"]), { templeData: function () { return this.currentDetailView ? this.$experience.getKeypointById(this.currentDetailView) : null }, canPanoramaPlay: function () { return !this.overlayId && this.templeData && "panorama" === this.templeData.mobile.type } }), methods: { showCloseButton: function () { this.$refs.closeButton.transitionIn() }, hideCloseButton: function () { this.$refs.closeButton.transitionOut() }, onHotspotClick: function (e) { var t = this; this.overlayId = null, this.audioFileHotspot = null, this.lockPortrait(); var i = this.$experience.getHotspotById(e); i.type !== Ys.AUDIO_FRAGMENT ? (this.overlayId = e, this.$refs.overlay && this.$nextTick(function () { return t.$refs.overlay.show() }), i.type !== Ys.VIDEO && i.type !== Ys.VIDEO_JUMP || this.allowLandscape()) : this.audioFileHotspot = e }, onCloseClick: function () { this.$store.commit(er.SET_CURRENT_DETAIL_VIEW, null), this.lockPortrait() }, onCloseOverlay: function () { this.overlayId = null, this.lockPortrait() }, onAudioHotspotClose: function () { this.audioFileHotspot = null, this.lockPortrait() }, lockPortrait: function () { document.body.classList.remove("allow-landscape") }, allowLandscape: function () { document.body.classList.add("allow-landscape") } }, watch: { currentDetailView: function (e) { this.$store.commit(er.SET_SCROLL_ACTIVE, null === e), null !== e ? this.showCloseButton() : this.hideCloseButton() }, templeData: function (e) { e && "panorama" === e.mobile.type ? this.$refs.panorama.transitionIn() : (this.$refs.panorama.transitionOut(), this.audioFileHotspot = null) } }, components: { TempleImageView: Su, TemplePanoramaView: ju, InformationOverlay: aa, AudioHotspot: Dr } }, Zu = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: [e.$style.view, null !== e.currentDetailView ? e.$style.isVisible : null] }, [e.templeData && "image" === e.templeData.mobile.type ? i("TempleImageView", { on: { hotspotClick: e.onHotspotClick } }) : e._e(), e._v(" "), i("TemplePanoramaView", { ref: "panorama", attrs: { panoramaId: e.templeData && e.templeData.mobile ? e.templeData.mobile.panoramaId : null, canPlay: e.canPanoramaPlay }, on: { hotspotClick: e.onHotspotClick } }), e._v(" "), i("CircleButton", { ref: "closeButton", class: [e.$style.button, e.$style.close], attrs: { icon: "cross", hasHover: !1 }, on: { click: e.onCloseClick } }), e._v(" "), i("InformationOverlay", { ref: "overlay", attrs: { id: e.overlayId }, on: { closeOverlay: e.onCloseOverlay } }), e._v(" "), i("AudioHotspot", { attrs: { id: e.audioFileHotspot, visible: null !== e.audioFileHotspot }, on: { close: e.onAudioHotspotClose } })], 1) }, Qu = [], Ju = { render: Zu, staticRenderFns: Qu }, ec = Ju, tc = i(5), ic = D, nc = tc(qu, ec, ic, null, null), sc = nc.exports, ac = sc, rc = { name: "MobileHomePage", data: function () { return { forceHotspot: 0, hasMenuIcon: !0 } }, computed: _t()({}, Object(pt.c)("application", ["isMapOverlayVisible", "isWebVREnabled"]), Object(pt.c)("mobile", ["isNavigationInverted"])), methods: { onMenuButtonClick: function () { this.$store.commit(Di.SET_MAP_OVERLAY_VISIBILITY, !this.isMapOverlayVisible) }, onHideMenu: function () { this.hasMenuIcon = !1 }, onShowMenu: function () { this.hasMenuIcon = !0 }, onMobileTempleClick: function (e) { this.forceHotspot = e } }, components: { PageDragger: Ru, TempleView: ac, MapOverlay: _r } }, oc = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: [e.$style.homePage, "mobile-homepage"] }, [i("PageDragger", { attrs: { forceHotspotUpdate: e.forceHotspot }, on: { showMenu: e.onShowMenu, hideMenu: e.onHideMenu } }), e._v(" "), i("button", { directives: [{ name: "show", rawName: "v-show", value: e.hasMenuIcon, expression: "hasMenuIcon" }], class: [e.$style.navigationButton, e.isNavigationInverted ? e.$style.isInverted : null], on: { click: e.onMenuButtonClick } }), e._v(" "), i("TempleView"), e._v(" "), i("MapOverlay", { on: { mobileTempleClick: e.onMobileTempleClick } })], 1) }, lc = [], hc = { render: oc, staticRenderFns: lc }, uc = hc, cc = i(5), dc = N, _c = cc(rc, uc, dc, null, null), pc = _c.exports, vc = pc, fc = i(206), gc = function (e) {
                            function t(e, i) {
                                   it()(this, t); var n = mt()(this, (t.__proto__ || ft()(t)).call(this)); n._canvas = e, n._video = i, n._counter = 0, n.handleVideoPlay = function () {
                                          n.startVideoTick(), 0 === n._counter && Ee.TweenLite.to(n, t._FRAMES / 30, {
                                                 _counter: t._FRAMES, roundProps: "_counter", ease: Ee.Linear.easeNone, onUpdate: function () { return n.handleRenderUpdate() }, onComplete: function () {
                                                        //FIXME: Better solution to make sure that the mask is completely faded out
                                                        n._renderer.currentFrame = 100
                                                 }
                                          }), n.dispatchEvent(new Ui(Ui.PLAY))
                                   }, n.handleVideoPause = function () { n.stopVideoTick(), n.dispatchEvent(new Ui(Ui.PAUSE)) }, n.handleVideoEnded = function () { n.stopVideoTick(), n.dispatchEvent(new Ui(Ui.ENDED)) }, n._tick = function () { return n.updateVideoTick() }, n._video.addEventListener("play", n.handleVideoPlay), n._video.addEventListener("pause", n.handleVideoPause), n._video.addEventListener("ended", n.handleVideoEnded); var s = Ut.getImages([St.HOME_BACK, St.INTRO_MASK]); return n.createRenderer(s), n
                            } return At()(t, e), st()(t, [{ key: "start", value: function () { this._video.play() } }, { key: "maskVideoOut", value: function () { var e = this; return new ye.a(function (t) { Ee.TweenLite.to(e, 1.2, { _counter: 0, roundProps: "_counter", ease: Ee.Linear.easeNone, onUpdate: function () { return e.handleRenderUpdate() }, onComplete: function () { return t() } }) }) } }, { key: "handleRenderUpdate", value: function () { this._renderer.currentFrame = this._counter } }, { key: "createRenderer", value: function (e) { return this._renderer = new Ot(this._canvas, fc), this._renderer.baseImage = e[0], this._renderer.maskImage = e[1], this._renderer.currentFrame = 0, ye.a.resolve() } }, { key: "updateVideoTick", value: function () { this._video && this._renderer && (this._renderer.baseImage = this._video, this.dispatchEvent(new Ui(Ui.TIME_UPDATE, { progress: this._video.currentTime / this._video.duration }))) } }, { key: "startVideoTick", value: function () { Ee.TweenLite.ticker.addEventListener("tick", this._tick) } }, { key: "stopVideoTick", value: function () { Ee.TweenLite.ticker.removeEventListener("tick", this._tick) } }, { key: "dispose", value: function () { Ee.TweenLite.killTweensOf(this), this.stopVideoTick(), this._renderer && (this._renderer.dispose(), this._renderer = null), this._video.removeEventListener("play", this.handleVideoPlay), this._video.removeEventListener("pause", this.handleVideoPause), this._video.removeEventListener("ended", this.handleVideoEnded), Et()(t.prototype.__proto__ || ft()(t.prototype), "dispose", this).call(this) } }, { key: "volume", set: function (e) { this._video.volume = e } }]), t
                     }(Lt.a), mc = gc; gc._CANVAS_WIDTH = 1440, gc._CANVAS_HEIGHT = 880, gc._FRAMES = 73;
                     // CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/eslint-loader!./src/component/MaskedVideo/MaskedVideo.js
                     /* harmony default export */
                     var yc = { name: "MaskedVideo", props: { videoUrl: ne.a.string.isRequired }, computed: _t()({}, Object(pt.c)("application", ["volume"])), methods: { init: function () { this.renderer = new mc(this.$refs.canvas, this.$refs.video), this.renderer.addEventListener(Ui.TIME_UPDATE, this.updateVideoProgress), this.renderer.addEventListener(Ui.PLAY, this.onVideoPlay), this.renderer.addEventListener(Ui.PAUSE, this.onVideoPause), this.renderer.addEventListener(Ui.ENDED, this.onVideoEnded), this.renderer.volume = this.volume, this.$refs.canvas.addEventListener("click", this.handleVideoClick) }, transitionIn: function () { this.renderer.start() }, transitionOut: function () { return this.renderer.maskVideoOut() }, playVideo: function () { this.$refs.video.play() }, pauseVideo: function () { this.$refs.video.pause() }, updateVideoProgress: function (e) { this.$emit("updateProgress", e.data.progress) }, getVideoDuration: function () { return this.$refs.video.duration }, setCurrentProgress: function (e, t) { this.$refs.video.currentTime = e * (this.$refs.video.duration - t) }, handleVideoClick: function () { this.$refs.video.paused ? this.playVideo() : this.pauseVideo() }, onVideoPlay: function () { this.$emit("videoPlay") }, onVideoPause: function () { this.$emit("videoPause") }, onVideoEnded: function () { this.$emit("videoEnded") } }, watch: { volume: function (e) { this.renderer && (this.renderer.volume = e) } }, beforeDestroy: function () { this.renderer && (this.renderer.removeEventListener(Ui.TIME_UPDATE, this.updateVideoProgress), this.renderer.removeEventListener(Ui.PLAY, this.onVideoPlay), this.renderer.removeEventListener(Ui.PAUSE, this.onVideoPause), this.renderer.removeEventListener(Ui.ENDED, this.onVideoEnded), this.renderer.dispose(), this.renderer = null), this.$refs.canvas.removeEventListener("click", this.handleVideoClick) } }, Ec = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: e.$style.maskedVideo }, [i("div", { ref: "canvas", class: e.$style.canvasWrapper }), e._v(" "), i("video", { ref: "video", class: e.$style.video, attrs: { src: e.videoUrl, crossorigin: "anonymous" } })]) }, Tc = [], Ac = { render: Ec, staticRenderFns: Tc }, bc = Ac, Rc = i(5), wc = F, Ic = Rc(yc, bc, wc, null, null), Pc = Ic.exports, Lc = Pc, kc = {
                            name: "IntroVideo", props: { isPreloaderIntroVideo: ne.a.boolean, videoUrl: ne.a.string.isRequired, location: ne.a.string.isRequired }, data: function () { return { isTransitionOut: !1, isActive: !1, videoProgress: 0, videoEndDelay: 4, showPauseButton: !1 } }, mounted: function () { this.isSkipped = !1 }, methods: {
                                   init: function () {
                                          this.$store.commit(Di.SET_WEBGL_PLAYSTATE, !1),
                                          // if (this.isPreloaderIntroVideo) {
                                          //   console.log('INTROVIDEO: webgl init');
                                          //   this.$webgl.webglInit();
                                          //   console.log('INTROVIDEO: webgl initialised');
                                          // }
                                          this.$refs.video.init()
                                   }, transitionIn: function () { this.videoDuration = this.$refs.video.getVideoDuration(), this.$refs.video.transitionIn(), this.$refs.skipButton.transitionIn(), this.isActive = !0 }, onVideoProgressUpdate: function (e) {
                                          this.videoDuration && !isNaN(this.videoDuration) || (this.videoDuration = this.$refs.video.getVideoDuration()), this.videoProgress = e;
                                          // the bar completes before the transition out delay
                                          var t = e * (this.videoDuration + this.videoEndDelay) / this.videoDuration; this.$refs.progressBarStatus.style.width = 100 * t + "%", this.videoDuration * (1 - e) < this.videoEndDelay && !this.isSkipped && (this.onSkipClick(!0, !0), Ee.TweenLite.to(this.$el, 1.5, { autoAlpha: 0, ease: Ee.Linear.easeNone }))
                                   }, onVideoPlay: function () { this.showPauseButton = !1, this.$tracker.push(se.VIDEO, { action: "play", label: "static | " + this.location }) }, onVideoPause: function () { this.showPauseButton = !0, this.isTransitionOut || this.$tracker.push(se.VIDEO, { action: "pause", label: "static | " + this.location }) }, onSkipClick: function () {
                                          var e = this, t = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0], i = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; this.isSkipped || (i ? this.$tracker.push(se.VIDEO, { action: "complete", label: "static | " + this.location }) : this.$tracker.push(se.VIDEO, { action: "skip", label: "static | " + this.location }), this.isTransitionOut = !0, this.$store.commit(Di.SET_WEBGL_PLAYSTATE, !0), this.$emit("transitionOut"), setTimeout(function () {
                                                 t && e.$refs.video.pauseVideo(), e.$refs.skipButton.transitionOut(), ye.a.all([
                                                        // new Promise(resolve => {
                                                        //   const counter = { x: 0 };
                                                        //   TweenLite.to(counter, 3, {
                                                        //     x: 0,
                                                        //     ease: Linear.easeNone,
                                                        //     onUpdate: () => {
                                                        //       this.$webgl.setIntroEffectProgress(counter.x);
                                                        //     },
                                                        //     onComplete: () => resolve(),
                                                        //   });
                                                        // }),
                                                        e.$refs.video.transitionOut()]).then(function () { e.$emit("complete") })
                                          }, 50), this.isSkipped = !0)
                                   }, onTimelineClick: function (e) { var t = e.screenX, i = this.$refs.progressBar.getBoundingClientRect().width, n = t / i; this.$refs.progressBarStatus.style.width = 100 * n + "%", this.$refs.video.setCurrentProgress(n, this.videoEndDelay), this.videoProgress = n }
                            }, components: { MaskedVideo: Lc }
                     }, Cc = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: [e.$style.introVideo, e.isTransitionOut ? e.$style.isDisabled : null] }, [i("div", { directives: [{ name: "show", rawName: "v-show", value: !e.isTransitionOut, expression: "!isTransitionOut" }], class: [e.$style.mask, e.isActive ? e.$style.isActive : null] }), e._v(" "), i("MaskedVideo", { ref: "video", attrs: { videoUrl: e.videoUrl }, on: { videoPlay: e.onVideoPlay, videoPause: e.onVideoPause, updateProgress: e.onVideoProgressUpdate } }), e._v(" "), i("Icon", { class: [e.$style.playButton, e.showPauseButton ? e.$style.isVisible : null, e.isTransitionOut ? e.$style.isHidden : null], attrs: { name: "play-circle" } }), e._v(" "), i("div", { ref: "progressBar", class: [e.$style.progressBar, e.isTransitionOut ? e.$style.isHidden : null], on: { click: e.onTimelineClick } }, [i("span", { ref: "progressBarStatus", class: [e.$style.progressBarStatus] })]), e._v(" "), i("MainButton", { ref: "skipButton", class: [e.$style.button, e.$style.skipButton], attrs: { label: "SKIP", isSmall: !0, isInverted: !0 }, on: { click: e.onSkipClick } })], 1) }, Mc = [], xc = { render: Cc, staticRenderFns: Mc }, Oc = xc, Sc = i(5), Dc = V, Nc = Sc(kc, Oc, Dc, null, null), Fc = Nc.exports, Vc = Fc, Bc = {
                            name: "EndPage", data: function () { return { showBarProgress: 0, isVideoTransitionOut: !1, isVideoComplete: !1, endData: this.$experience.getKeypointById("END"), videoUrl: "https://storage.googleapis.com/gweb-arts-exp-bagan.appspot.com/video/outro" + Go.getExtension() } }, mounted: function () { var e = this; ct || (this.contentBarCounter = 0, this.$refs.introVideo.init(), setTimeout(function () { e.$refs.introVideo.transitionIn() }, 600), [this.$refs.titleFirst, this.$refs.titleSecond].forEach(function (e) { e.init() }), Ee.TweenMax.set([this.$refs.bodyCopy, this.$refs.restartButton], { autoAlpha: 0, y: 15 })) }, methods: {
                                   handleVideoTransitionOut: function () {
                                          // eslint-disable-next-line no-console
                                          this.showContentPage(), this.isVideoTransitionOut = !0
                                   }, handleIntroVideoComplete: function () {
                                          // eslint-disable-next-line no-console
                                          this.isVideoComplete = !0
                                   }, handleRestartClick: function () { this.$store.commit(Di.SET_CONTENT_VISIBILITY, !0), this.$router.push(this.PageNames.ONBOARDING) }, showContentPage: function () { [this.$refs.titleFirst, this.$refs.titleSecond].forEach(function (e) { e.transitionIn() }), this.showContentBar(1.5), Ee.TweenMax.staggerTo([this.$refs.bodyCopy, this.$refs.restartButton], 1, { autoAlpha: 1, y: 0, delay: 1.5, ease: Ee.Expo.easeOut }, .15) }, showContentBar: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1; this.animateContentBar(1, e, Ee.Expo.easeOut) }, hideContentBar: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0; this.animateContentBar(0, e, Ee.Expo.easeIn) }, animateContentBar: function (e, t, i) { var n = this; Ee.TweenLite.to(this, 2, { delay: t, ease: i, contentBarCounter: e, onUpdate: function () { n.showBarProgress = n.contentBarCounter } }) }
                            }, components: { AnimatedTitle: ei, ContentBar: Ai, IntroVideo: Vc }
                     }, Uc = function () { var e = this, t = e.$createElement, n = e._self._c || t; return n("div", { class: [e.$style.wrapper, e.isVideoTransitionOut ? e.$style.hasBackground : null] }, [n("IntroVideo", { ref: "introVideo", class: [e.$style.video, e.isVideoComplete ? null : e.$style.isVisible, e.isVideoTransitionOut ? "pointer-none" : null], attrs: { videoUrl: e.videoUrl, location: "outro" }, on: { transitionOut: e.handleVideoTransitionOut, complete: e.handleIntroVideoComplete } }), e._v(" "), n("div", { class: [e.$style.background, e.isVideoTransitionOut ? e.$style.isVisible : null] }), e._v(" "), n("article", { class: [e.$style.article, e.isVideoTransitionOut ? e.$style.isVisible : null] }, [n("div", { class: e.$style.title }, [n("AnimatedTitle", { ref: "titleFirst", attrs: { text: "Making a", speed: "2.5" } }), e._v(" "), n("AnimatedTitle", { ref: "titleSecond", attrs: { text: "difference", speed: "2.5" } }), e._v(" "), n("ContentBar", { ref: "contentBar", class: e.$style.bar, attrs: { progress: e.showBarProgress } })], 1), e._v(" "), n("p", { ref: "bodyCopy", class: ["copy-02", e.$style.description] }, [e._v("\n\t\t\t" + e._s(e.endData.description) + "\n\t\t")]), e._v(" "), n("a", { ref: "restartButton", class: e.$style.restartButton, on: { click: e.handleRestartClick } }, [n("Icon", { class: e.$style.restartIcon, attrs: { name: "arrow-curve" } }), e._v(" "), n("span", { class: e.$style.restartCaption }, [e._v("Restart Experience")])], 1)]), e._v(" "), n("aside", { class: [e.$style.aside, e.isVideoTransitionOut ? e.$style.isVisible : null] }, [n("div", { class: e.$style.asideBackground }), e._v(" "), n("div", { class: e.$style.asideContent }, [n("div", { class: e.$style.asideCredits }, [n("div", { class: e.$style.credit }, [n("a", { attrs: { href: e.$config.getURL(e.URLNames.GOOGLE_AC), target: "_blank" } }, [n("Icon", { ref: "google", class: e.$style.googleLogo, attrs: { name: "google-ac" } })], 1), e._v(" "), n("a", { attrs: { href: e.$config.getURL(e.URLNames.CYARK), target: "_blank" } }, [n("Icon", { ref: "cyark", class: e.$style.cyarkLogo, attrs: { name: "cyark" } })], 1)]), e._v(" "), n("div", { class: e.$style.credit }, [n("h4", { class: ["copy-02", e.$style.creditTitle] }, [e._v("Narrated by")]), e._v(" "), n("p", { class: ["copy-02", e.$style.creditName] }, [e._v("Bettany Hughes")])]), e._v(" "), n("div", { class: e.$style.credit }, [n("h4", { class: ["copy-02", e.$style.creditTitle] }, [e._v("Story by")]), e._v(" "), n("p", { class: ["copy-02", e.$style.creditName] }, [e._v("Alexandra Green")])]), e._v(" "), n("div", { class: e.$style.credit }, [n("h4", { class: ["copy-02", e.$style.creditTitle] }, [e._v("Photography and Videography by")]), e._v(" "), n("p", { class: ["copy-02", e.$style.creditName] }, [e._v("Kieran Kesner and Christian Schneider for CyArk")])]), e._v(" "), n("div", { class: e.$style.credit }, [n("h4", { class: ["copy-02", e.$style.creditTitle] }, [e._v("Sponsored by")]), e._v(" "), n("a", { attrs: { href: e.$config.getURL(e.URLNames.DAYDREAM), target: "_blank" } }, [n("img", { class: e.$style.daydreamLogo, attrs: { src: i(205), alt: "" } })])])]), e._v(" "), n("div", { class: e.$style.asideMore }, [n("h4", { class: ["copy-02", e.$style.asideMoreTitle] }, [e._v("Discover More")]), e._v(" "), n("ul", { class: e.$style.asideMoreLinks }, [n("li", [n("a", { attrs: { href: e.$config.getURL(e.URLNames.HERITAGE), target: "_blank" } }, [e._v("Open heritage")])]), e._v(" "), n("li", [n("a", { attrs: { href: e.$config.getURL(e.URLNames.BAGAN), target: "_blank" } }, [e._v("Bagan")])])])])])])], 1) }, Hc = [], Gc = { render: Uc, staticRenderFns: Hc }, $c = Gc, zc = i(5), Wc = B, Kc = zc(Bc, $c, Wc, null, null), Yc = Kc.exports, Xc = Yc, jc = { name: "WebglPage", clipplaneEnabled: !1, planeDef: 0, reconstructEnabled: !1, reconstructStep: 0, computed: _t()({}, Object(pt.c)("application", ["isWebVREnabled"])), mounted: function () { }, methods: { onVrToggleClick: function () { this.$store.commit(Di.SET_WEBVR_ENABLED, !this.isWebVREnabled) }, onEykClick: function () { this.$webgl.instantJumpToLocation(Mi.EYK_INSIDE) }, onAokClick: function () { this.$webgl.instantJumpToLocation(Mi.AOK_INSIDE) }, onEykclipplaneClick: function () { this.clipplaneEnabled ? (this.planeDef = this.planeDef + 1, this.planeDef >= 7 && (this.clipplaneEnabled = !1)) : (this.clipplaneEnabled = !0, this.planeDef = 0), this.clipplaneEnabled ? this.$webgl.enableEYKClippingPlaneHotspot(this.planeDef, 0 !== this.planeDef) : this.$webgl.disableEYKHotspot() }, onEykreconstructClick: function () { this.reconstructEnabled ? (this.reconstructStep = this.reconstructStep + 1, this.reconstructStep >= 3 && (this.reconstructEnabled = !1)) : (this.reconstructEnabled = !0, this.reconstructStep = 0), this.reconstructEnabled ? this.$webgl.enableEYKReconstructionHotspot(this.reconstructStep, 0 !== this.reconstructStep) : this.$webgl.disableEYKHotspot() } } }, qc = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", [i("button", { class: e.$style.eykreconstructToggle, on: { click: e.onEykreconstructClick } }, [e._v("RECONSTRUCT")]), e._v(" "), i("button", { class: e.$style.eykclipplaneToggle, on: { click: e.onEykclipplaneClick } }, [e._v("CLIPPLANE")]), e._v(" "), i("button", { class: e.$style.eykToggle, on: { click: e.onEykClick } }, [e._v("EYK")]), e._v(" "), i("button", { class: e.$style.aokToggle, on: { click: e.onAokClick } }, [e._v("AOK")]), e._v(" "), i("button", { class: e.$style.vrToggle, on: { click: e.onVrToggleClick } }, [e._v("Toggle WebVR")])]) }, Zc = [], Qc = { render: qc, staticRenderFns: Zc }, Jc = Qc, ed = i(5), td = U, id = ed(jc, Jc, td, null, null), nd = id.exports, sd = nd, ad = { HOME: "/", ONBOARDING: "/onboarding", END: "/end", WEBGL: "/webgl" }, rd = { HOME: "home", ONBOARDING: "onboarding", END: "end", WEBGL: "webgl" }, od = [{ path: ad.HOME, component: ct ? vc : so, name: rd.HOME, meta: { webglEnabled: !0 } }, { path: ad.END, component: Xc, name: rd.END, meta: { webglEnabled: !1 } }, { path: ad.WEBGL, component: sd, name: rd.WEBGL, meta: { webglEnabled: !0 } }];
                     // CONCATENATED MODULE: ./src/router/index.js
                     ae.a.use(Ge.a); var ld = null, hd = !0, ud = function () { if (!ld) { var e = et(), t = Ze(Qe), i = Ze("trackingManager"), n = e.localeEnabled && e.localeRoutingEnabled ? Object($e.routeParser)(od, t.getProperty(Xe.DEFAULT_LOCALE)) : od.concat({ path: "*", redirect: "/" }); ld = new Ge.a({ mode: "history", routes: n, base: t.getVariable(Ye.PUBLIC_PATH) }), ld.beforeEach(function (e, t, n) { ct && !hd || i.push(se.PAGE, { action: "view", label: ct ? "mobile " + e.name : e.name }), hd = !1, n() }) } return ld }, cd = ud, dd = { application: Ni, mobile: tr };
                     // CONCATENATED MODULE: ./src/store/index.js
                     ae.a.use(pt.a); var _d, pd, vd, fd, gd = null, md = function () { return gd || (gd = new pt.a.Store({ modules: dd, strict: !1 })), gd }, yd = md, Ed = i(113), Td =/*#__PURE__*/i.n(Ed), Ad = i(102), bd =/*#__PURE__*/i.n(Ad), Rd = {
                            install: function (e, t) {
                                   ee()(t).forEach(function (i) {
                                          e.prototype[i] ?
                                          // eslint-disable-next-line no-console
                                          console.error("Skipping " + i + ". " + i + " already exists on the Vue prototype") : bd()(e.prototype, i, { get: function () { return t[i] } })
                                   })
                            }
                     }, wd = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, n = _t()({}, i, t); return e.replace(/:(\w+)/g, function (e, t) { return void 0 !== n[t] ? n[t] || "" : e }).replace(/\/:(\w+\?+)/g, function () { return "" }).replace(/\?/g, function () { return "" }).replace(/:(\w+)/g, function (e, t) { throw new Error('Param "' + t + '" is missing in params', n) }) }, Id = { ID: "id", SLUG: "slug" }, Pd = [], Ld = void 0, kd = {
                            isLoaded: function (e) { return Pd.includes(e) }, setLoadCallback: function (e) { Ld = e }, getTranslation: function (e) {
                                   return Td.a.get(Ze(Qe).getURL(Ke.LOCALE, { locale: e.translationKey }), { headers: { Accept: "application/json" } }).then(function (t) { return Pd.push(e.code), Ld && Ld(e.code), t.data }).catch(function () {
                                          // eslint-disable-next-line no-console
                                          console.error("Error loading locale: " + e.translationKey)
                                   })
                            }
                     }, Cd = i(427), Md =/*#__PURE__*/i.n(Cd), xd = function () {
                            var e = Ze(Qe), t = Ze("trackingManager"), i = Ze("experienceModel");
                            // expose objects to the Vue prototype for easy access in your vue templates and components
                            ae.a.use(Rd, { $config: e, $tracker: t, $gateway: Ze("gateway"), $webgl: Ze("webglApplication"), $experience: i, $http: Td.a, $versionRoot: e.getVariable(Ye.VERSIONED_STATIC_ROOT), $staticRoot: e.getVariable(Ye.STATIC_ROOT), $audioManager: Ze("audioManager"), URLNames: Ke, PropertyNames: Xe, VariableNames: Ye, PageNames: rd, Pages: ad, Params: Id, createPath: wd, isMobileVersion: ct })
                     }, Od = function (e) { return new ye.a(function (t) { kd.isLoaded(e.getters.currentLanguage.code) ? t() : kd.setLoadCallback(function (i) { i === e.getters.currentLanguage.code && t() }) }) }, Sd = new ye.a(function (e) { Md.a.load({ custom: { families: ["BRUX"] }, active: e }) }), Dd = function (e) {
                            // Initialise plugins
                            xd(); var t = Ze(Qe);
                            // Add async methods to the Promise.all array
                            return ye.a.all([Sd, Ut.loadImages(!0), t.getVariable(Ye.LOCALE_ENABLED) ? Od(e) : ye.a.resolve()])
                     }, Nd = Dd, Fd = i(428), Vd = i(429), Bd =/*#__PURE__*/i.n(Vd), Ud = { environments: (_d = {}, It()(_d, We.PRODUCTION, { variables: {}, urls: {} }), It()(_d, We.STAGING, { extends: We.PRODUCTION, variables: {}, urls: {} }), It()(_d, We.DEVELOPMENT, { extends: We.STAGING, variables: {}, urls: {} }), It()(_d, We.LOCAL, { extends: We.DEVELOPMENT, variables: It()({}, Ye.MINIMUM_LOAD_DURATION, 1), urls: {} }), _d), variables: (pd = {}, It()(pd, Ye.LOCALE_ENABLED, !1), It()(pd, Ye.LOCALE_ROUTING_ENABLED, !1), It()(pd, Ye.VERSIONED_STATIC_ROOT, "/bagan/version/1588261947821/static/"), It()(pd, Ye.STATIC_ROOT, "/bagan/static/"), It()(pd, Ye.PUBLIC_PATH, "/bagan/"), It()(pd, Ye.MINIMUM_LOAD_DURATION, 7), pd), urls: (vd = {}, It()(vd, Ke.LOCALE, "/bagan/version/1588261947821/static/locale/{locale}.json"), It()(vd, Ke.API, "/bagan/api/"), It()(vd, Ke.HERITAGE, "https://artsandculture.google.com/project/cyark?utm_source=preservation&utm_medium=bagan&utm_campaign=bagan-v1"), It()(vd, Ke.BAGAN, "https://artsandculture.google.com/exhibit/KALSm4FCvgIVJg?utm_source=preservation&utm_medium=bagan&utm_campaign=bagan-v1"), It()(vd, Ke.GOOGLE_AC, "https://artsandculture.google.com/?utm_source=preservation&utm_medium=bagan&utm_campaign=bagan-v1"), It()(vd, Ke.GOOGLE_AC_PROJECT, "https://artsandculture.google.com/project/cyark?utm_source=preservation&utm_medium=bagan&utm_campaign=bagan-v1"), It()(vd, Ke.CYARK, "http://www.cyark.org/"), It()(vd, Ke.DAYDREAM, "https://vr.google.com/daydream/"), It()(vd, Ke.PRIVACY, "https://policies.google.com/?hl=en"), vd), properties: (fd = {}, It()(fd, Xe.DEFAULT_LOCALE, "en-gb"), It()(fd, Xe.AVAILABLE_LOCALES, ["en-gb"]), fd) }, Hd = We.PRODUCTION; switch (document.location.host.split(":").shift()) { case "localhost": case "172.20.100.29": Hd = We.LOCAL; break; default: Hd = We.PRODUCTION }/* harmony default export */
                     var Gd = { config: Ud, environment: Hd }, $d = function (e) {
                            function t() { it()(this, t); var e = mt()(this, (t.__proto__ || ft()(t)).call(this)); return e._loadsRequested = [], e._loadsCompleted = 0, e._progress = 0, e._isLoading = !1, e._callbackPerPreloadable = [], e } return At()(t, e), st()(t, [{
                                   key: "add", value: function (e) {
                                          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, i = this._loadsRequested.push(e) - 1;
                                          // add preloadable while preloader is loading, so directly start
                                          // this download
                                          return this._callbackPerPreloadable.push(t), this.isLoading() && this.startLoader(i), e
                                   }
                            }, { key: "load", value: function (e, t) { this._callback = e, this._progressCallBack = t, this.loadAll() } }, { key: "isLoading", value: function () { return this._isLoading } }, { key: "loadAll", value: function () { if (0 === this._loadsRequested.length) return void this.loadDoneCallback(); this._isLoading = !0; for (var e = 0; e < this._loadsRequested.length; e++)this.startLoader(e) } }, { key: "setCallbackForPreloadable", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; this._callbackPerPreloadable[this.getIndexOfPreloadable(e)] = t } }, { key: "getIndexOfPreloadable", value: function (e) { return this._loadsRequested.indexOf(e) } }, { key: "startLoader", value: function (e) { var t = this; this._loadsRequested[e].load(function () { t._callbackPerPreloadable[e] && t._callbackPerPreloadable[e](), t.loadDoneCallback() }) } }, {
                                   key: "loadDoneCallback", value: function () {
                                          this._loadsCompleted++,
                                          // (c) Windows load progress
                                          this._progress += (1 - this._progress) / (1 + this._loadsRequested.length - this._loadsCompleted), this._progressCallBack && (this._loadsRequested.length ? this._progressCallBack.call(this, this._progress) : this._progressCallBack.call(this, 1)),
                                          // check if all requested loads are loaded
                                          this._loadsCompleted >= this._loadsRequested.length && (this._isLoading = !1, this._callback && (this._callback.call(this), this._callback = null))
                                   }
                            }, { key: "destruct", value: function () { this._loadsRequested = null, this._callback = null, Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this) } }]), t
                     }(ol), zd = $d, Wd = function (e) {
                            function t(e) { var i = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1]; it()(this, t); var n = mt()(this, (t.__proto__ || ft()(t)).call(this)); return n._pixelRatio = 1, n._needsResize = !1, n._canvasParent = e, n._autoResize = i, e || (n._autoResize = !1), n._manualResizeUpdate = !1, n.canvas = n.prepareCanvas(e), window.devicePixelRatio ? n._pixelRatio = window.devicePixelRatio : n._pixelRatio = 1, n._autoResize && n.handleResize(), n } return At()(t, e), st()(t, [{ key: "getCanvas", value: function () { return this.canvas } }, {
                                   key: "prepareCanvas", value: function (e) {
                                          var t = document.createElement("canvas");
                                          // canvas.style.width  = (this._canvasParent.offsetWidth - 1) + "px";
                                          return t.setAttribute("id", "canvas"), t.style.position = "absolute", t.style.left = "0px", t.style.top = "0px", this._canvasParent && (t.style.width = this._canvasParent.offsetWidth + "px", t.style.height = this._canvasParent.offsetHeight + "px"), e && e.appendChild(t), this._autoResize && (this._resizeHandler = this.handleResize.bind(this), window.addEventListener("resize", this._resizeHandler)), t
                                   }
                            }, { key: "setSize", value: function (e, t) { this._autoResize && (window.removeEventListener("resize", this._resizeHandler), this._autoResize = !1), this._goalWidth = e, this._goalHeight = t, this.delayedResize() } }, { key: "setPixelRatio", value: function (e) { this._pixelRatio = e, this.delayedResize() } }, { key: "setAutoResize", value: function (e) { this._autoResize = e, this._autoResize ? (window.addEventListener("resize", this._resizeHandler), this.handleResize()) : window.removeEventListener("resize", this._resizeHandler) } }, { key: "getPixelRatio", value: function () { return this._pixelRatio } }, { key: "getParentHeight", value: function () { return this._canvasParent.offsetHeight } }, { key: "getAspectRatio", value: function () { return this.canvas.width / this.canvas.height } }, { key: "handleResize", value: function () { var e = this, t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; if (this._canvasParent) { var i = this._canvasParent.offsetWidth, n = this._canvasParent.offsetHeight; i && n && (this._goalWidth !== i || this._goalHeight !== n || this._needsResize) && (this._goalWidth = i, this._goalHeight = n, !0 === t ? this.delayedResize() : this._manualResizeUpdate || (clearTimeout(this._resizeTimeOut), this._resizeTimeOut = setTimeout(function () { return e.delayedResize(!0) }, 300))) } } }, { key: "updateResize", value: function () { this._manualResizeUpdate = !0, this.handleResize(), this.delayedResize() } }, {
                                   key: "delayedResize", value: function () {
                                          var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; if (!this.isDestructed) {
                                                 // this._pixelRatio could have changed
                                                 /*if (this._goalWidth == this.canvas.width && this._goalHeight == this.canvas.height && !this._needsResize) {
                                                                  return;
                                                                  }*/
                                                 this._needsResize = !1, e && (this._goalWidth = this._canvasParent.offsetWidth, this._goalHeight = this._canvasParent.offsetHeight), this.canvas.width = this._goalWidth * this._pixelRatio, this.canvas.height = this._goalHeight * this._pixelRatio, this._autoResize ? (this.canvas.style.width = this._canvasParent.offsetWidth + "px", this.canvas.style.height = this._canvasParent.offsetHeight + "px") : (this.canvas.style.width = this._goalWidth + "px", this.canvas.style.height = this._goalHeight + "px");
                                                 // in case no pass uses a rt
                                                 // NOTE(Joey): following is deprecated functionality for dispatching event, but unfortunately
                                                 // best compatible with IE 11 (canvas.dispatchEvent(new Event('resize'); doesn't work in IE).
                                                 var t = document.createEvent("Event"); t.initEvent("resize", !1, !0), this.canvas.dispatchEvent(t)
                                          }
                                   }
                            }, {
                                   key: "destruct", value: function () {
                                          // window.removeEventListener("resize", this._resizeHandler);
                                          this.canvas = null,
                                                 // always call this last
                                                 Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this)
                                   }
                            }]), t
                     }(ol), Kd = Wd, Yd = function () {
                            function e() {
                                   var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2]; it()(this, e),
                                          // frustum planes
                                          this._frustumPlane = [], this._camPos = new al, this._renderer = t, n && (this._debugMaterial = new Ml(this._renderer, i, "frustum"), this._debugMaterial.drawType = hl.LINES, this._debugMesh = new Zl(this._renderer), this._debugMesh.setPositions(new Float32Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])), this._debugMesh.setUV0(new Float32Array([0, 0, -1, -1, -1, 1, 1, 1, 1, -1])), this._debugMesh.setIndices(new Uint16Array([0, 1, 0, 2, 0, 3, 0, 4, 1, 2, 2, 3, 3, 4, 4, 1]))); for (var s = 0; s < 6; ++s)this._frustumPlane.push(new Xd)
                            } return st()(e, [{
                                   key: "updateForCamera", value: function (e) {
                                          this._camera = e, this._camPos.copy(this._camera.getPosition()), this._debugMaterial && (this._debugMaterial.setVector3("_FrustumCorner", e.projection.getFrustumCorner()), this._debugMaterial.setMatrix("_Model", e.view.transform.getWorldMatrix())); var t = this._camera.getViewProjection();
                                          // Right clipping plane.
                                          this._frustumPlane[0].set(t[3] - t[0], t[7] - t[4], t[11] - t[8], t[15] - t[12]),
                                                 // Left clipping plane.
                                                 this._frustumPlane[1].set(t[3] + t[0], t[7] + t[4], t[11] + t[8], t[15] + t[12]),
                                                 // Bottom clipping plane.
                                                 this._frustumPlane[2].set(t[3] + t[1], t[7] + t[5], t[11] + t[9], t[15] + t[13]),
                                                 // Top clipping plane.
                                                 this._frustumPlane[3].set(t[3] - t[1], t[7] - t[5], t[11] - t[9], t[15] - t[13]),
                                                 // Near clipping plane.
                                                 this._frustumPlane[4].set(t[3] + t[2], t[7] + t[6], t[11] + t[10], t[15] + t[14]),
                                                 // Far clipping plane.
                                                 this._frustumPlane[5].set(t[3] - t[2], t[7] - t[6], t[11] - t[10], t[15] - t[14]);
                                          // Normalize, this is not always necessary...
                                          for (var i = 0; i < 6; i++)this._frustumPlane[i].normalize()
                                   }
                            }, { key: "getCamPos", value: function () { return this._camPos } }, { key: "drawDebugFrustum", value: function (e) { this._debugMaterial && (this._debugMaterial.setMatrix("_ViewProjection", e.getViewProjection()), this._renderer.draw(this._debugMesh, this._debugMaterial)) } }, { key: "pointInFrustum", value: function (e) { for (var t = 0; t < 6; t++)if (this._frustumPlane[t].distance(e) < 0) return !1; return !0 } }, { key: "sphereInFrustum", value: function (e, t) { for (var i = 0; i < 6; i++)if (this._frustumPlane[i].distance(e) < t) return !1; return !0 } }, {
                                   key: "boxInFrustum", value: function (t, i) {
                                          // return true;
                                          for (var n = 0; n < 6; n++) { e._tmpVec1.copy(t); var s = this._frustumPlane[n]; if (s.N.x > 0 && (e._tmpVec1.x = i.x), s.N.y > 0 && (e._tmpVec1.y = i.y), s.N.z > 0 && (e._tmpVec1.z = i.z), al.dot(s.N, e._tmpVec1) < -s.d) return !1 } return !0
                                   }
                            }, { key: "unoptimizedBoxInFrustum", value: function (e, t) { for (var i = 0; i < 6; i++) { var n = this._frustumPlane[i], s = 0; if (s += n.distanceToValues(e.x, e.y, e.z) < 0 ? 1 : 0, s += n.distanceToValues(t.x, e.y, e.z) < 0 ? 1 : 0, s += n.distanceToValues(e.x, t.y, e.z) < 0 ? 1 : 0, s += n.distanceToValues(t.x, t.y, e.z) < 0 ? 1 : 0, s += n.distanceToValues(e.x, e.y, t.z) < 0 ? 1 : 0, s += n.distanceToValues(t.x, e.y, t.z) < 0 ? 1 : 0, s += n.distanceToValues(e.x, t.y, t.z) < 0 ? 1 : 0, 8 === (s += n.distanceToValues(t.x, t.y, t.z) < 0 ? 1 : 0)) return !1 } } }]), e
                     }(); Yd._tmpVec1 = new al; var Xd = function () { function e() { it()(this, e), this.N = new al, this.d = 0 } return st()(e, [{ key: "distance", value: function (e) { return al.dot(this.N, e) + this.d } }, { key: "distanceToValues", value: function (e, t, i) { return this.N.x * e + this.N.y * t + this.N.z * i + this.d } }, { key: "set", value: function (e, t, i, n) { this.N.setValues(e, t, i), this.d = n } }, { key: "normalize", value: function () { var e = this.N.length(); this.N.multiplyScalar(1 / e), this.d /= e } }]), e }(), jd = Yd, qd = function () {
                            function e() {
                                   var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1; it()(this, e),
                                          // only access this public member when you need to pass it to a mat2, mat3 of mat4 method (since we haven't wrapped
                                          // Matrices so far)
                                          this.q = nl.quat.create(), nl.quat.set(this.q, t, i, n, s)
                            } return st()(e, [{
                                   key: "clone",/* CLONE, COPY, SET */
                                   value: function () { return new e(this.x, this.y, this.z, this.w) }
                            }, { key: "copy", value: function (e) { return nl.quat.set(this.q, e.x, e.y, e.z, e.w), this } }, { key: "setValues", value: function (e, t, i, n) { return nl.quat.set(this.q, e, t, i, n), this } }, { key: "dot", value: function (e) { return nl.quat.dot(this.q, e.q) } }, { key: "identity", value: function () { return nl.quat.identity(this.q), this } }, { key: "multiply", value: function (e) { return nl.quat.multiply(this.q, this.q, e.q), this } }, { key: "invert", value: function () { return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this } }, { key: "rotateX", value: function (e) { return nl.quat.rotateX(this.q, this.q, e), this } }, { key: "rotateY", value: function (e) { return nl.quat.rotateY(this.q, this.q, e), this } }, { key: "rotateZ", value: function (e) { return nl.quat.rotateZ(this.q, this.q, e), this } }, { key: "setAxisAngleRadians", value: function (e, t) { return nl.quat.setAxisAngle(this.q, e.v, t), this } }, { key: "rotateAxisAngleRadians", value: function (t, i) { return nl.quat.setAxisAngle(e._tempQuat, t.v, i), nl.quat.multiply(this.q, e._tempQuat, this.q), this } }, { key: "x", get: function () { return this.q[0] }, set: function (e) { this.q[0] = e } }, { key: "y", get: function () { return this.q[1] }, set: function (e) { this.q[1] = e } }, { key: "z", get: function () { return this.q[2] }, set: function (e) { this.q[2] = e } }, { key: "w", get: function () { return this.q[3] }, set: function (e) { this.q[3] = e } }], [{ key: "dot", value: function (e, t) { return nl.quat.dot(e.q, t.q) } }, { key: "multiply", value: function (e, t, i) { return nl.quat.multiply(e.q, t.q, i.q), e } }, { key: "invert", value: function (e, t) { return e.x = -t.x, e.y = -t.y, e.z = -t.z, e.w = -t.w, e } }, { key: "lerp", value: function (e, t, i, n) { return nl.quat.lerp(e.q, t.q, i.q, n), e } }, { key: "slerp", value: function (e, t, i, n) { return nl.quat.slerp(e.q, t.q, i.q, n), e } }, { key: "closestSlerp", value: function (t, i, n, s) { return i.dot(n) < 0 ? (e.invert(this.tInvB, n), e.slerp(t, i, this.tInvB, s)) : e.slerp(t, i, n, s), t } }, { key: "fromMat3", value: function (e, t) { return nl.quat.fromMat3(e.q, t), e } }, { key: "lookAt", value: function (t, i, n, s) { e._tempForward.copy(i), e._tempForward.subtract(n), e._tempForward.normalize(), al.cross(e._tempRight, s, e._tempForward), e._tempRight.normalize(), al.cross(e._tempUp, e._tempForward, e._tempRight), e._tempUp.normalize(); var a = nl.mat3.fromValues(e._tempRight.x, e._tempRight.y, e._tempRight.z, e._tempUp.x, e._tempUp.y, e._tempUp.z, e._tempForward.x, e._tempForward.y, e._tempForward.z); return e.fromMat3(t, a), t } }, { key: "CreateFromAxisAngle", value: function (e, t, i) { var n = .5 * i, s = Math.sin(n); e.setValues(t.x * s, t.y * s, t.z * s, Math.cos(n)) } }]), e
                     }(), Zd = qd; qd.IDENTITY = new qd, qd._tempQuat = nl.quat.create(), qd.tInvB = new qd, qd._tempForward = new al, qd._tempRight = new al, qd._tempUp = new al;
                     // CONCATENATED MODULE: ./src/lib/webgl/renderer/core/Transform.ts
                     /**
                      * Created by johan on 10-12-2014.
                      */
                     var Qd = function (e) {
                            function t() { it()(this, t); var e = mt()(this, (t.__proto__ || ft()(t)).call(this)); return e._rotation = new Zd, e._pos = new al, e._scale = new al(1, 1, 1), e._matrix = nl.mat4.create(), e._localMatrix = nl.mat4.create(), e._changeCallback = [], e._children = [], e._tempMat4 = nl.mat4.create(), e._tempMat3 = nl.mat3.create(), e._tempV3a = new al, e._dirty = !0, e._signalDirtyDown = !1, e } return At()(t, e), st()(t, [{ key: "identity", value: function () { this._pos.setValues(0, 0, 0), this._rotation.identity(), this._scale.setValues(1, 1, 1) } }, { key: "setParent", value: function (e) { this._parent !== e && (this._parent && this._parent.removeChild(this), this._parent = e, e && this._parent.addChild(this), this.setDirty()) } }, { key: "getParent", value: function () { return this._parent } }, { key: "addChild", value: function (e) { this._children.indexOf(e) < 0 && (this._children.push(e), e.setParent(this)) } }, { key: "removeChild", value: function (e) { var t = this._children.indexOf(e); t > -1 && (this._children.splice(t, 1), e.setParent(null)) } }, { key: "getChildren", value: function () { return this._children } }, { key: "addChangeCallBack", value: function (e) { this._changeCallback.push(e) } }, { key: "setDirty", value: function () { this._dirty || (this._dirty = !0, this.signalDirtyDown()) } }, { key: "setParentDirty", value: function () { this.signalDirtyDown() } }, { key: "signalDirtyDown", value: function () { if (!this._signalDirtyDown) { this._signalDirtyDown = !0; for (var e = this._changeCallback.length - 1; e >= 0; e--)this._changeCallback[e].call(this); for (var t = this._children.length - 1; t >= 0; t--)this._children[t].setParentDirty() } } }, { key: "clone", value: function () { var e = new t; return e.setScale(this._scale), e.setRotation(this._rotation), e.setPosition(this._pos), e } }, { key: "updateMatrix", value: function () { (this._dirty || this._signalDirtyDown) && (this._dirty && nl.mat4.fromRotationTranslationScale(this._localMatrix, this._rotation.q, this._pos.v, this._scale.v), this._parent ? nl.mat4.multiply(this._matrix, this._parent.getWorldMatrix(), this._localMatrix) : this._dirty && nl.mat4.copy(this._matrix, this._localMatrix), this._dirty = !1, this._signalDirtyDown = !1) } }, { key: "lookAt", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : al.UP; this.setPosition(e), this.lookAtFromCurrentPos(t, i) } }, { key: "lookAtFromCurrentPos", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : al.UP; Zd.lookAt(this._rotation, this._pos, e, t), this.setDirty() } }, { key: "setPositionRotationScale", value: function (e, t, i) { this._pos.copy(e), this._rotation.copy(t), this._scale.copy(i), this.setDirty() } }, { key: "getWorldMatrix", value: function () { return this.updateMatrix(), this._matrix } }, { key: "getLocalMatrix", value: function () { return this.updateMatrix(), this._localMatrix } }, { key: "getPosition", value: function () { return this._pos } }, { key: "setPosition", value: function (e) { this._pos.copy(e), this.setDirty() } }, { key: "setPositionValues", value: function (e, t, i) { this._pos.setValues(e, t, i), this.setDirty() } }, { key: "getWorldPosition", value: function () { this.updateMatrix(); var e = this._tempV3a; return e.copy(al.ZERO), e.transform(this._matrix), e } }, { key: "getScale", value: function () { return this._scale } }, { key: "setScale", value: function (e) { this._scale.copy(e), this.setDirty() } }, { key: "setScaleScalar", value: function (e) { this._scale.setValues(e, e, e), this.setDirty() } }, { key: "setScaleValues", value: function (e, t, i) { this._scale.setValues(e, t, i), this.setDirty() } }, { key: "translateX", value: function (e) { this._pos.x += e, this.setDirty() } }, { key: "translateY", value: function (e) { this._pos.y += e, this.setDirty() } }, { key: "translateZ", value: function (e) { this._pos.z += e, this.setDirty() } }, { key: "translate", value: function (e) { this._pos.add(e), this.setDirty() } }, { key: "translateValues", value: function (e, t, i) { this._pos.x += e, this._pos.y += t, this._pos.z += i, this.setDirty() } }, { key: "getRotation", value: function () { return this._rotation } }, { key: "setRotation", value: function (e) { this._rotation.copy(e), this.setDirty() } }, { key: "getRotationMatrix", value: function () { return nl.mat4.fromQuat(this._tempMat4, this._rotation.q), this._tempMat4 } }, { key: "getRotationMatrixMat3", value: function () { return nl.mat3.fromQuat(this._tempMat3, this._rotation.q), this._tempMat3 } }, { key: "getWorldRotationMatrixMat3", value: function () { var e = this.getRotationMatrixMat3(); return this._parent && nl.mat3.multiply(e, this._parent.getWorldRotationMatrixMat3(), e), e } }, { key: "setRotationFromMatrix", value: function (e) { Zd.fromMat3(this._rotation, e), this.setDirty() } }, {
                                   key: "rotateRadiansValues", value: function (e, t, i) {
                                          // note the yxz order for compatibility with older examples
                                          return this._rotation.rotateY(t), this._rotation.rotateX(e), this._rotation.rotateZ(i), this.setDirty(), this._rotation
                                   }
                            }, { key: "rotateRadians", value: function (e) { return this.rotateRadiansValues(e.x, e.y, e.z) } }, { key: "rotateDegreesValues", value: function (e, i, n) { return this.rotateRadiansValues(e * t._degToRad, i * t._degToRad, n * t._degToRad) } }, { key: "rotateDegrees", value: function (e) { return this.rotateDegreesValues(e.x, e.y, e.z) } }, { key: "rotateAxisAngleRadians", value: function (e, t) { return this._rotation.rotateAxisAngleRadians(e, t), this.setDirty(), this._rotation } }, { key: "rotateDegreesY", value: function (e) { this._rotation.rotateY(e * t._degToRad), this.setDirty() } }, { key: "rotateRadiansX", value: function (e) { this._rotation.rotateX(e), this.setDirty() } }, { key: "rotateRadiansY", value: function (e) { this._rotation.rotateY(e), this.setDirty() } }, { key: "rotateRadiansZ", value: function (e) { this._rotation.rotateZ(e), this.setDirty() } }, { key: "setEulerDegreesValues", value: function (e, t, i) { this._rotation.identity(), this.rotateDegreesValues(e, t, i) } }, { key: "setEulerDegrees", value: function (e) { this.setEulerDegreesValues(e.x, e.y, e.z) } }, { key: "setEulerDegreesXY", value: function (e) { this.setEulerDegreesValues(e.x, e.y, 0) } }, { key: "setEulerRadians", value: function (e) { this._rotation.identity(), this.rotateRadiansValues(e.x, e.y, e.z) } }, { key: "setRadiansX", value: function (e) { this._rotation.identity(), this.rotateRadiansX(e) } }, { key: "setRadiansY", value: function (e) { this._rotation.identity(), this.rotateRadiansY(e) } }, { key: "setRadiansZ", value: function (e) { this._rotation.identity(), this.rotateRadiansZ(e) } }, {
                                   key: "getEulerDegrees", value: function () {
                                          nl.mat3.fromQuat(this._tempMat3, this._rotation.q);// get the 3x3 rotation matrix
                                          var e = t.getEulerRadiansYXZ(this._tempMat3); return e.x *= t._radToDeg, e.y *= t._radToDeg, e.z *= t._radToDeg, e
                                   }
                            }, {
                                   key: "getForward",
                                   // forward, up, right
                                   value: function () { var e = this.getRotationMatrixMat3(); return this._tempV3a.setValues(e[6], e[7], e[8]), this._tempV3a }
                            }, { key: "getWorldForward", value: function () { var e = this.getWorldRotationMatrixMat3(); return this._tempV3a.setValues(e[6], e[7], e[8]), this._tempV3a } }, { key: "getRight", value: function () { var e = this.getRotationMatrixMat3(); return this._tempV3a.setValues(e[0], e[1], e[2]), this._tempV3a } }, { key: "getUp", value: function () { var e = this.getRotationMatrixMat3(); return this._tempV3a.setValues(e[3], e[4], e[5]), this._tempV3a } }, { key: "setDirection", value: function (e, i) { var n = this._tempV3a; al.cross(n, i, e), n.normalize(); var s = t._tempV3aS; al.cross(s, e, n), s.normalize(), nl.mat3.set(this._tempMat3, n.x, n.y, n.z, s.x, s.y, s.z, e.x, e.y, e.z), this.setRotationFromMatrix(this._tempMat3) } }, { key: "getDirection", value: function () { var e = this._tempV3a; return e.copy(al.FORWARD), e.transformMat3(this.getWorldRotationMatrixMat3()), e } }, { key: "destruct", value: function () { this._matrix = null, this._rotation = null, this._pos = null, this._scale = null, Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this) } }], [{
                                   key: "getEulerRadiansYXZ", value: function (e) {
                                          var i = void 0, n = void 0, s = void 0;
                                          // Note, x = asin(m[7]) so m[7] = sin(x), so m[7] can never be larger than 1 or smaller than -1
                                          // singularity at x = +90 degrees
                                          // singularity at x = -90 degrees
                                          return e[7] < -1 + this.singularityRange ? (i = Math.PI / 2, n = Math.atan2(e[3], e[0]), s = 0) : e[7] > 1 - this.singularityRange ? (i = -Math.PI / 2, n = -Math.atan2(e[3], e[0]), s = 0) : (i = Math.asin(-e[7]), n = Math.atan2(e[6], e[8]), s = Math.atan2(e[1], e[4])), t._tempV3aS.setValues(i, n, s), t._tempV3aS
                                   }
                            }]), t
                     }(ol); Qd._degToRad = Math.PI / 180, Qd._radToDeg = 180 / Math.PI, Qd._tempV3aS = new al, Qd.singularityRange = 1e-4;// don't decrease further, or singularities will not be found
                     /* harmony default export */
                     var Jd = Qd, e_ = i(64), t_ =/*#__PURE__*/i.n(e_), i_ = (new ie.a, function (e) { function t(e, i, n, s, a) { it()(this, t); var r = mt()(this, (t.__proto__ || ft()(t)).call(this, e, n, s, a)); return r.data = i, r } return At()(t, e), st()(t, [{ key: "clone", value: function () { return new t(this.type, this.data, this.bubbles, this.cancelable) } }]), t }(Vi.a)); i_.START = "VRControllerEvent.START", i_.ENDED = "VRControllerEvent.ENDED"; var n_ = function (e) {
                            function t(e, i) {
                                   it()(this, t);
                                   // vr camera
                                   var n = mt()(this, (t.__proto__ || ft()(t)).call(this));
                                   // non vr camera
                                   // test if VR is supported and initialize
                                   return n._vrActive = !1, n._vrHeadTransform = new Jd, n._renderWidth = 0, n._renderHeight = 0, n._hasPosition = !1, n._tmpVrPosition = new al, n._tmpVrRotation = new Zd, n._defaultProjection = nl.mat4.create(), n._webVRSupported = !1, n._renderer = e, n._canvasManager = i, navigator.getVRDisplays ? (cl.log("WebVR 1.1 supported!"), n._vrFrameData = new VRFrameData, navigator.getVRDisplays().then(function (e) { e.length > 0 ? (n._vrDisplay = e[0], n._webVRSupported = !0, cl.log("VR display found: " + e[0].displayName), window.addEventListener("vrdisplaypresentchange", function (e) { n._vrDisplay.isPresenting || n.disableVR() })) : cl.error("No VR displays found") })) : cl.error("WebVR not supported!"), n
                            } return At()(t, e), st()(t, [{ key: "isSupported", value: function () { return this._webVRSupported } }, { key: "init", value: function (e) { } }, {
                                   key: "enableVR", value: function () {
                                          var e = this; this._vrActive = !0, this._vrDisplay.requestPresent([{ source: this._canvasManager.canvas }]).then(function () {
                                                 e._canvasManager.setAutoResize(!1),
                                                 // the canvas resize doesn't work properly on mobile devices
                                                 e._eyeLeft = e._vrDisplay.getEyeParameters("left"), e._eyeRight = e._vrDisplay.getEyeParameters("right"), lt.a.mobile || (e._renderWidth = 2 * Math.max(e._eyeLeft.renderWidth, e._eyeRight.renderWidth), e._renderHeight = Math.max(e._eyeLeft.renderHeight, e._eyeRight.renderHeight), e._canvasManager.setSize(e._renderWidth, e._renderHeight)), window.cancelAnimationFrame(e._normalAnimationFrameRequest), e._vrDisplay.requestAnimationFrame(e._updateFunc)
                                          }, function (e) { var t = "requestPresent failed."; e && e.message && (t += "\n" + e.message), cl.error(t) }), this.dispatchEvent(new i_(i_.START))
                                   }
                            }, { key: "disableVR", value: function () { this._vrActive = !1, this._vrDisplay.isPresenting && this._vrDisplay.exitPresent(), this._canvasManager.setAutoResize(!0), this._renderer.setViewPort(0, 0, this._canvasManager.canvas.width, this._canvasManager.canvas.height), this._vrDisplay.cancelAnimationFrame(this._vrAnimationFrameRequest), window.requestAnimationFrame(this._updateFunc), this.dispatchEvent(new i_(i_.ENDED)) } }, { key: "requestAnimationFrame", value: function (e) { this._updateFunc = e, this._vrActive ? this._vrAnimationFrameRequest = this._vrDisplay.requestAnimationFrame(this._updateFunc) : this._normalAnimationFrameRequest = window.requestAnimationFrame(this._updateFunc) } }, { key: "submitFrame", value: function () { this._vrDisplay.isPresenting && this._vrDisplay.submitFrame() } }, {
                                   key: "update", value: function () {
                                          // NOTE(Joey): removed the this._vrDisplay.isPresenting check. From my experience this frequently
                                          // returns false while it shouldn't. I don't consider it a safe check (yet).
                                          // if (bowser.mobile && !(this._vrDisplay && this._vrDisplay.isPresenting) && this._vrActive) {
                                          lt.a.mobile && !this._vrDisplay && this._vrActive && (this.disableVR(), console.log("DISABLING")),
                                                 // retrieve frame data
                                                 this._vrDisplay && this._vrDisplay.getFrameData(this._vrFrameData) && this._vrFrameData.pose && (
                                                        // head transform
                                                        this._vrFrameData.pose.position ? (
                                                               // mobiles only have 3DOF, do not support position
                                                               this._tmpVrPosition.x = this._vrFrameData.pose.position[0], this._tmpVrPosition.y = this._vrFrameData.pose.position[1], this._tmpVrPosition.z = this._vrFrameData.pose.position[2], this._vrHeadTransform.setPosition(this._tmpVrPosition), this._hasPosition = !0) : this._hasPosition = !1, this._vrFrameData.pose.orientation && (this._tmpVrRotation.x = this._vrFrameData.pose.orientation[0], this._tmpVrRotation.y = this._vrFrameData.pose.orientation[1], this._tmpVrRotation.z = this._vrFrameData.pose.orientation[2], this._tmpVrRotation.w = this._vrFrameData.pose.orientation[3], this._vrHeadTransform.setRotation(this._tmpVrRotation)))
                                   }
                            }, { key: "isVRActive", value: function () { return this._vrActive } }, { key: "getHMDTransform", value: function () { return this._vrHeadTransform } }, { key: "hasPosition", value: function () { return this._hasPosition } }, { key: "getProjection", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; return this._vrActive ? e ? this._vrFrameData.rightProjectionMatrix : this._vrFrameData.leftProjectionMatrix : (nl.mat4.perspective(this._defaultProjection, .4 * Math.PI, this._canvasManager.canvas.width / this._canvasManager.canvas.height, .1, 100), this._defaultProjection) } }, { key: "getProjectionParameters", value: function (e) { var t = 72, i = e ? this._eyeRight : this._eyeLeft; if (i && i.fieldOfView) { var n = i.fieldOfView; t = n.downDegrees + n.upDegrees } return { far: this._vrDisplay.depthFar, near: this._vrDisplay.depthNear, maxFov: t } } }, { key: "getView", value: function () { return arguments.length > 0 && void 0 !== arguments[0] && arguments[0] ? this._vrFrameData.rightViewMatrix : this._vrFrameData.leftViewMatrix } }, { key: "createUI", value: function () { var e = this, t = document.createElement("div"); t.style.position = "absolute", t.style.bottom = "50px", t.style.left = "50px", t.style.width = "100px", t.style.height = "64px", t.style.color = "white", t.style.paddingLeft = "auto", t.style.paddingRight = "auto", t.style.textAlign = "center", t.style.verticalAlign = "middle", t.style.lineHeight = "70px", t.style.fontFamily = "Calibri", t.style.fontSize = "14pt", t.style.fontWeight = "bold", t.style.color = "#DDD", t.innerHTML = "ENTER VR", t.style.cursor = "pointer", t.style.setProperty("user-select", "none"), document.body.appendChild(t), t.addEventListener("mouseenter", function () { t.style.color = "#C7C7C7" }), t.addEventListener("mouseleave", function () { t.style.color = "#DDD" }), t.addEventListener("click", function () { e._vrActive = !e._vrActive, e._vrActive ? (t.innerHTML = "EXIT VR", e.enableVR()) : (t.innerHTML = "ENTER VR", e.disableVR()) }) } }]), t
                     }(t_.a), s_ = n_, a_ = function (e) {
                            function t(e) { var i = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2]; it()(this, t); var s = mt()(this, (t.__proto__ || ft()(t)).call(this, e)); return i ? s.positionsOnly(n) : s.createWithNormalsAndUV(n), s } return At()(t, e), st()(t, [{
                                   key: "positionsOnly", value: function (e) {
                                          var t = new Float32Array([
                                                 //+z
                                                 1, 1, 1, -1, 1, 1, 1, -1, 1, -1, -1, 1,
                                                 //-z
                                                 1, 1, -1, -1, 1, -1, 1, -1, -1, -1, -1, -1]); this.setPositions(t, e); var i = new Uint16Array([0, 3, 2, 0, 1, 3, 5, 6, 7, 5, 4, 6, 1, 7, 3, 1, 5, 7, 4, 2, 6, 4, 0, 2, 0, 5, 1, 0, 4, 5, 6, 3, 7, 6, 2, 3]); this.setIndices(i)
                                   }
                            }, {
                                   key: "createWithNormalsAndUV", value: function (e) {
                                          var t = new Float32Array([
                                                 //-x
                                                 -1, -1, -1, -1, 1, -1, -1, 1, 1, -1, -1, 1,
                                                 //+x
                                                 1, -1, 1, 1, 1, 1, 1, 1, -1, 1, -1, -1,
                                                 //-y
                                                 -1, -1, 1, 1, -1, 1, 1, -1, -1, -1, -1, -1,
                                                 //+y
                                                 -1, 1, -1, 1, 1, -1, 1, 1, 1, -1, 1, 1,
                                                 //-z
                                                 1, -1, -1, 1, 1, -1, -1, 1, -1, -1, -1, -1,
                                                 //z
                                                 -1, -1, 1, -1, 1, 1, 1, 1, 1, 1, -1, 1]); this.setPositions(t, e); for (var i = new Float32Array(48), n = 0, s = 0; s < 6; s++)i[n++] = 0, i[n++] = 0, i[n++] = 1, i[n++] = 0, i[n++] = 1, i[n++] = 1, i[n++] = 0, i[n++] = 1; this.setUV0(i, e); for (var a = new Float32Array(72), r = 0, o = 0; o < 4; o++)a[r++] = -1, a[r++] = 0, a[r++] = 0; for (var l = 0; l < 4; l++)a[r++] = 1, a[r++] = 0, a[r++] = 0; for (var h = 0; h < 4; h++)a[r++] = 0, a[r++] = -1, a[r++] = 0; for (var u = 0; u < 4; u++)a[r++] = 0, a[r++] = 1, a[r++] = 0; for (var c = 0; c < 4; c++)a[r++] = 0, a[r++] = 0, a[r++] = -1; for (var d = 0; d < 4; d++)a[r++] = 0, a[r++] = 0, a[r++] = 1; this.setNormals(a, e); for (var _ = new Uint16Array(36), p = 0, v = 0; v < 6; v++) { var f = 4 * v; _[p++] = f + 0, _[p++] = f + 2, _[p++] = f + 1, _[p++] = f + 2, _[p++] = f + 0, _[p++] = f + 3 } this.setIndices(_)
                                   }
                            }]), t
                     }(Zl), r_ = a_, o_ = function (e) {
                            function t(e, i) {
                                   it()(this, t);
                                   // gamepads
                                   var n = mt()(this, (t.__proto__ || ft()(t)).call(this));
                                   // initialize gamepad(s)
                                   // window.addEventListener('gamepadconnected', (e: any) => {
                                   // 	this.pushGamepad(e.gamepad);
                                   // });
                                   //
                                   // window.addEventListener('gamepaddisconnected', (e: any) => {
                                   // 	this.removeGamepad(e.gamepad);
                                   // });
                                   // render
                                   return n._gamepads = [], n._gamepadTransforms = [], n._gamepadHasPosition = [], n._gamepadHasOrientation = [], n._gamepadPressed = [], n._tmpVrPosition = new al, n._tmpVrRotation = new Zd, n._renderer = e, n._gamepadMesh = new r_(n._renderer), n._gamepadMaterial = new Ml(n._renderer, i, "gamepad"), n._gamepadMaterial.setAdditiveBlending(), n._gamepadMaterial.setCullingDisabled(), n
                            } return At()(t, e), st()(t, [{ key: "findGamePads", value: function () { if (navigator.getGamepads) { var e = navigator.getGamepads(); if (e.length > 0) for (var t = 0; t < e.length; ++t)e[t] && (this._gamepads[t] = e[t]) } } }, { key: "hasPosition", value: function (e) { return this._gamepadHasPosition[e] } }, { key: "hasOrientation", value: function (e) { return this._gamepadHasOrientation[e] } }, { key: "getGameTransform", value: function (e) { return this._gamepadTransforms[e] } }, { key: "getClick", value: function () { for (var e = 0; e < this._gamepads.length; e++) { for (var t = this._gamepads[e].buttons, i = !1, n = 0; n < t.length; n++)t[n].pressed && (i = !0); if (i && !this._gamepadPressed[e]) return this._gamepadPressed[e] = !0, !0; i || (this._gamepadPressed[e] = !1) } return !1 } }, { key: "pushGamepad", value: function (e) { console.log("Connecting gamepad: " + e.index), this._gamepads.push(e); var t = new Jd; this._gamepadTransforms.push(t) } }, { key: "removeGamepad", value: function (e) { console.log("Disconnecting gamepad: " + e.index); for (var t = 0; t < this._gamepads.length; ++t)if (this._gamepads[t].index === e.index) { this._gamepads.splice(t, 1), this._gamepadTransforms.splice(t, 1); break } } }, { key: "getGamepad", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0; return e < this._gamepads.length ? this._gamepads[e] : void console.warn("Gamepads.getGamepad: index out of range") } }, { key: "getGamepads", value: function () { return this._gamepads } }, { key: "getGameTransforms", value: function () { return this._gamepadTransforms } }, { key: "setGamepadDrawFunc", value: function (e) { this._customGamepadDrawFunc = e } }, {
                                   key: "update", value: function () {
                                          this.findGamePads();
                                          // controller transform(s)
                                          for (var e = 0; e < this._gamepads.length; ++e) { this._gamepadTransforms[e] || (this._gamepadTransforms[e] = new Jd); var t = this._gamepads[e]; t.pose && (t.pose.position ? (this._tmpVrPosition.x = t.pose.position[0], this._tmpVrPosition.y = t.pose.position[1], this._tmpVrPosition.z = t.pose.position[2], this._gamepadTransforms[e].setPosition(this._tmpVrPosition), this._gamepadHasPosition[e] = !0) : this._gamepadHasPosition[e] = !1, t.pose.orientation ? (this._tmpVrRotation.x = t.pose.orientation[0], this._tmpVrRotation.y = t.pose.orientation[1], this._tmpVrRotation.z = t.pose.orientation[2], this._tmpVrRotation.w = t.pose.orientation[3], this._gamepadTransforms[e].setRotation(this._tmpVrRotation), this._gamepadHasOrientation[e] = !0) : this._gamepadHasOrientation[e] = !1) }
                                   }
                            }, { key: "draw", value: function (e, t) { for (var i = 0; i < this._gamepads.length; ++i) { this._gamepads[i]; if (this._gamepadHasPosition[i]) if (this._customGamepadDrawFunc) this._customGamepadDrawFunc(e, t, this._gamepadTransforms[i]); else { this._gamepadMaterial.setMatrix("_Projection", e), this._gamepadMaterial.setMatrix("_View", t); var n = this._gamepadTransforms[i].getWorldMatrix(), s = nl.mat4.create(); nl.mat4.scale(s, n, [.05, .05, .2]), this._gamepadMaterial.setMatrix("_Model", s), this._renderer.draw(this._gamepadMesh, this._gamepadMaterial) } } } }]), t
                     }(ol), l_ = o_, h_ = i(212), u_ =/*#__PURE__*/i.n(h_), c_ = function (e) {
                            function t() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0; it()(this, t); var i = mt()(this, (t.__proto__ || ft()(t)).call(this)); return i._finished = !1, i._easeInOut = !1, i._isUpdating = !1, i._update = function () { return i.update() }, i.value = e, i } return At()(t, e), st()(t, [{
                                   key: "to", value: function (e, t) {
                                          var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null, s = arguments.length > 4 && void 0 !== arguments[4] && arguments[4]; this.goal = e, this.progress = 0, this.startValue = this.value, this._duration = 1e3 * t, this._t0 = +new Date, this._finished = !1, this._completeCallback = n, this._animateCallback = i, this._easeInOut = s,
                                                 // console.log(this._completeCallback);
                                                 this._isUpdating || this.update()
                                   }
                            }, { key: "fromTo", value: function (e, t, i) { var n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : null, a = arguments.length > 5 && void 0 !== arguments[5] && arguments[5]; this.value = e, this.to(t, i, n, s, a) } }, { key: "stop", value: function () { this._finished = !0, this._completeCallback = null, this._animateCallback = null } }, { key: "update", value: function () { if (this._isUpdating = !1, !this.isDestructed && !this._finished) if (this.progress = (+new Date - this._t0) / this._duration, this.progress > 1 && (this.progress = 1), this.easedProgress = this.progress, this._easeInOut && (this.easedProgress = el.smoothStep01(this.easedProgress)), this.value = el.lerp(this.startValue, this.goal, this.easedProgress), this._animateCallback && this._animateCallback.call(this, this.value), this.progress >= 1) { if (this._finished = !0, this._completeCallback) { var e = this._completeCallback; this._completeCallback = null, e.call(this) } } else this._isUpdating = !0, window.requestAnimationFrame(this._update) } }]), t
                     }(ol), d_ = c_, __ = function (e) {
                            function t(e) {
                                   var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null; it()(this, t); var s = mt()(this, (t.__proto__ || ft()(t)).call(this));// the unique key used in the params object. Set when adding this param to the gui
                                   return s.dataName = null, s.exposed = !1, s.name = e, s._callback = n, s._materials = i || [], s
                            } return At()(t, e), st()(t, [{ key: "expose", value: function () { this.exposed = !0 } }, { key: "getValue", value: function () { return this._value } }, { key: "setUpdateUICallback", value: function (e) { this._updateUIcallback = e } }, { key: "setChangeCallback", value: function (e) { this._callback = e } }, { key: "setValue", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; e !== this._value && (this._value = e, this.setShaderUniform(e), t && this._callback && this._callback(this._value), !t && this._updateUIcallback && this._updateUIcallback.call(this, this.getValue())) } }, {
                                   key: "setFromUI", value: function (e) {
                                          // console.log ("setFromUI:",  this.name, value);
                                          this.setValue(e, !0)
                                   }
                            }, { key: "setShaderUniform", value: function (e) { console.log("warning: override this") } }]), t
                     }(ol), p_ = __, v_ = function (e) {
                            function t(e, i) {
                                   var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1, a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : [], r = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : null, o = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : null; it()(this, t); var l = mt()(this, (t.__proto__ || ft()(t)).call(this, null !== r ? r : e, a, o)); l._floatUniforms = []; for (var h = 0; h < l._materials.length; h++)l._floatUniforms[h] = l._materials[h].addFloatUniform(e, i);
                                   // this.power = power;
                                   return l.min = n, l.max = s, l.max < i && (l.max = 2 * i), l.min > i && (l.min = i - 1), l.setValue(i), l
                            } return At()(t, e), st()(t, [{ key: "setValue", value: function (e) { var i = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; e = el.clamp(e, this.min, this.max), Et()(t.prototype.__proto__ || ft()(t.prototype), "setValue", this).call(this, e, i) } }, { key: "setShaderUniform", value: function (e) { for (var t = 0; t < this._floatUniforms.length; t++)this._floatUniforms[t].set(e) } }, { key: "to", value: function (e, t) { var i = this, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null; this._tween || (this._tween = new d_), n ? this._tween.fromTo(this.getValue(), e, t, function (e) { return i.setValue(e, !0) }, function () { return n() }) : this._tween.fromTo(this.getValue(), e, t, function (e) { return i.setValue(e, !0) }) } }, { key: "destruct", value: function () { if (this._floatUniforms) { for (var e = 0; e < this._floatUniforms.length; e++)this._floatUniforms[e].destruct(), this._floatUniforms[e] = null; this._floatUniforms = [] } this._tween && (this._tween.destruct(), this._tween = null), Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this) } }]), t
                     }(p_), f_ = v_, g_ = function (e) { function t(e, i) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1, a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : null, r = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : null, o = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : null; it()(this, t); var l = mt()(this, (t.__proto__ || ft()(t)).call(this, null !== r ? r : e, a, o)); l._floatUniforms = []; for (var h = 0; h < l._materials.length; h++)l._floatUniforms[h] = l._materials[h].addFloatUniform(e, i); return l.min = n, l.max = s, l.max < i && (l.max = 2 * i), l.min > i && (l.min = i - 1), l.setValue(i), l } return At()(t, e), st()(t, [{ key: "setShaderUniform", value: function (e) { for (var t = 0; t < this._floatUniforms.length; t++)this._floatUniforms[t].set(e) } }]), t }(p_), m_ = g_, y_ = function (e) { function t(e, i) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null, a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : null; it()(this, t); var r = mt()(this, (t.__proto__ || ft()(t)).call(this, null !== s ? s : e, n, a)); return r.setValue(i), r } return At()(t, e), st()(t, [{ key: "setShaderUniform", value: function (e) { for (var t = 0; t < this._materials.length; t++)this._materials[t].setFloat(this.name, !0 === e ? 1 : 0) } }]), t }(p_), E_ = y_, T_ = function (e) { function t(e) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; return it()(this, t), mt()(this, (t.__proto__ || ft()(t)).call(this, e, null, i)) } return At()(t, e), st()(t, [{ key: "getValue", value: function () { return this._callback } }]), t }(p_), A_ = T_, b_ = function (e) { function t(e, i) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : [], s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null, a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : null; it()(this, t); var r = mt()(this, (t.__proto__ || ft()(t)).call(this, null !== s ? s : e, n, a)); r._uniforms = [], r._color = new al; for (var o = 0; o < r._materials.length; o++)r._uniforms[o] = r._materials[o].addVector3Uniform(e, r._color); return i instanceof al ? r.setValue([255 * i.x, 255 * i.y, 255 * i.z]) : r.setValue(i), r } return At()(t, e), st()(t, [{ key: "convertColorToArray", value: function (e) { var t = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e); return t ? [parseInt(t[1], 16), parseInt(t[2], 16), parseInt(t[3], 16)] : e } }, { key: "getValueVector3", value: function () { return this._color } }, { key: "setValue", value: function (e) { var i = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; e instanceof al ? this._color.copy(e) : (e = this.convertColorToArray(e), this._color.setValues(e[0] / 255, e[1] / 255, e[2] / 255)), Et()(t.prototype.__proto__ || ft()(t.prototype), "setValue", this).call(this, e, i) } }, { key: "setShaderUniform", value: function (e) { for (var t = 0; t < this._uniforms.length; t++)this._uniforms[t].set(this._color) } }]), t }(p_), R_ = b_, w_ = i(435), I_ =/*#__PURE__*/i.n(w_), P_ = function (e) {
                            function t() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, i = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; it()(this, t); var s = mt()(this, (t.__proto__ || ft()(t)).call(this)); return s._params = {}, s.folderIndex = -2, e && e.add(s), s._jsonExportEnabled = i, s._params = n, s } return At()(t, e), st()(t, [{
                                   key: "load", value: function (e) {/*        $.getJSON( "inc/webglAppPresets/presets.json", ( data )=> {
                 this._presets = data;
                 callback.call(this);
                 });*/
                                          e.call(this)
                                   }
                            }, { key: "init", value: function (e) { this._rootGroup = e; var t = {}; this._gui = new I_.a.GUI(this._params), this.readGroup(e, t, this._gui), this._jsonExportEnabled && this._gui.remember(t), this.setVisible(!0) } }, { key: "getDatGUI", value: function () { return this._gui } }, { key: "setPreset", value: function (e) { this.folderIndex = -2, this.setPresetRecurse(this._gui.__folders.controls, e.remembered.Default) } }, { key: "setPresetRecurse", value: function (e, t) { this.folderIndex++; var i = t[this.folderIndex]; if (void 0 !== i) { var n = !0, s = !1, a = void 0; try { for (var r, o = u_()(e.__controllers); !(n = (r = o.next()).done); n = !0) { var l = r.value, h = i[l.property]; void 0 !== h && l.setValue(h) } } catch (e) { s = !0, a = e } finally { try { !n && o.return && o.return() } finally { if (s) throw a } } } var u = !0, c = !1, d = void 0; try { for (var _, p = u_()(ee()(e.__folders)); !(u = (_ = p.next()).done); u = !0) { var v = _.value, f = e.__folders[v]; this.setPresetRecurse(f, t) } } catch (e) { c = !0, d = e } finally { try { !u && p.return && p.return() } finally { if (c) throw d } } } }, { key: "readGroup", value: function (e, t, i) { var n = i.addFolder(this.uniqueName(i.__folders, e.name)); e.collapsed || n.open(); var s = !0, a = !1, r = void 0; try { for (var o, l = u_()(e.params); !(s = (o = l.next()).done); s = !0) { var h = o.value; if (h.dataName = this.uniqueName(t, h.name), void 0 == t[h.dataName] ? t[h.dataName] = h.getValue() : console.log("property " + h.dataName + " already exists on param object", t), h instanceof f_) var u = h, c = n.add(t, h.dataName, u.min, u.max); if (h instanceof m_) var d = h, c = n.add(t, h.dataName, d.min, d.max).step(1); if (h instanceof E_) var c = n.add(t, h.dataName); if (h instanceof A_) var c = n.add(t, h.dataName); if (h instanceof R_) var c = n.addColor(t, h.dataName); h instanceof A_ || this.addHandlers(c, t, h) } } catch (e) { a = !0, r = e } finally { try { !s && l.return && l.return() } finally { if (a) throw r } } var _ = !0, p = !1, v = void 0; try { for (var f, g = u_()(e.children); !(_ = (f = g.next()).done); _ = !0) { var m = f.value, y = {}; this._jsonExportEnabled && this._gui.remember(y), this.readGroup(m, y, n) } } catch (e) { p = !0, v = e } finally { try { !_ && g.return && g.return() } finally { if (p) throw v } } } }, { key: "uniqueName", value: function (e, t) { return t in e ? this.uniqueName(e, "U_" + t) : t } }, {
                                   key: "addHandlers", value: function (e, t, i) {
                                          //when setting a param from code, it needs to update the ui
                                          /*        param.addEventListener(ValueChangedEvent.UPDATE_UI, (e:ValueChangedEvent)=> {
                                                           paramObject[param.dataName] = e.data;
                                                           });*/
                                          i.setUpdateUICallback(function (e) { t[i.dataName] = e }), e.listen(), e.onChange(function (e) { t[i.dataName] = e, i.setFromUI(e) }), e.onFinishChange = function (e) { return i.setFromUI(e) }
                                   }
                            }, { key: "setVisible", value: function (e) { this._visible = e, this._gui.domElement.parentElement && (this._gui.domElement.parentElement.style.zIndex = (e ? 999 : 0).toString(), this._gui.domElement.parentElement.style.visibility = (e ? "visible" : "hidden").toString()) } }, { key: "destruct", value: function () { this._gui && (this._gui.domElement.parentElement.removeChild(this._gui.domElement), this._gui = null), Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this) } }]), t
                     }(ol), L_ = P_, k_ = function (e) {
                            function t() { return it()(this, t), mt()(this, (t.__proto__ || ft()(t)).call(this)) } return At()(t, e), st()(t, [{ key: "addGroup", value: function (e) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2], s = new t; return s.init(e, i, n), this.children.push(s), s } }, { key: "removeGroup", value: function (e) { var t = null, i = !0, n = !1, s = void 0; try { for (var a, r = u_()(this.children); !(i = (a = r.next()).done); i = !0) { var o = a.value; if (console.log("checking", o.name, e), o.name === e) { t = o; break } } } catch (e) { n = !0, s = e } finally { try { !i && r.return && r.return() } finally { if (n) throw s } } t && this.children.splice(this.children.indexOf(t), 1) } }, { key: "removeAllGroups", value: function () { this.children = [] } }, { key: "pushGroup", value: function (e) { this.children.push(e) } }, { key: "init", value: function (e) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2]; this.children = [], this.params = [], this._id = t._id++, this.name = e, this.collapsed = n, i ? i.constructor === Array ? this.materials = i : this.materials = [i] : this.materials = [] } }, { key: "addParamFloat", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : null, a = new f_(e, t, i, n, null, null, s); return this.params.push(a), a } }, { key: "addShaderParamFloat", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : null, a = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : null, r = new f_(e, t, i, n, this.materials, s, a); return this.params.push(r), r } }, { key: "addParamInt", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : null, a = new m_(e, t, i, n, null, null, s); return this.params.push(a), a } }, { key: "addShaderParamInt", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : null, a = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : null, r = new m_(e, t, i, n, this.materials, s, a); return this.params.push(r), r } }, { key: "addParamBool", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, n = new E_(e, !!t, null, null, i); return this.params.push(n), n } }, { key: "addShaderParamBool", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null, s = new E_(e, t, this.materials, i, n); return this.params.push(s), s } }, { key: "addParamColor", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, n = new R_(e, t, null, null, i); return this.params.push(n), n } }, { key: "addShaderParamColor", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null, s = new R_(e, t, this.materials, i, n); return this.params.push(s), s } }, { key: "addButton", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, i = new A_(e, t); return this.params.push(i), i } }, { key: "destruct", value: function () { if (this.params) { for (var e = 0; e < this.params.length; e++)this.params[e].destruct(); this.params = null } if (this.children) { for (var i = 0; i < this.children.length; i++)this.children[i].destruct(); this.children = null } this.materials = null, Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this) } }], [{
                                   key: "exposeParam", value: function (e) {
                                          // param.expose(this._exposedParams);
                                          e.expose()
                                   }
                            }]), t
                     }(ol); k_._id = 0;/* harmony default export */
                     var C_ = k_, M_ = function () {
                            function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; it()(this, e), this._time = 0, this._ringBuffer = new Float32Array(e.RING_BUFFER_LENGTH), this._frameTimeIndexringBuffer = new Uint16Array(e.RING_BUFFER_LENGTH), this._frameTimeGraph = new Int16Array(65), this._ringBufferTotal = 0, this._ringBufferIndex = 0; for (var i = 0; i <= 64; i++)this._frameTimeGraph[i] = 0; this._frameTimeGraph[0] = e.RING_BUFFER_LENGTH, this.createOutputDiv(t), this.update() } return st()(e, [{
                                   key: "createOutputDiv", value: function () {
                                          var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; this._outputDiv = document.createElement("div"), this._outputDiv.id = "stats", null !== t ? t.appendChild(this._outputDiv) : document.body.appendChild(this._outputDiv), this._outputDiv.style.cssText = "position:fixed;top:0;left:0;cursor:pointer;z-index:10000",// opacity:0.9
                                                 this._outputCanvas = document.createElement("canvas"), this._outputCanvas.width = e.WIDTH, this._outputCanvas.height = e.HEIGHT, this._outputCanvas.style.cssText = "width:160px;height:96px;", this._outputCanvasContext = this._outputCanvas.getContext("2d"), this._outputCanvasContext.font = "bold 10px Helvetica,Arial,sans-serif", this._outputCanvasContext.textBaseline = "top", this._outputDiv.appendChild(this._outputCanvas)
                                   }
                            }, {
                                   key: "update", value: function () {
                                          var t = this, i = performance.now(), n = .001 * (i - this._time); this._time = i, this._ringBufferIndex = (this._ringBufferIndex + 1) % e.RING_BUFFER_LENGTH; var s = this._ringBuffer[this._ringBufferIndex], a = this._frameTimeIndexringBuffer[this._ringBufferIndex]; this._ringBufferTotal -= s; var r = n, o = 0 | Math.min(64, Math.round(500 * r)); this._ringBuffer[this._ringBufferIndex] = r, this._frameTimeIndexringBuffer[this._ringBufferIndex] = o, this._ringBufferTotal += r, this._frameTimeGraph[a]--, this._frameTimeGraph[o]++,
                                                 // draw stats
                                                 this._outputCanvasContext.fillStyle = "#000", this._outputCanvasContext.fillRect(0, 0, 160, 96),
                                                 // output graph
                                                 this._outputCanvasContext.strokeStyle = "#555", this._outputCanvasContext.beginPath(); for (var l = 0; l < 6; l++) { var h = Math.round((e.HEIGHT - 4) * l / 4 + 2); this._outputCanvasContext.moveTo(2, h), this._outputCanvasContext.lineTo(e.WIDTH - 2, h) } this._outputCanvasContext.stroke(); var u = 0, c = 0, d = !0; this._outputCanvasContext.strokeStyle = "#5ff", this._outputCanvasContext.beginPath(); for (var _ = 0; _ <= 64; _++) { var p = this._frameTimeGraph[_]; if (p) { var v = Math.round((e.HEIGHT - 4) * (32 - _) / 32); d && (d = !1, this._outputCanvasContext.moveTo((e.WIDTH - 4) * c / e.RING_BUFFER_LENGTH + 2, v)), c += p, this._outputCanvasContext.lineTo((e.WIDTH - 4) * c / e.RING_BUFFER_LENGTH + 2, v), u = 2 * _ } if (c === e.RING_BUFFER_LENGTH) break } this._outputCanvasContext.stroke(),
                                                        // output numbers
                                                        this._outputCanvasContext.fillStyle = "#fff", this._outputCanvasContext.fillText(Math.round(1e4 * n) / 10 + " ms current", 2, 2), this._outputCanvasContext.fillText(Math.round(1e4 * this._ringBufferTotal / e.RING_BUFFER_LENGTH) / 10 + " ms average", 2, 16); var f = Math.round(10 * e.RING_BUFFER_LENGTH / this._ringBufferTotal) / 10; f < 55 && (this._outputCanvasContext.fillStyle = "#f00"), this._outputCanvasContext.fillText(f + " fps", e.WIDTH - 50, 16), this._outputCanvasContext.fillStyle = "#fff", this._outputCanvasContext.fillText(u + " ms spike", 2, 30); var g = Math.round(1e4 / u) / 10; g < 29 && (this._outputCanvasContext.fillStyle = "#f00"), this._outputCanvasContext.fillText(g + " fps", e.WIDTH - 50, 30),
                                                               // const memory:any = window.performance['memory'];
                                                               // if( memory ) {
                                                               // 	this._outputCanvasContext.fillText(Math.round(memory.usedJSHeapSize / (1024*1024)) + ' mb heap', 2, 44);
                                                               // }
                                                               window.requestAnimationFrame(function () { return t.update() })
                                   }
                            }, { key: "getHTMLElement", value: function () { return this._outputDiv } }]), e
                     }(); M_.RING_BUFFER_LENGTH = 150, M_.WIDTH = 160, M_.HEIGHT = 96;/* harmony default export */
                     var x_ = M_, O_ = function (e) {
                            function t(e) { var i = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], n = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2]; it()(this, t); var s = mt()(this, (t.__proto__ || ft()(t)).call(this, e)); return s.hasMips = !1, s._createMips = i, s._flipY = n, s } return At()(t, e), st()(t, [{ key: "bind", value: function () { this.renderer.context.activeTexture(hl.TEXTURE0 + this.renderer.maxParams.MAX_TEXTURE_IMAGE_UNITS - 1), this.renderer.context.bindTexture(hl.TEXTURE_CUBE_MAP, this.textureGL) } }, { key: "bindToSlot", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0; this.renderer.renderState.bindCubeTextureToSlot(this.textureGL, e) } }, {
                                   key: "setImages", value: function (e) {
                                          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, i = this.renderer.context; this.bind(), i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL, this._flipY ? 1 : 0); var n = [hl.TEXTURE_CUBE_MAP_POSITIVE_X, hl.TEXTURE_CUBE_MAP_NEGATIVE_X, hl.TEXTURE_CUBE_MAP_POSITIVE_Y, hl.TEXTURE_CUBE_MAP_NEGATIVE_Y, hl.TEXTURE_CUBE_MAP_POSITIVE_Z, hl.TEXTURE_CUBE_MAP_NEGATIVE_Z]; this.setWrapping(), this.setFilteringLinear(), i.pixelStorei(hl.UNPACK_COLORSPACE_CONVERSION_WEBGL, hl.NONE); for (var s = 0; s < n.length; ++s)6 === e.length ? i.texImage2D(n[s], t, hl.RGBA, hl.RGBA, hl.UNSIGNED_BYTE, e[s]) : i.texImage2D(n[s], t, hl.RGBA, hl.RGBA, hl.UNSIGNED_BYTE, e[0]); 0 === t && this._createMips &&
                                                 // NOTE(Joey): only generate mipmaps if no custom mipmap levels
                                                 // are specified
                                                 this.generateMipMaps()
                                   }
                            }, { key: "setWrapping", value: function () { var e = this.renderer.context; this.bind(), e.texParameteri(e.TEXTURE_CUBE_MAP, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE), e.texParameteri(e.TEXTURE_CUBE_MAP, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE) } }, { key: "setFilteringLinear", value: function () { var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0], t = this.renderer.context; this.bind(), e ? this.hasMips ? (t.texParameteri(hl.TEXTURE_CUBE_MAP, hl.TEXTURE_MIN_FILTER, hl.LINEAR_MIPMAP_LINEAR), t.texParameteri(hl.TEXTURE_CUBE_MAP, hl.TEXTURE_MAG_FILTER, hl.LINEAR)) : (t.texParameteri(hl.TEXTURE_CUBE_MAP, hl.TEXTURE_MIN_FILTER, hl.LINEAR), t.texParameteri(hl.TEXTURE_CUBE_MAP, hl.TEXTURE_MAG_FILTER, hl.LINEAR)) : (t.texParameteri(hl.TEXTURE_CUBE_MAP, hl.TEXTURE_MIN_FILTER, hl.NEAREST), t.texParameteri(hl.TEXTURE_CUBE_MAP, hl.TEXTURE_MAG_FILTER, hl.NEAREST)) } }, { key: "initTextures", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 256, t = arguments[1], i = arguments.length > 2 && void 0 !== arguments[2] && arguments[2], n = this.renderer.context; this.bind(), this._createMips = i, n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL, this._flipY ? 1 : 0); var s = [hl.TEXTURE_CUBE_MAP_POSITIVE_X, hl.TEXTURE_CUBE_MAP_NEGATIVE_X, hl.TEXTURE_CUBE_MAP_POSITIVE_Y, hl.TEXTURE_CUBE_MAP_NEGATIVE_Y, hl.TEXTURE_CUBE_MAP_POSITIVE_Z, hl.TEXTURE_CUBE_MAP_NEGATIVE_Z]; if (t = Dl.validateFormatType(this.renderer, t), this.format = Dl.getFormat(this.renderer, t), this.type = Dl.getType(this.renderer, t), i) for (var a = 0; e >= 1;) { for (var r = this.createImageData(e), o = 0; o < s.length; ++o)n.texImage2D(s[o], a, this.format, this.format, this.type, r); a++, e /= 2, this.hasMips = !0 } else for (var l = this.createImageData(e), h = 0; h < s.length; ++h)n.texImage2D(s[h], 0, this.format, this.format, this.type, l); this.setWrapping(), this.setFilteringLinear() } }, { key: "generateMipMaps", value: function () { cl.log("TextureCube: generateMipmap"), this.bind(); var e = this.renderer.context; e.generateMipmap(e.TEXTURE_CUBE_MAP), this.hasMips = !0, this.setFilteringLinear() } }, { key: "createImageData", value: function (e) { var t = document.createElement("canvas"); return t.width = e, t.height = e, t.getContext("2d").createImageData(e, e) } }, {
                                   key: "destruct", value: function () {
                                          // always call this last
                                          Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this)
                                   }
                            }]), t
                     }(Ol), S_ = O_, D_ = function (e) { function t(e, i, n, s) { var a = !(arguments.length > 4 && void 0 !== arguments[4]) || arguments[4]; it()(this, t); var r = mt()(this, (t.__proto__ || ft()(t)).call(this, e, s, a)); return r._urls = n, i.add(r), r } return At()(t, e), st()(t, [{ key: "load", value: function (e) { var t = this; el.loadMultipleImages(this._urls, function (i) { t.setImages(i), e.call(t) }) } }]), t }(S_), N_ = D_, F_ = function () {
                            function e(t, i) { it()(this, e), this._nightTime = 0, this._renderer = t, this._material = new Ml(t, i, "background"), this._material.setCullingDisabled(), this._material.depthWrite = !1, this._material.depthTest = !0, this._materialNight = new Ml(t, i, "background"), this._materialNight.setCullingDisabled(), this._materialNight.depthWrite = !1, this._materialNight.depthTest = !0, this._materialNight.addShaderDefines("ENABLE_NIGHT_TIME"); for (var n = [], s = ["px", "nx", "py", "ny", "pz", "nz"], a = 0; a < s.length; a++)n.push(H() + "data/background/" + s[a] + ".jpg"); this._texture = new N_(this._renderer, i, n, !0, !1), this._cube = new r_(this._renderer) } return st()(e, [{
                                   key: "init", value: function () {
                                          // this._material.setTexture('uTexture', this._texture);
                                          // this._material.setFloat('_CloudOffset', (Time.getInstance().time / 100. * this._cloudSpeed.getValue()) % 1);
                                          // ImageUtils.renderToPng(
                                          // 	this._renderer, () => {
                                          // 		this._renderer.blit(null, null, this._material);
                                          // 	},
                                          // 	4096, 2048);
                                          this._materialNight.setTexture("_CubeMap", this._texture), this._material.setTexture("_CubeMap", this._texture)
                                   }
                            }, { key: "setNightTime", value: function (e) { this._nightTime = e } }, { key: "draw", value: function (e, t) { var i = this._nightTime > 0 ? this._materialNight : this._material; this._materialNight.setFloat("_NightTime", this._nightTime), i.setMatrix("_View", e.getViewMatrix()), i.setMatrix("_Projection", e.getProjectionMatrix()), i.setFloat("_MaxDist", t), this._renderer.draw(this._cube, i) } }]), e
                     }(), V_ = F_, B_ = function () { function e() { it()(this, e), this.position = new al, this.cameraDistance = 1, this.direction = new al(0, 0, 1), e.COUNT++ } return st()(e, [{ key: "set", value: function (t, i, n, s, a, r) { this.id = t, this.name = i, this.cameraDistance = a.fullOrbit ? al.distance(n, s) : e.DEFAULT_CAMERA_DISTANCE, al.subtract(this.direction, n, s), this.direction.normalize(), this.position.copy(n), this.properties = a, this.indoor = r, this.fullOrbit = a.fullOrbit, this.forceLookAt = !this.fullOrbit } }], [{ key: "createTargetHotspot", value: function (t, i) { e._targetHotspot || (e._targetHotspot = new e); var n = e._targetHotspot; return n.id = e.COUNT, n.position.copy(i), n.cameraDistance = e.DEFAULT_CAMERA_DISTANCE, n.direction.copy(t.getForward()), n.direction.multiplyScalar(-1), n.indoor = !0, n.forceLookAt = !1, n } }, { key: "createHotspotFromCurrentPosition", value: function (t) { var i = new e; return i.id = e.COUNT, i.position.copy(t.getPivot().getWorldPosition()), i.cameraDistance = al.distance(t.getPivot().getWorldPosition(), t.view.transform.getWorldPosition()), i.direction.copy(t.getPivot().getForward()), i.direction.multiplyScalar(-1), i.indoor = !0, i.forceLookAt = !1, i } }]), e }(), U_ = B_; B_.COUNT = 0, B_.DEFAULT_CAMERA_DISTANCE = .02, B_.DEFAULT_CAMERA_VERTICAL_LIMIT = 70;
                     // CONCATENATED MODULE: ./src/lib/webgl/utils/input/KeyListener.ts
                     /**
                      * Created by johan on 19-5-2015.
                      * TODO: make static: no reason to have more than 1
                      */
                     var H_ = function () {
                            function e() { var t = this, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window; it()(this, e), e._instance && console.log("!-use getInstance!"), this._keyState = [], this._keyHitCallbacks = [], i.addEventListener("keydown", function (e) { var i = e.keyCode || e.which; if (t._keyState[i] = !0, t._keyHitCallbacks[i]) for (var n = 0; n < t._keyHitCallbacks[i].length; n++)t._keyHitCallbacks[i][n].call(t) }, !0), i.addEventListener("keyup", function (e) { t._keyState[e.keyCode || e.which] = !1 }, !0) } return st()(e, [{
                                   key: "getCharDown", value: function (e) {
                                          // console.log (char.charCodeAt(0));
                                          return this._keyState[e.charCodeAt(0)]
                                   }
                            }, { key: "getKeyCodeDown", value: function (e) { return this._keyState[e] } }, { key: "addKeyHitEvent", value: function (e, t) { this._keyHitCallbacks[e] || (this._keyHitCallbacks[e] = []), this._keyHitCallbacks[e].push(t) } }], [{ key: "getInstance", value: function () { return e._instance || (e._instance = new e), e._instance } }]), e
                     }(), G_ = H_, $_ = function (e) {
                            function t(e) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 60, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : .01, s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 10; it()(this, t); var a = mt()(this, (t.__proto__ || ft()(t)).call(this)); return a.dirty = !0, a._projectionMatrix = nl.mat4.create(), a.frustumHeight = 1, a._fov = i, a._nearPlane = n, a._farPlane = s, a._aspect = 1, a._changeCallback = e, a } return At()(t, e), st()(t, [{ key: "getMatrix", value: function () { return this.updateProjection(), this._projectionMatrix } }, {
                                   key: "updateProjection", value: function () {
                                          this.dirty && (
                                                 // TODO: this is probably wrong: fov degrees are used here
                                                 // tested: this is probably a bug in mat4
                                                 this._projectionMatrix = nl.mat4.perspective(this._projectionMatrix, this._fov * t._degToRad, this._aspect, this._nearPlane, this._farPlane),
                                                 // this._projectionMatrix = mat4.perspective(this._fov * this._degToRad, this._aspect, this._nearPlane,
                                                 // this._farPlane, this._projectionMatrix);
                                                 this.dirty = !1, this.frustumHeight = 2 * Math.tan(this._fov * t._degToRad * .5))
                                   }
                            }, { key: "setAspect", value: function (e) { e !== this._aspect && (this._aspect = e, this.setDirty()) } }, { key: "getAspect", value: function () { return this._aspect } }, { key: "setFarPlane", value: function (e) { e !== this._farPlane && (this._farPlane = e, this.setDirty()) } }, { key: "getFarPlane", value: function () { return this._farPlane } }, { key: "setNearPlane", value: function (e) { e !== this._nearPlane && (this._nearPlane = e, this.setDirty()) } }, { key: "getNearPlane", value: function () { return this._nearPlane } }, { key: "setFOV", value: function (e) { e !== this._fov && (this._fov = e, this.frustumHeight = 2 * Math.tan(this._fov * t._degToRad * .5), this.setDirty()) } }, { key: "getFOV", value: function () { return this._fov } }, { key: "getFrustumCornerRef", value: function (e) { var t = .5 * this.frustumHeight, i = t * this._aspect; e.setValues(i, t, 1) } }, { key: "getFrustumCorner", value: function () { var e = new al; return this.getFrustumCornerRef(e), e } }, { key: "getFrustumHeightAtDistance", value: function (e) { return 2 * e * Math.tan(.5 * this._fov * t._degToRad) } }, { key: "getDistanceAtFrustumHeight", value: function (e) { return .5 * e / Math.tan(.5 * this._fov * t._degToRad) } }, { key: "getFOVAtDistanceAndHeight", value: function (e, i) { return 2 * Math.atan(.5 * i / e) * t._radToDeg } }, { key: "destruct", value: function () { this._projectionMatrix = null, Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this) } }, { key: "setDirty", value: function () { this.dirty = !0, this._changeCallback.call(this) } }]), t
                     }(ol); $_._degToRad = Math.PI / 180, $_._radToDeg = 180 / Math.PI;/* harmony default export */
                     var z_ = $_, W_ = function (e) { function t(e) { it()(this, t); var i = mt()(this, (t.__proto__ || ft()(t)).call(this)); return i.dirty = !0, i._viewMatrix = nl.mat4.create(), i.transform = new Jd, i.transform.addChangeCallBack(function () { return i.setDirty() }), i._changeCallback = e, i } return At()(t, e), st()(t, [{ key: "getPosition", value: function () { return this.transform.getWorldPosition() } }, { key: "setDirty", value: function () { this.dirty = !0, this._changeCallback.call(this) } }, { key: "getMatrix", value: function () { return this.updateMatrix(), this._viewMatrix } }, { key: "updateMatrix", value: function () { this.dirty && (nl.mat4.invert(this._viewMatrix, this.transform.getWorldMatrix()), this.dirty = !1) } }, { key: "destruct", value: function () { this._viewMatrix = null, this.transform && (this.transform.destruct(), this.transform = null), Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this) } }]), t }(ol), K_ = W_, Y_ = function (e) {
                            function t() {
                                   var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 60, i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : .01, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 10; it()(this, t); var s = mt()(this, (t.__proto__ || ft()(t)).call(this));
                                   // returns normalized screen pos [0->1]
                                   // accepts normalized screen pos [0->1]
                                   return s.dirty = !0, s._viewProjection = nl.mat4.create(), s.tScreenPos = new Bl, s.tViewProjInv = nl.mat4.create(), s.projection = new z_(function () { return s.setDirty() }, e, i, n), s.view = new K_(function () { return s.setDirty() }), s
                            } return At()(t, e), st()(t, [{ key: "setDirty", value: function () { this.dirty = !0 } }, { key: "getPosition", value: function () { return this.view.getPosition() } }, { key: "lookAt", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : al.UP; this.view.transform.lookAt(e, t, i) } }, { key: "setPosition", value: function (e) { this.view.transform.setPosition(e) } }, { key: "getViewProjection", value: function () { return this.updateViewProjection(), this._viewProjection } }, { key: "getProjectionMatrix", value: function () { return this.projection.getMatrix() } }, { key: "getViewMatrix", value: function () { return this.view.getMatrix() } }, { key: "getProjection", value: function () { return this.projection } }, { key: "updateViewProjection", value: function () { this.dirty && (nl.mat4.multiply(this._viewProjection, this.projection.getMatrix(), this.view.getMatrix()), this.dirty = !1) } }, { key: "getScreenPos", value: function (e, t) { this.tScreenPos.x = t.x, this.tScreenPos.y = t.y, this.tScreenPos.z = t.z, this.tScreenPos.w = 1, this.tScreenPos.transform(this.getViewProjection()), this.tScreenPos.x /= this.tScreenPos.w, this.tScreenPos.y /= this.tScreenPos.w, this.tScreenPos.x = .5 * this.tScreenPos.x + .5, this.tScreenPos.y = -.5 * this.tScreenPos.y + .5, e.x = this.tScreenPos.x, e.y = this.tScreenPos.y, e.z = this.tScreenPos.z } }, {
                                   key: "getWorldPos", value: function (e, t) {
                                          nl.mat4.invert(this.tViewProjInv, this.getViewProjection());
                                          // from 0 - 1 to opengl coords
                                          var i = 2 * t.x - 1, n = -2 * t.y + 1; e.x = i, e.y = n, e.z = 0, e.transform(this.tViewProjInv)
                                   }
                            }, { key: "destruct", value: function () { this.projection && (this.projection.destruct(), this.projection = null), this.view && (this.view.destruct(), this.view = null), this._viewProjection = null, Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this) } }]), t
                     }(ol), X_ = Y_, j_ = function (e) { function t(e) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 80, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : .01, s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 100; it()(this, t); var a = mt()(this, (t.__proto__ || ft()(t)).call(this, i, n, s)); return a._mouseDown = !1, a._pivot = new Jd, a._eulerDegreesSpeed = new _l, a._eulerDegrees = new al, a._rotating = !1, a._rotatingLerp = 0, a._rotatingLerpPrev = 0, a._tempVec = new al, a._rotation = new Zd, a._tempRotation = new Zd, a._renderer = e, a._mouseListener = e.getMouseListener(), window.isMobile && a._mouseListener.setPreventDefault(!1), a } return At()(t, e), st()(t, [{ key: "mouseDragLook", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : U_.DEFAULT_CAMERA_VERTICAL_LIMIT, i = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], n = this._mouseDown; this._mouseDown = this._mouseListener.getMouseDown(); var s = this.projection.getFOV(), a = .5 / Math.tan(s * (1.570796326795 / 180)), r = 114.5915590261571 * Math.atan2(.5 * this._renderer.getAspect(), a), o = this.getMouseSpeed(); this._mouseDown && n ? (o.length() > t.MOUSE_MOVEMENT_CANCEL_TRIGGER && this._mouseListener.cancelClick(), this._eulerDegreesSpeed.setValues(o.y * s, o.x * r), this._rotating = this._eulerDegreesSpeed.length() > 0, this._rotatingLerp = this._rotating ? .5 : 0, this._rotatingLerpPrev = this._rotatingLerp, this.rotateBySpeed(e, i), this._eulerDegreesSpeed.setValues(Math.min(t.MAX_ROTATE_SPEED, Math.abs(this._eulerDegreesSpeed.x)) * Jl()(this._eulerDegreesSpeed.x), Math.min(t.MAX_ROTATE_SPEED, Math.abs(this._eulerDegreesSpeed.y)) * Jl()(this._eulerDegreesSpeed.y))) : (this._rotatingLerp = el.clamp01(this._rotatingLerp - il.getInstance().deltaTime), this._rotating = this._rotatingLerp > 0, this._rotating && (this._eulerDegreesSpeed.multiplyScalar(1 - (this._rotatingLerpPrev - this._rotatingLerp) / this._rotatingLerpPrev), this.rotateBySpeed(e, i)), this._rotatingLerpPrev = this._rotatingLerp) } }, { key: "rotateBySpeed", value: function (e, t) { t ? (this._eulerDegrees.x += this._eulerDegreesSpeed.x, this._eulerDegrees.y += this._eulerDegreesSpeed.y) : (this._eulerDegrees.x -= this._eulerDegreesSpeed.x, this._eulerDegrees.y -= this._eulerDegreesSpeed.y), Jl()(this._eulerDegrees.x) === Jl()(this._eulerDegreesSpeed.x) && (this._eulerDegreesSpeed.x *= el.clamp01(el.smoothStep(e, .6 * e, Math.abs(this._eulerDegrees.x)))), Math.abs(this._eulerDegrees.x) >= e && (this._eulerDegrees.x = Jl()(this._eulerDegrees.x) * e, Jl()(this._eulerDegreesSpeed.x) === Jl()(this._eulerDegrees.x) && (this._eulerDegreesSpeed.x = 0)), this.getPivot().setEulerDegrees(this._eulerDegrees) } }, { key: "getMouseSpeed", value: function () { return this._mouseListener.getMouseDown() ? this._mouseListener.getNormalizedVelocity() : _l.ZERO } }, { key: "lerpLookAt", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : al.UP, n = arguments[3]; if (n >= 1) { this.getPivot().lookAt(e, t, i), this._rotation.copy(this.getPivot().getRotation()); var s = this.getPivot().getEulerDegrees(); this._eulerDegrees.x = s.x, this._eulerDegrees.y = s.y } else this.getPivot().setEulerDegrees(this._eulerDegrees), this._tempVec.copy(this.getPivot().getForward()), this._tempVec.multiplyScalar(-1), this._tempVec.add(e), this.getPivot().lookAt(e, t, i), this._tempRotation.copy(this.getPivot().getRotation()), Zd.lookAt(this._rotation, e, this._tempVec, al.UP), Zd.closestSlerp(this._rotation, this._rotation, this._tempRotation, n), this.setRotation(this._rotation) } }, { key: "reset", value: function (e, t) { this._eulerDegreesSpeed.setValues(0, 0), this.getPivot().setPosition(e), this.setRotation(t) } }, { key: "setRotation", value: function (e) { this.getPivot().setRotation(e); var t = this.getPivot().getEulerDegrees(); this._eulerDegrees.x = t.x, this._eulerDegrees.y = t.y } }, { key: "getHoverWeight", value: function () { return 1 } }, { key: "getPivot", value: function () { return this._pivot } }]), t }(X_); j_.MAX_ROTATE_SPEED = 10, j_.MOUSE_MOVEMENT_CANCEL_TRIGGER = .0025;/* harmony default export */
                     var q_ = j_, Z_ = function (e) {
                            function t(e) { it()(this, t); var i = mt()(this, (t.__proto__ || ft()(t)).call(this, e)); return i._autoMoveForwardIfProgressIsLowerThen = .1, i._autoMoveForwardIfProgressIsGreaterThen = .9, i._pathProgress = 0, i._normalizedPathSpeed = 0, i._pathSpeedMax = 20, i._pathControlAccelerate = 2, i._pathPaused = !0, i._tempVec1 = new al, i._tempVec2 = new al, i._tempVec3 = new al, i._orientateForwardForceMax = 2, i._slowMouseDown = 0, i._lookAtForce = 0, i._endLerp = 0, i._keyListener = G_.getInstance(), G_.getInstance().addKeyHitEvent(js.SPACE, function () { return i._pathPaused = !i._pathPaused }), i._mouseListener.addWheelEvent(function (e) { return i.handleScroll(e) }), i } return At()(t, e), st()(t, [{ key: "getLookAtForce", value: function () { return this._lookAtForce } }, { key: "getCameraDistanceToPivot", value: function () { return U_.DEFAULT_CAMERA_DISTANCE } }, { key: "handleScroll", value: function (e) { this.adjustPathSpeed(20 * e) } }, { key: "init", value: function () { } }, { key: "adjustPathSpeed", value: function (e) { this._normalizedPathSpeed += il.getInstance().deltaTime * this._pathControlAccelerate * e, this._pathPaused = !0 } }, { key: "setPath", value: function (e) { this._path = e, this._pathProgress = 0, this.resetRotation() } }, { key: "resetRotation", value: function () { this.placeOnPath(this._path, 0, [], 0), this._lookAtForce = 1 } }, {
                                   key: "update", value: function (e) {
                                          if (null != this._path) {
                                                 this.mouseDragLook(), this._pathPaused || (this._normalizedPathSpeed += il.getInstance().deltaTime * this._pathControlAccelerate), this._endLerp = 1 - (1 - this._pathProgress) / (1 - this._autoMoveForwardIfProgressIsGreaterThen), this._pathProgress > this._autoMoveForwardIfProgressIsGreaterThen ? this._normalizedPathSpeed = Math.min(Math.max(this._normalizedPathSpeed, .4), 1 - this._endLerp + .05) : (this._endLerp = 0, this._path.getAutoMove() ? this.adjustPathSpeed(1) : this._pathProgress < this._autoMoveForwardIfProgressIsLowerThen || this._keyListener.getKeyCodeDown(js.UP_ARROW) || this._keyListener.getKeyCodeDown(js.KEY_W) ? this.adjustPathSpeed(1) : this._keyListener.getKeyCodeDown(js.DOWN_ARROW) || this._keyListener.getKeyCodeDown(js.KEY_S) ? this.adjustPathSpeed(-1) : this.adjustPathSpeed(Jl()(this._normalizedPathSpeed)),
                                                        // slow down a bit using non Newtonian friction
                                                        Math.abs(this._normalizedPathSpeed) > .75 && (this._normalizedPathSpeed -= Jl()(this._normalizedPathSpeed) * Math.min(Math.abs(this._normalizedPathSpeed), il.getInstance().deltaTime * this._pathControlAccelerate * .5))), this._normalizedPathSpeed = el.clamp(this._normalizedPathSpeed, -1, 1); var t = this._normalizedPathSpeed * this._pathSpeedMax / this._path.getLength(); this._pathProgress += t * il.getInstance().deltaTime, this._pathProgress = el.clamp01(this._pathProgress), this.placeOnPath(this._path, this._pathProgress, e, this._endLerp)
                                          }
                                   }
                            }, {
                                   key: "placeOnPath", value: function (e, t, i, n) {
                                          var s = el.clamp(t, 0, .999); if (e.getPositionAtPath(s, this._tempVec1), e.getPositionAtPath(Math.min(t + .1, 1), this._tempVec2), this._tempVec2.subtract(this._tempVec1), this._tempVec2.normalize(), t > .25) for (var a = 0; a < i.length; a++) { var r = al.distance(i[a].center, this._tempVec1); r < i[a].radius && (this._tempVec3.copy(i[a].center), this._tempVec3.subtract(this._tempVec1), this._tempVec3.normalize(), this._tempVec3.multiplyScalar(.1), al.lerp(this._tempVec2, this._tempVec3, this._tempVec2, el.smoothStep(.5 * i[a].radius, i[a].radius, r))) } var o = il.getInstance().deltaTime, l = Math.abs(this._normalizedPathSpeed) * o; this._slowMouseDown += .75 * (this._mouseListener.getMouseDown() ? o : -o), this._slowMouseDown = el.clamp01(this._slowMouseDown), this._mouseListener.getMouseDown() && (l = 0, this._slowMouseDown = 1),
                                                 // align to path faster when the user is not dragging
                                                 l *= el.clamp01(1 - 2 * this._slowMouseDown) * this._orientateForwardForceMax, l = Math.max(l, Math.pow(this._pathProgress, 64)), n > 0 && (al.lerp(this._tempVec1, this._tempVec1, this._path.getEndPosition(), el.smoothStep01(n * n)), this._tempVec3.copy(this._path.getEndLookAt()), this._tempVec3.subtract(this._tempVec1), this._tempVec3.normalize(), al.lerp(this._tempVec2, this._tempVec2, this._tempVec3, el.smoothStep01(n))), this._tempVec2.add(this._tempVec1), this.lerpLookAt(this._tempVec1, this._tempVec2, al.UP, l)
                                   }
                            }, { key: "getHoverWeight", value: function () { return Math.max(0, 1 - 2 * this._pathProgress) } }, { key: "stopMovement", value: function () { this._normalizedPathSpeed = 0 } }, { key: "getPathProgress", value: function () { return this._pathProgress } }]), t
                     }(q_), Q_ = Z_, J_ = function (e) { function t(e) { it()(this, t); var i = mt()(this, (t.__proto__ || ft()(t)).call(this, e)); return i._interpolationProgress = 1, i._interpolationDuration = 1, i._position = new al, i._targetPosition = new al, i._startPosition = new al, i._endCameraPosition = new al, i._startCameraOrientation = new Zd, i._endCameraOrientation = new Zd, i._orientation = new Zd, i._tempTransform = new Jd, i._cameraDistance = U_.DEFAULT_CAMERA_DISTANCE, i._inOrbitTransform = !1, i._progress = 0, i._tempVec1 = new al, i._targetFov = t.DEFAULT_FOV, i._fov = t.DEFAULT_FOV, e.getMouseListener().addWheelEvent(function (e) { return i.handleScroll(e) }), i } return At()(t, e), st()(t, [{ key: "handleScroll", value: function (e) { this._targetFov = this._targetFov - 3 * e, this._targetFov = el.clamp(this._targetFov, t.MIN_FOV, t.MAX_FOV) } }, { key: "reset", value: function (e, i) { Et()(t.prototype.__proto__ || ft()(t.prototype), "reset", this).call(this, e, i), this._targetFov = t.DEFAULT_FOV, this._fov = t.DEFAULT_FOV, this._position.copy(e), this._targetPosition.copy(this._position), this._interpolationDuration = 1, this._interpolationProgress = 1, this._cameraDistance = U_.DEFAULT_CAMERA_DISTANCE, this._inOrbitTransform = !1 } }, { key: "goToTemplePosition", value: function (e) { this._targetFov = t.DEFAULT_FOV, this._hotspot = e, this._interpolationDuration = al.distance(this._pivot.getPosition(), e.position) / t.CAMERA_SPEED, this._targetPosition.copy(e.position), this._interpolationProgress = 0 } }, { key: "initTransitionFromOrbit", value: function (e, i, n, s) { this._startCameraDistance = n, this._startCameraOrientation.copy(i), this._startPosition.copy(e), this._endCameraPosition.copy(e), this._endCameraPosition.y = s.position.y, this._tempTransform.lookAt(s.position, this._endCameraPosition, al.UP), this._endCameraOrientation.copy(this._tempTransform.getRotation()), this._endCameraDistance = al.distance(s.position, this._endCameraPosition), this._progress = 0, this._inOrbitTransform = !0, this._targetFov = t.DEFAULT_FOV, this._fov = t.DEFAULT_FOV } }, { key: "update", value: function () { if (this._inOrbitTransform) { this._progress = el.clamp01(this._progress + .5 * il.getInstance().deltaTime); var e = el.smoothStep01(1.8 * this._progress), t = el.smoothStep01(2 * this._progress - 1); Zd.slerp(this._orientation, this._startCameraOrientation, this._endCameraOrientation, e), this._cameraDistance = el.lerp(this._startCameraDistance, this._endCameraDistance, t), al.lerp(this._position, this._startPosition, this._endCameraPosition, t), this._pivot.setPosition(this._position), this._pivot.setRotation(this._orientation), this._progress >= 1 && (this._inOrbitTransform = !1, this._tempVec1.copy(this._pivot.getForward()), this._tempVec1.multiplyScalar(this._endCameraDistance - U_.DEFAULT_CAMERA_DISTANCE), this._tempVec1.add(this._endCameraPosition), this.reset(this._tempVec1, this._endCameraOrientation), this._cameraDistance = U_.DEFAULT_CAMERA_DISTANCE) } else { this.mouseDragLook(); var i = this._interpolationProgress; this._interpolationProgress += il.getInstance().deltaTime / this._interpolationDuration, this._interpolationProgress = el.clamp01(this._interpolationProgress); var n = i < 1 ? (this._interpolationProgress - i) / (1 - i) : 1; al.lerp(this._position, this._position, this._targetPosition, n), this._pivot.setPosition(this._position), this._fov = el.lerp(this._fov, this._targetFov, n) } } }, { key: "getFov", value: function () { return this._fov } }, { key: "getCameraDistance", value: function () { return this._cameraDistance } }, { key: "getHoverWeight", value: function () { return this._inOrbitTransform ? 0 : 1 } }]), t }(q_); J_.MAX_FOV = 60, J_.MIN_FOV = 30, J_.DEFAULT_FOV = 60, J_.CAMERA_SPEED = 5;/* harmony default export */
                     var ep, tp = J_, ip = function (e) {
                            function t(e) { it()(this, t); var i = mt()(this, (t.__proto__ || ft()(t)).call(this, e)); return i._startPos = new al, i._startLookAt = new al, i._endPos = new al, i._endLookAt = new al, i._currentPos = new al, i._currentLookAt = new al, i }
                            // public setIntroPosition(hotspot:Hotspot) {
                            // 	this._tempVec1.copy(hotspot.direction);
                            // 	this._tempVec1.add(hotspot.position);
                            // 	this.lerpLookAt(hotspot.position, this._tempVec1, Vector3.UP, 1);
                            // }
                            return At()(t, e), st()(t, [{
                                   key: "setIntroPositions", value: function (e, t) {
                                          this._startPos.copy(e.position), this._startLookAt.copy(e.direction), this._startLookAt.add(this._startPos), this._endPos.copy(t.position), this._endLookAt.copy(t.direction), this._endLookAt.add(this._endPos),
                                          // this.lerpLookAt(this._startPos, this._startLookAt, Vector3.UP, 1);
                                          this.lerpLookAt(this._endPos, this._endLookAt, al.UP, 1)
                                   }
                            }, { key: "setIntroProgress", value: function (e) { this.lerpLookAt(this._endPos, this._endLookAt, al.UP, 1) } }]), t
                     }(q_), np = ip, sp = function (e) { function t(e) { it()(this, t); var i = mt()(this, (t.__proto__ || ft()(t)).call(this, e)); return i._tempVec1 = new al, i } return At()(t, e), st()(t, [{ key: "update", value: function () { this.mouseDragLook(15, !1) } }, { key: "resetOrbit", value: function (e, i, n) { Et()(t.prototype.__proto__ || ft()(t.prototype), "reset", this).call(this, e, i), this._cameraStartPosition = n, this._cameraDistance = n.cameraDistance, this._tempVec1.copy(this._pivot.getForward()), this._tempVec1.multiplyScalar(U_.DEFAULT_CAMERA_DISTANCE - n.cameraDistance), this._tempVec1.add(this._pivot.getPosition()), Et()(t.prototype.__proto__ || ft()(t.prototype), "reset", this).call(this, this._tempVec1, i) } }, { key: "jumpToOrbit", value: function (e) { this._cameraStartPosition = e, this._cameraDistance = e.cameraDistance, this._pivot.setPosition(e.position) } }, { key: "getCameraDistance", value: function () { return this._cameraDistance } }]), t }(q_), ap = sp; !function (e) { e[e.INTRO = 0] = "INTRO", e[e.PATH = 1] = "PATH", e[e.ORBIT = 2] = "ORBIT", e[e.TEMPLE = 3] = "TEMPLE", e[e.UNKNOWN = 4] = "UNKNOWN" }(ep || (ep = {})); var rp = function (e) {
                            function t(e) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 80, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : .01, s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 100; it()(this, t); var a = mt()(this, (t.__proto__ || ft()(t)).call(this, e, i, n, s)); return a._cameraMode = ep.UNKNOWN, a._prevCameraMode = ep.UNKNOWN, a._hoverMouseResponse = .5, a._hoverDeviation = 5, a._hover = new al, a._sm = new _l, a._pois = [], a._position = new al, a._orientation = new Zd, a._targetPosition = new al, a._targetRotation = new Zd, a._prevPosition = new al, a._prevRotation = new Zd, a._interpolationDuration = 1, a._interpolationProgress = 1, a._hoverWeight = 1, a._cameraDistance = U_.DEFAULT_CAMERA_DISTANCE, a._tempVec1 = new al, a._renderer = e, a.view.transform.setParent(a._pivot), a._mouseListener = e.getMouseListener(), a._pathVisitor = new Q_(e), a._templeVisitor = new tp(e), a._introVisitor = new np(e), a._orbitVisitor = new ap(e), a._fov = i, a._defaultFov = i, a._pivot.lookAt(new al(45.71, 2.55, 10.29), new al(0, 0, 0), al.UP), a } return At()(t, e), st()(t, [{ key: "init", value: function () { } }, { key: "setPOIS", value: function (e) { this._pois = e } }, { key: "update", value: function () { this.projection.setAspect(this._renderer.getAspect()); var e = U_.DEFAULT_CAMERA_DISTANCE, t = this._pathVisitor; this._cameraMode === ep.INTRO && (t = this._introVisitor), this._cameraMode === ep.PATH && (this._pathVisitor.update(this._pois), t = this._pathVisitor), this._cameraMode === ep.TEMPLE ? (this._templeVisitor.update(), e = this._templeVisitor.getCameraDistance(), t = this._templeVisitor, this._fov = this._templeVisitor.getFov()) : this._fov = el.lerp(this._fov, this._defaultFov, .1), this._cameraMode === ep.ORBIT && (this._orbitVisitor.update(), e = this._orbitVisitor.getCameraDistance(), t = this._orbitVisitor), this.projection.setFOV(this._fov), this._interpolationProgress += il.getInstance().deltaTime / this._interpolationDuration, this._interpolationProgress = el.clamp01(this._interpolationProgress); var i = el.clamp01(this._interpolationProgress); i < 1 ? (i = el.smootherStep01(i), this._targetPosition.copy(t.getPivot().getPosition()), this._targetRotation.copy(t.getPivot().getRotation()), al.lerp(this._position, this._prevPosition, this._targetPosition, i), Zd.closestSlerp(this._orientation, this._prevRotation, this._targetRotation, i)) : (this._position.copy(t.getPivot().getPosition()), this._orientation.copy(t.getPivot().getRotation())), this.setCameraDistance(e), this._hoverWeight = el.clamp01(Math.min(t.getHoverWeight(), this._hoverWeight + il.getInstance().deltaTime)), this.reset(this._position, this._orientation), this.hover(this._hoverWeight) } }, {
                                   key: "gotoLocation", value: function (e) {
                                          this._location !== e.location && (this._location = e.location, this._prevCameraMode = this._cameraMode, this._prevPosition.copy(this.getNormalizedPosition()), this._position.copy(this._prevPosition), this._prevRotation.copy(this._pivot.getRotation()), this._hoverWeight = 0, this._hover.multiplyScalar(this._hoverWeight), this._interpolationDuration = 1, this._interpolationProgress = 1, e.type === xi.CAMERA_PATH && (this.setPath(e.path), this._pathVisitor.reset(this._prevPosition, this._prevRotation), this._cameraMode = ep.PATH), e.type === xi.TEMPLE_INSIDE && (this._prevCameraMode === ep.ORBIT ? this._templeVisitor.initTransitionFromOrbit(this.getPivot().getPosition(), this._prevRotation, this._orbitVisitor.getCameraDistance(), e.cameraStartPosition) : this._templeVisitor.reset(this._prevPosition, this._prevRotation), this._cameraMode = ep.TEMPLE), e.type === xi.TEMPLE_ORBIT && (this._orbitVisitor.resetOrbit(this._prevPosition, this._prevRotation, e.cameraStartPosition), this._cameraMode = ep.ORBIT), e.type === xi.INTRO_EFFECT && (null !== e.cameraStartPosition &&
                                                 // console.log(flowState);
                                                 // this._introVisitor.setIntroPosition(flowState.cameraStartPosition);
                                                 this._introVisitor.setIntroPositions(e.cameraStartPosition, e.hotspots.CameraEnd), this._cameraMode = ep.INTRO), this._prevCameraMode !== this._cameraMode && this._cameraMode === ep.PATH && (this._interpolationDuration = 2, this._interpolationProgress = 0))
                                   }
                            }, { key: "getNormalizedPosition", value: function () { return this._tempVec1.copy(this._pivot.getForward()), this._tempVec1.multiplyScalar(this._cameraDistance - U_.DEFAULT_CAMERA_DISTANCE), this._tempVec1.add(this._pivot.getPosition()), this._tempVec1 } }, { key: "setCameraDistance", value: function (e) { this._cameraDistance = e, this.view.transform.setPositionValues(0, 0, e) } }, { key: "goToTemplePosition", value: function (e) { null != e && (this._templeVisitor.goToTemplePosition(e), this._cameraMode = ep.TEMPLE) } }, { key: "jumpToTarget", value: function (e) { null !== e && this.reset(e.position, this._pivot.getRotation()), this._cameraMode === ep.TEMPLE && this._templeVisitor.reset(this._pivot.getPosition(), this._pivot.getRotation()), this._cameraMode === ep.ORBIT && this._orbitVisitor.jumpToOrbit(e), this._interpolationProgress = 1, this._interpolationDuration = 1, this.update() } }, { key: "setPath", value: function (e) { null != e && (this._pathVisitor.setPath(e), this._cameraMode = ep.PATH) } }, { key: "setIntroProgress", value: function (e) { this._introVisitor.setIntroProgress(e) } }, { key: "getPathProgress", value: function () { return this._pathVisitor.getPathProgress() } }, { key: "closeHotspot", value: function (e) { } }, { key: "stopMovement", value: function () { this._pathVisitor.stopMovement() } }, {
                                   key: "hover", value: function (e) {
                                          // on a mac a fixed timestep appears smoother
                                          var t = .016 * this._hoverMouseResponse; this._sm.copy(this._mouseListener.getScreenPos()), this._sm.multiplyScalar(this._hoverDeviation * e), this._hover.x = el.lerp(this._hover.x, .5 * this._sm.y, t), this._hover.y = el.lerp(this._hover.y, -this._sm.x, t), this._hover.multiplyScalar(e), this._pivot.rotateAxisAngleRadians(al.UP, el.degToRad(this._hover.y)), this._pivot.rotateAxisAngleRadians(this._pivot.getRight(), el.degToRad(this._hover.x))
                                   }
                            }]), t
                     }(q_), op = rp; rp.MAX_CAMERA_ROTATION_SPEED = 300;
                     // CONCATENATED MODULE: ./src/webgl/FlowEvent.ts
                     var lp = function (e) { function t(e, i, n, s, a) { it()(this, t); var r = mt()(this, (t.__proto__ || ft()(t)).call(this, e, n, s, a)); return r.data = i, r } return At()(t, e), st()(t, [{ key: "clone", value: function () { return new t(this.type, this.data, this.bubbles, this.cancelable) } }]), t }(Vi.a); lp.START = "FlowEvent.START", lp.ENDED = "FlowEvent.ENDED", lp.OPEN_HOTSPOT = "FlowEvent.OPEN_HOTSPOT", lp.START_PATH = "FlowEvent.START_PATH", lp.TIME_UPDATE = "FlowEvent.TIME_UPDATE", lp.POINTCLOUD_MESH_TRANSITION = "FlowEvent.POINTCLOUD_MESH_TRANSITION";/* harmony default export */
                     var hp = lp, up = function () { function e(t, i) { it()(this, e), this.loaded = !1, this._url = i, t.add(this) } return st()(e, [{ key: "load", value: function (e) { var t = this; el.loadText(this._url, function (i) { t.text = i, t.loaded = !0, e.call(t) }) } }]), e }(), cp = up, dp = function () { function e() { it()(this, e), this._cachedLength = -1, this._cachedLengths = [] } return st()(e, [{ key: "getPoints", value: function () { !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0], arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; return [] } }, { key: "getPoint", value: function (e, t) { t.copy(al.ZERO) } }, { key: "getEvenlySpacedPoint", value: function (e, t) { e <= 0 ? this.getPoint(0, t) : e >= 1 && this.getPoint(1, t); for (var i = this.getLength(), n = e * i, s = 0, a = 0; a < this._cachedLengths.length; a++) { var r = this._cachedLengths[a] + s; if (n < r) return this.getPoint(((n - s) / this._cachedLengths[a] + a) / this._cachedLengths.length, t); s = r } } }, { key: "getLength", value: function () { return this._cachedLength >= 0 ? this._cachedLength : this._cachedLength = this.calculateLength() } }, { key: "calculateLength", value: function () { for (var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 10, t = 0, i = new al, n = new al, s = 0; s < e; s++)this.getPoint(s / e, i), this.getPoint((s + 1) / e, n), this._cachedLengths.push(al.distance(i, n)), t += this._cachedLengths[s]; return t } }]), e }(), _p = dp, pp = function (e) { function t(e, i, n, s) { it()(this, t); var a = mt()(this, (t.__proto__ || ft()(t)).call(this)); return a.v1 = new al, a.v2 = new al, a.v3 = new al, a.v4 = new al, a.v1.copy(e), a.v2.copy(i), a.v3.copy(n), a.v4.copy(s), a } return At()(t, e), st()(t, [{ key: "getPoints", value: function () { for (var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0], t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 4, i = [], n = 0; n < t; n++) { var s = new al; if (this.getPoint(n / t, s), i.push(s), e) { var a = new al; this.getPoint((n + 1) / t, a), i.push(a) } } return i } }, { key: "getPoint", value: function (e, t) { e <= 0 ? t.copy(this.v1) : e >= 1 && t.copy(this.v4), t.setValues(this.CubicBezier(e, this.v1.x, this.v2.x, this.v3.x, this.v4.x), this.CubicBezier(e, this.v1.y, this.v2.y, this.v3.y, this.v4.y), this.CubicBezier(e, this.v1.z, this.v2.z, this.v3.z, this.v4.z)) } }, { key: "CubicBezierP0", value: function (e, t) { var i = 1 - e; return i * i * i * t } }, { key: "CubicBezierP1", value: function (e, t) { var i = 1 - e; return 3 * i * i * e * t } }, { key: "CubicBezierP2", value: function (e, t) { return 3 * (1 - e) * e * e * t } }, { key: "CubicBezierP3", value: function (e, t) { return e * e * e * t } }, { key: "CubicBezier", value: function (e, t, i, n, s) { return this.CubicBezierP0(e, t) + this.CubicBezierP1(e, i) + this.CubicBezierP2(e, n) + this.CubicBezierP3(e, s) } }]), t }(_p), vp = pp, fp = function (e) { function t(e, i) { it()(this, t); var n = mt()(this, (t.__proto__ || ft()(t)).call(this)); return n.v1 = new al, n.v2 = new al, n.v1.copy(e), n.v2.copy(i), n } return At()(t, e), st()(t, [{ key: "getPoints", value: function () { var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0]; arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; return e ? [this.v1, this.v2] : [this.v1] } }, { key: "getPoint", value: function (e, t) { e <= 0 ? t.copy(this.v1) : e >= 1 && t.copy(this.v2), t.copy(this.v2), t.subtract(this.v1), t.multiplyScalar(e), t.add(this.v1) } }, { key: "getEvenlySpacedPoint", value: function (e, t) { this.getPoint(e, t) } }, { key: "getLength", value: function () { return this._cachedLength >= 0 ? this._cachedLength : this._cachedLength = al.distance(this.v1, this.v2) } }]), t }(_p), gp = fp, mp = function (e) { function t(e, i, n) { it()(this, t); var s = mt()(this, (t.__proto__ || ft()(t)).call(this)); return s.v1 = new al, s.v2 = new al, s.v3 = new al, s.v1.copy(e), s.v2.copy(i), s.v3.copy(n), s } return At()(t, e), st()(t, [{ key: "getPoints", value: function () { for (var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0], t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 4, i = [], n = 0; n < t; n++) { var s = new al; if (this.getPoint(n / t, s), i.push(s), e) { var a = new al; this.getPoint((n + 1) / t, a), i.push(a) } } return i } }, { key: "getPoint", value: function (e, t) { e <= 0 ? t.copy(this.v1) : e >= 1 && t.copy(this.v3), t.setValues(this.QuadraticBezier(e, this.v1.x, this.v2.x, this.v3.x), this.QuadraticBezier(e, this.v1.y, this.v2.y, this.v3.y), this.QuadraticBezier(e, this.v1.z, this.v2.z, this.v3.z)) } }, { key: "QuadraticBezierP0", value: function (e, t) { var i = 1 - e; return i * i * t } }, { key: "QuadraticBezierP1", value: function (e, t) { return 2 * (1 - e) * e * t } }, { key: "QuadraticBezierP2", value: function (e, t) { return e * e * t } }, { key: "QuadraticBezier", value: function (e, t, i, n) { return this.QuadraticBezierP0(e, t) + this.QuadraticBezierP1(e, i) + this.QuadraticBezierP2(e, n) } }]), t }(_p), yp = mp, Ep = function () { function e() { var t = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0]; it()(this, e), this.currentPoint = new al, this.curves = [], this.closed = !0, this._cachedLength = -1, this._cachedLengths = [], this.closed = t } return st()(e, [{ key: "moveTo", value: function (e) { this.currentPoint.copy(e) } }, { key: "lineTo", value: function (e) { var t = new gp(this.currentPoint, e); this.curves.push(t), this.currentPoint.copy(e) } }, { key: "quadraticCurveTo", value: function (e, t) { var i = new yp(this.currentPoint, e, t); this.curves.push(i), this.currentPoint.copy(t) } }, { key: "bezierCurveTo", value: function (e, t, i) { var n = new vp(this.currentPoint, e, t, i); this.curves.push(n), this.currentPoint.copy(i) } }, { key: "getPoint", value: function (e, t) { for (var i = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2], n = this.getLength(), s = e * n, a = 0, r = 0; r < this._cachedLengths.length; r++) { var o = this._cachedLengths[r] + a; if (s < o) { var l = (s - a) / (o - a); return i ? void this.curves[r].getEvenlySpacedPoint(l, t) : void this.curves[r].getPoint(l, t) } a = o } this.curves[this.curves.length - 1].getEvenlySpacedPoint(1, t) } }, { key: "getLength", value: function () { if (this._cachedLength >= 0) return this._cachedLength; this._cachedLength = 0; for (var e = 0; e < this.curves.length; e++)this._cachedLengths.push(this.curves[e].getLength()), this._cachedLength += this._cachedLengths[e]; return this._cachedLength } }, { key: "getPoints", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 4, t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, i = []; if (t > 0) for (var n = this.getLength(), s = Math.max(1, n / t + 1 | 0), a = 1 / s, r = 0; r < s; r++) { var o = new al; this.getPoint(r * a, o), i.push(o) } else for (var l = 0; l < this.curves.length; l++)i = i.concat(this.curves[l].getPoints(!1, e)); if (!this.closed) { var h = new al; this.curves[this.curves.length - 1].getPoint(1, h), i.push(h) } return i } }]), e }(), Tp = Ep, Ap = function () {
                            function e(t) { it()(this, e), this._endCameraPos = new al, this._endLookAt = new al, this._showMeshProgress = 2, this._autoMove = !1, this._tempVec1 = new al, this._tempVec2 = new al, this._tempVec3 = new al, this._data = t } return st()(e, [{
                                   key: "setEndCameraPosition", value: function (e) {
                                          this._endCamera = e, this._endCameraPos.copy(e.direction), this._endCameraPos.multiplyScalar(-e.cameraDistance), this._endCameraPos.add(e.position), this._endLookAt.copy(e.position),
                                          // this._endLookAt.multiplyScalar(Hotspot.DEFAULT_CAMERA_DISTANCE);
                                          // this._endLookAt.add(hotspot.position);
                                          this._data.push(this._endCameraPos.clone())
                                   }
                            }, { key: "init", value: function () { this.createPath(this._data) } }, { key: "getEndLookAt", value: function () { return this._endLookAt } }, { key: "getEndPosition", value: function () { return this._endCameraPos } }, { key: "getEndCamera", value: function () { return this._endCamera } }, { key: "getPositionAtPath", value: function (e, t) { this._path.getPoint(el.clamp01(e), t, !0) } }, { key: "getLength", value: function () { return this._path.getLength() } }, { key: "setShowMeshProgress", value: function (e) { this._showMeshProgress = e } }, { key: "getShowMeshProgress", value: function () { return this._showMeshProgress } }, { key: "setAutoMove", value: function (e) { this._autoMove = e } }, { key: "getAutoMove", value: function () { return this._autoMove } }, {
                                   key: "createPath", value: function (e) {
                                          for (var t = [], i = [], n = 0; n < e.length; n++)t.push(new al(e[n].x, e[n].y, e[n].z)); for (var s = 0; s < t.length - 1; s++)this._tempVec1.copy(t[s + 1]), this._tempVec1.subtract(t[Math.max(0, s - 1)]), this._tempVec1.normalize(), i.push(this._tempVec1.clone()); this._tempVec1.multiplyScalar(-1), i.push(this._tempVec1.clone()), this._path = new Tp(!1); for (var a = 0; a < t.length; a++)0 === a ? this._path.moveTo(t[a].clone()) : (
                                                 // cp1
                                                 this._tempVec1.copy(t[a - 1]), this._tempVec2.copy(i[a - 1]), this._tempVec2.multiplyScalar(.3 * al.distance(t[a], t[a - 1])), this._tempVec1.add(this._tempVec2),
                                                 // cp1
                                                 this._tempVec2.copy(t[a]), this._tempVec3.copy(i[a]), this._tempVec3.multiplyScalar(a < t.length - 1 ? .3 * al.distance(t[a], t[a + 1]) : 1), this._tempVec2.subtract(this._tempVec3), this._path.bezierCurveTo(this._tempVec1.clone(), this._tempVec2.clone(), t[a].clone()))
                                   }
                            }]), e
                     }(), bp = function () {
                            function e(t) { it()(this, e), this._paths = [], this._center = new al, this._tempVec1 = new _l, this._tempVec2 = new _l, this._start = new _l, this._end = new _l, this._r = new _l, this._s = new _l, this._qmp = new _l, this._intersection = new _l, this._center.setValues(t.center.x, t.center.y, t.center.z), this.createPaths(t.paths) } return st()(e, [{ key: "createPaths", value: function (e) { for (var t = 0; t < e.length; t++) { var i = e[t].path; this._paths[t] = []; for (var n = 0; n < i.length; n++) { var s = i[n]; this._paths[t].push(new _l(s.x, s.z)) } } } }, { key: "getPlaneHeight", value: function () { return this._center.y } }, { key: "isPointReachable", value: function (e, t) { this._start.setValues(e.x, e.z), this._end.setValues(t.x, t.z); for (var i = 0; i < this._paths.length; i++)for (var n = this._paths[i], s = 0; s < n.length; s++)if (this.lineSegementsIntersect(this._start, this._end, n[s], n[(s + 1) % n.length], this._intersection)) return !1; return !0 } }, {
                                   key: "isPointReachableFPS", value: function (e, t) {
                                          this._start.setValues(e.x, e.z), this._end.setValues(t.x, t.z); for (var i = 0; i < this._paths.length; i++) {
                                                 for (var n = this._paths[i], s = !1, a = 0; a < 2; a++) {
                                                        s = !1; for (var r = 0; r < n.length; r++)if (this.lineSegementsIntersect(this._start, this._end, n[r], n[(r + 1) % n.length], this._intersection)) {
                                                               // adjust this._end by using the normal of line segment.
                                                               this._tempVec1.copy(n[(r + 1) % n.length]), this._tempVec1.subtract(n[r]), this._tempVec1.normalize(), this._tempVec1.setValues(this._tempVec1.y, -this._tempVec1.x), this._tempVec2.copy(this._end), this._tempVec2.subtract(this._intersection); var o = _l.dot(this._tempVec1, this._tempVec2); o += .01 * Jl()(o), this._tempVec1.multiplyScalar(o), this._end.subtract(this._tempVec1), s = !0, r = n.length
                                                        } s || (a = 10)
                                                 } if (s) return !1
                                          } return t.x = this._end.x, t.z = this._end.y, !0
                                   }
                            }, { key: "isPointInside", value: function (e) { this._start.setValues(e.x, e.z), this._end.setValues(e.x, 1e4); for (var t = 0, i = 0; i < this._paths.length; i++)for (var n = this._paths[i], s = 0; s < n.length; s++)this.lineSegementsIntersect(this._start, this._end, n[s], n[(s + 1) % n.length], this._intersection) && t++; return t % 2 != 0 } }, {
                                   key: "lineSegementsIntersect", value: function (e, t, i, n, s) {
                                          _l.subtract(this._r, t, e), _l.subtract(this._s, n, i), _l.subtract(this._qmp, i, e); var a = _l.cross(this._r, this._s);
                                          // If r x s = 0 and (q - p) x r = 0, then the two lines are collinear.
                                          if (Math.abs(a) <= .001) return !1;
                                          // t = (q - p) x s / (r x s)
                                          var r = _l.cross(this._qmp, this._s) / a, o = _l.cross(this._qmp, this._r) / a;
                                          // 4. If r x s != 0 and 0 <= t <= 1 and 0 <= u <= 1
                                          // the two line segments meet at the point p + t r = q + u s.
                                          // 4. If r x s != 0 and 0 <= t <= 1 and 0 <= u <= 1
                                          // the two line segments meet at the point p + t r = q + u s.
                                          // We can calculate the intersection point using either t or u.
                                          return Math.abs(a) > .001 && 0 <= r && r <= 1 && 0 <= o && o <= 1 && (s.copy(this._r), s.multiplyScalar(r), s.add(e), !0)
                                   }
                            }]), e
                     }(), Rp = bp, wp = function () { function e() { it()(this, e) } return st()(e, [{ key: "setValues", value: function (e, t, i, n, s, a, r, o, l) { this.location = e, this.type = t, this.path = i, this.collisionset = n, this.nightAreaSet = s, this.hotspot = a, this.hotspots = r, this.cameraStartPosition = o, this.progress = l } }]), e }(), Ip = function (e) { function t(e, i, n) { it()(this, t); var s = mt()(this, (t.__proto__ || ft()(t)).call(this)); return s._step = -1, s._progress = 0, s._cameraPaths = {}, s._collisionSets = {}, s._nightAreaSets = {}, s._hotspots = {}, s._cameraStartPositions = {}, s._pois = [], s._titles = {}, s._introTitles = {}, s._currentState = new wp, s._renderer = e, s._textLoader = new cp(i, n), i.setCallbackForPreloadable(s._textLoader, function () { var e = JSON.parse(s._textLoader.text); s.parseData(e, i), s.openStep(0) }), s } return At()(t, e), st()(t, [{ key: "updateCurrentState", value: function () { var e = t._flow[this._step], i = this._cameraPaths[e.location], n = this._collisionSets[e.location], s = this._nightAreaSets[e.location], a = this._cameraStartPositions[e.location]; this._currentState.setValues(e.location, e.type, i.getLength() > 0 ? i : null, n, s, this._currentHotspot, this._hotspots[e.location], a, this._progress) } }, { key: "getFlow", value: function () { return t._flow } }, { key: "getHotspots", value: function (e) { return this._hotspots[e] } }, { key: "getCurrentState", value: function () { return this.updateCurrentState(), this._currentState } }, { key: "getPOIS", value: function () { return this._pois } }, { key: "getCurrentPath", value: function () { var e = this._cameraPaths[t._flow[this._step].location]; return e.getLength() > 0 ? e : null } }, { key: "getCurrentHotspot", value: function () { return this._currentHotspot } }, { key: "start", value: function () { this.openStep(0) } }, { key: "next", value: function () { this.openStep(Math.min(this._step + 1, t._flow.length - 1)) } }, { key: "previous", value: function () { this.openStep(Math.max(this._step - 1, 0)) } }, { key: "setProgress", value: function (e) { this._progress = e } }, { key: "openLocation", value: function (e) { for (var i = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], n = 0; n < t._flow.length; n++)if (t._flow[n].location === e) return void this.openStep(n, i) } }, { key: "setCurrentHotspot", value: function (e) { this._currentHotspot = e, this.notify(hp.OPEN_HOTSPOT) } }, { key: "openHotspot", value: function (e, i) { e !== t._flow[this._step].location && this.openLocation(e, !1), this._currentHotspot = null; for (var n in this._hotspots[e]) if (n === i) { this._currentHotspot = this._hotspots[e][n]; break } this.notify(hp.OPEN_HOTSPOT) } }, { key: "getTitleData", value: function (e) { return this._titles[e] } }, { key: "getIntroTitleData", value: function (e) { return this._introTitles[e] } }, { key: "getCameraPaths", value: function () { return this._cameraPaths } }, { key: "openStep", value: function (e) { var i = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1]; if (this._step >= 0 && this.notify(hp.ENDED), this._step = e, this._progress = 0, this._currentHotspot = null, this.notify(hp.START), i) { var n = t._flow[e].location; this._cameraStartPositions[n] ? this._currentHotspot = this._cameraStartPositions[n] : this._currentHotspot = null, this.notify(hp.OPEN_HOTSPOT), this._cameraPaths[n] && this.notify(hp.START_PATH) } } }, { key: "notify", value: function (e) { this.updateCurrentState(), this.dispatchEvent(new hp(e, this.getCurrentState())) } }, { key: "parseData", value: function (e, i) { for (var n = e.data, s = null, a = 0; a < n.length; a++) { var r = n[a], o = r.name; this._cameraPaths[o] = new Ap(r.path), this._cameraPaths[o].setShowMeshProgress(r.showMeshProgress), this._cameraPaths[o].setAutoMove(r.autoMove), this._collisionSets[o] = new Rp(r.collisionSet), this._nightAreaSets[o] = new Rp(r.nightAreaSet), this._hotspots[o] = {}; for (var l = t._flow[0], h = 0; h < t._flow.length; h++)t._flow[h].location === o && (l = t._flow[h]); for (var u = r.hotspots, c = 0; c < u.length; c++) { var d = u[c], _ = new U_; _.set(d.id, d.name, new al(d.pivot.x, d.pivot.y, d.pivot.z), new al(d.pos.x, d.pos.y, d.pos.z), d, l.type === xi.TEMPLE_INSIDE), d.cameraStartPosition ? (this._cameraStartPositions[o] = _, s && s.setEndCameraPosition(_), s = null) : this._hotspots[o][_.name] = _ } s = this._cameraPaths[o] } for (var p in this._cameraPaths) this._cameraPaths[p].init(); for (var v = e.pois, f = 0; f < v.length; f++) { var g = v[f]; this._pois.push({ center: new al(g.center.x, g.center.y, g.center.z), radius: g.radius }) } if (!ct) { for (var m = e.titles, y = 0; y < m.length; y++) { var E = m[y]; this._titles[E.name] = { center: new al(E.center.x, E.center.y, E.center.z), start: E.showProgress, end: E.hideProgress } } for (var T = e.introTitles, A = 0; A < T.length; A++) { var b = T[A]; this._introTitles[b.name] = new al(b.center.x, b.center.y, b.center.z) } } } }]), t }(t_.a); Ip._flow = [{ location: Mi.INTRO, type: xi.INTRO_EFFECT }, { location: Mi.PATH_INTRO_TO_AOK, type: xi.CAMERA_PATH }, { location: Mi.AOK_INSIDE, type: xi.TEMPLE_INSIDE }, { location: Mi.PATH_AOK_TO_KMG, type: xi.CAMERA_PATH }, { location: Mi.KMG_OUTSIDE, type: xi.TEMPLE_ORBIT }, { location: Mi.PATH_KMG_TO_EYK, type: xi.CAMERA_PATH }, { location: Mi.EYK_OUTSIDE, type: xi.TEMPLE_ORBIT }, { location: Mi.EYK_INSIDE, type: xi.TEMPLE_INSIDE }, { location: Mi.PATH_EYK_TO_FUTURE, type: xi.CAMERA_PATH }, { location: Mi.FUTURE, type: xi.TEMPLE_INSIDE }];/* harmony default export */
                     var Pp = Ip, Lp = function () {
                            function e(t, i) { it()(this, e), this._progress = 0, this._materials = [], this._hitPos = new al(-227, 0, -478), this._timeRunning = 0, this._scale = 10, this._materials = i, this._renderer = t } return st()(e, [{ key: "init", value: function () { for (var e = 0; e < this._materials.length; e++)this._materials[e].setVector3("_Center", this._hitPos), this._materials[e].setFloat("_WindFrequency", 1 / this._scale) } }, { key: "setProgress", value: function (e) { this._progress = e } }, { key: "getProgress", value: function () { return this._progress } }, { key: "update", value: function () { this._timeRunning += il.getInstance().deltaTime; for (var e = 0; e < this._materials.length; e++)this._materials[e].setFloat("_Time", this._timeRunning), this._materials[e].setFloat("_Progress", el.clamp01(this._progress)) } }, {
                                   key: "getIntroComplete", value: function () {
                                          // return true;
                                          return this._progress >= 1
                                   }
                            }]), e
                     }(), kp = Lp, Cp = function () { function e(t, i, n, s) { var a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : ""; it()(this, e), this._bbMin = new al, this._bbMax = new al, this._center = new al, this._numIndices = [], this._flashLightEnabled = !1, this._nightTime = 0, this._fade = 0, this._renderer = t, this._url = n, s ? (this._material = new Ml(t, i, "lodMeshMegaTexture"), this._materialFade = new Ml(t, i, "lodMeshMegaTexture"), this._materialOutside = new Ml(t, i, "lodMeshMegaTexture"), this._materialFlashLight = new Ml(t, i, "lodMeshMegaTextureFlashLight"), this._uvMaterial = new Ml(t, i, "lodMeshUV"), t.extensionManager.shader_texture_lod && (this._material.addShaderDefines("LOD_EXT"), this._materialFade.addShaderDefines("LOD_EXT"), this._materialFlashLight.addShaderDefines("LOD_EXT"), this._materialOutside.addShaderDefines("LOD_EXT")), ct && (this._material.addShaderDefines("MOBILE"), this._materialFade.addShaderDefines("MOBILE"), this._materialFlashLight.addShaderDefines("MOBILE"), this._materialOutside.addShaderDefines("MOBILE")), this._materialFade.addShaderDefines("FADE"), this._materialOutside.addShaderDefines("OUTSIDE")) : (this._material = new Ml(t, i, "lodMesh"), this._materialFade = new Ml(t, i, "lodMesh"), this._materialOutside = new Ml(t, i, "lodMesh"), this._texture = new vh(t, i, a, !0, !0, !1)), this._textLoader = new cp(i, n + ".json") } return st()(e, [{ key: "init", value: function () { this._texture && this._material.setTexture("uTexture", this._texture); var e = JSON.parse(this._textLoader.text); this._mesh = new Zl(this._renderer), this._mesh.setPositions(new Float32Array(e.aPos)), this._mesh.setUV0(new Float32Array(e.aUV0)), this._mesh.setIndices32(new Uint32Array(e.indices)), this._mesh.interleaveData(), this._renderer.draw(this._mesh, this._material), this._bbMin.setValues(e.min[0], e.min[1], e.min[2]), this._bbMax.setValues(e.max[0], e.max[1], e.max[2]), this._center.copy(this._bbMin), this._center.add(this._bbMin), this._center.multiplyScalar(.5) } }, { key: "reset", value: function () { this._isVisible = !1, this._fade = 0 } }, { key: "setVisible", value: function (e) { this._isVisible = e } }, { key: "update", value: function () { var e = .75 * il.getInstance().deltaTime; this._fade = ct ? 1 : el.clamp01(this._fade += this._isVisible ? e : -e) } }, { key: "getMegaTextureMaterial", value: function (e) { return this._flashLightEnabled ? this._materialFlashLight : this._fade < 1 ? this._materialFade : e ? this._materialOutside : this._material } }, { key: "getUVMaterial", value: function () { return this._uvMaterial } }, { key: "setNightTime", value: function (e) { this._flashLightEnabled = e > 0, this._nightTime = e, this._materialFlashLight.setFloat("_NightTime", e) } }, { key: "setFlashLightPosition", value: function (e) { this._materialFlashLight && this._materialFlashLight.setVector3("_LightPos", e) } }, { key: "setFlashLightForward", value: function (e) { this._materialFlashLight && this._materialFlashLight.setVector3("_LightForward", e) } }, { key: "getMeshFade", value: function (e) { return this._fade } }, { key: "loadLevel", value: function (e) { this._worker.postMessage({ cmd: "loadData", file: this._url + "_" + e + ".json" }) } }, { key: "setMaterialUniforms", value: function (e, t) { e.setMatrix("_ViewProjection", t.getViewProjection()), e.setFloat("_Fade", this.getMeshFade(t)), this._texture && e.setTexture("uTexture", this._texture) } }, { key: "isVisible", value: function (e, t) { return 0 !== this.getMeshFade(e) && (!(al.distance(e.getPosition(), this._center) > 200) && !!t.boxInFrustum(this._bbMin, this._bbMax)) } }, { key: "draw", value: function (e, t, i) { var n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null, s = arguments[4], a = arguments[5]; if (this.isVisible(e, t) || s) { var r = n || this.getMegaTextureMaterial(a); this.setMaterialUniforms(r, e), this._renderer.draw(this._mesh, r) } } }]), e }(), Mp = Cp, xp = function (e) {
                            function t(e) {
                                   var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : Dl.DEPTH_UINTSHORT; it()(this, t);
                                   // super(renderer, Texture.DEPTH_FLOAT, false, false, true);
                                   var a = mt()(this, (t.__proto__ || ft()(t)).call(this, e, s, !1, !1, !0)); return a.setTextureSize(i, n), a
                            } return At()(t, e), t
                     }(ch), Op = xp, Sp = function (e) {
                            function t(e) {
                                   var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : Dl.RGBA_UNSIGNED_BYTE, a = (arguments.length > 4 && void 0 !== arguments[4] && arguments[4], arguments.length > 5 && void 0 !== arguments[5] && arguments[5]), r = !(arguments.length > 6 && void 0 !== arguments[6]) || arguments[6], o = arguments.length > 7 && void 0 !== arguments[7] && arguments[7], l = arguments.length > 8 && void 0 !== arguments[8] && arguments[8]; it()(this, t); var h = mt()(this, (t.__proto__ || ft()(t)).call(this, e, s, !1, a, r));
                                   // currently rendering to single channel textures is not possible (opengl es)
                                   // super(renderer, width, height, type, false, filterLinear, wrapClamp);
                                   //  (window['isiOS'] && type == TextureFormat.RGBA_FLOAT) ? TextureFormat.RGBA_HALF_FLOAT : (window['isiOS'] && type ==
                                   // TextureFormat.RGB_FLOAT) ? TextureFormat.RGB_HALF_FLOAT : type,
                                   h.scaleToCanvas = !1, h.sizeMultiplier = 1, h.frameBufferComplete = !1, h.setTextureSize(i, n); var u = h.renderer.context;
                                   // this breaks some examples
                                   // gl.bindFramebuffer(gl.FRAMEBUFFER, null);
                                   //currently only depth or stencil, but not both
                                   /*if(useStencil){
                                                         // this.createDepthStencilBuffer(width, height);
                                                         this.createDepthBuffer(width, height);
                                                         this.createStencilBuffer(width, height);
                                                     }else{
                                                         this.createDepthBuffer(width, height);
                                                     }*/
                                   return h.frameBuffer = u.createFramebuffer(), u.bindFramebuffer(u.FRAMEBUFFER, h.frameBuffer), u.framebufferTexture2D(u.FRAMEBUFFER, u.COLOR_ATTACHMENT0, u.TEXTURE_2D, h.textureGL, 0), h.frameBufferComplete = h.testBuffer(), o ? h.createDepthBuffer(i, n) : l && h.createStencilBuffer(i, n), h
                            } return At()(t, e), st()(t, [{ key: "testBuffer", value: function () { var e = this.renderer.context; e.bindFramebuffer(e.FRAMEBUFFER, this.frameBuffer); var t = e.checkFramebufferStatus(e.FRAMEBUFFER); switch (t) { case e.FRAMEBUFFER_COMPLETE: return !0; case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT: return console.log("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT", this.formatType), !1; case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT: return console.log("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT", this.formatType), !1; case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS: return console.log("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS", this.formatType), !1; case e.FRAMEBUFFER_UNSUPPORTED: return console.log("Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED", this.formatType), !1; default: return console.log("Incomplete framebuffer: " + t, this.formatType), !1 } } }, { key: "setTexture3DSlice", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, n = this.renderer.context; n.bindFramebuffer(n.FRAMEBUFFER, this.frameBuffer), n.framebufferTextureLayer(n.FRAMEBUFFER, n.COLOR_ATTACHMENT0, e.textureGL, i, t) } }, { key: "addDepthTexture", value: function () { this.renderer.extensionManager.depth_texture ? this.setDepthTexture(new Op(this.renderer, this.width, this.height)) : console.log("addDepthTexture: extension not supported") } }, { key: "setDepthTexture", value: function (e) { e.setTextureSize(this.width, this.height), this.depthTexture = e; var t = this.renderer.context; t.framebufferTexture2D(t.FRAMEBUFFER, t.DEPTH_ATTACHMENT, t.TEXTURE_2D, this.depthTexture.textureGL, 0) } }, { key: "createDepthBuffer", value: function (e, t) { var i = this.renderer.context; this.depthBuffer = i.createRenderbuffer(), i.bindRenderbuffer(i.RENDERBUFFER, this.depthBuffer), i.renderbufferStorage(i.RENDERBUFFER, i.DEPTH_COMPONENT16, e, t), i.framebufferRenderbuffer(i.FRAMEBUFFER, i.DEPTH_ATTACHMENT, i.RENDERBUFFER, this.depthBuffer) } }, {
                                   key: "createDepthStencilBuffer", value: function (e, t) {
                                          var i = this.renderer.context; this.depthBuffer = i.createRenderbuffer(), i.bindRenderbuffer(i.RENDERBUFFER, this.depthBuffer), i.renderbufferStorage(i.RENDERBUFFER, i.DEPTH_STENCIL, e, t),
                                                 // let attachment = this.renderer.extensionManager.depth_texture.DEPTH_STENCIL_ATTACHMENT;
                                                 // console.log('DEPTH_STENCIL_ATTACHMENT', attachment);
                                                 // gl.framebufferRenderbuffer(gl.FRAMEBUFFER, attachment, gl.RENDERBUFFER, this.depthBuffer);
                                                 i.framebufferRenderbuffer(i.FRAMEBUFFER, i.DEPTH_STENCIL_ATTACHMENT, i.RENDERBUFFER, this.depthBuffer)
                                   }
                            }, { key: "createStencilBuffer", value: function (e, t) { var i = this.renderer.context; this.stencilBuffer = i.createRenderbuffer(), i.bindRenderbuffer(i.RENDERBUFFER, this.stencilBuffer), i.renderbufferStorage(i.RENDERBUFFER, i.STENCIL_INDEX8, e, t), i.framebufferRenderbuffer(i.FRAMEBUFFER, i.STENCIL_ATTACHMENT, i.RENDERBUFFER, this.stencilBuffer) } }, {
                                   key: "setAsTarget", value: function () {
                                          var e = this.renderer.context; e.bindFramebuffer(e.FRAMEBUFFER, this.frameBuffer), this.depthBuffer ?
                                                 // console.log("using depth buffer");
                                                 this.renderer.renderState.setDepthMask(!0) : this.depthTexture ?
                                                        // console.log("using depth texture");
                                                        this.renderer.renderState.setDepthMask(!0) : this.renderer.renderState.setDepthMask(!1)
                                   }
                            }, { key: "setTextureSize", value: function (e, i) { if (e !== this.width || i !== this.height) { if (this.depthBuffer) { var n = this.renderer.context; n.bindRenderbuffer(n.RENDERBUFFER, this.depthBuffer), n.renderbufferStorage(n.RENDERBUFFER, n.DEPTH_COMPONENT16, e, i), n.bindRenderbuffer(hl.RENDERBUFFER, null) } if (this.stencilBuffer) { var s = this.renderer.context; s.bindRenderbuffer(s.RENDERBUFFER, this.stencilBuffer), s.renderbufferStorage(s.RENDERBUFFER, s.STENCIL_INDEX8, e, i), s.bindRenderbuffer(hl.RENDERBUFFER, null) } this.depthTexture && this.depthTexture.setTextureSize(e, i), Et()(t.prototype.__proto__ || ft()(t.prototype), "setTextureSize", this).call(this, e, i) } } }, { key: "getData", value: function () { arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; return Et()(t.prototype.__proto__ || ft()(t.prototype), "getData", this).call(this, this.frameBuffer) } }, { key: "getDataRef", value: function (e) { var t = this.renderer.context; t.bindFramebuffer(hl.FRAMEBUFFER, this.frameBuffer), t.readPixels(0, 0, this.width, this.height, this.format, this.type, e), t.bindFramebuffer(t.FRAMEBUFFER, null) } }, { key: "getPixelU8", value: function (e, t) { var i = this.renderer.context; i.bindFramebuffer(hl.FRAMEBUFFER, this.frameBuffer); var n = new Uint8Array(4); return i.readPixels(e, t, 1, 1, hl.RGBA, hl.UNSIGNED_BYTE, n), i.bindFramebuffer(i.FRAMEBUFFER, null), n } }, { key: "getPixel", value: function (e, t) { var i = this.renderer.context; i.bindFramebuffer(hl.FRAMEBUFFER, this.frameBuffer); var n = void 0; switch (this.formatType) { case Dl.RGBA_FLOAT: n = new Float32Array(4); break; case Dl.RGBA_UNSIGNED_BYTE: n = new Uint8Array(4); break; case Dl.LUMINANCE_UNSIGNED_BYTE: n = new Uint8Array(1); break; case Dl.LUMINANCE_FLOAT: n = new Float32Array(1); break; default: console.log("can not yet get data for format type: ", this.formatType) }return i.readPixels(e, t, 1, 1, this.format, this.type, n), i.bindFramebuffer(i.FRAMEBUFFER, null), n } }, {
                                   key: "destruct", value: function () {
                                          var e = this.renderer.context; this.frameBuffer && (console.log(typeof this.frameBuffer), e.deleteFramebuffer(this.frameBuffer), this.frameBuffer = null), this.depthBuffer && (e.deleteRenderbuffer(this.depthBuffer), this.depthBuffer = null), this.stencilBuffer && (e.deleteRenderbuffer(this.stencilBuffer), this.stencilBuffer = null), this.depthTexture && (this.depthTexture.destruct(), this.depthTexture = null),
                                                 // always call this last
                                                 Et()(t.prototype.__proto__ || ft()(t.prototype), "destruct", this).call(this)
                                   }
                            }]), t
                     }(ch), Dp = Sp, Np = function () {
                            function e(t, i, n, s, a, r) { it()(this, e), this._tileSize = 256, this._numOfTiles = 64, this._detailTexSize = 2048, this._frame = 0, this._maxMipLevel = 4, this._newMapping = !1, this._mappedU = 0, this._mappedV = 0, this._renderer = t, this._url = n, this._tileSize = a, this._numOfTiles = r, this._detailTexSize = s, this._uvIndexCamera = new X_(e.FOV, .01, 100), this._uvIndexRenderTexture = new Dp(this._renderer, e.WIDTH, e.HEIGHT, Dl.RGBA_UNSIGNED_BYTE, !1, !1, !0, !0); var o = this._renderer.context, l = o.getParameter(o.MAX_TEXTURE_SIZE); this._mainTexture = new vh(t, i, n + (lt.a.mobile || l < 8192 ? "_mobile.jpg" : ".jpg"), !0, !0, !1), this._detailTexture = new ch(t, Dl.RGB_UNSIGNED_BYTE, !0, !0, !1), this._detailTexture.setTextureSize(this._detailTexSize, this._detailTexSize), this._redirectTexture = new ch(t, Dl.RGB_UNSIGNED_BYTE, !1, !1, !1), this._redirectTexture.setTextureSize(this._numOfTiles, this._numOfTiles), this._redirectData = new Uint8Array(this._numOfTiles * this._numOfTiles * 3), this._worker = this.createWorker() } return st()(e, [{ key: "init", value: function () { this._mainTexture.generateMips(), this._detailTexture.generateMips(), this._redirectTexture.setData(this._redirectData, this._numOfTiles, this._numOfTiles), this._uvIndexCamera.projection.setAspect(this._uvIndexRenderTexture.getAspect()) } }, { key: "setMaterialUniforms", value: function (e, t) { t.setFloat("_MegaTexSize", this._tileSize * this._numOfTiles), t.setFloat("_NumTiles", this._numOfTiles), e.setFloat("_NumTiles", this._numOfTiles), e.setFloat("_MaxMipLevel", Math.max(0, this._maxMipLevel - 1)), e.setFloat("_MegaTexSize", this._tileSize * this._numOfTiles), e.setFloat("_TileSize", this._tileSize), e.setFloat("_DetailTexSize", this._detailTexSize), e.setTexture("_MainTexture", this._mainTexture), e.setTexture("_DetailTexture", this.getDetailTexture()), e.setTexture("_RedirectTexture", this.getRedirectTexture()) } }, { key: "getDetailTexture", value: function () { return this._detailTexture } }, { key: "getRedirectTexture", value: function () { return this._redirectTexture } }, { key: "getMainTexture", value: function () { return this._mainTexture } }, {
                                   key: "update", value: function (t, i) {
                                          if (0 === this._frame); else if (1 === this._frame) {
                                                 // frame 1 - update detail and redirect texture if needed
                                                 if (this._newMapping) { var n = this._renderer.context; this.getDetailTexture().bind(); for (var s = this._tileSize, a = 0, r = this._mappedU, o = this._mappedV; s >= 1;)n.texSubImage2D(n.TEXTURE_2D, a, r, o, s, s, n.RGB, n.UNSIGNED_BYTE, this._workerData["imageData" + a]), a++, s /= 2, r /= 2, o /= 2; this.getRedirectTexture().setData(this._redirectData, this._numOfTiles, this._numOfTiles) }
                                          } else if (2 === this._frame)
                                                 // frame 2 - render scene to texture
                                                 this._uvIndexCamera.projection.setFOV(t.projection.getFOV()), this._uvIndexCamera.view.transform.setParent(t.view.transform), this._renderer.setRenderTexture(this._uvIndexRenderTexture), this._renderer.clear(), i(this._uvIndexCamera), this._renderer.unSetRenderTexture(); else if (3 === this._frame) {
                                                        // frame 3 - get data from uv index texture and post data to worker
                                                        var l = this._uvIndexRenderTexture.getData(); this._worker.postMessage({ cmd: "analyseData", tileSize: this._tileSize, numOfTiles: this._numOfTiles, detailTexSize: this._detailTexSize, maxMipLevel: this._maxMipLevel, url: this._url, data: l, dataWidth: e.WIDTH, dataHeight: e.HEIGHT, redirectData: this._redirectData }, [l.buffer, this._redirectData.buffer])
                                                 } else this._frame >= 4 && this._frame < 600 || (
                                                        // timeout - reset worker
                                                        this._redirectData = new Uint8Array(this._numOfTiles * this._numOfTiles * 3), this._worker.terminate(), this._worker = this.createWorker(), this._frame = 1); this._frame++
                                   }
                            }, { key: "createWorker", value: function () { var e = this, t = new Worker(H() + "workers/baganMegaTextureWorker.js"); return t.addEventListener("message", function (t) { e._redirectData = t.data.redirectData, e._newMapping = !1, e._frame = 0, t.data.newMapping && (e._newMapping = !0, e._workerData = t.data, e._mappedU = t.data.mappedU, e._mappedV = t.data.mappedV) }), t } }]), e
                     }(); Np.FOV = 60, Np.WIDTH = 512, Np.HEIGHT = 256;/* harmony default export */
                     var Fp = Np, Vp = function () {
                            function e(t) { it()(this, e), this.center = new al, this.min = new al, this.max = new al, this.children = [], this.fileRequested = !1, this.fileLoaded = !1, this.fileLoadCompletedAt = 0, this.hasPoints = !1, this.currentDistToCam = 0, this.renderer = t } return st()(e, [{ key: "draw", value: function (e, t, i, n, s, a) { if (this.mesh && this.fileLoaded && this.hasPoints) { var r = a * (1 - s) * this.mesh.getNumVertices() * el.clamp01(il.getInstance().time - this.fileLoadCompletedAt) | 0; if (r > 0) return t.setFloat("_StartFade", i), t.setFloat("_EndFade", n), t.setFloat("_AllreadyDiscarded", s), t.setVector3("_NodeCenter", this.center), e.draw(this.mesh, t, 0, r), r } return 0 } }, {
                                   key: "createMesh", value: function () {
                                          // todo: mesh pool
                                          return new Zl(this.renderer, !1)
                                   }
                            }], [{
                                   key: "createEmptyNode", value: function (t, i, n, s, a, r, o) {
                                          // todo: node pool
                                          var l = new e(t); return l.depth = n, l.name = i, l.dimension = o, l.center.copy(s), l.min.copy(a), l.max.copy(r), l.radius = .5 * al.distance(a, r), l
                                   }
                            }]), e
                     }(), Bp = Vp, Up = function () {
                            function e() { it()(this, e), this.inUse = !1, this.createWorker() } return st()(e, [{
                                   key: "createWorker", value: function () {
                                          var t = this; this.worker = new Worker(H() + "workers/baganLoadDataWorker.js"), this.worker.addEventListener("message", function (i) {
                                                 if (t._timeout && (clearTimeout(t._timeout), t._timeout = null), i.data.msg && "error" === i.data.msg) return console.error(i.data), t.node.fileRequested = !1, t._callback && t._callback(), void (t.inUse = !1); t.node.name = i.data.name, t.node.depth = i.data.depth, t.node.dimension = i.data.dimension, t.node.center.setValues(i.data.center.x, i.data.center.y, i.data.center.z), t.node.min.setValues(i.data.min.x, i.data.min.y, i.data.min.z), t.node.max.setValues(i.data.max.x, i.data.max.y, i.data.max.z), t.node.radius = .5 * al.distance(t.node.min, t.node.max); var n = new Float32Array(i.data.aPos), s = new Float32Array(i.data.ranking); n && n.length > 0 && (t.node.mesh = t.node.createMesh(), t.node.mesh.setPositions(n), t.node.mesh.setAttribute("aRanking", 1, s),
                                                        // if (e.data.aColor0) {
                                                        // 	const aColor0 = new Float32Array(e.data.aColor0);
                                                        // 	if (aColor0.length === aPos.length) {
                                                        // 		this.node.mesh.setColors(aColor0);
                                                        // 	}
                                                        // }
                                                        t.node.hasPoints = !0);
                                                 // create empty childs if needed
                                                 for (var a = 0; a < 2; a++)for (var r = 0; r < 2; r++)for (var o = 0; o < 2; o++) { var l = a + 2 * r + 4 * o; i.data.children[l] && (e._tempVec.x = t.node.center.x + (2 * a - 1) * t.node.dimension * .5, e._tempVec.y = t.node.center.y + (2 * r - 1) * t.node.dimension * .5, e._tempVec.z = t.node.center.z + (2 * o - 1) * t.node.dimension * .5, t.node.children[l] = Bp.createEmptyNode(t.node.renderer, t.node.name + l, t.node.depth + 1, e._tempVec, t.node.min, t.node.max, .5 * t.node.dimension)) } t.node.fileLoaded = !0, t.node.fileLoadCompletedAt = il.getInstance().time, t._callback && t._callback(), t.inUse = !1
                                          }, !1)
                                   }
                            }, {
                                   key: "loadDataForNode", value: function (e, t, i) {
                                          var n = this; this.inUse || (e.fileRequested = !0, this.inUse = !0, this.node = e, this._callback = i,
                                                 // create timeout to recreate worker if there is no response from worker
                                                 this._timeout = setTimeout(function () { n.worker.terminate(), n.node.fileRequested = !1, n._callback && n._callback(), n.inUse = !1, n.createWorker() }, 1e4), this.worker.postMessage({ cmd: "loadData", file: t + e.name + ".json" }))
                                   }
                            }]), e
                     }(); Up._tempVec = new al;/* harmony default export */
                     var Hp = Up, Gp = function () {
                            function e(t, i, n) { it()(this, e), this._loadRequests = [], this._dataLoadWorkers = [], this._drawCalls = 0, this._nodesVisited = 0, this._pointsDrawn = 0, this._visibility = 1, this._tempVec = new al, this._renderer = t, this._baseUrl = n, this._material = new Ml(this._renderer, i, "adaptivePointcloud"), this._materialIntroEffect = new Ml(this._renderer, i, "adaptivePointcloud"), this._materialNightEffect = new Ml(this._renderer, i, "adaptivePointcloud"), this._material.drawType = hl.POINTS, this._materialIntroEffect.drawType = hl.POINTS, this._materialNightEffect.drawType = hl.POINTS, this._materialIntroEffect.addShaderDefines("INTRO_EFFECT"), this._materialNightEffect.addShaderDefines("NIGHT_EFFECT"), this._materialNightEffect.setAdditiveBlending(), this._modelTransform = new Jd, this._rootNode = Vp.createEmptyNode(this._renderer, "data", 1, al.ZERO, new al(-1e3, -1e3, -1e3), new al(1e3, 1e3, 1e3), 1e3); for (var s = 0; s < e.MAX_SIMULTANEOUS_REQUEST + 1; s++)this._dataLoadWorkers.push(new Hp) } return st()(e, [{ key: "init", value: function (e, t, i, n) { var s = e.addGroup("PointCloud", [this._material, this._materialNightEffect, this._materialIntroEffect]); this._fogStrength = s.addParamFloat("_FogStrength", .1), this._fogHeightStrength = s.addShaderParamFloat("_FogHeightStrength", .06, 0, .3), this._fogHeight = s.addParamFloat("_FogHeight", 2.5, -5, 5), this._densityMult = s.addParamFloat("Density", 1, 0, 1), this._distanceDensityMult = s.addParamFloat("DistanceDensity", 10, 0, 10), this._distanceNodeFallOff = s.addParamFloat("DistanceNodeFallOff", .55, 0, .6), this._fadeSmoothStart = s.addParamFloat("SmoothStart", .25, .5, 1), this._modelTransform.setPositionValues(t, i, n), this._boolDiscarded = s.addParamBool("Draw discarded", !1), s.addShaderParamFloat("_PointSize", 1.5, 1, 16), s.addShaderParamFloat("_Opacity", 1, 0, 2) } }, { key: "reset", value: function () { this._visibility = 1 } }, {
                                   key: "draw", value: function (e, t, i, n) {
                                          var s = arguments.length > 4 && void 0 !== arguments[4] && arguments[4], a = arguments.length > 5 && void 0 !== arguments[5] && arguments[5], r = arguments.length > 6 && void 0 !== arguments[6] && arguments[6]; if (!a) { if (this._visibility = el.clamp01(this._visibility + (n ? 1 : -1) * il.getInstance().deltaTime / 3), 0 === this._visibility) return; i *= this._visibility } this._frustum = t; var o = s ? this._materialIntroEffect : r ? this._materialNightEffect : this._material;
                                          // const material = nightView ? this._materialNightEffect : this._material;
                                          // material.setMatrix('_Model', this._modelTransform.getWorldMatrix());
                                          o.setMatrix("_ViewProjection", e.getViewProjection()), o.setFloat("_SmoothStart", this._fadeSmoothStart.getValue()), o.setFloat("_DrawDiscarded", this._boolDiscarded.getValue() ? 1 : 0), this._tempVec.copy(t.getCamPos()), o.setVector3("_CamPos", this._tempVec), o.setFloat("_MaxDist", i), o.setFloat("_BaseFog", this._fogStrength.getValue() * Math.exp(-(this._tempVec.y - this._fogHeight.getValue()) * this._fogHeightStrength.getValue())),
                                                 // walk tree
                                                 this._drawCalls = 0, this._nodesVisited = 0, this._pointsDrawn = 0, this.resetRequests(), this.drawNode(this._rootNode, this._tempVec, i * this._distanceDensityMult.getValue(), i, o); for (var l = "" + this._pointsDrawn, h = "", u = 0; u < l.length; u++)h = l[l.length - u - 1] + h, u % 3 == 2 && u !== l.length - 1 && (h = "." + h);
                                          // tot hier
                                          this._pointsDrawn > 0 && cl.logToScreen("Nodes visited: " + this._nodesVisited + "<br />Draw calls: " + this._drawCalls + "<br />Points: " + h + "<br />Node requests: " + this._loadRequests.length), this.handleRequests()
                                   }
                            }, {
                                   key: "drawNode", value: function (e, t, i, n, s) {
                                          if (this._frustum.boxInFrustum(e.min, e.max)) {
                                                 this._nodesVisited++;
                                                 // check if visibility
                                                 // const minDist = Math.max(0, Vector3.distance(camPos, node.transform.getWorldPosition()) - node.radius);
                                                 var a = Math.max(0, al.distance(t, e.center) - e.radius);// saved, so we can order possible load request based on depth and distToCam.
                                                 if (e.currentDistToCam = a, a < i && a < n) if (e.fileLoaded) { if (e.hasPoints) { var r = .1 * i, o = (i - r) * this._fadeSmoothStart.getValue() + r, l = i, h = el.clamp01(el.smoothStep(o, l, a)); this._pointsDrawn += e.draw(this._renderer, s, o, l, h, this._densityMult.getValue()), this._drawCalls++ } for (var u = 0; u < 8; u++)e.children[u] && this.drawNode(e.children[u], t, i * this._distanceNodeFallOff.getValue(), n, s) } else this.addRequest(e)
                                          }
                                   }
                            }, { key: "resetRequests", value: function () { this._loadRequests = [] } }, { key: "addRequest", value: function (e) { e.fileRequested || this._loadRequests.push(e) } }, {
                                   key: "handleRequests", value: function () {
                                          if (e.NUMBER_OF_CURRENT_REQUESTS < e.MAX_SIMULTANEOUS_REQUEST) {
                                                 // sort request
                                                 this._loadRequests.sort(function (e, t) { return e.depth === t.depth ? e.currentDistToCam - t.currentDistToCam : e.depth - t.depth });
                                                 // load data.
                                                 for (var t = 0; t < this._loadRequests.length; t++)e.NUMBER_OF_CURRENT_REQUESTS < e.MAX_SIMULTANEOUS_REQUEST && (e.NUMBER_OF_CURRENT_REQUESTS++, this.loadNodeData(this._loadRequests[t], function () { e.NUMBER_OF_CURRENT_REQUESTS-- }))
                                          }
                                   }
                            }, {
                                   key: "loadNodeData", value: function (e, t) {
                                          // Load data async using workers
                                          for (var i = 0; i < this._dataLoadWorkers.length; i++)if (!this._dataLoadWorkers[i].inUse) { this._dataLoadWorkers[i].loadDataForNode(e, this._baseUrl, t); break }
                                   }
                            }, { key: "getIntroEffectMaterial", value: function () { return this._materialIntroEffect } }]), e
                     }(); Gp.MAX_SIMULTANEOUS_REQUEST = 3, Gp.NUMBER_OF_CURRENT_REQUESTS = 0;/* harmony default export */
                     var $p = Gp, zp = function (e) {
                            function t(e) { it()(this, t); var i = mt()(this, (t.__proto__ || ft()(t)).call(this)); return i._baseTransform = new Jd, i._baseMatrix = nl.mat4.create(), i._viewMatrix = nl.mat4.create(), i._projectionMatrix = nl.mat4.create(), i._posOffset = new al, i._vrController = e, i.view.transform = i._vrController.getHMDTransform(), i.view.transform.setParent(i._baseTransform), i } return At()(t, e), st()(t, [{ key: "init", value: function (e) { } }, { key: "setPosition", value: function (e) { this._vrController.hasPosition() && !lt.a.mobile && (e.y -= .5), this._baseTransform.setPosition(e), this._posOffset.copy(e), this._posOffset.multiplyScalar(-1), nl.mat4.identity(this._baseMatrix), nl.mat4.translate(this._baseMatrix, this._baseMatrix, this._posOffset.v) } }, { key: "getNonHMDPosition", value: function () { return this._baseTransform.getPosition() } }, {
                                   key: "updateForEye", value: function (e, t, i) {
                                          var n = this._vrController.getProjectionParameters(e); this.projection.setFarPlane(n.far), this.projection.setNearPlane(n.near),
                                                 // this.projection.setFOV(projParams.maxFov);
                                                 this.projection.setFOV(70), this.projection.setAspect(t / i), nl.mat4.multiply(this._viewMatrix, this._vrController.getView(e), this._baseMatrix), this._projectionMatrix.set(this._vrController.getProjection(e)), nl.mat4.multiply(this._viewProjection, this._projectionMatrix, this._viewMatrix)
                                   }
                            }, { key: "getViewProjection", value: function () { return this._viewProjection } }, { key: "getProjectionMatrix", value: function () { return this._projectionMatrix } }, { key: "getViewMatrix", value: function () { return this._viewMatrix } }, { key: "update", value: function () { } }, { key: "getPosOffset", value: function () { return this._posOffset } }, { key: "setProgressForLocation", value: function (e, t) { } }]), t
                     }(X_), Wp = zp, Kp = function () { function e() { it()(this, e), this._position = new al, this._forward = new al, this._tempVec = new al } return st()(e, [{ key: "update", value: function (e, t, i) { var n = !1, s = !1; i.getGamepads().length > 0 && (i.hasPosition(0) && (t instanceof Wp ? this._position.copy(t.getNonHMDPosition()) : this._position.copy(t.getPosition()), this._position.add(i.getGameTransforms()[0].getPosition()), n = !0), i.hasOrientation(0) && (this._forward.copy(i.getGameTransforms()[0].getForward()), s = !0)), s || (ct ? t.getWorldPos(this._forward, _l.ZERO) : t.getWorldPos(this._forward, e.getMouseListener().getNormalizedPos()), this._forward.subtract(t.getPosition()), this._forward.normalize(), this._forward.multiplyScalar(-1)), n || (this._position.copy(t.view.transform.getUp()), this._position.multiplyScalar(-.5), this._tempVec.copy(t.view.transform.getRight()), this._tempVec.multiplyScalar(.25), this._position.add(this._tempVec), this._tempVec.copy(t.view.transform.getForward()), this._tempVec.multiplyScalar(.25), this._position.add(this._tempVec), this._position.add(t.getPosition())) } }, { key: "getPosition", value: function () { return this._position } }, { key: "getForward", value: function () { return this._forward } }]), e }(), Yp = Kp, Xp = function (e) { function t() { it()(this, t); var e = mt()(this, (t.__proto__ || ft()(t)).apply(this, arguments)); return e.transform = new Jd, e._worldViewProjection = nl.mat4.create(), e._isVaoInit = !1, e } return At()(t, e), st()(t, [{ key: "draw", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, i = t || this.material; this._isVaoInit || (this.material.renderer.extensionManager.vertex_array_object && (this._vertexArrayObject = this.material.renderer.getVAO(this.mesh, this.material)), this._isVaoInit = !0), i.hasUniform("_WorldViewProjection") && (nl.mat4.multiply(this._worldViewProjection, e.getViewProjection(), this.transform.getWorldMatrix()), i.setMatrix("_WorldViewProjection", this._worldViewProjection)), i.hasUniform("_World") && i.setMatrix("_World", this.transform.getWorldMatrix()), i.setMatrix("_ViewProjection", e.getViewProjection()), t ? this.material.renderer.draw(this.mesh, i) : this._vertexArrayObject ? this.material.renderer.drawVAO(this._vertexArrayObject, this.mesh, this.material) : this.material.renderer.draw(this.mesh, this.material) } }, { key: "clone", value: function () { var e = new t; return e.mesh = this.mesh, e.material = this.material, e } }]), t }(ol), jp = Xp, qp = function () {
                            function e(t, i, n, s) {
                                   var a = this; it()(this, e), this._models = [], this._modelTextures = [], this._transforms = {}, this._meshes = {}, this._textures = {}, this._flashLightEnabled = !1, this._nightTime = 0, this._fade = 0, this._bbMin = new al(99999, 99999, 99999), this._bbMax = new al(-99999, -99999, -99999), this._center = new al, this._renderer = t, this._material = new Ml(t, i, "mobileMesh"), this._materialFlashLight = new Ml(t, i, "mobileMeshFlashLight"),
                                          // model
                                          this._jsonData = new cp(i, n), i.setCallbackForPreloadable(this._jsonData, function () { a.parseJson(i, s) })
                            } return st()(e, [{ key: "init", value: function () { } }, { key: "reset", value: function () { this._isVisible = !1, this._fade = 0 } }, { key: "setNightTime", value: function (e) { this._flashLightEnabled = e > 0, this._nightTime = e, this._materialFlashLight.setFloat("_NightTime", e) } }, { key: "setFlashLightPosition", value: function (e) { this._materialFlashLight && this._materialFlashLight.setVector3("_LightPos", e) } }, { key: "setFlashLightForward", value: function (e) { this._materialFlashLight && this._materialFlashLight.setVector3("_LightForward", e) } }, {
                                   key: "parseJson", value: function (e, t) {
                                          // get transforms
                                          for (var i = this._jsonData.text, n = JSON.parse(i), s = [], a = 0; a < n.transforms.length; a++) { var r = n.transforms[a], o = new Jd; o.setPositionRotationScale(new al(r.position[0], r.position[1], r.position[2]), new Zd(r.rotation[0], r.rotation[1], r.rotation[2], r.rotation[3]), new al(r.scale[0], r.scale[1], r.scale[2])), o.name = r.name, o.id = r.id, this._transforms[r.parentId] && o.setParent(this._transforms[r.parentId]), this._transforms[r.id] = o, s.push(o) }
                                          // get materials
                                          for (var l = 0; l < n.materials.length; l++) { var h = n.materials[l], u = h.name; if (!this._textures[u]) for (var c = 0; c < h.properties.length; c++) { var d = h.properties[c]; "_MainTex" === d.name && (this._textures[u] = new vh(this._renderer, e, t + d.sValue + ".jpg", !0, !0, !1)) } }
                                          // get objects
                                          for (var _ = 0; _ < n.objects.length; _++) { var p = n.objects[_], v = new jp; null != this._transforms[p.transformId] && (v.transform = this._transforms[p.transformId]); var f = p.instanceId; if (this._meshes[f]) v.mesh = this._meshes[f]; else { v.mesh = new Zl(this._renderer), v.mesh.animatorId = p.animatorId, p.indices.length > 0 && v.mesh.setIndices(new Uint16Array(p.indices)); for (var g = 0; g < p.attributes.length; g++) { var m = p.attributes[g]; v.mesh.setAttribute(m.name, m.stride, new Float32Array(m.data)) } this._meshes[f] = v.mesh } this._models.push(v), this._modelTextures.push(this._textures[p.material]), this._bbMin.x = Math.min(this._bbMin.x, p.bbCenter[0] - p.bbExtents[0]), this._bbMin.y = Math.min(this._bbMin.y, p.bbCenter[1] - p.bbExtents[1]), this._bbMin.z = Math.min(this._bbMin.z, p.bbCenter[2] - p.bbExtents[2]), this._bbMax.x = Math.max(this._bbMax.x, p.bbCenter[0] + p.bbExtents[0]), this._bbMax.y = Math.max(this._bbMax.y, p.bbCenter[1] + p.bbExtents[1]), this._bbMax.z = Math.max(this._bbMax.z, p.bbCenter[2] + p.bbExtents[2]), this._center.copy(this._bbMin), this._center.add(this._bbMax), this._center.multiplyScalar(.5) }
                                   }
                            }, { key: "isVisible", value: function (e, t) { return 0 !== this.getMeshFade(e) && (!(al.distance(e.getPosition(), this._center) > 200) && !!t.boxInFrustum(this._bbMin, this._bbMax)) } }, { key: "setVisible", value: function (e) { this._isVisible = e } }, { key: "update", value: function () { var e = .75 * il.getInstance().deltaTime; this._fade = el.clamp01(this._fade += this._isVisible ? e : -e) } }, { key: "getMeshFade", value: function (e) { return this._fade } }, { key: "draw", value: function (e, t, i) { var n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null, s = arguments[4]; arguments[5]; if (this.isVisible(e, t) || s) { n = this._flashLightEnabled ? this._materialFlashLight : this._material, n.setMatrix("_ViewProjection", e.getViewProjection()), n.setVector3("_CamPos", e.getPosition()), n.setFloat("_MaxDist", i); for (var a = 0; a < this._models.length; a++)n.setMatrix("_Model", this._models[a].transform.getWorldMatrix()), n.setTexture("_MainTexture", this._modelTextures[a]), this._renderer.draw(this._models[a].mesh, n) } } }]), e
                     }(), Zp = qp, Qp = function () {
                            function e() { it()(this, e), this.ro = new al, this.rd = new al, this._oc = new al } return st()(e, [{ key: "setVectors", value: function (e, t) { this.ro.copy(e), this.rd.copy(t) } }, {
                                   key: "intersectTriangle", value: function (t, i, n, s) {
                                          s.z = -1;
                                          // this is guessed
                                          var a = e._tempV30, r = e._tempV31; al.subtract(a, i, t), al.subtract(r, n, t); var o = e._tempV32; al.cross(o, this.rd, r); var l = al.dot(a, o); if (!(l < 1e-4)) {/*  if(culling){
                 if (det < kEpsilon) return -1;
                 }else{
                 if (Math.abs(det) < kEpsilon) return -1;
                 }*/
                                                 var h = 1 / l, u = e._tempV33; al.subtract(u, this.ro, t); var c = al.dot(u, o) * h; if (!(c < 0 || c > 1)) { var d = e._tempV32; al.cross(d, u, a); var _ = al.dot(this.rd, d) * h; if (!(_ < 0 || c + _ > 1)) { var p = al.dot(r, d) * h; s.setValues(c, _, p) } }
                                          }
                                   }
                            }, { key: "intersectSphere", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null; this._oc.copy(this.ro), this._oc.subtract(e); var n = al.dot(this._oc, this.rd), s = al.dot(this._oc, this._oc) - t * t, a = n * n - s; if (a < 0) return !1; if (i) { var r = -n - Math.sqrt(a); i.copy(this.rd), i.multiplyScalar(r), i.add(this.ro) } return !0 } }, { key: "intersectPlane", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, n = -(al.dot(e, this.ro) + t) / al.dot(e, this.rd); return n > 0 && (i && (i.copy(this.rd), i.multiplyScalar(n), i.add(this.ro)), !0) } }, { key: "intersectPlane2", value: function (t, i) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, s = e._tempV30; al.subtract(s, t, this.ro); var a = al.dot(i, s) / al.dot(i, this.rd); return a > 0 && (n && (n.copy(this.rd), n.multiplyScalar(a), n.add(this.ro)), !0) } }, { key: "setFromCamera", value: function (t, i) { this.ro.copy(t.getPosition()), nl.mat4.invert(e._tempMat4, t.projection.getMatrix()), e._tempVec4.setValues(i.x, i.y, 1, 1), e._tempVec4.transform(e._tempMat4), e._tempVec4.z = -1, e._tempVec4.w = 0, nl.mat4.invert(e._tempMat4, t.view.getMatrix()), e._tempVec4.transform(e._tempMat4), this.rd.x = e._tempVec4.x, this.rd.y = e._tempVec4.y, this.rd.z = e._tempVec4.z, this.rd.normalize() } }, { key: "getClosestPointOnRayToPoint", value: function (t, i) { var n = this.ro, s = e._tempV30; s.copy(n), s.add(this.rd); var a = e._tempV31; al.subtract(a, i, n); var r = e._tempV31; al.subtract(r, s, n); var o = r.x * r.x + r.y * r.y, l = a.x * r.x + a.y * r.y, h = l / o; al.multiplyScalar(t, r, h), t.add(n) } }]), e
                     }(); Qp._tempMat4 = nl.mat4.create(), Qp._tempVec4 = new Bl, Qp._tempV30 = new al, Qp._tempV31 = new al, Qp._tempV32 = new al, Qp._tempV33 = new al, Qp._tempV34 = new al;/* harmony default export */
                     var Jp = Qp, ev = function () {
                            function e(t, i, n) {
                                   it()(this, e), this._transform = new Jd, this._target = new al, this._renderer = t, this._plane = new gh(t, 1, 1, !0), this._material = new Ml(t, i, "streetViewArrow"), this._material.setPreMultipliedAlphaBlending(), this._material.depthTest = !1, this._texture = new vh(t, i,
                                          // rootURL + 'data/textures/arrow-brush-1.png',
                                          n + "data/textures/arrow-brush-3.png", !0, !0, !0), this._texture.setFilterAnisotropic(16), this._transform.setScaleScalar(.7)
                            } return st()(e, [{ key: "draw", value: function (e, t) { this._target.copy(t), this._target.subtract(e.getPosition()), this._target.y = 0, this._target.normalize(), this._target.add(t), this._transform.lookAt(t, this._target, al.UP), this._material.setMatrix("_ViewProjection", e.getViewProjection()), this._material.setMatrix("_Model", this._transform.getWorldMatrix()), this._material.setTexture("_Texture", this._texture), this._renderer.draw(this._plane, this._material) } }]), e
                     }(), tv = ev, iv = function () { function e(t, i) { it()(this, e), this._tempVec = new al, this._renderer = t, this._mesh = new gh(t, 1, e.SEGMENTS), this._material = new Ml(t, i, "vrArc"), this._material.setPreMultipliedAlphaBlending(), this._material.setCullingDisabled() } return st()(e, [{ key: "getGroundIntersectionTime", value: function (t, i, n) { var s = .5 * e.GRAVITY, a = i.y, r = t.y - n; return (-a - Math.sqrt(Math.abs(a * a - 4 * s * r))) / (2 * s) } }, { key: "getGroundIntersection", value: function (e, t, i) { var n = this.getGroundIntersectionTime(e, t, i); return this._tempVec.copy(t), this._tempVec.multiplyScalar(n), this._tempVec.add(e), this._tempVec.y = i, this._tempVec } }, { key: "draw", value: function (t, i, n, s) { var a = this.getGroundIntersectionTime(i, n, s); this._material.setMatrix("_ViewProjection", t.getViewProjection()), this._material.setVector3("_Start", i), this._material.setVector3("_Velocity", n), this._material.setFloat("_Gravity", e.GRAVITY), this._material.setFloat("_ArcTime", a), this._material.setFloat("_Time", il.getInstance().time), this._material.setFloat("_FloorHeight", s), this._renderer.draw(this._mesh, this._material) } }]), e }(); iv.SEGMENTS = 64, iv.GRAVITY = -9.8, iv.SPEED = 10;/* harmony default export */
                     var nv = iv, sv = function e() { it()(this, e) }, av = function (e) {
                            function t() { it()(this, t); var e = mt()(this, (t.__proto__ || ft()(t)).call(this)); return e._hotspotData = {}, e._hotspotPositions = {}, e._mapAspectRatio = {}, e._tempVec1 = new al, e._tempVec2 = new al, e._tempVec3 = new al, e._minVisibleDotKMG = -.7, e._minVisibleDotEYK = .1, e._mapTransform = nl.mat2.create(), e._tempVector2 = new _l, e } return At()(t, e), st()(t, [{ key: "init", value: function (e, i) { for (var n = i.getFlow(), s = 0; s < n.length; s++) { var a = n[s]; this._hotspotData[a.location] = {}, this._hotspotPositions[a.location] = {}; var r = i.getHotspots(a.location); for (var o in r) { var l = r[o]; this._hotspotData[a.location][o] = new sv, this._hotspotPositions[a.location][o] = (new al).copy(l.position) } this._hotspotData[a.location][t.camera] = new sv, this._hotspotPositions[a.location][t.camera] = new al } if (!t._mapScale) { var h = e.addGroup("TempleMaps"); t._mapScale = {}, t._mapCenterX = {}, t._mapCenterY = {}, t._mapRotation = {}, t._mapScale[Mi.AOK_INSIDE] = h.addParamFloat("AOK scale", .036, 0, .05), t._mapCenterX[Mi.AOK_INSIDE] = h.addParamFloat("x", -140.5, -200, -100), t._mapCenterY[Mi.AOK_INSIDE] = h.addParamFloat("y", -408, -500, -300), t._mapRotation[Mi.AOK_INSIDE] = h.addParamFloat("rot", 181, 0, 360), t._mapScale[Mi.EYK_INSIDE] = h.addParamFloat("EYK scale", .078, 0, .1), t._mapCenterX[Mi.EYK_INSIDE] = h.addParamFloat("x", -155.5, -200, -100), t._mapCenterY[Mi.EYK_INSIDE] = h.addParamFloat("y", 28.5, 0, 100), t._mapRotation[Mi.EYK_INSIDE] = h.addParamFloat("rot", 135, 0, 360) } this._mapAspectRatio[Mi.AOK_INSIDE] = 168 / 117, this._mapAspectRatio[Mi.EYK_INSIDE] = 138 / 135 } }, {
                                   key: "update", value: function (e, i, n) {
                                          var s = this._hotspotData[i.location], a = this._hotspotPositions[i.location]; for (var r in s) { var o = s[r], l = a[r]; r !== t.camera ? (e.getScreenPos(this._tempVec1, l), o.x = this._tempVec1.x, o.y = this._tempVec1.y, o.z = this._tempVec1.z) : o.z = -1; var h = !0; o.z < 0 && (h = !1), (o.x < -1 || o.x > 2 || o.y < -1 || o.y > 2) && (h = !1), h && al.distance(e.getPosition(), l) > n && (h = !1), o.visible = h } if (i.type === xi.TEMPLE_INSIDE) { var u = i.collisionset; for (var c in s) { var d = s[c], _ = a[c]; d.visible && (u.isPointReachable(e.getPosition(), _) || (d.visible = !1)) } } if (i.type === xi.CAMERA_PATH) for (var p in s) { var v = s[p], f = a[p]; v.visible && al.distance(e.getPosition(), f) > 65 && (v.visible = !1) } if (i.type === xi.TEMPLE_ORBIT && e instanceof op) { this._tempVec2.copy(e.getPivot().getPosition()), this._tempVec3.copy(e.getPosition()), this._tempVec3.subtract(this._tempVec2), this._tempVec3.normalize(); var g = i.location === Mi.EYK_OUTSIDE ? this._minVisibleDotEYK : this._minVisibleDotKMG; for (var m in s) { var y = s[m], E = a[m]; y.visible && (this._tempVec1.copy(E), this._tempVec1.subtract(this._tempVec2), this._tempVec1.normalize(), al.dot(this._tempVec1, this._tempVec3) < g && (y.visible = !1)) } } if (i.type === xi.TEMPLE_INSIDE && null !== t._mapCenterX[i.location] && t._mapRotation[i.location]) {
                                                 var T = this._mapAspectRatio[i.location] ? this._mapAspectRatio[i.location] : 1, A = 2 * t._mapRotation[i.location].getValue() * Math.PI / 360, b = t._mapScale[i.location].getValue(); nl.mat2.fromRotation(this._mapTransform, A), nl.mat2.multiplyScalar(this._mapTransform, this._mapTransform, b);
                                                 // }
                                                 var R = t._mapCenterX[i.location].getValue(), w = t._mapCenterY[i.location].getValue(); for (var I in s) { var P = s[I], L = a[I]; if (I === t.camera) { if (this._tempVector2.setValues(e.getPosition().x - R, e.getPosition().z - w), e instanceof op) { var k = e.getPivot().getForward(); P.mapRot = -Math.atan2(k.x, k.z) / (2 * Math.PI) * 360 + t._mapRotation[i.location].getValue() + 90 } } else this._tempVector2.setValues(L.x - R, L.z - w); nl.mat2.multiply(this._tempVector2.v, this._mapTransform, this._tempVector2.v), P.mapX = .5 * this._tempVector2.x + .5, P.mapY = (.5 * this._tempVector2.y + .5) * T }
                                          } this._currentLocation = i.location, this.dispatchEvent(new Aa(Aa.CHANGED, { location: i.location, data: s }))
                                   }
                            }]), t
                     }(t_.a); av.camera = "CAMERA";/* harmony default export */
                     var rv = av, ov = function (e) { function t(e) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 80, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : .01, s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 100, a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 1; it()(this, t); var r = mt()(this, (t.__proto__ || ft()(t)).call(this, i, n, s)); return r._eulerDegrees = new al, r._renderer = e, r.pivot = new Jd, r.view.transform.setPositionValues(0, 0, a), r.view.transform.setParent(r.pivot), r } return At()(t, e), st()(t, [{ key: "getPivot", value: function () { return this.pivot } }, { key: "setRotationX", value: function (e) { this._eulerDegrees.x = e, this.pivot.setEulerDegrees(this._eulerDegrees) } }, { key: "setRotationY", value: function (e) { this._eulerDegrees.y = e, this.pivot.setEulerDegrees(this._eulerDegrees) } }, { key: "getRotationX", value: function () { return this._eulerDegrees.x } }, { key: "getRotationY", value: function () { return this._eulerDegrees.y } }, { key: "getRotationZ", value: function () { return this._eulerDegrees.z } }, { key: "setDistance", value: function (e) { this.view.transform.setPositionValues(0, 0, e) } }]), t }(X_), lv = ov, hv = function () {
                            function e(t, i, n) {
                                   it()(this, e), this._identityTransform = new Jd, this._planeTransform = new Jd, this._planeNormal = new _l,
                                   // point
                                   this._models = [], this._transforms = {}, this._meshes = {}, this._currentPlaneDefinition = 0, this._renderer = t, this._modelCenter = new al(-155, 12.9, 29.31), this._modelCenterReconstruct = new al(-155, 15.9, 29.31), this._eykHotspotCamera = new lv(this._renderer, 55, .01, 150, 28), this._eykHotspotCamera.getPivot().setPosition(this._modelCenter), this._frustum = new jd(this._renderer), this._material = new Ml(t, i, "eykMesh"), this._material.setPreMultipliedAlphaBlending(), this._material.depthWrite = !0, this._material.depthTest = !0, this._fadeMaterial = new Ml(t, i, "eykMeshFade"), this._materialInside = new Ml(t, i, "eykMesh"), this._materialInside.setCullingFrontFace(), this._materialInside.addShaderDefines("SOLID_COLOR"), this._materialPlane = new Ml(t, i, "eykMesh"), this._materialPlane.addShaderDefines("SOLID_COLOR"), this._materialPlane.addShaderDefines("PLANE"), this._materialReconstruct = new Ml(t, i, "eykReconstruct"), this._materialReconstruct.setDrawTypeLines(), this._materialReconstruct.setAdditiveBlending(), this._plane = new gh(t, 1, 1), this._planeTransform.setScaleScalar(28), this._planeTransform.setPosition(new al(this._modelCenter.x, 3.4, this._modelCenter.z)), this._voidTexture = new vh(t, i, n + "data/textures/void_brown.png", !0, !0, !1), this._jsonData = new cp(i, n + "data/EYKTip.json")
                            } return st()(e, [{ key: "init", value: function (t) { var i = this, n = t.addGroup("EYKEffects", [this._material, this._materialInside, this._materialPlane]); this._planeRotParam = n.addParamFloat("_PlaneRotation", e._planeDefinitions[0][0], 0, 360), this._planeDistParam = n.addShaderParamFloat("_PlaneDistance", e._planeDefinitions[0][1], 0, 15), this._planeRotParam.setChangeCallback(function () { var e = i._planeRotParam.getValue() * Math.PI * 2 / 360; i._planeNormal.setValues(Math.sin(e), Math.cos(e)) }), n.addButton("_ShowValues", function () { alert("Dist: " + i._planeDistParam.getValue() + "\nRot: " + i._planeRotParam.getValue()) }); var s = this._planeRotParam.getValue() * Math.PI * 2 / 360; this._planeNormal.setValues(Math.sin(s), Math.cos(s)), this._pointDistParam = n.addParamFloat("_PointDist", 300, 0, 300), this._fadeParam = n.addParamFloat("_Fade", 0), this._reconstructParam = n.addParamFloat("_Reconstruct", 0), this.parseJson(JSON.parse(this._jsonData.text)) } }, { key: "setPlaneDefinition", value: function (t) { var i = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1]; (t = (0 | t) % e._planeDefinitions.length) !== this._currentPlaneDefinition && (this._currentPlaneDefinition = t, i ? (this._planeRotParam.to(e._planeDefinitions[t][0], 1), this._planeDistParam.to(e._planeDefinitions[t][1], 1)) : (this._planeRotParam.setValue(e._planeDefinitions[t][0], !0), this._planeDistParam.setValue(e._planeDefinitions[t][1], !0))) } }, { key: "setReconstructStep", value: function (e, t) { t ? (this._pointDistParam.to(0 === e ? 300 : 0, 1), this._fadeParam.to(e > 0 ? 1 : 0, 1), this._reconstructParam.to(e > 1 ? 1 : 0, 1)) : (this._pointDistParam.setValue(0 === e ? 300 : 0), this._fadeParam.setValue(e > 0 ? 1 : 0), this._reconstructParam.setValue(e > 1 ? 1 : 0)) } }, { key: "drawReconstruct", value: function (e, t, i, n) { var s = this._eykHotspotCamera; s.setRotationY(4 * -il.getInstance().time), s.setRotationX(-1.5), s.setDistance(37), this._eykHotspotCamera.getPivot().setPosition(this._modelCenterReconstruct), s.projection.setAspect(this._renderer.getAspect()), this._frustum.updateForCamera(s), i.setNightTime(.9), i.draw(s, 80); var a = this._pointDistParam.getValue(); a > 0 && n.draw(s, this._frustum, a, !1, !1, !0, !0); var r = this._fadeParam.getValue(); r > 0 && (this._fadeMaterial.setFloat("_FadeParam", r), this._fadeMaterial.setMatrix("_ViewProjection", s.getViewProjection()), this._fadeMaterial.setTexture("_Texture", t.getMainTexture()), e.draw(s, this._frustum, 200, this._fadeMaterial, !0, !0)); var o = this._reconstructParam.getValue(); if (o > 0) { this._materialReconstruct.setFloat("_FadeParam", o), this._materialReconstruct.setMatrix("_ViewProjection", s.getViewProjection()); for (var l in this._models) { var h = this._models[l]; this._materialReconstruct.setMatrix("_Model", h.transform.getWorldMatrix()), this._renderer.draw(h.mesh, this._materialReconstruct) } } } }, {
                                   key: "drawPlaneClip", value: function (e, t, i) {
                                          var n = this._eykHotspotCamera; this._eykHotspotCamera.getPivot().setPosition(this._modelCenter), n.setRotationX(0), n.setRotationY(this._planeRotParam.getValue() + 180 + 12.5 * Math.sin(.3 * il.getInstance().time)), n.setDistance(27.5),
                                                 // cam.setRotationY(this._planeRotParam.getValue() + 180);
                                                 i.draw(n, 80), n.projection.setAspect(this._renderer.getAspect()), this._frustum.updateForCamera(n), this.drawMeshPlaneClip(e, t, this._material), this._materialInside.setCullingFrontFace(), this._materialInside.setMatrix("_Model", this._identityTransform.getWorldMatrix()), this.drawMeshPlaneClip(e, t, this._materialInside), this._materialPlane.setMatrix("_Model", this._planeTransform.getWorldMatrix()), this.setMaterialUniformsPlaneClip(this._materialPlane, t), this._renderer.draw(this._plane, this._materialPlane)
                                   }
                            }, { key: "setMaterialUniformsPlaneClip", value: function (e, t) { var i = this._eykHotspotCamera; e.setMatrix("_ViewProjection", i.getViewProjection()), e.setVector3("_ModelCenter", this._modelCenter), e.setVector3("_CamPos", i.getPosition()), e.setVector2("_PlaneNormal", this._planeNormal), !t || e !== this._material && e !== this._fadeMaterial ? e.setTexture("_Texture", this._voidTexture) : e.setTexture("_Texture", t.getMainTexture()) } }, { key: "drawMeshPlaneClip", value: function (e, t, i) { this.setMaterialUniformsPlaneClip(i, t); var n = this._eykHotspotCamera; e.draw(n, this._frustum, 200, i, !0, !0) } }, {
                                   key: "parseJson", value: function (e) {
                                          // get transforms
                                          for (var t = [], i = 0; i < e.transforms.length; i++) { var n = e.transforms[i], s = new Jd; s.setPositionRotationScale(new al(n.position[0], n.position[1], n.position[2]), new Zd(n.rotation[0], n.rotation[1], n.rotation[2], n.rotation[3]), new al(n.scale[0], n.scale[1], n.scale[2])), s.name = n.name, s.id = n.id, this._transforms[n.parentId] && s.setParent(this._transforms[n.parentId]), this._transforms[n.id] = s, t.push(s) }
                                          // get objects
                                          for (var a = 0; a < e.objects.length; a++) { var r = e.objects[a], o = new jp; null != this._transforms[r.transformId] && (o.transform = this._transforms[r.transformId]); var l = r.instanceId; if (this._meshes[l]) o.mesh = this._meshes[l]; else { o.mesh = new Zl(this._renderer), o.mesh.animatorId = r.animatorId, r.indices.length > 0 && o.mesh.setIndices(new Uint16Array(r.indices)); for (var h = (new Uint16Array(r.indices), 0); h < r.attributes.length; h++) { var u = r.attributes[h]; o.mesh.setAttribute(u.name, u.stride, new Float32Array(u.data)) } this._meshes[l] = o.mesh } this._models.push(o) }
                                   }
                            }]), e
                     }();
                     // private static _planeDefinitions = [
                     // 	[57, 3.4],
                     // 	[113.7, 1],
                     // 	[130, 3.47],
                     // 	[200, 4.4],
                     // 	[274, 3.47],
                     // 	[289, 0.867],
                     // 	[345, 3.4],
                     // ];
                     hv._planeDefinitions = [[329, 3.45], [314, 1], [259, 3.5], [189, 3.65], [133, .8], [117, 3.5], [43, 4.36]];/* harmony default export */
                     var uv = hv, cv = function () { function e() { it()(this, e), this._fade = 0 } return st()(e, [{ key: "createMesh", value: function (e, t) { 0 !== t.getLength() && (this._renderer = e, this._path = t, this._mesh = this.prepareMesh(this._path)) } }, { key: "reset", value: function () { this._fade = 0 } }, { key: "prepareMesh", value: function (t) { var i = new al, n = new al, s = new al, a = t.getLength(), r = Math.ceil(a / e._vertexSpacing); this._segmentCount = r; var o = new Float32Array(8 * r), l = new Float32Array(4 * r); t.getPositionAtPath(0, n), n.y = e._yPos; for (var h = 0, u = 0, c = a / e._width * 16 / 512 / r, d = 1; d <= r; d++) { var _ = d / r; t.getPositionAtPath(_, i), i.y = e._yPos, s.copy(i), s.subtract(n), al.cross(s, s, al.UP), s.normalize(), s.multiplyScalar(e._width), n.copy(i), n.add(s), o[h + 0] = n.x, o[h + 1] = n.y, o[h + 2] = n.z, o[h + 3] = _, l[u + 0] = (d - 1) * c, l[u + 1] = 0, s.multiplyScalar(-2), n.copy(i), n.add(s), o[h + 4] = n.x, o[h + 5] = n.y, o[h + 6] = n.z, o[h + 7] = _, l[u + 2] = (d - 1) * c, l[u + 3] = 1, h += 8, u += 4, n.copy(i) } var p = new Zl(this._renderer); return p.setAttribute("aData", 4, o), p.setUV0(l), p.interleaveData(), p } }, { key: "draw", value: function (t, i, n, s) { if (this._mesh) { var a = il.getInstance().deltaTime; this._fade = el.clamp01(this._fade + (s ? a : -a)), this._fade > 0 && (e._material.setFloat("_BaseFog", e._fogStrength.getValue() * Math.exp(-(t.getPosition().y - e._fogHeight.getValue()) * e._fogHeightStrength.getValue())), e._material.setFloat("_MaxDist", n), e._material.setFloat("_Fade", this._fade), e._material.setMatrix("_ViewProjection", t.getViewProjection()), e._material.setVector3("_CamPos", t.getPosition()), e._material.setTexture("_Texture", e._texture), this._renderer.draw(this._mesh, e._material)) } } }], [{ key: "init", value: function (t) { var i = t.addGroup("PathRibbonPaint", [e._material]); e._fogStrength = i.addParamFloat("_FogStrength", .1), e._fogHeightStrength = i.addShaderParamFloat("_FogHeightStrength", .06, 0, .3), e._fogHeight = i.addParamFloat("_FogHeight", 2.5, -5, 5) } }, { key: "loadMaterial", value: function (t, i) { e._material || (e._material = new Ml(t, i, "pathRibbonPaint"), e._material.setPreMultipliedAlphaBlending(), e._material.setCullingDisabled(), e._material.drawType = hl.TRIANGLE_STRIP, e._material.depthTest = !0, e._material.depthWrite = !1, e._texture = new vh(t, i, H() + "data/path/path.jpg", !0, !0, !1), e._texture.setWrapModeClampVertical(!0), e._texture.setWrapModeClampHorizontal(!1), e._texture.setFilterAnisotropic(4)) } }]), e }(), dv = cv; cv._vertexSpacing = 3, cv._width = .75, cv._yPos = 4;
                     // CONCATENATED MODULE: ./src/webgl/WebGLManager.ts
                     var _v; !function (e) { e[e.FOLLOW_FLOW = 0] = "FOLLOW_FLOW", e[e.HOTSPOT_OPEN = 1] = "HOTSPOT_OPEN", e[e.EYK_RECONSTRUCT = 2] = "EYK_RECONSTRUCT", e[e.EYK_CLIPPING_PLANE = 3] = "EYK_CLIPPING_PLANE" }(_v || (_v = {})); var pv, vv = !ct, fv = function () {
                            function e(t, i) { var n = this; it()(this, e), this._paused = !1, this._state = _v.FOLLOW_FLOW, this._nightTime = -1, this._meshes = [], this._megaTextures = [], this._pathRibbon = {}, this._titles = {}, this._qualityLevel = Li.HIGH, this._initialised = !1, this._tempVec1 = new al, this._tempVec2 = new al, this._oldProgress = 0, this._intersection = new al, this._velocity = new al, this._jumpTo = new al, this._ray = new Jp, "true" === e.getQueryVariable("ui") && (this._datGui = new L_(i), this._stats = new x_(t), cl.ENABLED = !0), this._containerElement = t, this._canvasManager = new Kd(t, !0), this._renderer = new rh(i, this._canvasManager.getCanvas(), H() + "shaders/", H() + "shaders/"), this._renderer.clearWithColor(0, 0, 0, 1), this._renderer.setClearColor(0, 0, 0, 1), this._flow = new Pp(this._renderer, i, H() + "data/Flow.json"), this._hotspotIcons = new rv, this._vrController = new s_(this._renderer, this._canvasManager), this._vrCamera = new Wp(this._vrController), this._vrGamepads = new l_(this._renderer, i), this._vrController.addEventListener(i_.START, function () { lt.a.mobile && !lt.a.android && (n._containerElement.style.zIndex = "1000") }), this._vrController.addEventListener(i_.ENDED, function () { lt.a.mobile && !lt.a.android && (n._containerElement.style.zIndex = "initial") }), this._cameraController = new op(this._renderer, 60, .05, 2e3), this._flow.addEventListener(hp.START, function (e) { n._cameraController.gotoLocation(e.data) }), this._background = new V_(this._renderer, i), vv && (this._pointCloud = new $p(this._renderer, i, "https://storage.googleapis.com/gweb-arts-exp-bagan.appspot.com/pointcloud/"), this._introEffect = new kp(this._renderer, [this._pointCloud.getIntroEffectMaterial()])), this._renderer.extensionManager.element_index_uint ? (this._meshes[0] = new Mp(this._renderer, i, H() + "data/mesh/AOK_Ananda_Oak_Kyaung_mesh", !0), this._megaTextures[0] = new Fp(this._renderer, i, "https://storage.googleapis.com/gweb-arts-exp-bagan.appspot.com/aok_megaTexture/tile", 2048, 512, 64), this._meshes[1] = new Mp(this._renderer, i, H() + "data/mesh/EYK_Eim_Ya_Kyaung_mesh", !0), this._megaTextures[1] = new Fp(this._renderer, i, "https://storage.googleapis.com/gweb-arts-exp-bagan.appspot.com/eyk_megaTexture/tile", ct ? 2048 : 4096, 512, 64)) : (this._meshes[0] = new Zp(this._renderer, i, H() + "data/mobile/AOK_Ananda_Oak_Kyaung.json", H() + "data/mobile/textures/"), this._meshes[1] = new Zp(this._renderer, i, H() + "data/mobile/EYK_Eim_Ya_Kyaung.json", H() + "data/mobile/textures/")), vv && (dv.loadMaterial(this._renderer, i), this._eykEffects = new uv(this._renderer, i, H()), this._titles[uh.AOK] = new yh(this._renderer, i, uh.AOK, H(), 86, 147), this._titles[uh.KMG] = new yh(this._renderer, i, uh.KMG, H(), 70, 121), this._titles[uh.EYK] = new yh(this._renderer, i, uh.EYK, H(), 77, 133)), this._frustum = new jd(this._renderer), this._flashLight = new Yp, this._streetViewArrow = new tv(this._renderer, i, H()), this._vrArc = new nv(this._renderer, i), this._preloader = i } return st()(e, [{ key: "reset", value: function () { for (var e = 0; e < this._meshes.length; e++)this._meshes[e].reset(); this._pointCloud && this._pointCloud.reset(); for (var t in this._pathRibbon) this._pathRibbon[t].reset() } }, { key: "setNightTime", value: function (e) { if (this._nightTime !== e) { this._nightTime = e; for (var t = 0; t < this._meshes.length; t++)this._meshes[t].setNightTime(this._nightTime); this._background.setNightTime(this._nightTime) } } }, { key: "adjustNightTime", value: function (e) { var t = el.clamp01(this._nightTime + e * il.getInstance().deltaTime); this.setNightTime(t) } }, {
                                   key: "pause",
                                   // interface function
                                   value: function () { this._paused = !0 }
                            }, { key: "play", value: function () { this._paused = !1 } }, { key: "getFlowState", value: function () { return this._flow.getCurrentState() } }, { key: "setIntroEffectProgress", value: function (e) { e = el.clamp01(e), 0 === e && this.reset(), this._introEffect && this._introEffect.setProgress(e), this.setNightTime(0), this._flow.getCurrentState().location === Mi.INTRO && (this._flow.setProgress(e), e >= 1 && this._flow.next()), this._introEffect && this._introEffect.update() } }, { key: "gotoNextLocation", value: function () { this._state = _v.FOLLOW_FLOW, this._flow.next() } }, { key: "gotoPreviousLocation", value: function () { this._state = _v.FOLLOW_FLOW, this._flow.previous() } }, { key: "enableVR", value: function () { this._vrController.enableVR() } }, { key: "disableVR", value: function () { this._vrController.disableVR() } }, { key: "getFlowEventDispatcher", value: function () { return this._flow } }, { key: "getVREventDispatcher", value: function () { return this._vrController } }, { key: "isVRSupported", value: function () { return this._vrController && this._vrController.isSupported() } }, { key: "setQualityLevel", value: function (e) { if (this._qualityLevel = e, this._initialised) switch (e) { case Li.LOW: window.devicePixelRatio && this._canvasManager.setPixelRatio(1), this._maxDist.setValue(300, !0); break; case Li.AUTO: case Li.MEDIUM: window.devicePixelRatio && window.devicePixelRatio >= 2 && this._canvasManager.setPixelRatio(ct ? 1.5 : 1.25), this._maxDist.setValue(500, !0); break; case Li.HIGH: default: window.devicePixelRatio && window.devicePixelRatio >= 2 && this._canvasManager.setPixelRatio(ct ? 2 : 1.5), this._maxDist.setValue(600, !0) } } }, { key: "getHotspotIconEventDispatcher", value: function () { return this._hotspotIcons } }, { key: "instantJumpToLocation", value: function (e, t) { this._state = _v.FOLLOW_FLOW, t ? this._flow.openHotspot(e, t) : this._flow.openLocation(e), this._cameraController.jumpToTarget(this._flow.getCurrentState().hotspot) } }, { key: "openHotspot", value: function (e, t, i) { this._state = _v.HOTSPOT_OPEN } }, { key: "closeHotspot", value: function () { this._state = _v.FOLLOW_FLOW } }, { key: "enableEYKClippingPlaneHotspot", value: function (e, t) { this._state = _v.EYK_CLIPPING_PLANE, this._eykEffects.setPlaneDefinition(e, t) } }, { key: "enableEYKReconstructionHotspot", value: function (e, t) { this._state = _v.EYK_RECONSTRUCT, this._eykEffects.setReconstructStep(e, t) } }, { key: "disableEYKHotspot", value: function () { this._state = _v.FOLLOW_FLOW, this._background.setNightTime(this._nightTime) } }, { key: "recalculateCanvasSize", value: function () { this._canvasManager.handleResize(!0) } }, {
                                   key: "init", value: function () {
                                          var e = this, t = new C_; if (t.init("controls"), this._renderer.init(), this._maxDist = t.addParamInt("MaxDist", 600, 1, 1e3), this._maxDist.setChangeCallback(function () { e._cameraController.projection.setFarPlane(2 * e._maxDist.getValue()) }), this._eykEffects && this._eykEffects.init(t), this._hotspotIcons.init(t, this._flow), this._cameraController.init(), this._cameraController.setPOIS(this._flow.getPOIS()), this._pointCloud && this._pointCloud.init(t, 0, 0, 0), vv) { dv.init(t); var i = this._flow.getCameraPaths(); for (var n in i) this._pathRibbon[n] = new dv, this._pathRibbon[n].createMesh(this._renderer, i[n]) } this._vrCamera.init(t), this._vrController.init(t), this._background.init(); for (var s = 0; s < this._meshes.length; s++)this._meshes[s].init(); for (var a = 0; a < this._megaTextures.length; a++)this._megaTextures[a].init(); this._introEffect && this._introEffect.init(), this._datGui && this._datGui.init(t), this._initialised = !0, this.setQualityLevel(this._qualityLevel), this.instantJumpToLocation(Mi.INTRO, null),
                                                 // warm up WebGL
                                                 this._frustum.updateForCamera(this._cameraController); for (var r = 0; r < 2; r++)for (var o = 0; o < this._meshes.length; o++)!function (t) { e._megaTextures[t] && (e._megaTextures[t].setMaterialUniforms(e._meshes[t].getMegaTextureMaterial(!1), e._meshes[t].getUVMaterial()), e._megaTextures[t].update(e._cameraController, function (i) { e._meshes[t].draw(i, e._frustum, 100, e._meshes[t].getUVMaterial(), !0, !1) })), e._meshes[t].draw(e._cameraController, e._frustum, 100, null, !0, !1) }(o); for (var l in this._titles) { var h = this._flow.getTitleData(l); this._titles[l].setFlowData(h.center, h.start, h.end), this._titles[l].setIntroCenter(this._flow.getIntroTitleData(l)) } ct ? this.setIntroEffectProgress(1) : this.setIntroEffectProgress(0), this.recalculateCanvasSize(), this.update()
                                   }
                            }, { key: "renderScene", value: function (e, t, i, n, s) { for (var a = i.type !== xi.TEMPLE_INSIDE, r = 0; r < this._meshes.length; r++)this._meshes[r].draw(e, this._frustum, t, null, !1, a); if (this._pointCloud && this._pointCloud.draw(e, this._frustum, t, !n, !this._introEffect.getIntroComplete()), this._background.draw(e, t), vv) { for (var o in this._pathRibbon) this._pathRibbon[o].draw(e, i.progress, t, i.location === o); if (!this._vrController.isVRActive() && i.type === xi.CAMERA_PATH) switch (i.location) { case Mi.PATH_INTRO_TO_AOK: this._titles[uh.AOK].draw(e, i.progress); break; case Mi.PATH_AOK_TO_KMG: this._titles[uh.KMG].draw(e, i.progress); break; case Mi.PATH_KMG_TO_EYK: this._titles[uh.EYK].draw(e, i.progress) }var l = this._introEffect.getProgress(); for (var h in this._titles) this._titles[h].drawIntroTitle(e, i.type === xi.INTRO_EFFECT && l > .51) } i.type === xi.TEMPLE_INSIDE && (s && this._streetViewArrow.draw(e, this._intersection), this._vrController.isVRActive() && this._vrArc.draw(e, this._flashLight.getPosition(), this._velocity, i.collisionset.getPlaneHeight())) } }, {
                                   key: "update", value: function () {
                                          var e = this; if (this._renderer.getMouseListener().updateManual(), this._vrController.update(), this._vrController.requestAnimationFrame(function () { e.update() }), this._vrGamepads.update(), !this._paused) {
                                                 if (this._state === _v.EYK_CLIPPING_PLANE) return void this._eykEffects.drawPlaneClip(this._meshes[1], this._megaTextures[1], this._background); if (this._state === _v.EYK_RECONSTRUCT) return void this._eykEffects.drawReconstruct(this._meshes[1], this._megaTextures[1], this._background, this._pointCloud); this._introEffect && (this._introEffect.update(), this._cameraController.setIntroProgress(this._introEffect.getProgress())); var t = this._flow.getCurrentState(), i = this._maxDist.getValue(); t.type !== xi.TEMPLE_INSIDE && this._vrController.isVRActive() && this._vrController.disableVR(); var n = this._vrController.isVRActive() ? this._vrCamera : this._cameraController; n.update(); var s = this._cameraController.getPathProgress(); t.type === xi.CAMERA_PATH && (this._flow.setProgress(s), s >= 1 && this._flow.next()); var a = this.handleTempleNavigation(n, t); if (this._vrCamera.setPosition(this._cameraController.getPosition()), this._frustum.updateForCamera(n), this._flashLight.update(this._renderer, n, this._vrGamepads), t.type !== xi.INTRO_EFFECT) { var r = !1; this._vrController.isVRActive() && t.type === xi.TEMPLE_INSIDE && t.nightAreaSet.isPointInside(n.getPosition()) && (r = !0), this.adjustNightTime(r ? 1 : -1) } var o = t.type === xi.TEMPLE_INSIDE || t.type === xi.TEMPLE_ORBIT && t.location === Mi.EYK_OUTSIDE || t.type === xi.CAMERA_PATH && s > t.path.getShowMeshProgress(); t.type === xi.CAMERA_PATH && s > t.path.getShowMeshProgress() && this._oldProgress <= t.path.getShowMeshProgress() && this.getFlowEventDispatcher().dispatchEvent(new hp(hp.POINTCLOUD_MESH_TRANSITION, this._flow.getCurrentState())); for (var l = 0; l < this._meshes.length; l++)!function (s) { if (e._meshes[s].setVisible(o), e._meshes[s].update(), e._meshes[s].isVisible(n, e._frustum) && (e._meshes[s].setFlashLightForward(e._flashLight.getForward()), e._meshes[s].setFlashLightPosition(e._flashLight.getPosition()), e._megaTextures[s])) { var a = t.type !== xi.TEMPLE_INSIDE; e._megaTextures[s].setMaterialUniforms(e._meshes[s].getMegaTextureMaterial(a), e._meshes[s].getUVMaterial()), a || e._megaTextures[s].update(n, function (t) { e._meshes[s].draw(t, e._frustum, i, e._meshes[s].getUVMaterial(), !1, a) }) } }(l); if (
                                                        // render scene
                                                        this._renderer.clear(), this._vrController.isVRActive()) {
                                                               var h = this._canvasManager.canvas.width, u = this._canvasManager.canvas.height;
                                                        // left eye
                                                        this._renderer.setViewPort(0, 0, .5 * h, u), this._vrCamera.updateForEye(!1, .5 * h, u), this._frustum.updateForCamera(this._vrCamera), this.renderScene(n, i, t, o, a), this._vrGamepads.draw(this._vrController.getProjection(!1), this._vrController.getView(!1)),
                                                               // right eye
                                                               this._renderer.setViewPort(.5 * h, 0, .5 * h, u), this._vrCamera.updateForEye(!0, .5 * h, u), this._frustum.updateForCamera(this._vrCamera), this.renderScene(n, i, t, o, a), this._vrGamepads.draw(this._vrController.getProjection(!0), this._vrController.getView(!0)),
                                                               // submit frame
                                                               this._vrController.submitFrame()
                                                 } else this.renderScene(n, i, t, o, a); this._hotspotIcons.update(n, t, i), this._oldProgress = s
                                          }
                                   }
                            }, {
                                   key: "handleTempleNavigation", value: function (e, t) {
                                          var i = !1; if (this._state === _v.FOLLOW_FLOW && t.type === xi.TEMPLE_INSIDE)
                                                 // You're in VR - teleport navigation
                                                 if (this._vrController.isVRActive()) {
                                                        if (this._velocity.copy(this._flashLight.getForward()), this._velocity.multiplyScalar(-nv.SPEED), this._intersection.copy(this._vrArc.getGroundIntersection(this._flashLight.getPosition(), this._velocity, t.collisionset.getPlaneHeight())), (
                                                               // in vr you're able to walk inside walls. So first check if you're inside a wall :)
                                                               // otherwise, just do the normal check
                                                               i = t.collisionset.isPointInside(e.getPosition()) ? t.collisionset.isPointReachable(e.getPosition(), this._intersection) : t.collisionset.isPointInside(this._intersection)) && (this._vrGamepads.getClick() || this._renderer.getMouseListener().getMouseClick())) { this._jumpTo.copy(this._intersection); var n = this._vrController.getHMDTransform().getPosition(); this._jumpTo.x -= n.x, this._jumpTo.z -= n.z, this._jumpTo.y += 2.2; var s = U_.createTargetHotspot(this._cameraController.getPivot(), this._jumpTo); if (this._cameraController.goToTemplePosition(s), this._vrController.isVRActive()) return void this._cameraController.jumpToTarget(s) }
                                                 } else {
                                                        if (
                                                               // Normal 'streetview' navigation
                                                               this._ray.setFromCamera(this._cameraController, this._renderer.getMouseListener().getScreenPos()), this._ray.intersectPlane(al.UP, -t.collisionset.getPlaneHeight(), this._intersection) && (i = t.collisionset.isPointReachable(this._cameraController.getPivot().getPosition(), this._intersection)) && this._renderer.getMouseListener().getMouseClick()) { this._jumpTo.copy(this._intersection), this._jumpTo.y += 2.2; var a = U_.createTargetHotspot(this._cameraController.getPivot(), this._jumpTo); this._cameraController.goToTemplePosition(a) }
                                                        // fps navigation
                                                        var r = 3 * il.getInstance().deltaTime, o = G_.getInstance(), l = 0, h = 0; if ((o.getKeyCodeDown(js.KEY_W) || o.getKeyCodeDown(js.UP_ARROW)) && l++, (o.getKeyCodeDown(js.KEY_S) || o.getKeyCodeDown(js.DOWN_ARROW)) && l--, (o.getKeyCodeDown(js.KEY_A) || o.getKeyCodeDown(js.LEFT_ARROW)) && h--, (o.getKeyCodeDown(js.KEY_D) || o.getKeyCodeDown(js.RIGHT_ARROW)) && h++, o.getKeyCodeDown(js.SHIFT) && (l *= 2), (0 !== h || 0 !== l) && (this._tempVec1.copy(this._cameraController.getPivot().getPosition()), this._tempVec2.copy(this._cameraController.getPivot().getForward()), this._tempVec2.multiplyScalar(-l * r), this._tempVec1.add(this._tempVec2), this._tempVec2.copy(this._cameraController.getPivot().getRight()), this._tempVec2.multiplyScalar(h * r), this._tempVec1.add(this._tempVec2), this._tempVec1.y = this._cameraController.getPivot().getPosition().y, t.collisionset.isPointReachableFPS(this._cameraController.getPivot().getPosition(), this._tempVec1))) { var u = U_.createTargetHotspot(this._cameraController.getPivot(), this._tempVec1); this._cameraController.goToTemplePosition(u) }
                                                 } return i
                                   }
                            }], [{ key: "getQueryVariable", value: function (e) { for (var t = window.location.search.substring(1), i = t.split("&"), n = 0; n < i.length; n++) { var s = i[n].split("="); if (s[0] === e) return s[1] } return null } }]), e
                     }(), gv = fv, mv = function () { function e() { it()(this, e), this._finished = !1, this._isUpdating = !1, this.value = 0 } return st()(e, [{ key: "play", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null; this.value = 0, this._duration = 1e3 * e, this._t0 = +new Date, this._finished = !1, this._completeCallback = t, this._animateCallback = i, this._isUpdating || this.update() } }, { key: "stop", value: function () { this._finished = !0, this._completeCallback = null, this._animateCallback = null } }, { key: "update", value: function () { var e = this; this._isUpdating = !1, this._finished || (this.value = (+new Date - this._t0) / this._duration, this._animateCallback && this._animateCallback.call(this, this.value), this.value >= 1 ? (this._completeCallback && (this._completeCallback.call(this), this._completeCallback = null), this.value = 1, this._finished = !0) : (this._isUpdating = !0, window.requestAnimationFrame(function () { return e.update() }))) } }]), e }(), yv = mv, Ev = function (e) { function t(e) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 32, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 24, s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1, a = arguments.length > 4 && void 0 !== arguments[4] && arguments[4]; it()(this, t); for (var r = mt()(this, (t.__proto__ || ft()(t)).call(this, e)), o = (i + 1) * (n + 1), l = new Float32Array(3 * o), h = new Float32Array(2 * o), u = new Float32Array(3 * o), c = new Float32Array(4 * o), d = 0, _ = 0, p = 0, v = 0, f = 2 * Math.PI, g = 1 / i, m = 1 / n, y = 0; y <= n; y++)for (var E = y * m, T = 0; T <= i; T++) { var A = T * g, b = Math.cos(E * Math.PI), R = Math.sqrt(1 - b * b); l[d++] = Math.sin(A * f) * R * s, l[d++] = b * s, l[d++] = Math.cos(A * f) * R * s, h[_++] = A, h[_++] = 1 - E, u[p++] = Math.sin(A * f) * R, u[p++] = b, u[p++] = Math.cos(A * f) * R, c[v++] = -Math.cos(A * f), c[v++] = 0, c[v++] = Math.sin(A * f), c[v++] = 1 } r.setPositions(l), r.setUV0(h), r.setNormals(u), a && r.setTangents(c); var w = i * n * 2, I = new Uint16Array(3 * w), P = i + 1; d = 0; for (var L = 0; L < n; L++)for (var k = 0; k < i; k++)I[d++] = L * P + k, I[d++] = (L + 1) * P + k, I[d++] = L * P + k + 1, I[d++] = (L + 1) * P + k, I[d++] = (L + 1) * P + k + 1, I[d++] = L * P + k + 1; return r.setIndices(I), r } return At()(t, e), t }(Zl), Tv = Ev, Av = function () {
                            function e(t, i, n) {
                                   it()(this, e), this._cartesian = new al, this._tmpDebugPos = new al, this.ID = n.id, this.Location = new _l(n.position.x, 1 - n.position.y), this._renderer = t;
                                   // spherical to cartesian
                                   var s = new _l; s.copy(this.Location), s.x = 2 * s.x - 1, s.y = 2 * s.y - 1; var a = 1 * s.x * Math.PI, r = .5 * s.y * Math.PI; this._cartesian.x = Math.cos(r) * Math.cos(a), this._cartesian.y = Math.sin(r), this._cartesian.z = Math.cos(r) * Math.sin(a), this._cartesian.normalize(), e.debugMaterial || (e.debugMaterial = new Ml(this._renderer, i, "hotspot_debug"), e.debugMaterial.depthTest = !1, e.debugMesh = new Tv(this._renderer))
                            } return st()(e, [{ key: "get3DLocation", value: function () { return [this._cartesian.x, this._cartesian.y, this._cartesian.z] } }, {
                                   key: "getScreenLocation", value: function (e) {
                                          var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], i = e.getViewProjection(), n = e.projection.getFarPlane(), s = nl.vec4.create(), a = nl.vec4.fromValues(this._cartesian.x * n, this._cartesian.y * n, this._cartesian.z * n, 1);
                                          // hotspot is behind, clamp along 1 axis
                                          if (nl.vec4.transformMat4(s, a, i), s[0] /= s[3], s[1] /= s[3], s[0] = .5 * s[0] + .5, s[1] = .5 * s[1] + .5, t) { s[2] < 0 && Math.abs(s[2]) > 1 ? (s[0] >= .5 ? s[0] = .03 : s[0] < .5 && (s[0] = .97), s[1] = el.clamp(s[1], .03, .97)) : (s[0] = el.clamp(s[0], .03, .97), s[1] = el.clamp(s[1], .03, .97)) } return [s[0], 1 - s[1], s[2]]
                                   }
                            }, { key: "drawDebug", value: function (t) { this._tmpDebugPos.copy(this._cartesian), this._tmpDebugPos.multiplyScalar(.99 * t.projection.getFarPlane()), e.debugMaterial.setMatrix("_ViewProjection", t.getViewProjection()), e.debugMaterial.setVector3("_Pos", this._tmpDebugPos), this._renderer.draw(e.debugMesh, e.debugMaterial) } }]), e
                     }(), bv = Av, Rv = function e(t, i, n) { it()(this, e), this.Hotspots = {}, this._renderer = t, this.ID = n.id, this.LatLongUrl = H() + n.sphere; for (var s = 0; s < n.hotspots.length; s++) { var a = n.hotspots[s]; this.Hotspots[a.id] = new bv(this._renderer, i, a) } }, wv = Rv, Iv = function (e) {
                            function t(e, i) {
                                   it()(this, t); var n = mt()(this, (t.__proto__ || ft()(t)).call(this));
                                   // }
                                   // this.enable();
                                   // @ts-ignore
                                   // if (typeof DeviceMotionEvent['requestPermission'] === 'function') {
                                   //   let requested = false;
                                   //   window.addEventListener('click', () => {
                                   //     if (requested) {
                                   //       return;
                                   //     }
                                   //     requested = true;
                                   //     // @ts-ignore
                                   //     DeviceOrientationEvent['requestPermission']()
                                   //       .then((response: any) => {
                                   //         if (response == 'granted') {
                                   //           this.enable();
                                   //         }
                                   //       })
                                   //       .catch((response: any) => {
                                   //       });
                                   //   });
                                   // } else {
                                   return n._isEnabled = !1, n._isDeviceAvailable = !1, n._eventBind = !1, n._target = new Zd, n._current = new Zd, n._screen = new Zd, n._tempTransform = new Jd, n._worldRot = new Zd(-Math.sqrt(.5), 0, 0, Math.sqrt(.5)), n._transform = i, n.enable(), n
                            } return At()(t, e), st()(t, [{ key: "enable", value: function () { var e = this; "ondeviceorientation" in window && (this._isDeviceAvailable = !0), this._isDeviceAvailable && (this._eventBind || (window.addEventListener("deviceorientation", function (t) { e.handleDeviceOrientation(t) }, !1), this._eventBind = !0), this._isEnabled = !0) } }, { key: "isEnabled", value: function () { return this._isEnabled && this._isDeviceAvailable } }, { key: "disable", value: function () { this._isEnabled = !1 } }, { key: "handleDeviceOrientation", value: function (e) { if (this._isEnabled) { var t = window.orientation || 0; this._tempTransform.setEulerDegreesValues(e.beta, e.alpha, -1 * e.gamma), this._target.copy(this._tempTransform.getRotation()); var i = -t / 2 * Math.PI / 180; this._screen.setValues(0, Math.sin(i), 0, Math.cos(i)), this._target.multiply(this._screen), this._target.multiply(this._worldRot), Zd.closestSlerp(this._current, this._current, this._target, .7), this._transform.setRotation(this._current) } } }, { key: "rotation", get: function () { return this._current } }]), t
                     }(ol), Pv = Iv, Lv = function (e) { function t(e) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 80, n = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2], s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : .01, a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 100, r = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 1; it()(this, t); var o = mt()(this, (t.__proto__ || ft()(t)).call(this, i, s, a)); return o.moving = !1, o._keyResponse = 10, o._mouseRespons = 20, o._eulerDegrees = new al, o._rxSpeed = 0, o._rySpeed = 0, o._eulerDegreesXY = new _l, o._control = !0, o._currentFov = 80, o._minFov = 40, o._maxFov = 120, o._renderer = e, o.pivot = new Jd, o.pivot.setPositionValues(0, 0, 0), o.view.transform.setPositionValues(0, 0, r), o.view.transform.setParent(o.pivot), o._keyListener = G_.getInstance(), o._mouseListener = e.getMouseListener(), o._mouseListener.addWheelEvent(function (e) { return o.scrollZoom(e) }), window.isMobile && n && (o.enableGyroscope(), o._mouseListener.setPreventDefault(!1)), window.isMobile && o.enablePinch(), o } return At()(t, e), st()(t, [{ key: "scrollZoom", value: function (e) { var t = this.view.transform.getPosition().z; e > 0 ? t /= 1.05 : t *= 1.05, this.view.transform.setPositionValues(0, 0, t) } }, { key: "rotateY", value: function (e) { this._rxSpeed += e } }, { key: "rotateX", value: function (e) { this._rySpeed += e } }, { key: "disableControl", value: function () { this._control = !1 } }, { key: "enableControl", value: function () { this._control = !0, this._eulerDegrees = this.pivot.getEulerDegrees() } }, { key: "update", value: function () { this.projection.setAspect(this._renderer.getAspect()), this._rySpeed *= .9, this._rxSpeed *= .9; var e = il.getInstance().deltaTime, t = e * this._keyResponse; this._keyListener.getKeyCodeDown(js.LEFT_ARROW) && (this._rySpeed += t), this._keyListener.getKeyCodeDown(js.RIGHT_ARROW) && (this._rySpeed -= t), this._keyListener.getKeyCodeDown(js.UP_ARROW) && (this._rxSpeed += t), this._keyListener.getKeyCodeDown(js.DOWN_ARROW) && (this._rxSpeed -= t), this._keyListener.getKeyCodeDown(js.KEY_A) && (this._rySpeed += t), this._keyListener.getKeyCodeDown(js.KEY_D) && (this._rySpeed -= t), this._keyListener.getKeyCodeDown(js.KEY_W) && (this._rxSpeed += t), this._keyListener.getKeyCodeDown(js.KEY_S) && (this._rxSpeed -= t); if (this.moving = !this._control || Math.abs(this._rxSpeed) > .002 || Math.abs(this._rySpeed) > .002, this._gyroscope) this._eulerDegrees = this.pivot.getEulerDegrees(), this._eulerDegreesXY.x = this._eulerDegrees.x, this._eulerDegreesXY.y = this._eulerDegrees.y, this.moving = !0; else { if (this._mouseListener.getMouseDown()) { var i = this._mouseListener.getNormalizedVelocity(); this._rySpeed += i.x * this._mouseRespons, this._rxSpeed += i.y * this._mouseRespons } this._eulerDegrees.x += this._rxSpeed, this._eulerDegrees.y += this._rySpeed, this._eulerDegreesXY.x = this._eulerDegrees.x, this._eulerDegreesXY.y = this._eulerDegrees.y, this._control && this.pivot.setEulerDegreesXY(this._eulerDegreesXY) } } }, { key: "setRotationX", value: function (e) { this._eulerDegrees.x = e, this.pivot.setEulerDegrees(this._eulerDegrees) } }, { key: "setRotationY", value: function (e) { this._eulerDegrees.y = e, this.pivot.setEulerDegrees(this._eulerDegrees) } }, { key: "setRotationZ", value: function (e) { this._eulerDegrees.z = e, this.pivot.setEulerDegrees(this._eulerDegrees) } }, { key: "getRotationX", value: function () { return this._eulerDegrees.x } }, { key: "getRotationY", value: function () { return this._eulerDegrees.y } }, { key: "getRotationZ", value: function () { return this._eulerDegrees.z } }, { key: "setDistance", value: function (e) { this.view.transform.setPositionValues(0, 0, e) } }, { key: "disableGyroscope", value: function () { this._gyroscope = null } }, { key: "enableGyroscope", value: function () { this._gyroscope || (this._gyroscope = new Pv(this._renderer.getCanvas(), this.pivot)) } }, { key: "getGyroscope", value: function () { return this._gyroscope } }, { key: "enablePinch", value: function () { var e = this; this._currentFov = this.projection.getFOV(), this._minFov = 1 * this.projection.getFOV() / 2, this._maxFov = 3 * this.projection.getFOV() / 2, this._renderer.getCanvas().addEventListener("gestureend", function (t) { var i = Math.max(Math.min(1 / t.scale * e._currentFov, e._maxFov), e._minFov); e.projection.setFOV(i), e._currentFov = e.projection.getFOV(), t.preventDefault() }, !1), this._renderer.getCanvas().addEventListener("gesturechange", function (t) { var i = Math.max(Math.min(1 / t.scale * e._currentFov, e._maxFov), e._minFov); e.projection.setFOV(i), t.preventDefault() }, !1) } }]), t }(X_), kv = Lv, Cv = function (e) {
                            function t(e, i, n) { it()(this, t); var s = mt()(this, (t.__proto__ || ft()(t)).call(this)); s._panoramas = {}, s._renderer = e, s._camera = new kv(s._renderer, 95, !1), s._mesh = new r_(s._renderer), s._material = new Ml(s._renderer, i, "panorama"), s._material.setCullingDisabled(), s._material.setPreMultipliedAlphaBlending(); for (var a = 0; a < n.length; ++a) { var r = n[a]; s._panoramas[r.id] = new wv(s._renderer, i, r), s.loadPanorama(i, r.id) } return s } return At()(t, e), st()(t, [{ key: "init", value: function (e) { } }, { key: "setPanorama", value: function (e, t) { var i = this._panoramas[e]; this._activePanorama = i, t && this._camera.enableGyroscope(), this.dispatchEvent(new Bu(Bu.CHANGED, this.getHotspotCanvasPositions())) } }, { key: "loadPanorama", value: function (e, t) { var i = this._panoramas[t]; this._activePanorama = i, i && (this._activePanorama.LatLong = new vh(this._renderer, e, i.LatLongUrl)) } }, {
                                   key: "getHotspotCanvasPositions", value: function () {
                                          var e = [];// replace with JSON interface
                                          for (var t in this._activePanorama.Hotspots) { var i = this._activePanorama.Hotspots[t], n = i.getScreenLocation(this._camera, !1), s = .015 * this._renderer.getAspect(), a = n[0] + .015 >= 0 && n[0] - .015 <= 1 && n[1] + s >= 0 && n[1] - s <= 1 && Jl()(n[2]) >= 0; e.push({ id: i.ID, x: n[0], y: n[1], visible: a }) } return e
                                   }
                            }, {
                                   key: "panToHotspotId", value: function (e, t) {
                                          var i = this, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 2; return new ye.a(function (s, a) {
                                                 var r = i._activePanorama.Hotspots[e]; if (r) {
                                                        // get yaw/pitch values of 3D hotspot
                                                        var o = new Zd, l = new Zd, h = new al(r.get3DLocation()[0], r.get3DLocation()[1], r.get3DLocation()[2]);
                                                        // if animate == true, tween view to target hotspot; otherwise set directly
                                                        if (o.copy(i._camera.pivot.getRotation()), Zd.lookAt(l, new al, h, al.UP), t) { i._camera.disableControl(); (new yv).play(n, function () { s(), i._camera.enableControl() }, function (e) { var t = new Zd; Zd.slerp(t, o, l, el.smoothStep01(e)), i._camera.pivot.setRotation(t) }) } else i._camera.pivot.setRotation(l), s()
                                                 } else a()
                                          })
                                   }
                            }, {
                                   key: "update", value: function () {
                                          // update camera
                                          this._camera.update(), this._camera.moving && this.dispatchEvent(new Bu(Bu.CHANGED, this.getHotspotCanvasPositions()))
                                   }
                            }, {
                                   key: "draw", value: function () {
                                          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                                          // render panorama debug meshes
                                          if (
                                                 // update material
                                                 this._material.setMatrix("_Projection", this._camera.getProjectionMatrix()), this._material.setMatrix("_View", this._camera.getViewMatrix()), this._material.setTexture("_LatLong", this._activePanorama.LatLong), this._material.setFloat("_Opacity", el.smoothStep01(e)),
                                                 // render panorama mesh
                                                 this._renderer.context.depthFunc(this._renderer.context.LEQUAL), this._renderer.draw(this._mesh, this._material), this._renderer.context.depthFunc(this._renderer.context.LESS), t) for (var i in this._activePanorama.Hotspots) { var n = this._activePanorama.Hotspots[i]; n.drawDebug(this._camera) }
                                   }
                            }]), t
                     }(t_.a), Mv = Cv, xv = function () {
                            function e(t, i, n) { it()(this, e), this._paused = !1, this._containerElement = t, this._canvasManager = new Kd(t, !0), this._renderer = new rh(i, this._canvasManager.getCanvas(), H() + "shaders/", H() + "shaders/"), this._renderer.clearWithColor(1, 1, 1, 1), this._panorama = new Mv(this._renderer, i, n) }
                            // will be called from page controller
                            return st()(e, [{ key: "init", value: function () { this.update() } }, { key: "pause", value: function () { this._paused = !0 } }, { key: "play", value: function () { this._paused = !1 } }, { key: "getPanoramaEventDispatcher", value: function () { return this._panorama } }, { key: "setPanorama", value: function (e, t) { this._panorama.setPanorama(e, t) } }, { key: "recalculateCanvasSize", value: function () { this._canvasManager.handleResize(!0) } }, { key: "update", value: function () { var e = this; this._renderer.getMouseListener().updateManual(), window.requestAnimationFrame(function () { return e.update() }), this._paused || (this._panorama.update(), this._panorama.draw()) } }]), e
                     }(), Ov = xv, Sv = [{ id: Mi.EYK_INSIDE, sphere: "data/pano/eyk.jpg", position: { x: .5, y: .4 }, hotspots: [{ id: "EYK_09", position: { x: .28, y: .42 } }, { id: "EYK_10", position: { x: .18, y: .5 } }, { id: "EYK_04", position: { x: .7425, y: .42 } }, { id: "EYK_07", position: { x: .42, y: .5 } }] }, { id: Mi.AOK_INSIDE, sphere: "data/pano/aok.jpg", position: { x: 0, y: 0 }, hotspots: [{ id: "AOK_INSIDE_01", position: { x: .32, y: .34 } }, { id: "AOK_INSIDE_02", position: { x: .23, y: .4 } }, { id: "AOK_INSIDE_08", position: { x: .5, y: .5 } }, { id: "AOK_INSIDE_09", position: { x: -.4, y: .55 } }, { id: "AOK_INSIDE_10", position: { x: .4, y: .5 } }, { id: "AOK_INSIDE_11", position: { x: .85, y: .45 } }] }], Dv = Sv, Nv = function (e) { function t() { it()(this, t); var e = mt()(this, (t.__proto__ || ft()(t)).call(this)); return e._isInitialized = !1, e._isPanoramaInitialized = !1, e } return At()(t, e), st()(t, [{ key: "init", value: function (e) { var t = this; return this._experienceModel = Ze("experienceModel"), new ye.a(function (i) { t._webGLPreloader = new zd, t._webGLManager = new gv(e, t._webGLPreloader), t._webGLPreloader.load(function () { t.handleLoadComplete(t._webGLPreloader), i() }, t.handleLoadUpdate.bind(t)) }) } }, { key: "initPanorama", value: function (e) { var t = this; return new ye.a(function (i) { t._webGLPanoramaPreloader = new zd, t._webGLPanoramaManager = new Ov(e, t._webGLPanoramaPreloader, Dv), t._webGLPanoramaPreloader.load(function () { t.handleLoadComplete(t._webGLPanoramaPreloader), i() }, t.handleLoadUpdate.bind(t)) }) } }, { key: "webglInit", value: function () { this._isInitialized || (this._webGLManager.init(), this._isInitialized = !0) } }, { key: "webglPanoramaInit", value: function () { this._isPanoramaInitialized || (this._webGLPanoramaManager.init(), this._webGLPanoramaManager.recalculateCanvasSize(), this._isPanoramaInitialized = !0) } }, { key: "play", value: function () { arguments.length > 0 && void 0 !== arguments[0] && arguments[0] ? this._webGLPanoramaManager && this._webGLPanoramaManager.play() : this._webGLManager && this._webGLManager.play() } }, { key: "pause", value: function () { arguments.length > 0 && void 0 !== arguments[0] && arguments[0] ? this._webGLPanoramaManager && this._webGLPanoramaManager.pause() : this._webGLManager && this._webGLManager.pause() } }, { key: "getFlowState", value: function () { return this._webGLManager.getFlowState() } }, { key: "openHotspot", value: function (e, t, i) { var n = this; return new ye.a(function (s) { n._webGLManager.openHotspot(e, t, i), setTimeout(function () { return s() }, 1e3 * i + 50) }) } }, { key: "closeHotspot", value: function () { this._webGLManager.closeHotspot() } }, { key: "setIntroEffectProgress", value: function (e) { this._webGLManager.setIntroEffectProgress(Math.max(0, Math.min(1, e))) } }, { key: "setQualityLevel", value: function (e) { this._webGLManager.setQualityLevel(e) } }, { key: "gotoNextLocation", value: function () { this._webGLManager.gotoNextLocation() } }, { key: "gotoPreviousLocation", value: function () { this._webGLManager.gotoPreviousLocation() } }, { key: "enableVR", value: function () { this._webGLManager.enableVR() } }, { key: "disableVR", value: function () { this._webGLManager.disableVR() } }, { key: "isVRSupported", value: function () { return this._webGLManager && this._webGLManager.isVRSupported() } }, { key: "addFlowEvent", value: function (e, t) { this._webGLManager.getFlowEventDispatcher().addEventListener(e, t) } }, { key: "removeFlowEvent", value: function (e, t) { this._webGLManager.getFlowEventDispatcher().removeEventListener(e, t) } }, { key: "addHotspotEvent", value: function (e, t) { this._webGLManager.getHotspotIconEventDispatcher().addEventListener(e, t) } }, { key: "removeHotspotEvent", value: function (e, t) { this._webGLManager.getHotspotIconEventDispatcher().removeEventListener(e, t) } }, { key: "addPanoramaHotspotEvent", value: function (e, t) { this._webGLPanoramaManager.getPanoramaEventDispatcher().addEventListener(e, t) } }, { key: "addVREvent", value: function (e, t) { this._webGLManager.getVREventDispatcher().addEventListener(e, t) } }, { key: "removePanoramaHotspotEvent", value: function (e, t) { this._webGLPanoramaManager.getPanoramaEventDispatcher().addEventListener(e, t) } }, { key: "instantJumpToLocation", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; this._webGLManager.instantJumpToLocation(e, t) } }, { key: "enableEYKClippingPlaneHotspot", value: function (e) { var t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1]; this._webGLManager.enableEYKClippingPlaneHotspot(e, t) } }, { key: "enableEYKReconstructionHotspot", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; this._webGLManager.enableEYKReconstructionHotspot(e, t) } }, { key: "disableEYKHotspot", value: function () { this._webGLManager.disableEYKHotspot() } }, { key: "recalculateCanvasSize", value: function () { this._webGLManager.recalculateCanvasSize() } }, { key: "setPanorama", value: function (e, t) { this._webGLPanoramaManager.setPanorama(e, t) } }, { key: "handleLoadComplete", value: function (e) { this.dispatchEvent(new Nu(Nu.LOAD_COMPLETE)), e.destruct(), e = null } }, { key: "handleLoadUpdate", value: function (e) { this.dispatchEvent(new Nu(Nu.LOAD_PROGRESS, { progress: e })) } }]), t }(Lt.a), Fv = Nv, Vv = i(436), Bv =/*#__PURE__*/i.n(Vv), Uv = function (e) {
                            if (e && e.response.data.error) {
                                   var t = _t()({ config: e.config }, e.response, e.response.data);
                                   // delete data to avoid confusion
                                   return delete t.data, t
                            } return e
                     }, Hv = function (e) { return e.data.data ? _t()({}, e, e.data) : e }, Gv = i(437), $v =/*#__PURE__*/i.n(Gv), zv = i(441), Wv = function () {
                            function e(t) { var i = this; it()(this, e), this._sounds = {}, this._loaded = 0, this._loadedPromise = null, this._playing = {}, this._sounds = _t()({}, ee()(t).reduce(function (e, n) { return e[n] = new zv.Howl(_t()({ autoplay: !1, preload: !1, onplay: function () { i._playing[n] = e[n] }, onend: function () { delete i._playing[n] } }, t[n])), e }, {})) } return st()(e, null, [{ key: "setVolume", value: function (e) { zv.Howler.volume(e) } }]), st()(e, [{ key: "load", value: function () { var e = this, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : function () { }; return this._loadedPromise || (this._loadedPromise = new ye.a(function (i) { var n = $v()(e._sounds); n.forEach(function (s) { s.once("load", function () { e._loaded = e._loaded + 1, t(e._loaded / n.length), e._loaded >= n.length && i(n) }), s.load() }) })), this._loadedPromise } }, { key: "setVolume", value: function (e) { e <= 0 ? zv.Howler.mute(!0) : zv.Howler.mute(!1) } }, {
                                   key: "stop", value: function (e) {
                                          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1e3; this._playing[e] && (
                                                 // eslint-disable-next-line no-console
                                                 // console.log(`Audio: stop('${name}')`);
                                                 this._playing[e].fade(1, 0, t), delete this._playing[e])
                                   }
                            }, { key: "stopAll", value: function () { var e = this; ee()(this._playing).forEach(function (t) { return e.stop(t) }) } }, {
                                   key: "play", value: function (e) {
                                          // eslint-disable-next-line no-console
                                          // console.log(`play('${name}')`);
                                          var t = this._sounds[e]; t && !this._playing[e] && (
                                                 // eslint-disable-next-line no-console
                                                 // console.log(`Audio: play('${name}')`);
                                                 t.play(), t.fade(0, 1, 1e3), this._playing[e] = t)
                                   }
                            }]), e
                     }(), Kv = Wv, Yv = function () { var e, t = new Bd.a; t.init(Gd.config, Gd.environment); var i = new rt, n = Ed.create({ baseURL: t.getURL(Ke.API), headers: { Accept: "application/json" }, responseType: "json" }); n.interceptors.response.use(function (e) { return Hv(e) }, function (e) { throw Uv(e) }); var s = new Fv, a = new Ci(Bv.a), r = t.getVariable(Ye.VERSIONED_STATIC_ROOT), o = new Kv((e = {}, It()(e, Yr.BED_LOOP, { src: [r + "audio/loops/bed-loop.aac", r + "audio/loops/bed-loop.ogg"], loop: !0 }), It()(e, Yr.BELL_AMBIANCE_LOOP, { src: [r + "audio/loops/bell-ambiance-loop.aac", r + "audio/loops/bell-ambiance-loop.ogg"], loop: !0 }), It()(e, Yr.BURMESE_LOOP, { src: [r + "audio/loops/burmese-loop.aac", r + "audio/loops/burmese-loop.ogg"], loop: !0 }), It()(e, Yr.WIND_LOOP, { src: [r + "audio/loops/wind-loop.aac", r + "audio/loops/wind-loop.ogg"], loop: !0 }), It()(e, Yr.INSIDE_TEMPLE_LOOP, { src: [r + "audio/loops/inside-temple-loop.aac", r + "audio/loops/inside-temple-loop.ogg"], loop: !0 }), It()(e, Yr.CONTINUE_BUTTON_LOOP, { src: [r + "audio/loops/continue-button.aac", r + "audio/loops/continue-button.ogg"], loop: !1 }), It()(e, Yr.REAL_TEMPLE_LOOP, { src: [r + "audio/loops/real-temple.aac", r + "audio/loops/real-temple.ogg"], loop: !1 }), It()(e, Yr.RANDOM_LOOP_1, { src: [r + "audio/loops/random-1.aac", r + "audio/loops/random-1.ogg"], loop: !1 }), It()(e, Yr.RANDOM_LOOP_2, { src: [r + "audio/loops/random-1.aac", r + "audio/loops/random-2.ogg"], loop: !1 }), e)); qe("audioManager", o), qe("experienceModel", a), qe("webglApplication", s), qe(Qe, t), qe("trackingManager", i), qe("gateway", n) }, Xv = Yv, jv = { name: "SupportOverlay", props: { support: { type: Object, required: !0 } }, methods: { onClose: function () { this.$emit("close") } } }, qv = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: [e.$style.wrapper] }, [i("div", { class: e.$style.container }, [i("h2", [e._v("Browser not supported")]), e._v(" "), i("p", [e._v("\n        The Google Arts & Culture Lab Experiment: Bagan is currently not supported in your browser.\n        For the best experience, please try opening the experiment in the latest version of Chrome or Firefox.\n      ")]), e._v(" "), e.support.downgraded ? i("MainButton", { class: [e.$style.continueButton], attrs: { label: "Click here to continue anyway" }, on: { click: e.onClose } }) : e._e()], 1)]) }, Zv = [], Qv = { render: qv, staticRenderFns: Zv }, Jv = Qv, ef = i(5), tf = G, nf = ef(jv, Jv, tf, null, null), sf = nf.exports, af = sf, rf = i(204); !function (e) { e[e.ENGLISH = 0] = "ENGLISH", e[e.BURMESE = 1] = "BURMESE" }(pv || (pv = {})); var of = function (e) {
                            function t(e, i, n) { var s = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : pv.ENGLISH; it()(this, t); var a = mt()(this, (t.__proto__ || ft()(t)).call(this)); a._wrapper = e, a._pauseFrame = i, a._endFrame = n, a._logoType = s, a._counter = 0, a.onRenderUpdate = function () { a._glRenderer.setUniformFloat("delta", a._counter / Mt.MAX_ANIMATION_FRAMES), a._glRenderer.draw() }, a.createCanvas(); var r = [St.TITLESCREEN_EN_MASK, St.TITLESCREEN_BU_MASK, St.TITLESCREEN_BU_IMAGE]; return a._images = Ut.getImages(r), a.initRenderer(), a } return At()(t, e), st()(t, [{
                                   key: "startAnimation", value: function () {
                                          var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0], t = this, i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2]; e && (this._counter = 0);
                                          // set EndFrame for shortestAnimation
                                          var s = this._endFrame; !e && n && this._counter < this._pauseFrame && (s = 0); var a = Math.abs((e ? this._pauseFrame : s) - this._counter); return new ye.a(function (n) { Ee.TweenMax.to(t, a / 30, { delay: i, _counter: e ? t._pauseFrame : s, roundProps: "_counter", ease: Ee.Linear.easeNone, onUpdate: t.onRenderUpdate, onComplete: function () { return n() } }) })
                                   }
                            }, { key: "createCanvas", value: function () { this._textCanvasElement = document.createElement("canvas"), this._textCanvasElement.width = this._wrapper.offsetWidth * t._TEXT_SIZE_MULTIPLIER, this._textCanvasElement.height = this._wrapper.offsetHeight * t._TEXT_SIZE_MULTIPLIER, this._textCtx = this._textCanvasElement.getContext("2d") } }, { key: "initRenderer", value: function () { this._glRenderer = Mt.createTemporary(this._wrapper, rf, !1), this._logoType === pv.ENGLISH ? (this.getCanvasContent(), this._glRenderer.addImage(this._textCanvasElement, 0), this._glRenderer.addImage(this._images[0], 1)) : (this._glRenderer.addImage(this._images[2], 0), this._glRenderer.addImage(this._images[1], 1)), this._glRenderer.play() } }, { key: "getCanvasContent", value: function () { var e = this._wrapper.offsetWidth * t._TEXT_SIZE_MULTIPLIER, i = this._wrapper.offsetHeight * t._TEXT_SIZE_MULTIPLIER; this._textCtx.clearRect(0, 0, e, i), this._textCtx.textAlign = "center", this._textCtx.fillStyle = "white", this._textCtx.font = 182 * t._TEXT_SIZE_MULTIPLIER + "px BRUX", this._textCtx.fillText("BAGAN", e / 2, 230 * t._TEXT_SIZE_MULTIPLIER) } }, { key: "dispose", value: function () { Ee.TweenMax.killTweensOf(this), this._glRenderer && (Mt.releaseTemporary(this._glRenderer), this._glRenderer = null), Et()(t.prototype.__proto__ || ft()(t.prototype), "dispose", this).call(this) } }]), t
                     }(Rt.a), lf = of; of._TEXT_SIZE_MULTIPLIER = 1.5;
                     // CONCATENATED MODULE: ./src/component/intro/IntroLogo/IntroLogoAnimation.ts
                     var hf = function () {
                            function e(t, i) {
                                   it()(this, e),
                                   // TweenLite.set(this._googleLogo, { y: -15, autoAlpha: 0 });
                                   this._googleLogo = t, this._subtitle = i, this._subtitle && Ee.TweenLite.set(this._subtitle, { autoAlpha: 0 })
                            } return st()(e, [{
                                   key: "showLogo", value: function () {
                                          var e = new Ee.TimelineLite;
                                          // tl.to(this._googleLogo, 1, { y: 0, ease: Expo.easeOut });
                                          // tl.to(
                                          //   this._googleLogo,
                                          //   1,
                                          //   { autoAlpha: 1, ease: Linear.easeNone, clearProps: 'autoAlpha,y' },
                                          //   '-=1',
                                          // );
                                          this._subtitle && e.to(this._subtitle, 1, { autoAlpha: 1, ease: Ee.Linear.easeNone, clearProps: "autoAlpha" },
                                                 // '-=0.2',
                                                 "+=0.5")
                                   }
                            }, { key: "hideLogo", value: function () { Ee.TweenLite.to([this._googleLogo, this._subtitle], 1, { autoAlpha: 0, ease: Ee.Linear.easeNone }) } }]), e
                     }(), uf = hf, cf = {
                            name: "IntroLogo", data: function () { return { isTransitionedOut: !1 } }, mounted: function () {
                                   this.previousRenderer = -1, this.currentRenderer = 0,
                                   // this.animation = new IntroLogoAnimation(this.$refs.google.$el, this.$refs.subtitle);
                                   this.animation = new uf(this.$refs.google.$el), this.renderers = [], this.showGoogleLogo()
                            }, methods: { init: function () { this.renderers.push(new lf(this.$refs.canvasEn, 55, 91)), this.renderers.push(new lf(this.$refs.canvasBurmese, 77, 122, pv.BURMESE)) }, transitionIn: function () { this.animation.showLogo(), this.startAnimation() }, transitionOut: function () { var e = this; return this.animation.hideLogo(), this.hideAnimation().then(function () { e.isTransitionedOut = !0 }) }, showGoogleLogo: function () { Ee.TweenLite.fromTo(this.$refs.google.$el, .5, { alpha: 0 }, { alpha: 1, delay: .5, ease: Ee.Linear.easeNone }) }, startAnimation: function () { if (!this.isAnimationStopped) { this.previousRenderer > -1 && this.renderers[this.previousRenderer].startAnimation(!1); var e = this.previousRenderer > -1 ? this.getCurrentRenderDelay() : 0; this.renderers[this.currentRenderer].startAnimation(!0, e).then(this.onAnimationEnd) } }, hideAnimation: function () { return this.animationEndTimeout && clearTimeout(this.animationEndTimeout), this.isAnimationStopped = !0, this.renderers[this.currentRenderer].startAnimation(!1, 0, !0) }, startNextAnimation: function () { this.previousRenderer = this.currentRenderer, this.currentRenderer = (this.currentRenderer + 1) % this.renderers.length, this.startAnimation() }, onAnimationEnd: function () { this.animationEndTimeout = setTimeout(this.startNextAnimation, 2e3) }, getCurrentRenderDelay: function () { return 1 === this.currentRenderer ? .3 : .8 } }, beforeDestroy: function () { this.animationEndTimeout && clearTimeout(this.animationEndTimeout), this.isAnimationStopped = !0, this.renderers.forEach(function (e) { return e.dispose() }), this.renderers.length = 0, this.renderers = null }
                     }, df = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("article", { class: [e.$style.wrapper, e.isTransitionedOut ? "no-pointer-events" : null] }, [i("Icon", { ref: "google", class: e.$style.googleLogo, attrs: { name: "google-ac" } }), e._v(" "), i("div", { class: e.$style.logoWrapper }, [i("div", { ref: "canvasEn", class: e.$style.canvas }), e._v(" "), i("div", { ref: "canvasBurmese", class: [e.$style.canvas, e.$style.burmese] })])], 1) }, _f = [], pf = { render: df, staticRenderFns: _f }, vf = pf, ff = i(5), gf = $, mf = ff(cf, vf, gf, null, null), yf = mf.exports, Ef = yf, Tf = { name: "IntroContent", data: function () { return { isTransitionedOut: !1 } }, methods: { transitionIn: function () { return this.$refs.startButton.transitionIn() }, transitionOut: function () { var e = this; return this.$refs.startButton.transitionOut().then(function () { e.isTransitionedOut = !0 }) }, handleStartClick: function () { this.$emit("startClick") } } }, Af = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("article", { class: [e.$style.wrapper, e.isTransitionedOut ? "no-pointer-events" : null] }, [i("MainButton", { ref: "startButton", attrs: { label: "Start Experience" }, on: { click: e.handleStartClick } })], 1) }, bf = [], Rf = { render: Af, staticRenderFns: bf }, wf = Rf, If = i(5), Pf = z, Lf = If(Tf, wf, Pf, null, null), kf = Lf.exports, Cf = kf, Mf = { name: "IntroCredits", mounted: function () { Ee.TweenLite.set(this.$refs.wrapper, { autoAlpha: 0, y: 40 }) }, methods: { transitionIn: function () { var e = this; return new ye.a(function (t) { Ee.TweenLite.to(e.$refs.wrapper, 1, { autoAlpha: 1, y: 0, ease: Ee.Power2.easeOut, onComplete: function () { t() } }) }) }, transitionOut: function () { var e = this; return new ye.a(function (t) { Ee.TweenLite.to(e.$refs.wrapper, .5, { autoAlpha: 0, ease: Ee.Linear.easeNone, onComplete: function () { t() } }) }) } } }, xf = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { ref: "wrapper", class: e.$style.wrapper }, [i("div", { class: [e.$style.creditColumn, e.$style.creditLeft] }, [i("div", { class: e.$style.credit }, [i("h4", { class: ["copy-02", e.$style.creditTitle] }, [e._v("Narrated by")]), e._v(" "), i("p", { class: ["copy-02", e.$style.creditName] }, [e._v("Bettany Hughes")])]), e._v(" "), i("div", { class: e.$style.credit }, [i("h4", { class: ["copy-02", e.$style.creditTitle] }, [e._v("Story by")]), e._v(" "), i("p", { class: ["copy-02", e.$style.creditName] }, [e._v("Alexandra Green")])])]), e._v(" "), i("div", { class: [e.$style.creditColumn, e.$style.creditRight] }, [i("div", { class: e.$style.credit }, [i("h4", { class: ["copy-02", e.$style.creditTitle] }, [e._v("Content created by")]), e._v(" "), i("p", { class: ["copy-02", e.$style.creditName] }, [e._v("CyArk")])])])]) }, Of = [], Sf = { render: xf, staticRenderFns: Of }, Df = Sf, Nf = i(5), Ff = W, Vf = Nf(Mf, Df, Ff, null, null), Bf = Vf.exports, Uf = Bf, Hf = function (e) {
                            function t(e, i, n) { it()(this, t); var s = mt()(this, (t.__proto__ || ft()(t)).call(this)); return s._loadingTitle = e, s._loadingCopy = i, s._copyLoop = n, s.currentIndex = 0, s.interval = null, s.timeline = new Ee.TimelineLite({ paused: !0 }), s.currentIndex = 0, Ee.TweenLite.set([s._loadingTitle, s._loadingCopy], { alpha: 0 }), s.interval = window.setInterval(function () { s.currentIndex = s.currentIndex >= s._copyLoop.length - 1 ? 0 : s.currentIndex + 1, s.swapCopy(s.currentIndex) }, 2e3), s } return At()(t, e), st()(t, [{
                                   key: "showCompleteCopy", value: function (e) {
                                          // clear interval
                                          clearInterval(this.interval),
                                                 // kill swapCopy timeline
                                                 this.timeline && this.timeline.kill(); var t = new Ee.TimelineLite({ paused: !0, onComplete: function () { e && e() } }); t.to([this._loadingTitle, this._loadingCopy], .5, { alpha: 0, ease: Ee.Linear.easeNone }), t.play()
                                   }
                            }, { key: "swapCopy", value: function (e) { var t = this; arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; this.timeline = new Ee.TimelineLite({ paused: !0 }), this.timeline.to(this._loadingCopy, .5, { autoAlpha: 0, ease: Ee.Linear.easeNone }, "+=0"), this.timeline.add(function () { t.pushCopy(t._copyLoop[e]) }, "+=0"), this.timeline.to(this._loadingCopy, .5, { autoAlpha: 1, ease: Ee.Linear.easeNone }, "+=0"), this.timeline.play() } }, { key: "pushCopy", value: function (e) { this._loadingCopy.innerText = e } }, { key: "dispose", value: function () { Et()(t.prototype.__proto__ || ft()(t.prototype), "dispose", this).call(this) } }]), t
                     }(Rt.a), Gf = Hf, $f = {
                            name: "LoaderBar", mounted: function () { this.isFirstChange = !0, this.animationsRunning = 0, this.currentPercentage = 0, this.fakeLoaderPercentage = 0, this.lastValue = 0, this.currentValue = 0, this.targetValue = 0, this.animation = new Gf(this.$refs.loadingTitle, this.$refs.loadingCopy, this.copy), this.onLoaderRendered() }, data: function () { return { copy: ["Loading Photogrammetric data", "Loading LiDAR scans", "Loading GIS data"], characterAmount: 3, percentageValues: [null, null, null], percentage: 0, bindedPercentage: "00", showBarProgress: 0, showCharacters: !0, contentBarDirection: zt.CENTER, isTransitionedOut: !1 } }, computed: _t()({}, Object(pt.b)("application", ["totalLoadingPercentage"])), methods: {
                                   onLoaderRendered: function () {
                                          Ee.TweenLite.ticker.addEventListener("tick", this.tick),
                                          // Minimum preloader show time
                                          Ee.TweenLite.to(this, this.$config.getVariable(this.VariableNames.MINIMUM_LOAD_DURATION), { fakeLoaderPercentage: 1, ease: Ee.Linear.easeNone, onUpdate: this.handleChange })
                                   }, handleChange: function () { var e = Math.min(this.totalLoadingPercentage, this.fakeLoaderPercentage); this.currentPercentage = 100 * e, this.targetValue = e, this.checkProgress() }, checkProgress: function () { var e = Math.max(0, Math.round(this.currentPercentage)); this.setCurrentPercentageValues(e), this.percentage = e, this.bindedPercentage = e < 10 ? "0" + e : "" + e, 100 === this.currentPercentage && this.handleProgressEnd() }, handleProgressEnd: function () { var e = this; this.animation.showCompleteCopy(function () { Ee.TweenLite.ticker.removeEventListener("tick", e.tick), e.showCharacters = !1, e.$emit("loadComplete") }) }, tick: function () { this.currentValue = K(this.currentValue, this.targetValue), this.draw() }, draw: function () { this.showBarProgress = this.currentValue, this.lastValue !== this.currentValue && (this.$emit("updateValue", this.currentValue), this.lastValue = this.currentValue) }, drawTransitionOut: function () { this.showBarProgress = this.currentPercentage / 100 }, setCurrentPercentageValues: function (e) { e = vr()(e, 2, "0"), this.animationsRunning = e.length, this.percentageValues = this.percentageValues.map(function (t, i) { var n = e.substr(i, 1); return n.length ? parseInt(n, 10) : null }) },
                                   // onCharacterAnimationComplete() {
                                   //   this.animationsRunning = Math.max(0, this.animationsRunning - 1);
                                   //   if (this.animationsRunning === 0) {
                                   //     if (this.percentage === 100) {
                                   //       TweenLite.ticker.removeEventListener('tick', this.tick);
                                   //       this.showCharacters = false;
                                   //       this.$emit('loadComplete');
                                   //     } else if (this.currentPercentage !== this.percentage) {
                                   //       this.handleChangeEnd();
                                   //     }
                                   //   }
                                   // },
                                   transitionIn: function () { Ee.TweenLite.fromTo([this.$refs.loadingTitle, this.$refs.loadingCopy], 1, { autoAlpha: 0 }, { autoAlpha: 1, ease: Ee.Linear.easeNone }) }, transitionOut: function () { var e = this; return new ye.a(function (t) { e.contentBarDirection = zt.CENTER, e.$nextTick(function () { Ee.TweenLite.to(e, 1, { currentPercentage: 0, ease: Ee.Power2.easeOut, onUpdate: e.drawTransitionOut, onComplete: function () { e.isTransitionedOut = !0, t() } }) }) }) }
                            }, watch: { totalLoadingPercentage: function () { this.handleChange() } }, beforeDestroy: function () { Ee.TweenLite.ticker.removeEventListener("tick", this.tick) }, components: {
                                   // Character,
                                   ContentBar: Ai
                            }
                     }, zf = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: [e.$style.loader, e.isTransitionedOut ? "no-pointer-events" : null] }, [i("ContentBar", { ref: "contentBar", class: e.$style.canvas, attrs: { progress: e.showBarProgress, direction: e.contentBarDirection } }), e._v(" "), e.showCharacters ? i("span", { ref: "loadingCopy", class: ["copy-01", e.$style.loadingCopy] }, [e._v(e._s(e.copy[0]))]) : e._e(), e._v(" "), e.showCharacters ? i("div", { ref: "loadingTitle", class: e.$style.percentage }, [i("h1", { class: e.$style.loadingTitle }, e._l(e.bindedPercentage.length, function (t) { return i("span", [e._v(e._s(e.bindedPercentage[t - 1]))]) }))]) : e._e()], 1) }, Wf = [], Kf = { render: zf, staticRenderFns: Wf }, Yf = Kf, Xf = i(5), jf = Y, qf = Xf($f, Yf, jf, null, null), Zf = qf.exports, Qf = Zf, Jf = i(206), eg = function (e) {
                            function t(e, i, n, s) { it()(this, t); var a = mt()(this, (t.__proto__ || ft()(t)).call(this)); return a._canvasBack = e, a._canvasFront = i, a._wrapper = n, a._counter = 0, a._renderers = [], a._images = Ut.getImages([St.HOME_BACK, St.HOME_FRONT, St.PRELOADER_MASK]), a._counter = 0, a.setCanvasProperties(), a.createRenderers().then(function () { s && s() }), a._debouncedResize = Ps()(a.handleResize.bind(a), 150), window.addEventListener("resize", a._debouncedResize), a.handleResize(), a } return At()(t, e), st()(t, [{ key: "handleRenderUpdate", value: function () { var e = this; this._renderers.forEach(function (t) { t.setUniformFloat("delta", e._counter / Mt.MAX_ANIMATION_FRAMES), t.draw() }) } }, {
                                   key: "setCanvasProperties", value: function () {
                                          this._canvasBack.width = t._CANVAS_WIDTH, this._canvasBack.height = t._CANVAS_HEIGHT;
                                          // make foreground retina
                                          var e = window.devicePixelRatio, i = t._CANVAS_WIDTH / t._CANVAS_HEIGHT; this._canvasFront.width = window.innerWidth * e, this._canvasFront.height = window.innerWidth / i * e, this._canvasFront.style.width = this._canvasFront.width + "px", this._canvasFront.style.height = this._canvasFront.height + "px"
                                   }
                            }, { key: "createRenderers", value: function () { var e = this; return [this._canvasBack, this._canvasFront].forEach(function (t, i) { var n = Mt.createTemporary(t, Jf, !1); n.addImage(e._images[i], 0), n.addImage(e._images[2], 1), n.play(), e._renderers.push(n) }), ye.a.resolve() } }, { key: "handleResize", value: function () { var e = [0, 0, this._canvasBack.width, this._canvasBack.height], t = [0, 0, this._wrapper.offsetWidth, this._wrapper.offsetHeight], i = mo()(e, t, "cover"); Ee.TweenLite.set([this._canvasBack, this._canvasFront], { width: i[2], height: i[3] }) } }, { key: "dispose", value: function () { Ee.TweenLite.killTweensOf(this), window.removeEventListener("resize", this._debouncedResize), this._debouncedResize = null, this._renderers.forEach(function (e) { Mt.releaseTemporary(e), e = null }), this._renderers.length = 0, this._renderers = null, Et()(t.prototype.__proto__ || ft()(t.prototype), "dispose", this).call(this) } }, { key: "counter", set: function (e) { var t = Ut.getImageData(St.PRELOADER_MASK).totalFrames; this._counter = Math.round(t * e), this.handleRenderUpdate() } }, { key: "backImage", set: function (e) { this._renderers[0] && (this._renderers[0].addImage(e, 0), this._renderers[0].draw()) } }]), t
                     }(Rt.a), tg = eg; eg._CANVAS_WIDTH = 1440, eg._CANVAS_HEIGHT = 880;
                     // CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/eslint-loader!./src/component/SitePreloader/SitePreloader.js
                     /* harmony default export */
                     var ig = {
                            name: "SitePreloader", data: function () { return { isReady: !1, isVideoTransitionOut: !1, isLoadAnimationComplete: !1, isIntroVideo: !1, hasIntroVideo: !1, hasHeadphoneMessage: !0, hasWebGLMessage: !0, videoUrl: "https://storage.googleapis.com/gweb-arts-exp-bagan.appspot.com/video/intro" + Go.getExtension(), videoCloudsUrl: this.$versionRoot + "video/preloader-video" + Go.getExtension(), hasSplashAnimation: !0 } }, computed: _t()({}, Object(pt.b)("application", ["allImagesLoaded"])), mounted: function () {
                                   var e = this; this.onMount(), this.initCanvases(function () { if (e.rendererInitialised = !0, Ee.TweenLite.set([e.$refs.headphone, e.$refs.webgl], { autoAlpha: 0 }), e.hasSplashAnimation) { var t = { p: 0 }; Ee.TweenLite.to(t, 2, { p: 1, delay: .5, ease: Ee.Power2.easeInOut, onUpdate: function () { e.renderer.counter = t.p }, onComplete: function () { e.$nextTick(e.onReady) } }) } else e.$nextTick(e.onReady) }), this.currentMouseX = 0, this.currentMouseY = 0, this.targetMouseX = 0, this.targetMouseY = 0,
                                          // document.body.addEventListener('mousemove', this.handleMouseMove);
                                          this.$refs.video && (this.$refs.video.addEventListener("play", this.handleVideoPlay), this.$refs.video.addEventListener("pause", this.handleVideoPause))
                            }, methods: {
                                   initCanvases: function (e) { this.renderer = new tg(this.$refs.canvasBack, this.$refs.canvasFront, this.$el, e) }, onMount: function () { var e = this; this.isReady = !0, this.$nextTick(function () { Ee.TweenLite.delayedCall(1, function () { e.$refs.bar.transitionIn(), Ee.TweenMax.staggerFromTo([e.$refs.headphone, e.$refs.webgl], 1, { autoAlpha: 0, y: 25 }, { autoAlpha: 1, y: 0, ease: Ee.Power2.easeOut, clearProps: "autoAlpha, y" }, .1) }) }) }, onReady: function () {
                                          // TweenLite.ticker.addEventListener('tick', this.tick);
                                          this.renderer && (this.renderer.counter = 1), this.isReady = !0, this.$emit("ready")
                                   }, handleMouseMove: function (e) { this.targetMouseX = e.pageX / (window.innerWidth / 2) - 1, this.targetMouseY = e.pageY / (window.innerHeight / 2) - 1 }, handleVideoPlay: function () { this.isVideoPlaying = !0 }, handleVideoPause: function () { this.isVideoPlaying = !1 }, tick: function () { this.isVideoPlaying && this.renderer && (this.renderer.backImage = this.$refs.video) }, handleLoaderChange: function () { }, handleLoaderComplete: function () { var e = this; this.isLoadAnimationComplete = !0, this.hasIntroVideo = !0, this.$emit("complete"), this.$route.name === this.PageNames.HOME ? (this.hideMessagesCopy().then(function () { e.hasHeadphoneMessage = !1, e.hasWebGLMessage = !1 }), this.$refs.introLogo.transitionIn(), this.$refs.introContent.transitionIn(), this.$refs.introCredits.transitionIn()) : this.$store.commit(Di.SET_PRELOADER_COMPLETE, !0) }, handleStartClick: function () {
                                          var e = this; ye.a.all([this.$refs.introLogo.transitionOut(), this.$refs.introContent.transitionOut(), this.$refs.introCredits.transitionOut(), this.$refs.bar.transitionOut()]).then(function () {
                                                 e.$refs.introVideo.init(), setTimeout(function () {
                                                        e.$refs.introVideo.transitionIn(), setTimeout(function () {
                                                               // TweenLite.ticker.removeEventListener('tick', this.tick);
                                                               e.isVideoPlaying && e.$refs.video && e.$refs.video.pause(), e.isIntroVideo = !0, e.$store.commit(Di.SET_WEBGL_FLOW_LOCATION, { location: Mi.INTRO, type: xi.INTRO_EFFECT })
                                                        }, 200)
                                                 }, 600)
                                          })
                                   }, handleIntroVideoComplete: function () { this.$store.commit(Di.SET_PRELOADER_COMPLETE, !0) }, handleVideoTransitionOut: function () {
                                          this.isVideoTransitionOut = !0,
                                          // TweenLite.ticker.removeEventListener('tick', this.tick);
                                          this.renderer && (this.renderer.dispose(), this.renderer = null)
                                   }, hideMessagesCopy: function () { var e = this; return new ye.a(function (t) { Ee.TweenLite.to([e.$refs.headphone, e.$refs.webgl], .25, { autoAlpha: 0, ease: Ee.Linear.easeNone, onComplete: function () { return t() } }) }) }
                            }, watch: { allImagesLoaded: function (e) { e && this.$refs.introLogo.init() } }, components: { IntroLogo: Ef, IntroContent: Cf, IntroVideo: Vc, IntroCredits: Uf, LoaderBar: Qf }, beforeDestroy: function () {
                                   // TweenLite.ticker.removeEventListener('tick', this.tick);
                                   this.renderer && (this.renderer.dispose(), this.renderer = null)
                            }
                     }, ng = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: [e.$style.wrapper, e.isIntroVideo ? e.$style.isIntroVideo : null] }, [e.isVideoTransitionOut ? e._e() : i("div", { ref: "canvasBack", class: e.$style.canvas }), e._v(" "), e.hasIntroVideo ? i("IntroVideo", { ref: "introVideo", attrs: { videoUrl: e.videoUrl, location: "intro", isPreloaderIntroVideo: !0 }, on: { transitionOut: e.handleVideoTransitionOut, complete: e.handleIntroVideoComplete } }) : e._e(), e._v(" "), e.isReady ? i("IntroLogo", { ref: "introLogo" }) : e._e(), e._v(" "), !e.isVideoTransitionOut && e.isReady ? i("LoaderBar", { ref: "bar", on: { loadComplete: e.handleLoaderComplete } }) : e._e(), e._v(" "), e.isVideoTransitionOut ? e._e() : i("div", { ref: "canvasFront", class: e.$style.canvas }), e._v(" "), e.hasHeadphoneMessage ? i("div", { ref: "headphone", class: e.$style.headphoneCopy }, [i("span", { class: e.$style.headphoneIcon }, [i("Icon", { attrs: { name: "headphone" } }), e._v(" "), i("span", { staticClass: "u-pulse" })], 1), e._v(" "), i("p", { staticClass: "copy-01" }, [e._v("Put on your headphones for the best experience")])]) : e._e(), e._v(" "), e.hasWebGLMessage ? i("div", { ref: "webgl", class: e.$style.webglCopy }, [i("p", { staticClass: "copy-01" }, [e._v("Lab Experiment requires WebGL")])]) : e._e(), e._v(" "), e.isVideoTransitionOut ? e._e() : i("IntroContent", { ref: "introContent", on: { startClick: e.handleStartClick } }), e._v(" "), e.isVideoTransitionOut ? e._e() : i("IntroCredits", { ref: "introCredits" })], 1) }, sg = [], ag = { render: ng, staticRenderFns: sg }, rg = ag, og = i(5), lg = X, hg = og(ig, rg, lg, null, null), ug = hg.exports, cg = ug, dg = { name: "QualitySelectorButton", props: { text: ne.a.string.isRequired, value: ne.a.oneOf([Li.HIGH, Li.MEDIUM, Li.LOW]) }, methods: { onClick: function () { this.$emit("click", this.value) } } }, _g = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("button", { class: [e.$style.button, "copy-03"], on: { click: e.onClick } }, [i("span", { class: e.$style.label }, [e._v(e._s(e.text))])]) }, pg = [], vg = { render: _g, staticRenderFns: pg }, fg = vg, gg = i(5), mg = j, yg = gg(dg, fg, mg, null, null), Eg = yg.exports, Tg = Eg, Ag = function () {
                            function e() { it()(this, e) } return st()(e, null, [{
                                   key: "closest",/**
           * Checks if element is within another element
           * @param el element to check
           * @param closestEl parent element to check against
           * @returns {boolean}
           * @constructor
           */
                                   value: function (e, t) { for (; e !== t;)if (!(e = e.parentNode)) return !1; return !0 }
                            }, { key: "closestSelect", value: function (e, t) { for (var i = e; i && i.classList && !i.classList.contains(t);) { if ((i = i.parentNode) && i.classList && i.classList.contains(t)) return i; if (!i) return null } return null } }]), e
                     }(), bg = Ag, Rg = { name: "QualitySelector", data: function () { return { isOpen: !1, qualityItems: [{ value: Li.HIGH, label: "High" }, { value: Li.MEDIUM, label: "Medium" }, { value: Li.LOW, label: "Low" }] } }, computed: _t()({}, Object(pt.c)("application", ["webglQualityLevel"]), { currentQualityLabel: function () { var e = this, t = this.qualityItems.find(function (t) { return t.value === e.webglQualityLevel }); return t ? t.label : null } }), methods: { onToggleClick: function () { this.isOpen = !this.isOpen }, show: function () { var e = this; setTimeout(function () { window.addEventListener("click", e.onWindowClick) }, 0) }, hide: function () { window.removeEventListener("click", this.onWindowClick) }, onWindowClick: function (e) { bg.closest(e.target, this.$el) || (this.isOpen = !1) }, onButtonClick: function (e) { this.$store.commit(Di.SET_WEBGL_QUALITY_LEVEL, e), this.isOpen = !1 } }, watch: { isOpen: function (e) { e ? this.show() : this.hide() } }, components: { QualitySelectorButton: Tg } }, wg = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { class: e.$style.selector }, [i("button", { class: [e.$style.toggle, "copy-03"], on: { click: e.onToggleClick } }, [e._v("\n\t\tQuality "), i("strong", [e._v(e._s(e.currentQualityLabel))])]), e._v(" "), i("div", { class: [e.$style.options, e.isOpen ? e.$style.isOpen : null] }, [i("ul", { class: e.$style.list }, e._l(e.qualityItems, function (t) { return i("li", { key: t.value }, [i("QualitySelectorButton", { ref: "button", refInFor: !0, attrs: { text: t.label, value: t.value }, on: { click: e.onButtonClick } })], 1) }))])]) }, Ig = [], Pg = { render: wg, staticRenderFns: Ig }, Lg = Pg, kg = i(5), Cg = q, Mg = kg(Rg, Lg, Cg, null, null), xg = Mg.exports, Og = xg, Sg = { name: "FooterNavigation", computed: _t()({}, Object(pt.c)("application", ["volume", "isWebVREnabled", "isMapOverlayVisible", "hasMapOverlay", "isPreloaderComplete", "webglFlowLocation"]), Object(pt.b)("application", ["isWebVRButtonVisible"]), { isVRButtonAvailable: function () { return this.isWebVRButtonVisible && this.$webgl.isVRSupported() && this.webglFlowLocation !== Mi.FUTURE }, isMapButtonAvailable: function () { return this.isPreloaderComplete && this.hasMapOverlay } }), mounted: function () { Ee.TweenLite.set(this.$el, { y: this.$el.offsetHeight + 10 }) }, methods: { onLogoClick: function () { this.$router.push({ name: this.PageNames.HOME }) }, onVolumeClick: function () { this.$store.commit(Di.UPDATE_VOLUME, 1 - this.volume) }, onWebVRToggleClick: function () { this.$store.commit(Di.SET_EXPERIENCE_UI_VISIBILITY, this.isWebVREnabled), this.$store.commit(Di.SET_WEBVR_ENABLED, !this.isWebVREnabled) }, onMapClick: function () { this.$store.commit(Di.SET_MAP_OVERLAY_VISIBILITY, !this.isMapOverlayVisible) }, transitionIn: function () { var e = this; return new ye.a(function (t) { Ee.TweenLite.to(e.$el, 2, { y: 0, ease: Ee.Expo.easeOut, delay: .1, onComplete: function () { return t() } }) }) } }, components: { QualitySelector: Og } }, Dg = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("footer", { class: e.$style.footer }, [i("a", { class: e.$style.logoButton, attrs: { href: e.$config.getURL(e.URLNames.GOOGLE_AC), target: "_blank" } }, [i("Icon", { attrs: { name: "google-ac" } })], 1), e._v(" "), i("ul", { class: e.$style.footerNav }, [i("li", [i("a", { class: ["copy-03", e.$style.privacyTerms], attrs: { href: e.$config.getURL(e.URLNames.PRIVACY), target: "_blank", alt: "Privacy & Terms" } }, [e._v("Privacy & Terms")])]), e._v(" "), e.isVRButtonAvailable ? i("li", { class: e.$style.vrItem }, [i("a", { class: ["copy-03", e.$style.vrButton], on: { click: e.onWebVRToggleClick } }, [e._v("\n\t\t\t\t" + e._s(e.isWebVREnabled ? "Disable" : "Enable") + " WebVR\n\t\t\t\t"), i("Icon", { class: e.$style.vrIcon, attrs: { name: "cardboard" } })], 1)]) : e._e(), e._v(" "), i("li", { class: e.$style.qualityItem }, [i("QualitySelector", { ref: "quality" })], 1), e._v(" "), i("li", [i("button", { class: e.$style.footerButton, on: { click: e.onVolumeClick } }, [i("Icon", { class: [e.$style.soundIcon, e.volume > 0 ? e.$style.hasVolume : null], attrs: { name: "sound" } })], 1)]), e._v(" "), e.isMapButtonAvailable ? i("li", [i("a", { class: ["copy-03", e.$style.privacyTerms], on: { click: e.onMapClick } }, [i("button", { class: e.$style.footerButton }, [i("Icon", { class: e.$style.mapIcon, attrs: { name: "map" } })], 1), e._v("\n\t\t\t\tMap\n\t\t\t")])]) : e._e()])]) }, Ng = [], Fg = { render: Dg, staticRenderFns: Ng }, Vg = Fg, Bg = i(5), Ug = Z, Hg = Bg(Sg, Vg, Ug, null, null), Gg = Hg.exports, $g = Gg, zg = { mobile: { full: ["chrome", "safari", "webos", "ios", "android"], downgraded: [""] }, desktop: { full: ["chrome", "chromium", "firefox"], downgraded: ["safari", "msedge"] } }, Wg = function () { var e = lt.a.mobile || lt.a.tablet ? "mobile" : "desktop", t = !1, i = !1; return t = !!zg[e].full.find(function (e) { return void 0 !== lt.a[e] }), i = !!zg[e].downgraded.find(function (e) { return void 0 !== lt.a[e] }), { full: t, downgraded: i, none: !t && !i } }(), Kg = Wg, Yg = {
                            name: "App", data: function () { return { showLoadingMobile: !1, showMainCanvas: !1, forceWebVRClose: !1, hasPreloader: !ct && this.$route.name !== this.PageNames.WEBGL, isSupported: Kg, byPassSupport: !1 } }, mounted: function () { this.isMobileVersion && this.loadAll(), this.$route.name === this.PageNames.END && this.$router.replace({ name: this.PageNames.HOME }) }, computed: _t()({}, Object(pt.c)("application", ["isPreloaderComplete", "isWebglPlaying", "isWebVREnabled", "isWebglOverlaySize", "webglQualityLevel", "webglLoadingPercentage", "webglFlowLocation", "volume"])), methods: {
                                   onPreloaderReady: function () { this.isSupported.none || this.loadAll() }, loadAll: function () { var e = this; this.isMobileVersion ? (document.documentElement.classList.add("is-mobile-version"), window.isMobile = !0) : (this.hasPreloader ? (this.loadWebGL(), this.loadAudio(), this.$store.dispatch(Di.LOAD_IMAGE_ASSETS)) : ye.a.all([this.loadWebGL(), this.loadAudio()]).then(function () { e.$store.commit(Di.SET_PRELOADER_COMPLETE, !0) }), this.$router.beforeEach(function (t, i, n) { e.$store.commit(Di.SET_WEBGL_PLAYSTATE, !!t.meta.webglEnabled), n() }), document.documentElement.classList.add("is-desktop-version")) }, loadAudio: function () { return Ze("audioManager").load(this.handleLoadAudioUpdate) }, loadWebGL: function () { return this.$webgl.addEventListener(Nu.LOAD_COMPLETE, this.handleLoadComplete), this.$webgl.addEventListener(Nu.LOAD_PROGRESS, this.handleLoadWebGLUpdate), this.$webgl.init(this.$refs.canvas) }, handleLoadComplete: function () {
                                          var e = this; this.$webgl.removeEventListener(Nu.LOAD_COMPLETE, this.handleLoadComplete), this.$webgl.removeEventListener(Nu.LOAD_PROGRESS, this.handleLoadWebGLUpdate),
                                                 // if (!this.hasPreloader) {
                                                 this.$webgl.webglInit(),
                                                 // }
                                                 ct ? this.$webgl.addVREvent(i_.ENDED, function () { e.$store.commit(Di.SET_WEBVR_ENABLED, !1) }) : (this.$webgl.addFlowEvent(hp.START, this.onWebglFlowStart), this.$webgl.addFlowEvent(hp.POINTCLOUD_MESH_TRANSITION, this.onWebglPointToMesh), this.startAppAmbient()), this.$store.commit(Di.SET_WEBGL_PLAYSTATE, !!this.$route.meta.webglEnabled), this.mobileGlLoadResolve && this.mobileGlLoadResolve()
                                   }, startAppAmbient: function () { this.$audioManager.play(Yr.BELL_AMBIANCE_LOOP) }, handleLoadWebGLUpdate: function (e) { this.$store.commit(Di.SET_WEBGL_LOADED_PERCENTAGE, e.data.progress) }, handleLoadAudioUpdate: function (e) { this.$store.commit(Di.SET_AUDIO_LOADED_PERCENTAGE, e) }, onPreloaderComplete: function () { this.showMainCanvas = !0, this.$refs.footer.transitionIn() }, setWebglPlayState: function (e) {
                                          // eslint-disable-next-line no-console
                                          // console.log('WEBGL PLAYSTATE:', playing);
                                          e ? this.$webgl.play() : this.$webgl.pause()
                                   }, onWebglFlowStart: function (e) { this.$store.commit(Di.SET_WEBGL_FLOW_LOCATION, e.data) }, onWebglPointToMesh: function () { this.$audioManager.play(Yr.REAL_TEMPLE_LOOP) }, initializeMobileWebGL: function () { var e = this; return this.isPreloaderComplete ? ye.a.resolve() : new ye.a(function (t) { e.mobileGlLoadResolve = t, e.isPreloaderComplete || e.loadWebGL() }) }, setWebVREnabled: function (e) { e ? this.$webgl.enableVR() : this.$webgl.disableVR(), ct && (e ? (this.$router.push({ name: this.$route.name, query: { webvr: "enabled" } }), this.$webgl.pause(!0)) : (this.$router.push({ name: this.$route.name }), this.$webgl.play(!0))) }, handleEnableVrClick: function () {
                                          this.setWebVREnabled(this.isWebVREnabled), this.$store.commit(Di.SET_WEBGL_PLAYSTATE, this.isWebVREnabled),
                                          // this.$refs.enableButton.transitionOut();
                                          this.showLoadingMobile = !1
                                   }, onCloseWebVrClick: function () { var e = this; this.setWebVREnabled(!1), this.$nextTick(function () { e.forceWebVRClose = !0 }) }, onSupportClose: function () { this.byPassSupport = !0 }
                            }, watch: {
                                   $route: function () { ct && this.isWebVREnabled && !this.$route.query.webvr && this.setWebVREnabled(!1) }, isPreloaderComplete: function (e) {
                                          e && (
                                                 // console.log('isPreloaderComplete', complete);
                                                 this.hasPreloader = !1)
                                   }, isWebglPlaying: function (e) { this.setWebglPlayState(e) }, isWebVREnabled: function (e) {
                                          var t = this; ct ? (this.forceWebVRClose = !1, this.initializeMobileWebGL().then(function () {
                                                 e ? (t.$webgl.instantJumpToLocation(t.webglFlowLocation),
                                                        // this.$refs.enableButton.transitionIn();
                                                        t.showLoadingMobile = !0) : t.setWebVREnabled(!1), t.$store.commit(Di.SET_PRELOADER_COMPLETE, !0)
                                          })) : this.setWebVREnabled(e), this.$tracker.push(se.WEBVR, { action: e ? "enable" : "disable", label: this.webglFlowLocation })
                                   }, webglFlowLocation: function (e) {
                                          // eslint-disable-next-line no-console
                                          console.log("Flow: ", e), this.$tracker.push(se.PAGE, { action: "view", label: e.toLowerCase() });/**
       * @value AudioManager
       */
                                          var t = this.$audioManager; switch (e) { case "INTRO": t.play(Yr.BED_LOOP); break; case "PATH_INTRO_TO_AOK": case "PATH_AOK_TO_KMG": case "KMG_OUTSIDE": case "PATH_KMG_TO_EYK": "PATH_INTRO_TO_AOK" === e && t.stop(Yr.WIND_LOOP, 0), t.stop(Yr.INSIDE_TEMPLE_LOOP), t.play(Yr.WIND_LOOP), t.play(Yr.BELL_AMBIANCE_LOOP), "PATH_KMG_TO_EYK" === e && t.play(Yr.BURMESE_LOOP); break; case "EYK_OUTSIDE": t.stop(Yr.INSIDE_TEMPLE_LOOP), t.stop(Yr.BURMESE_LOOP); break; case "EYK_INSIDE": case "AOK_INSIDE": t.stop(Yr.BELL_AMBIANCE_LOOP), t.stop(Yr.WIND_LOOP), t.stop(Yr.BURMESE_LOOP), t.play(Yr.INSIDE_TEMPLE_LOOP), "EYK_INSIDE" === e && t.play(Yr.CONTINUE_BUTTON_LOOP); break; case "PATH_EYK_TO_FUTURE": t.stop(Yr.INSIDE_TEMPLE_LOOP); break; case "FUTURE": t.stop(Yr.BELL_AMBIANCE_LOOP), t.stop(Yr.WIND_LOOP), t.stop(Yr.BURMESE_LOOP) }
                                   }, volume: function (e) { Kv.setVolume(e) }, isWebglOverlaySize: function () { var e = this; this.$webgl.recalculateCanvasSize(), this.$nextTick(function () { return e.$webgl.recalculateCanvasSize() }) }, webglQualityLevel: function (e, t) { this.$webgl.setQualityLevel(e), this.$tracker.push(se.QUALITY, { action: e > t ? "increase" : "decrease", label: Li[t] + " to " + Li[e] }) }
                            }, components: { SupportOverlay: af, SitePreloader: cg, ContentBar: Ai, FooterNavigation: $g }
                     }, Xg = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { staticClass: "app" }, [e.isMobileVersion ? [i("router-view"), e._v(" "), i("div", { ref: "canvas", class: [e.$style.webglCanvas, e.isWebVREnabled ? e.$style.isActive : null] }), e._v(" "), i("div", { class: [e.$style.mobileLoader, (e.webglLoadingPercentage > 0 && e.webglLoadingPercentage < 1 || e.showLoadingMobile) && !e.forceWebVRClose ? e.$style.isVisible : null] }, [i("h3", { ref: "topLogo", class: e.$style.logoGoogle }, [i("Icon", { attrs: { name: "google-ac" } })], 1), e._v(" "), i("div", { class: e.$style.loaderContent }, [i("h1", { class: e.$style.logo }, [i("span", { ref: "logoEn", class: e.$style.logoEn }, [e._v("Bagan")])]), e._v(" "), i("h2", { class: e.$style.subtitle }, [e._v("Explore in WebVR")]), e._v(" "), i("ContentBar", { attrs: { progress: e.webglLoadingPercentage } })], 1), e._v(" "), i("MainButton", { ref: "enableButton", class: [e.$style.enableVrButton, e.isWebVREnabled && e.isPreloaderComplete ? e.$style.isEnabled : null], attrs: { label: "Launch WebVR", icon: "cardboard" }, on: { click: e.handleEnableVrClick } }), e._v(" "), i("CircleButton", { ref: "closeWebVRButton", class: [e.$style.closeVrButton], attrs: { icon: "cross", hasHover: !1 }, on: { click: e.onCloseWebVrClick } })], 1)] : [i("div", { ref: "canvas", class: [e.$style.webglCanvas, e.isWebglOverlaySize ? e.$style.isOverlaySize : null, e.showMainCanvas ? e.$style.isActive : null] }), e._v(" "), e.showMainCanvas ? i("router-view") : e._e(), e._v(" "), e.hasPreloader ? i("SitePreloader", { on: { ready: e.onPreloaderReady, complete: e.onPreloaderComplete } }) : e._e(), e._v(" "), i("FooterNavigation", { ref: "footer" })], e._v(" "), e.isSupported.full || e.byPassSupport ? e._e() : i("support-overlay", { attrs: { support: e.isSupported }, on: { close: e.onSupportClose } })], 2) }, jg = [], qg = { render: Xg, staticRenderFns: jg }, Zg = qg, Qg = i(5), Jg = Q, em = Qg(Yg, Zg, Jg, null, null), tm = em.exports, im = tm;
                     // CONCATENATED MODULE: ./src/bootstrap.js
                     // register filters globally
                     ee()(re).forEach(function (e) { return ae.a.filter(e, re[e]) }),
                            // register directives globally
                            ee()(oe).forEach(function (e) { return ae.a.directive(e, oe[e]) }),
                            // register components globally
                            ee()(He).forEach(function (e) { return ae.a.component(e, He[e]) }), Xv(); var nm = cd(), sm = yd(), am = et(); am.localeEnabled && (ae.a.use(ze.a, { store: sm, router: nm, config: am.config, proxy: kd }), ae.a.initI18nManager()),
                                   // sync router data to store
                                   Object(Fd.sync)(sm, nm);
                     // Init new vue app
                     var rm = new ae.a({ router: nm, store: sm, render: function (e) { return e(im) } });
                     // Mount the app after startUp
                     Nd(sm).then(function () { window.isMounted = !0, rm.$mount("#app") })
              },/***/
       282:/***/
              function (e, t) { },/***/
       283:/***/
              function (e, t) {
                     !function (t) {
                            var i = "Modernizr" in t, n = t.Modernizr;/*! modernizr 3.5.0 (Custom Build) | MIT *
 * https://modernizr.com/download/?-setclasses !*/
                            !function (e, t, i) { function n(e, t) { return typeof e === t } var s = [], a = { _version: "3.5.0", _config: { classPrefix: "", enableClasses: !0, enableJSClass: !0, usePrefixes: !0 }, _q: [], on: function (e, t) { var i = this; setTimeout(function () { t(i[e]) }, 0) }, addTest: function (e, t, i) { s.push({ name: e, fn: t, options: i }) }, addAsyncTest: function (e) { s.push({ name: null, fn: e }) } }, r = function () { }; r.prototype = a, r = new r; var o = [], l = t.documentElement, h = "svg" === l.nodeName.toLowerCase(); (function () { var e, t, i, a, l, h, u; for (var c in s) if (s.hasOwnProperty(c)) { if (e = [], t = s[c], t.name && (e.push(t.name.toLowerCase()), t.options && t.options.aliases && t.options.aliases.length)) for (i = 0; i < t.options.aliases.length; i++)e.push(t.options.aliases[i].toLowerCase()); for (a = n(t.fn, "function") ? t.fn() : t.fn, l = 0; l < e.length; l++)h = e[l], u = h.split("."), 1 === u.length ? r[u[0]] = a : (!r[u[0]] || r[u[0]] instanceof Boolean || (r[u[0]] = new Boolean(r[u[0]])), r[u[0]][u[1]] = a), o.push((a ? "" : "no-") + u.join("-")) } })(), function (e) { var t = l.className, i = r._config.classPrefix || ""; if (h && (t = t.baseVal), r._config.enableJSClass) { var n = new RegExp("(^|\\s)" + i + "no-js(\\s|$)"); t = t.replace(n, "$1" + i + "js$2") } r._config.enableClasses && (t += " " + i + e.join(" " + i), h ? l.className.baseVal = t : l.className = t) }(o), delete a.addTest, delete a.addAsyncTest; for (var u = 0; u < r._q.length; u++)r._q[u](); e.Modernizr = r }(t, document), e.exports = t.Modernizr, i ? t.Modernizr = n : delete t.Modernizr
                     }(window)
              },/***/
       284:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { container: "container-rOsfI30" }
              },/***/
       286:/***/
              function (e, t, i) {
                     function n(e) { return i(s(e)) } function s(e) {
                            var t = a[e]; if (!(t + 1))// check for number or string
                                   throw new Error("Cannot find module '" + e + "'."); return t
                     } var a = { "./arrow-curve.svg": 287, "./arrow-left.svg": 151, "./arrow-right.svg": 152, "./cardboard.svg": 288, "./cross.svg": 153, "./cyark.svg": 289, "./decagon.svg": 154, "./drag.svg": 155, "./eyk.svg": 156, "./google-ac.svg": 157, "./headphone.svg": 158, "./hotspot-compare-building.svg": 159, "./hotspot-compare.svg": 160, "./hotspot-drone.svg": 161, "./hotspot-image-gallery.svg": 162, "./hotspot-image.svg": 163, "./hotspot-inside.svg": 290, "./hotspot-slices.svg": 164, "./hotspot-video-jump.svg": 291, "./hotspot-video.svg": 165, "./map-direction.svg": 166, "./map-path.svg": 167, "./map.svg": 168, "./pano-360.svg": 169, "./path-top.svg": 170, "./play-circle.svg": 171, "./play-pause.svg": 172, "./sound.svg": 173, "./vr.svg": 174 }; n.keys = function () { return Object.keys(a) }, n.resolve = s, e.exports = n, n.id = 286
              },/***/
       287:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 40"><g data-name="Layer 2"><path d="M16 8V0L6 10l10 10v-8A12 12 0 1 1 4 24H0A16 16 0 1 0 16 8z" data-name="Layer 1"></path></g></svg>' },/***/
       288:/***/
              function (e, t) { e.exports = '<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M20.636 6H3.2C2.549 6 2 6.568 2 7.27V17.71c0 .701.548 1.27 1.225 1.27h4.763c.51 0 .948-.325 1.132-.785l1.386-3.467c.233-.585.789-.996 1.438-.996.648 0 1.204.411 1.437.996l1.386 3.467c.184.46.621.784 1.106.784h4.763c.703 0 1.251-.568 1.251-1.269V7.27c0-.7-.548-1.269-1.25-1.269zM7.433 14.774c-1.218 0-2.205-1.022-2.205-2.284 0-1.262.987-2.284 2.205-2.284s2.203 1.022 2.203 2.284c0 1.262-.987 2.284-2.203 2.284zm9.022 0c-1.218 0-2.204-1.022-2.204-2.284 0-1.261.986-2.283 2.204-2.283 1.218 0 2.204 1.022 2.204 2.283 0 1.262-.986 2.283-2.204 2.283z" fill="#000000"></path></g></svg>' },/***/
       289:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 465.05 120.96"><g data-name="Layer 2"><g data-name="Logomark Group"><g fill="#191919"><path d="M457.78 88.43l-17-27.78-8.63 9.24v18.54h-6.74V34.31h6.74V61l24.75-26.64h7.34v.61l-19 20.66L465 87.83v.61zM391.37 88.43S376.61 68 374.95 65.73h-8.55v22.7h-6.66l-.08-54.12h22c8.1 0 15.52 5.6 15.52 15.52a15.85 15.85 0 0 1-14.74 15.67l.68.53 15.21 21.65v.76zM381 40.14h-14.6v19.6h14.68a10 10 0 0 0 9.76-9.84 9.6 9.6 0 0 0-9.84-9.76zM313.67 34.16h-5.53l-21.27 54.27h6.74c1.67-4.16 17-44.2 17-44.2l9.91 25.49-13.18-.09-2.21 5.83 17.65.1 4.84 12.87h6.89zM254.26 88.43h-3.78V67.77c-6.05-10.52-12.56-22-18.62-32.4h4.31l16.27 28.38c5.37-9.46 10.9-18.92 16.27-28.38h4.39l-18.85 32.7zM164 61.87c0-16.43 13.25-27.17 26-27.17 8.7 0 15.29 3.18 21.27 8L209 45.59c-5.45-4.47-11.35-7.27-18.92-7.27-10.9 0-22.25 9.31-22.25 23.54a23 23 0 0 0 22.44 23.54 28.61 28.61 0 0 0 19.45-7.8l2.5 2.8a32.5 32.5 0 0 1-22 8.63A26.71 26.71 0 0 1 164 61.87z"></path></g><path d="M68.25 81.92L79 61.6h18.36l10.84 20.32H68.25z"></path><path d="M115.79 96.16H43.82l35.82-67.52L64.51 0 0 120.96h129.02l-13.23-24.8z"></path></g></g></svg>' },/***/
       290:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 18 20"><image data-name="Vector Smart Object" width="18" height="20" xlink:href="data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAUCAQAAAAqnqXBAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAHdElNRQfiAgINIiGkkk7vAAAAh0lEQVQoz2P8z83gxoAf7GL4r/KfEFBhYfjD8JCASX8Y/zMQBkwYIh0MHRhi/1Fhx///////70AVxaYEQxl2JWjKcClBUYZbCZIyfErgyvArgSpjYeBieMFQyMDAwMAQxWCKFDanGZZBWVzIvluAYsIChAwTAxFgMCpCTk/GDHJIMo8YzsKYAMhjBY1P+b69AAAAAElFTkSuQmCC"></image></svg>' },/***/
       291:/***/
              function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 586.9 536.51"><g data-name="Layer 2"><g data-name="Layer 1"><path d="M.85 272C.52 244.3.23 221.88 0 199.46A44.27 44.27 0 0 1 .8 191a19.33 19.33 0 0 1 11.31-14.75 30.73 30.73 0 0 1 3.76-1.53c14.22-4.45 25.58-13 34.56-24.67 5-6.45 9.56-13.21 13.9-20.1 15.35-24.38 33.12-46.73 54.57-66.05C151 35 188.17 15.67 230.46 6.39A274.31 274.31 0 0 1 268.67.86a312.27 312.27 0 0 1 40.74-.37c38 2.1 74.43 10.73 108.49 28.22a253.54 253.54 0 0 1 71 54.54 316 316 0 0 1 42.83 59.39 53.59 53.59 0 0 0 17 18.62c5.25 3.51 10.93 6.38 16.39 9.58a119.6 119.6 0 0 1 11.28 6.86c7.1 5.29 10.49 12.7 10.43 21.47-.05 7.58-.84 15.15-.86 22.73-.06 19.71.15 39.41.2 59.12v52.66c0 3.5.25 7 0 10.51-.64 9.37-4.93 14.64-14 17.37a66.37 66.37 0 0 0-29 17.57 108.48 108.48 0 0 0-13.42 17.06c-4.47 7-8.61 14.11-13.2 21q-58.25 87.25-160.23 112a267.5 267.5 0 0 1-35.32 5.87 245.81 245.81 0 0 1-41 1c-64.64-4-121.36-27.06-169-71.35a265.29 265.29 0 0 1-51-65.43c-4.67-8.34-9.94-16.23-17.09-22.69a52.47 52.47 0 0 0-19.26-11.12 71.6 71.6 0 0 1-7.31-2.7C7.54 358.82 2.26 352 .77 342.43A74 74 0 0 1 0 330.26c.24-21.18.61-42.35.85-58.26zm40.32-2.92H41c0 6.46.07 12.91 0 19.37-.13 9.17-.48 18.34-.54 27.51-.05 8 3.3 14.26 10.13 18.45a62 62 0 0 0 8.41 4.34c55.71 23.37 113.33 39.4 173.64 45 11.82 1.1 23.67 2.27 35.52 2.44 23.65.34 47.33 1 71-1.08 9.57-.83 19.17-1.48 28.68-2.76 13.54-1.82 27.1-3.73 40.5-6.35 42.1-8.22 82.75-21.25 122.17-38.1a49.57 49.57 0 0 0 9.37-5.41 17.24 17.24 0 0 0 7.29-12.57 108.57 108.57 0 0 0 .27-12.52c-.21-12.45-.68-24.91-.74-37.36-.07-15.4.07-30.81.3-46.21.17-12.1-3.36-18.33-13.82-23.36-.51-.25-1-.47-1.55-.69a614.07 614.07 0 0 0-81.91-28.6 542.19 542.19 0 0 0-56.26-12.31c-10.15-1.61-20.31-3.22-30.5-4.49-8.29-1-16.64-1.68-25-2.26-10.72-.75-21.44-1.57-32.18-1.81a460.38 460.38 0 0 0-49.55 1.14c-12.27 1-24.54 2.11-36.79 3.42-15.06 1.62-29.95 4.34-44.78 7.41a592.64 592.64 0 0 0-119.78 38.78 22.12 22.12 0 0 0-9.17 7.79c-3.77 5.26-4.52 11.25-4.53 17.44q-.04 21.41-.01 42.81zM477 399.89c-60.22 18-120.91 27.6-183.07 27.84S171.08 418.9 110.54 402c1.13 1.63 1.69 2.58 2.39 3.41 7.13 8.35 13.95 17 21.5 24.94a215.27 215.27 0 0 0 64.79 47c25.72 12.11 52.92 18.3 81.2 19.7a221.44 221.44 0 0 0 53.73-3.4c35.46-6.95 68.12-20.57 97.54-41.65 14.17-10.15 26.9-21.83 36.83-36.3a78.06 78.06 0 0 0 8.48-15.81zM112 133.58l.33.72q181.48-52 363.68 0c-.83-1.26-1.16-1.82-1.55-2.34a267.4 267.4 0 0 0-28.16-31.72c-39.9-38.17-87.81-57.17-142.64-59.37-8.46-.34-17 .21-25.45.45a193.42 193.42 0 0 0-28.92 3.38A204.58 204.58 0 0 0 184 68.41c-28.29 16.13-51.37 38.06-71 63.8-.39.43-.65.91-.94 1.37z"></path><path d="M257.74 330.38V194c1.4.72 2.49 1.19 3.49 1.8q40.24 24.7 80.47 49.42l24.59 15.13c.95.58 1.86 1.22 2.81 1.85-1.75 2.03-106.85 66.37-111.36 68.18z"></path></g></g></svg>' },/***/
       292:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { button: "button-uyJ9X_K", "is-inverted": "is-inverted-3tM-WIJ", isInverted: "is-inverted-3tM-WIJ", "is-small": "is-small-2RJJPo6", isSmall: "is-small-2RJJPo6", "is-active": "is-active-19NcOjq", isActive: "is-active-19NcOjq", hasIcon: "hasIcon-Q4XtJy-", label: "label-1Gjwn-W", icon: "icon-2aIOuRR" }
              },/***/
       309:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { button: "button-rN9TRop", "is-active": "is-active-dmTDWSO", isActive: "is-active-dmTDWSO", "has-hover": "has-hover-1Qbf2Ty", hasHover: "has-hover-1Qbf2Ty", "text-label": "text-label-1u4L7RE", textLabel: "text-label-1u4L7RE", "left-align": "left-align-3XZEPMf", leftAlign: "left-align-3XZEPMf", "is-inverted": "is-inverted-RrbgxZw", isInverted: "is-inverted-RrbgxZw", icon: "icon-WIUJRsG", "has-dark-text-label": "has-dark-text-label-1sODKLu", hasDarkTextLabel: "has-dark-text-label-1sODKLu" }
              },/***/
       314:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { onboarding: "onboarding-367OUmc", "is-content-inactive": "is-content-inactive-78r5Kba", isContentInactive: "is-content-inactive-78r5Kba", "intro-content": "intro-content-enMlPug", introContent: "intro-content-enMlPug", "intro-copy": "intro-copy-3BihlQF", introCopy: "intro-copy-3BihlQF", title: "title-25uU5vN", "title-text": "title-text-cIM6KZB", titleText: "title-text-cIM6KZB", bar: "bar-3sLdXDa", introActions: "introActions-Qr89RV8", button: "button-76IsD7j", "close-button": "close-button-1L8JtAW", closeButton: "close-button-1L8JtAW", "previous-button": "previous-button-3DHFEHz", previousButton: "previous-button-3DHFEHz" }
              },/***/
       318:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { title: "title-2scxG_R", canvas: "canvas-k2FQ6b6", copy: "copy-3XWvhZj" }
              },/***/
       345:/***/
              function (e, t) { e.exports = "uniform float delta;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\tuv.y = 1.0 - uv.y;\n\n\tvec4 color = texture(iChannel0, uv).rgba;\n\tfloat colorGrad = texture(iChannel1, uv).r;\n\n\tfragColor = color * (delta >= colorGrad ? 1.0 : 0.0);\n}\n" },/***/
       346:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { instructions: "instructions-21nH0s6", "list-item": "list-item-HLuEg-8", listItem: "list-item-HLuEg-8", icon: "icon-1LsORHy", copy: "copy-2-ZxlU3", "key-line": "key-line-nYx0_8E", keyLine: "key-line-nYx0_8E", key: "key-21Xv2GK", "is-active": "is-active-2lZrbRW", isActive: "is-active-2lZrbRW", left: "left-3BglHbq", right: "right-37glu6z", down: "down-2RvTLE0", up: "up-2B3mKOa", mouse: "mouse-1O_CunO" }
              },/***/
       347:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { "content-bar": "content-bar-22y2sCF", contentBar: "content-bar-22y2sCF", canvas: "canvas-2JMMWou" }
              },/***/
       348:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { "voice-over": "voice-over-1LrdSm3", voiceOver: "voice-over-1LrdSm3", background: "background-3GNGxOd", progress: "progress-btsbEon", "progress-stroke": "progress-stroke-1WQ8VLq", progressStroke: "progress-stroke-1WQ8VLq", controls: "controls-1JO8Esq", "is-playing": "is-playing-_RL1yF0", isPlaying: "is-playing-_RL1yF0" }
              },/***/
       354:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { overlay: "overlay-3bGomWl", "is-cut-section": "is-cut-section-3mh-vAV", isCutSection: "is-cut-section-3mh-vAV", gallery: "gallery-1O-zHw1", "is-open": "is-open-35ZpNrP", isOpen: "is-open-35ZpNrP", "player-wrapper": "player-wrapper-3vLRJnQ", playerWrapper: "player-wrapper-3vLRJnQ", "is-active": "is-active-1FN3aPn", isActive: "is-active-1FN3aPn", player: "player-2GySwl3", content: "content-L5OfPez", header: "header-1zXsOh5", title: "title-3hmAYuI", paginator: "paginator-1GRHq16", navigation: "navigation-1z3YCYs", copy: "copy-uESQjmA", button: "button-tGUC_He", close: "close-2ZzQGig", "navigation-button": "navigation-button-2opH-Mz", navigationButton: "navigation-button-2opH-Mz" }
              },/***/
       355:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { gallery: "gallery-3g-6hWI", item: "item-3AauakK", "active-item": "active-item-2dTJjT8", activeItem: "active-item-2dTJjT8", image: "image-ywkh70P" }
              },/***/
       356:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { compare: "compare-2fEOqgZ", image: "image-33kTDCu", line: "line-12XL53l", dragger: "dragger-uOV65s2", "drag-line": "drag-line-2M3JSRr", dragLine: "drag-line-2M3JSRr", "drag-container": "drag-container-3lYq_PW", dragContainer: "drag-container-3lYq_PW", instructions: "instructions-NhfSuNJ", "is-visible": "is-visible-9XOblWa", isVisible: "is-visible-9XOblWa", knob: "knob-1QmvhOa", "dragger-knob": "dragger-knob-vvg79fI", draggerKnob: "dragger-knob-vvg79fI", "is-dragging": "is-dragging-W0YnVyH", isDragging: "is-dragging-W0YnVyH", "temple-info": "temple-info-3hzvaYu", templeInfo: "temple-info-3hzvaYu", dark: "dark-F_oMEg9", "temple-title": "temple-title-2m6CWbN", templeTitle: "temple-title-2m6CWbN", "bottom-info": "bottom-info-3c0sDuA", bottomInfo: "bottom-info-3c0sDuA", "split-message": "split-message-3NElIGW", splitMessage: "split-message-3NElIGW", description: "description-xFXr95P" }
              },/***/
       357:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { wrapper: "wrapper-2nBU0Jd", lines: "lines-9RnssRI", progress: "progress-tSMnygx", "center-image": "center-image-3TZQ10Q", centerImage: "center-image-3TZQ10Q", button: "button-V5ybSuA", "is-active": "is-active-199gq8q", isActive: "is-active-199gq8q" }
              },/***/
       364:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { hotspot: "hotspot-l0Lr94b", primaryBg: "primaryBg-XTkXzB1", primary: "primary-IGVKwab", label: "label-1jKJefs", "has-order": "has-order-1Bk4kmi", hasOrder: "has-order-1Bk4kmi", order: "order-3mHy0sk", icon: "icon-3ysZSe9", "is-inactive": "is-inactive-1TtUe6S", isInactive: "is-inactive-1TtUe6S", bg: "bg-1TjEmhp" }
              },/***/
       365:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { "temple-info": "temple-info-2IjLLy_", templeInfo: "temple-info-2IjLLy_", dark: "dark-Agc3vbd", "is-visible": "is-visible-15_Zhq1", isVisible: "is-visible-15_Zhq1", templeInfoContent: "templeInfoContent-1Ksxfu9", title: "title-FFKJ4GZ" }
              },/***/
       366:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { map: "map-3WFNMyp", "temple-aok": "temple-aok-3z3kqrA", templeAok: "temple-aok-3z3kqrA", hotspot: "hotspot-2Kcclv_", "camera-hotspot": "camera-hotspot-2GU33yp", cameraHotspot: "camera-hotspot-2GU33yp", direction: "direction-1ulwLVT", "has-order": "has-order-387p_Ju", hasOrder: "has-order-387p_Ju", order: "order-uitdaji" }
              },/***/
       367:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { wrapper: "wrapper-2y_2cVH", "is-visible": "is-visible-2cKCiX8", isVisible: "is-visible-2cKCiX8", instruction: "instruction-3FvzuYy", icon: "icon-7gANZbO", "key-line": "key-line-3uXPNZq", keyLine: "key-line-3uXPNZq", key: "key-2w04BWQ", "is-active": "is-active-G5BWfNH", isActive: "is-active-G5BWfNH", left: "left-1sGavvS", right: "right-4JY9ZMP", down: "down-2h4AqXn", up: "up-1apAWZw" }
              },/***/
       368:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { "map-overlay": "map-overlay-2bQakex", mapOverlay: "map-overlay-2bQakex", "is-open": "is-open-1zASNxF", isOpen: "is-open-1zASNxF", "map-ratio": "map-ratio-3GjRtml", mapRatio: "map-ratio-3GjRtml", "path-svg": "path-svg-1rD1ruI", pathSvg: "path-svg-1rD1ruI", "progress-path": "progress-path-3Dul7nq", progressPath: "progress-path-3Dul7nq", hotspot: "hotspot-3k1ngTw", "hotspot-dot": "hotspot-dot-sB_Zia3", hotspotDot: "hotspot-dot-sB_Zia3", "hotspot-icon": "hotspot-icon-1y1pPNY", hotspotIcon: "hotspot-icon-1y1pPNY", "hotspot-icon-dot": "hotspot-icon-dot-1Sa65h2", hotspotIconDot: "hotspot-icon-dot-1Sa65h2", "hotspot-label": "hotspot-label-pn6800S", hotspotLabel: "hotspot-label-pn6800S", progress: "progress-2_hXbaR", "view-range": "view-range-Wzny9kW", viewRange: "view-range-Wzny9kW", "view-default": "view-default-24bnU2Q", viewDefault: "view-default-24bnU2Q", button: "button-31n7vfB", close: "close-1BJcBB_", north: "north-2L_by-G", title: "title-1sIaMcZ" }
              },/***/
       369:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { button: "button-3PQ1Udv", close: "close-19dja2P", content: "content-KP9zgRt", title: "title-3RIIjU5", description: "description-1574slA", inner: "inner-2MfI9zU", navigation: "navigation-3scRdDY" }
              },/***/
       385:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { "audio-hotspot": "audio-hotspot-3_f5YiH", audioHotspot: "audio-hotspot-3_f5YiH", "is-visible": "is-visible-2lq0IE7", isVisible: "is-visible-2lq0IE7", background: "background-bK784Km", progress: "progress-27t_wyI", "progress-stroke": "progress-stroke-3j-jEXv", progressStroke: "progress-stroke-3j-jEXv", controls: "controls-1Q_EfTW", "is-playing": "is-playing-2VrSL4e", isPlaying: "is-playing-2VrSL4e", audioContent: "audioContent-29r3Ptc", contentBackground: "contentBackground-1WuTWr7", audioInfo: "audioInfo-1R90nRz", title: "title-2LE2ZAP", time: "time-3KrzqKe", duration: "duration-1tzokkL", totalDuration: "totalDuration-N--zqNx", close: "close-2TKX80w", "close-icon": "close-icon-39Fjvz1", closeIcon: "close-icon-39Fjvz1" }
              },/***/
       386:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { wrapper: "wrapper-1oCkCXY", "is-active": "is-active-cVqXRDV", isActive: "is-active-cVqXRDV" }
              },/***/
       387:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { "home-page": "home-page-1db1VOE", homePage: "home-page-1db1VOE", "navigation-button": "navigation-button-2TJGWER", navigationButton: "navigation-button-2TJGWER", "is-inverted": "is-inverted-1iysn3W", isInverted: "is-inverted-1iysn3W", "vr-canvas": "vr-canvas-3nm8Zps", vrCanvas: "vr-canvas-3nm8Zps", "is-visible": "is-visible-2_Inbcz", isVisible: "is-visible-2_Inbcz" }
              },/***/
       388:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { wrapper: "wrapper-2feTkaL", dragger: "dragger-22irpab" }
              },/***/
       389:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { introduction: "introduction-17FJ-Pn", clouds: "clouds-3PleeDm", background: "background-3oSdttH", "site-logo": "site-logo-1-k0_q3", siteLogo: "site-logo-1-k0_q3", logoGoogle: "logoGoogle-Si_5jXn", logo: "logo-cpDSstu", "logo-en": "logo-en-3Ojy-Re", logoEn: "logo-en-3Ojy-Re", "logo-bu": "logo-bu-29rk3IY", logoBu: "logo-bu-29rk3IY", subtitle: "subtitle-ELyTI2c", contentBar: "contentBar-1CryUhb", "intro-copy": "intro-copy-2RcInOg", introCopy: "intro-copy-2RcInOg", "video-copy": "video-copy-lwfGAVd", videoCopy: "video-copy-lwfGAVd", "start-exploring": "start-exploring-2pLfFPk", startExploring: "start-exploring-2pLfFPk", arrow: "arrow-2Vjf7W4", "drag-element": "drag-element-2XW8ZWx", dragElement: "drag-element-2XW8ZWx", "play-button": "play-button-3eYfHds", playButton: "play-button-3eYfHds", "begin-path": "begin-path-G6m04ac", beginPath: "begin-path-G6m04ac" }
              },/***/
       390:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { "play-button": "play-button-1Ph1V-3", playButton: "play-button-1Ph1V-3" }
              },/***/
       391:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { background: "background-10ThkjY", playButton: "playButton-10-yW7Z", copy: "copy-3McSAp_" }
              },/***/
       392:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { wrapper: "wrapper-2cs0uUw", "is-playing": "is-playing-uRYisl8", isPlaying: "is-playing-uRYisl8", button: "button-1J11r0q", close: "close-1niM28g" }
              },/***/
       393:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { transition: "transition-10pJ5IQ", background: "background-2Maj6am", mask: "mask-110PLbN", dot: "dot-o2Cvp_G", "is-visible": "is-visible-3zFYaJf", isVisible: "is-visible-3zFYaJf", "reveal-next": "reveal-next-3zQKAyW", revealNext: "reveal-next-3zQKAyW", title: "title-33V-qFC", path: "path-3dYuDaL", "path-group": "path-group-1oARoLr", pathGroup: "path-group-1oARoLr", "path-progress": "path-progress-yWeyLa3", pathProgress: "path-progress-yWeyLa3", "path-line": "path-line-3dY0gcN", pathLine: "path-line-3dY0gcN", "dot-fill": "dot-fill-3NMHUf2", dotFill: "dot-fill-3NMHUf2", "begin-path": "begin-path-12b_3I0", beginPath: "begin-path-12b_3I0" }
              },/***/
       397:/***/
              function (e, t, i) {/* WEBPACK VAR INJECTION */
                     (function (n) {
                            var s, a, r, o = void 0 !== e && e.exports && void 0 !== n ? n : this || window;//helps ensure compatibility with AMD/RequireJS and CommonJS/Node
                            (o._gsQueue || (o._gsQueue = [])).push(function () {
                                   "use strict"; o._gsDefine("plugins.ThrowPropsPlugin", ["plugins.TweenPlugin", "TweenLite", "easing.Ease", "utils.VelocityTracker"], function (e, t, i, n) {
                                          var s, a, r, l, h = function (t, i) { e.call(this, "throwProps"), this._overwriteProps.length = 0 }, u = 999999999999999, c = o._gsDefine.globals, d = !1,
                                          //in a typical throwProps css tween that has an "end" defined as a function, it grabs that value initially when the tween is rendered, then again when we calculate the necessary duration, and then a 3rd time after we invalidate() the tween, so we toggle _recordEndMode to true when we're about to begin such a tween which tells the engine to grab the end value(s) once and record them as "max" and "min" on the throwProps object, thus we can skip those extra calls. Then we set it back to false when we're done with our fancy initialization routine.
                                          _ = { x: 1, y: 1, z: 2, scale: 1, scaleX: 1, scaleY: 1, rotation: 1, rotationZ: 1, rotationX: 2, rotationY: 2, skewX: 1, skewY: 1, xPercent: 1, yPercent: 1 }, p = function (e, t, i, n, s) { var a, r, o, l, h = t.length, c = 0, d = u; if ("object" == typeof e) { for (; --h > -1;) { a = t[h], r = 0; for (o in e) l = a[o] - e[o], r += l * l; r < d && (c = h, d = r) } if ((s || u) < u && s < Math.sqrt(d)) return e } else for (; --h > -1;)a = t[h], r = a - e, r < 0 && (r = -r), r < d && a >= n && a <= i && (c = h, d = r); return t[c] }, v = function (e, t, i, n, s, a) {
                                                 if ("auto" === e.end) return e; var r, o, l = e.end; if (i = isNaN(i) ? u : i, n = isNaN(n) ? -u : n, "object" == typeof t) {
                                                        if (
                                                               //for objects, like {x, y} where they're linked and we must pass an object to the function or find the closest value in an array.
                                                               r = t.calculated ? t : ("function" == typeof l ? l(t) : p(t, l, i, n, a)) || t, !t.calculated) { for (o in r) t[o] = r[o]; t.calculated = !0 } r = r[s]
                                                 } else r = "function" == typeof l ? l(t) : l instanceof Array ? p(t, l, i, n, a) : Number(l); return r > i ? r = i : r < n && (r = n), { max: r, min: r, unitFactor: e.unitFactor }
                                          }, f = function (e, t, i) { for (var n in t) void 0 === e[n] && n !== i && (e[n] = t[n]); return e }, g = h.calculateChange = function (e, n, s, a) { return null == a && (a = .05), s * a * e / (n instanceof i ? n : n ? new i(n) : t.defaultEase).getRatio(a) }, m = h.calculateDuration = function (e, n, s, a, r) { r = r || .05; var o = a instanceof i ? a : a ? new i(a) : t.defaultEase; return Math.abs((n - e) * o.getRatio(r) / s / r) }, y = h.calculateTweenDuration = function (e, s, a, r, o, l) {
                                                 if ("string" == typeof e && (e = t.selector(e)), !e) return 0; null == a && (a = 10), null == r && (r = .2), null == o && (o = 1), e.length && (e = e[0] || e); var u, c, _, p, y, E, T, A, b, R, w, I, P, L = 0, k = 9999999999, C = s.throwProps || s, M = s.ease instanceof i ? s.ease : s.ease ? new i(s.ease) : t.defaultEase, x = isNaN(C.checkpoint) ? .05 : Number(C.checkpoint), O = isNaN(C.resistance) ? h.defaultResistance : Number(C.resistance); if (C.linkedProps) for (
                                                        //when there are linkedProps (typically "x,y" where snapping has to factor in multiple properties, we must first populate an object with all of those end values, then feed it to the function that make any necessary alterations. So the point of this first loop is to simply build an object (like {x:100, y:204.5}) for feeding into that function which we'll do later in the "real" loop.
                                                        I = C.linkedProps.split(","), w = {}, P = 0; P < I.length; P++)u = I[P], (c = C[u]) && (void 0 !== c.velocity && "number" == typeof c.velocity ? p = Number(c.velocity) || 0 : (b = b || n.getByTarget(e), p = b && b.isTrackingProp(u) ? b.getVelocity(u) : 0), y = isNaN(c.resistance) ? O : Number(c.resistance), _ = p * y > 0 ? p / y : p / -y, E = "function" == typeof e[u] ? e[u.indexOf("set") || "function" != typeof e["get" + u.substr(3)] ? u : "get" + u.substr(3)]() : e[u] || 0, w[u] = E + g(p, M, _, x)); for (u in C) "resistance" !== u && "checkpoint" !== u && "preventOvershoot" !== u && "linkedProps" !== u && "radius" !== u && (c = C[u], "object" != typeof c && (b = b || n.getByTarget(e), b && b.isTrackingProp(u) ? c = "number" == typeof c ? { velocity: c } : { velocity: b.getVelocity(u) } : (p = Number(c) || 0, _ = p * O > 0 ? p / O : p / -O)), "object" == typeof c && (void 0 !== c.velocity && "number" == typeof c.velocity ? p = Number(c.velocity) || 0 : (b = b || n.getByTarget(e), p = b && b.isTrackingProp(u) ? b.getVelocity(u) : 0), y = isNaN(c.resistance) ? O : Number(c.resistance), _ = p * y > 0 ? p / y : p / -y, E = "function" == typeof e[u] ? e[u.indexOf("set") || "function" != typeof e["get" + u.substr(3)] ? u : "get" + u.substr(3)]() : e[u] || 0, T = E + g(p, M, _, x), void 0 !== c.end && (c = v(c, w && u in w ? w : T, c.max, c.min, u, C.radius), (l || d) && (C[u] = f(c, C[u], "end"))), void 0 !== c.max && T > Number(c.max) + 1e-10 ? (R = c.unitFactor || h.defaultUnitFactors[u] || 1, (//some values are measured in special units like radians in which case our thresholds need to be adjusted accordingly.
                                                               //if the value is already exceeding the max or the velocity is too low, the duration can end up being uncomfortably long but in most situations, users want the snapping to occur relatively quickly (0.75 seconds), so we implement a cap here to make things more intuitive. If the max and min match, it means we're animating to a particular value and we don't want to shorten the time unless the velocity is really slow. Example: a rotation where the start and natural end value are less than the snapping spot, but the natural end is pretty close to the snap.
                                                               A = E > c.max && c.min !== c.max || p * R > -15 && p * R < 45 ? r + .1 * (a - r) : m(E, c.max, p, M, x)) + o < k && (k = A + o)) : void 0 !== c.min && T < Number(c.min) - 1e-10 && (R = c.unitFactor || h.defaultUnitFactors[u] || 1, (//some values are measured in special units like radians in which case our thresholds need to be adjusted accordingly.
                                                                      //if the value is already exceeding the min or if the velocity is too low, the duration can end up being uncomfortably long but in most situations, users want the snapping to occur relatively quickly (0.75 seconds), so we implement a cap here to make things more intuitive.
                                                                      A = E < c.min && c.min !== c.max || p * R > -45 && p * R < 15 ? r + .1 * (a - r) : m(E, c.min, p, M, x)) + o < k && (k = A + o)), A > L && (L = A)), _ > L && (L = _)); return L > k && (L = k), L > a ? a : L < r ? r : L
                                          }, E = h.prototype = new e("throwProps");//these serve as a cache of sorts, recording the last css-related proxy and the throwProps vars that get calculated in the _cssRegister() method. This allows us to grab them in the ThrowPropsPlugin.to() function and calculate the duration. Of course we could have structured things in a more "clean" fashion, but performance is of paramount importance.
                                          //indicates that this plugin can be inserted into the "css" object using the autoCSS feature of TweenLite
                                          //setting the unitFactor to a higher value (default is 1) reduces the chance of the auto-accelerating behavior kicking in when determining durations when the initial velocity is adequately low - imagine dragging something past a boundary and then letting go - snapping back relatively quickly should be prioritized over matching the initial velocity (at least that's the behavior most people consider intuitive). But in some situations when the units are very low (like "time" of a timeline or rotation when using radians), it can kick in too frequently so this allows tweaking.
                                          return E.constructor = h, h.version = "0.11.1", h.API = 2, h._autoCSS = !0, h.defaultResistance = 100, h.defaultUnitFactors = { time: 1e3, totalTime: 1e3 }, h.track = function (e, t, i) { return n.track(e, t, i) }, h.untrack = function (e, t) { n.untrack(e, t) }, h.isTracking = function (e, t) { return n.isTracking(e, t) }, h.getVelocity = function (e, t) { var i = n.getByTarget(e); return i ? i.getVelocity(t) : NaN }, h._cssRegister = function () {
                                                 var e = c.com.greensock.plugins.CSSPlugin; if (e) {
                                                        var t = e._internals, i = t._parseToProxy, r = t._setPluginRatio, o = t.CSSPropTween; t._registerComplexSpecialProp("throwProps", {
                                                               parser: function (e, t, l, u, c, d) {
                                                                      d = new h; var p, v, f, g, m = {}, y = {}, E = {}, T = {}, A = {}, b = {}; a = {}; for (v in t) "resistance" !== v && "preventOvershoot" !== v && "linkedProps" !== v && "radius" !== v && (p = t[v], "object" == typeof p ? (void 0 !== p.velocity && "number" == typeof p.velocity ? m[v] = Number(p.velocity) || 0 : (g = g || n.getByTarget(e), m[v] = g && g.isTrackingProp(v) ? g.getVelocity(v) : 0), void 0 !== p.end && (T[v] = p.end), void 0 !== p.min && (y[v] = p.min), void 0 !== p.max && (E[v] = p.max), p.preventOvershoot && (b[v] = !0), void 0 !== p.resistance && (!0, A[v] = p.resistance)) : "number" == typeof p ? m[v] = p : (g = g || n.getByTarget(e), g && g.isTrackingProp(v) ? m[v] = g.getVelocity(v) : m[v] = p || 0), _[v] && u._enableTransforms(2 === _[v])); f = i(e, m, u, c, d), s = f.proxy, m = f.end; for (v in s) a[v] = { velocity: m[v], min: y[v], max: E[v], end: T[v], resistance: A[v], preventOvershoot: b[v] };//don't overwrite all other throwProps tweens. In the CSSPropTween constructor, we add the property to the _overwriteProps, so remove it here.
                                                                      return null != t.resistance && (a.resistance = t.resistance), null != t.linkedProps && (a.linkedProps = t.linkedProps), null != t.radius && (a.radius = t.radius), t.preventOvershoot && (a.preventOvershoot = !0), c = new o(e, "throwProps", 0, 0, f.pt, 2), u._overwriteProps.pop(), c.plugin = d, c.setRatio = r, c.data = f, d._onInitTween(s, a, u._tween), c
                                                               }
                                                        })
                                                 }
                                          }, h.to = function (e, i, n, o, h) {
                                                 i.throwProps || (i = { throwProps: i }), 0 === h && (i.throwProps.preventOvershoot = !0), d = !0;//if we encounter a function-based "end" value, ThrowPropsPlugin will record it as "max" and "min" properties, replacing "end" (this is an optimization so that the function only gets called once)
                                                 var u = new t(e, o || 1, i);//we force a render so that the CSSPlugin instantiates and populates the _cssProxy and _cssVars which we need in order to calculate the tween duration. Remember, we can't use the regular target for calculating the duration because the current values wouldn't be able to be grabbed like target["propertyName"], as css properties can be complex like boxShadow:"10px 10px 20px 30px red" or backgroundPosition:"25px 50px". The proxy is the result of breaking all that complex data down and finding just the numeric values and assigning them to a generic proxy object with unique names. THAT is what the _calculateTweenDuration() can look at. We also needed to do the same break down of any min or max or velocity data
                                                 //we force a render so that the CSSPlugin instantiates and populates the _cssProxy and _cssVars which we need in order to calculate the tween duration. Remember, we can't use the regular target for calculating the duration because the current values wouldn't be able to be grabbed like target["propertyName"], as css properties can be complex like boxShadow:"10px 10px 20px 30px red" or backgroundPosition:"25px 50px". The proxy is the result of breaking all that complex data down and finding just the numeric values and assigning them to a generic proxy object with unique names. THAT is what the _calculateTweenDuration() can look at. We also needed to do the same break down of any min or max or velocity data
                                                 return u.render(0, !0, !0), u.vars.css ? (u.duration(y(s, { throwProps: a, ease: i.ease }, n, o, h)), u._delay && !u.vars.immediateRender ? u.invalidate() : r._onInitTween(s, l, u), d = !1, u) : (u.kill(), u = new t(e, y(e, i, n, o, h), i), d = !1, u)
                                          }, E._onInitTween = function (e, t, i, s) {
                                                 this.target = e, this._props = [], r = this, l = t; var a, o, h, u, c, _, p, m, y, E, T, A, b = i._ease, R = isNaN(t.checkpoint) ? .05 : Number(t.checkpoint), w = i._duration, I = t.preventOvershoot, P = 0; if (t.linkedProps) for (
                                                        //when there are linkedProps (typically "x,y" where snapping has to factor in multiple properties, we must first populate an object with all of those end values, then feed it to the function that make any necessary alterations. So the point of this first loop is to simply build an object (like {x:100, y:204.5}) for feeding into that function which we'll do later in the "real" loop.
                                                        T = t.linkedProps.split(","), E = {}, A = 0; A < T.length; A++)a = T[A], (o = t[a]) && (void 0 !== o.velocity && "number" == typeof o.velocity ? c = Number(o.velocity) || 0 : (y = y || n.getByTarget(e), c = y && y.isTrackingProp(a) ? y.getVelocity(a) : 0), h = "function" == typeof e[a] ? e[a.indexOf("set") || "function" != typeof e["get" + a.substr(3)] ? a : "get" + a.substr(3)]() : e[a] || 0, E[a] = h + g(c, b, w, R)); for (a in t) if ("resistance" !== a && "checkpoint" !== a && "preventOvershoot" !== a && "linkedProps" !== a && "radius" !== a) { if (o = t[a], "function" == typeof o && (o = o(s, e)), "number" == typeof o) c = Number(o) || 0; else if ("object" != typeof o || isNaN(o.velocity)) { if (!(y = y || n.getByTarget(e)) || !y.isTrackingProp(a)) throw "ERROR: No velocity was defined in the throwProps tween of " + e + " property: " + a; c = y.getVelocity(a) } else c = Number(o.velocity); _ = g(c, b, w, R), m = 0, u = "function" == typeof e[a], h = u ? e[a.indexOf("set") || "function" != typeof e["get" + a.substr(3)] ? a : "get" + a.substr(3)]() : e[a], "object" == typeof o && (p = h + _, void 0 !== o.end && (o = v(o, E && a in E ? E : p, o.max, o.min, a, t.radius), d && (t[a] = f(o, t[a], "end"))), void 0 !== o.max && Number(o.max) < p ? I || o.preventOvershoot ? _ = o.max - h : m = o.max - h - _ : void 0 !== o.min && Number(o.min) > p && (I || o.preventOvershoot ? _ = o.min - h : m = o.min - h - _)), this._overwriteProps[P] = a, this._props[P++] = { p: a, s: h, c1: _, c2: m, f: u, r: !1 } } return !0
                                          }, E._kill = function (t) { for (var i = this._props.length; --i > -1;)null != t[this._props[i].p] && this._props.splice(i, 1); return e.prototype._kill.call(this, t) }, E._mod = function (e) { for (var t, i = this._props, n = i.length; --n > -1;)"function" == typeof (t = e[i[n].p] || e.throwProps) && (i[n].m = t) }, E.setRatio = function (e) { for (var t, i, n = this._props.length; --n > -1;)t = this._props[n], i = t.s + t.c1 * e + t.c2 * e * e, t.m ? i = t.m(i, this.target) : 1 === e && (i = (1e4 * i + (i < 0 ? -.5 : .5) | 0) / 1e4), t.f ? this.target[t.p](i) : this.target[t.p] = i }, e.activate([h]), h
                                   }, !0),/*
  * ----------------------------------------------------------------
  * VelocityTracker
  * ----------------------------------------------------------------
  */
                                          o._gsDefine("utils.VelocityTracker", ["TweenLite"], function (e) {
                                                 var t, i, n, s, a = /([A-Z])/g, r = {}, l = o.document, h = { x: 1, y: 1, z: 2, scale: 1, scaleX: 1, scaleY: 1, rotation: 1, rotationZ: 1, rotationX: 2, rotationY: 2, skewX: 1, skewY: 1, xPercent: 1, yPercent: 1 }, u = l.defaultView ? l.defaultView.getComputedStyle : function () { }, c = function (e, t, i) { var n = (e._gsTransform || r)[t]; return n || 0 === n ? n : (e.style[t] ? n = e.style[t] : (i = i || u(e, null)) ? n = i[t] || i.getPropertyValue(t) || i.getPropertyValue(t.replace(a, "-$1").toLowerCase()) : e.currentStyle && (n = e.currentStyle[t]), parseFloat(n) || 0) }, d = e.ticker, _ = function (e, t, i) { this.p = e, this.f = t, this.v1 = this.v2 = 0, this.t1 = this.t2 = d.time, this.css = !1, this.type = "", this._prev = null, i && (this._next = i, i._prev = this) }, p = function () {
                                                        var e, i, a = t, r = d.time;
                                                        //if the frame rate is too high, we won't be able to track the velocity as well, so only update the values about 33 times per second
                                                        if (r - n >= .03) for (s = n, n = r; a;) {
                                                               for (i = a._firstVP; i;)e = i.css ? c(a.target, i.p) : i.f ? a.target[i.p]() : a.target[i.p], (e !== i.v1 || r - i.t1 > .15) && (
                                                                      //use a threshold of 0.15 seconds for zeroing-out velocity. If we only use 0.03 and things update slightly slower, like some Android devices dispatch "touchmove" events sluggishly so 2 or 3 ticks of the TweenLite.ticker may elapse inbetween, thus it may appear like the object is not moving but it actually is but it's not updating as frequently. A threshold of 0.15 seconds seems to be a good balance. We want to update things frequently (0.03 seconds) when they're moving so that we can respond to fast motions accurately, but we want to be more resistant to go back to a zero velocity.
                                                                      i.v2 = i.v1, i.v1 = e, i.t2 = i.t1, i.t1 = r), i = i._next; a = a._next
                                                        }
                                                 }, v = function (e) { this._lookup = {}, this.target = e, this.elem = !(!e.style || !e.nodeType), i || (d.addEventListener("tick", p, null, !1, -100), n = s = d.time, i = !0), t && (this._next = t, t._prev = this), t = this }, f = v.getByTarget = function (e) { for (var i = t; i;) { if (i.target === e) return i; i = i._next } }, g = v.prototype; return g.addProp = function (t, i) { if (!this._lookup[t]) { var n = this.target, s = "function" == typeof n[t], a = s ? this._altProp(t) : t, r = this._firstVP; this._firstVP = this._lookup[t] = this._lookup[a] = r = new _(a !== t && 0 === t.indexOf("set") ? a : t, s, r), r.css = this.elem && (void 0 !== this.target.style[r.p] || h[r.p]), r.css && h[r.p] && !n._gsTransform && e.set(n, { x: "+=0", overwrite: !1 }), r.type = i || r.css && 0 === t.indexOf("rotation") ? "deg" : "", r.v1 = r.v2 = r.css ? c(n, r.p) : s ? n[r.p]() : n[r.p] } }, g.removeProp = function (e) { var t = this._lookup[e]; t && (t._prev ? t._prev._next = t._next : t === this._firstVP && (this._firstVP = t._next), t._next && (t._next._prev = t._prev), this._lookup[e] = 0, t.f && (this._lookup[this._altProp(e)] = 0)) }, g.isTrackingProp = function (e) { return this._lookup[e] instanceof _ }, g.getVelocity = function (e) {
                                                        var t, i, n, s = this._lookup[e], a = this.target; if (!s) throw "The velocity of " + e + " is not being tracked.";
                                                        //rotational values need special interpretation so that if, for example, they go from 179 to -178 degrees it is interpreted as a change of 3 instead of -357.
                                                        return t = s.css ? c(a, s.p) : s.f ? a[s.p]() : a[s.p], i = t - s.v2, "rad" !== s.type && "deg" !== s.type || (n = "rad" === s.type ? 2 * Math.PI : 360, (i %= n) !== i % (n / 2) && (i = i < 0 ? i + n : i - n)), i / (d.time - s.t2)
                                                 }, g._altProp = function (e) {
                                                        //for getters/setters like getCustomProp() and setCustomProp() - we should accommodate both
                                                        var t = e.substr(0, 3), i = ("get" === t ? "set" : "set" === t ? "get" : t) + e.substr(3); return "function" == typeof this.target[i] ? i : e
                                                 }, v.getByTarget = function (i) { var n = t; for ("string" == typeof i && (i = e.selector(i)), i.length && i !== window && i[0] && i[0].style && !i.nodeType && (i = i[0]); n;) { if (n.target === i) return n; n = n._next } }, v.track = function (e, t, i) { var n = f(e), s = t.split(","), a = s.length; for (i = (i || "").split(","), n || (n = new v(e)); --a > -1;)n.addProp(s[a], i[a] || i[0]); return n }, v.untrack = function (e, i) { var n = f(e), s = (i || "").split(","), a = s.length; if (n) { for (; --a > -1;)n.removeProp(s[a]); n._firstVP && i || (n._prev ? n._prev._next = n._next : n === t && (t = n._next), n._next && (n._next._prev = n._prev)) } }, v.isTracking = function (e, t) { var i = f(e); return !!i && (!(t || !i._firstVP) || i.isTrackingProp(t)) }, v
                                          }, !0)
                            }), o._gsDefine && o._gsQueue.pop()(),
                                   //export to AMD/RequireJS and CommonJS/Node (precursor to full modular build system coming at a later date)
                                   function (n) { "use strict"; var l = function () { return (o.GreenSockGlobals || o).ThrowPropsPlugin }; a = [i(47)], s = l, void 0 !== (r = "function" == typeof s ? s.apply(t, a) : s) && (e.exports = r) }()
                     }).call(t, i(24))
              },/***/
       398:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { view: "view-gcficLW", "image-wrapper": "image-wrapper-2Q1u1xy", imageWrapper: "image-wrapper-2Q1u1xy", image: "image-2bszvIW", "reveal-previous": "reveal-previous-Lt8FV1o", revealPrevious: "reveal-previous-Lt8FV1o", title: "title-1XXgdxJ", bar: "bar-YMHShUe", contentWrapper: "contentWrapper-Kh1QNbw", content: "content-YQ9h92_", copy: "copy-1KXNxM1" }
              },/***/
       399:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { endScreen: "endScreen-2yIvpZq", "background-solid": "background-solid-1VPBxK6", backgroundSolid: "background-solid-1VPBxK6", background: "background-2PEYkCI", mask: "mask-2wRtw9v", "image-wrapper": "image-wrapper-1nk_VXl", imageWrapper: "image-wrapper-1nk_VXl", title: "title-2A3lZlZ", bar: "bar-2dK8hs2", "title-bar": "title-bar-2-8TK--", titleBar: "title-bar-2-8TK--", "play-button": "play-button-3LaKGwo", playButton: "play-button-3LaKGwo", player: "player-fmU4Iui", contentWrapper: "contentWrapper-1LrNi53", content: "content-3saH71j", copy: "copy-3BCdH6N", arrow: "arrow-3y0NWtH" }
              },/***/
       400:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { "background-solid": "background-solid-FBFd58W", backgroundSolid: "background-solid-FBFd58W", background: "background-3LEgjWJ", mask: "mask-3NRI6qo", content: "content-pq1ZSdk", googleLogo: "googleLogo-1qfTMsU", cyarkLogo: "cyarkLogo-3D12jsX", daydreamLogo: "daydreamLogo-2OcvNdN", credits: "credits-WlnUlUL", credit: "credit-1mRXJ-L", creditTitle: "creditTitle-3zvF2c9", creditName: "creditName-3nLitjS", more: "more-WPjp7En", footer: "footer-WjYNdBM", "more-title": "more-title-2lejh-x", moreTitle: "more-title-2lejh-x", moreLinks: "moreLinks-KcA441q", arrow: "arrow-CshGGiX" }
              },/***/
       401:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { view: "view-U8lIuQP", "is-visible": "is-visible-3f0WfG8", isVisible: "is-visible-3f0WfG8", button: "button-k80XkR1", close: "close-3O3ln3W" }
              },/***/
       402:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { "image-wrapper": "image-wrapper-2BlV0Pv", imageWrapper: "image-wrapper-2BlV0Pv", image: "image-1zHY2Ok", hotspot: "hotspot-3fIMTqN" }
              },/***/
       403:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { wrapper: "wrapper-1Yj6hwW", "is-visible": "is-visible-3tKOJWP", isVisible: "is-visible-3tKOJWP", canvas: "canvas-Tf9sDhE", "pano-icon": "pano-icon-3lL8sOQ", panoIcon: "pano-icon-3lL8sOQ", "is-hidden": "is-hidden-2reFh0e", isHidden: "is-hidden-2reFh0e", vr: "vr-3E3XXGn" }
              },/***/
       404:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { video: "video-1Z1rIeb", "is-visible": "is-visible-22u6Wr3", isVisible: "is-visible-22u6Wr3", wrapper: "wrapper-3xz85S9", background: "background-J4Ps6B6", article: "article-fepGyBd", aside: "aside-30SENfn", title: "title-3XkLXwk", bar: "bar-2rcQz5R", description: "description-1mej7Yx", restartButton: "restartButton-2KV3QIn", restartIcon: "restartIcon-1JdICSB", restartCaption: "restartCaption-2ymxFH9", tmp: "tmp-3sidH0w", "aside-background": "aside-background-2IzUjwb", asideBackground: "aside-background-2IzUjwb", "aside-content": "aside-content-qgyWMNG", asideContent: "aside-content-qgyWMNG", googleLogo: "googleLogo-gHPLt5U", cyarkLogo: "cyarkLogo-2HowGHL", daydreamLogo: "daydreamLogo-1DcaOKW", "aside-credits": "aside-credits-3vpNvZ5", asideCredits: "aside-credits-3vpNvZ5", credit: "credit-A8NtdAZ", creditTitle: "creditTitle-197MJmz", creditName: "creditName-c-Zj4ap", "aside-more": "aside-more-FCXNbKf", asideMore: "aside-more-FCXNbKf", "aside-more-title": "aside-more-title-1WCV6QY", asideMoreTitle: "aside-more-title-1WCV6QY", asideMoreLinks: "asideMoreLinks-SaMy3Y6" }
              },/***/
       405:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { "intro-video": "intro-video-1bU5OFA", introVideo: "intro-video-1bU5OFA", "is-disabled": "is-disabled-3OWsM_K", isDisabled: "is-disabled-3OWsM_K", mask: "mask-3unvemw", isActive: "isActive-bpGBQla", "progress-bar": "progress-bar-1JV6syW", progressBar: "progress-bar-1JV6syW", "is-hidden": "is-hidden-Nso-WdT", isHidden: "is-hidden-Nso-WdT", "progress-bar-status": "progress-bar-status-1xto9XM", progressBarStatus: "progress-bar-status-1xto9XM", "play-button": "play-button-3aPK5iE", playButton: "play-button-3aPK5iE", "is-visible": "is-visible-2HorNqK", isVisible: "is-visible-2HorNqK", button: "button-2vgdrN1", skipButton: "skipButton-35cDgIt" }
              },/***/
       406:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { "masked-video": "masked-video-2l-CK-J", maskedVideo: "masked-video-2l-CK-J", "canvas-wrapper": "canvas-wrapper-1dml_sa", canvasWrapper: "canvas-wrapper-1dml_sa", video: "video-3PhX4sN" }
              },/***/
       407:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { "vr-toggle": "vr-toggle-18ju0tp", vrToggle: "vr-toggle-18ju0tp", "aok-toggle": "aok-toggle-1cYthA8", aokToggle: "aok-toggle-1cYthA8", "eyk-toggle": "eyk-toggle-2wlrRzj", eykToggle: "eyk-toggle-2wlrRzj", "eykclipplane-toggle": "eykclipplane-toggle-3zwTRaB", eykclipplaneToggle: "eykclipplane-toggle-3zwTRaB", "eykreconstruct-toggle": "eykreconstruct-toggle-2__bXWi", eykreconstructToggle: "eykreconstruct-toggle-2__bXWi" }
              },/***/
       436:/***/
              function (e, t) { e.exports = { hotspots: [{ id: "AOK_INSIDE_01", type: "audio", audioFile: "audio/vo/bettany-section3", audioTitle: "Circumambulatory corridor", order: 1, hotspot: { title: "Circumambulatory corridor" } }, { id: "AOK_INSIDE_02", type: "audio", audioFile: "audio/vo/bettany-section4", audioTitle: "Serivaniya Jataka", order: 2, hotspot: { title: "Serivaniya Jataka" } }, { id: "AOK_INSIDE_03", type: "audio", audioFile: "audio/vo/bettany-section5", audioTitle: "Cullakasethi Jataka", order: 3, hotspot: { title: "Cullakasethi Jataka" } }, { id: "AOK_INSIDE_04", type: "audio", audioFile: "audio/vo/bettany-section6", audioTitle: "Ayacittabhata Jataka", order: 4, hotspot: { title: "Ayacittabhata Jataka" } }, { id: "AOK_INSIDE_05", type: "audio", audioFile: "audio/vo/bettany-section7", audioTitle: "Kharadiya Jataka", order: 7, hotspot: { title: "Kharadiya Jataka" } }, { id: "AOK_INSIDE_06", type: "audio", audioFile: "audio/vo/bettany-section8", audioTitle: "Intricate Ceilings", order: 5, hotspot: { title: "Intricate Ceilings" } }, { id: "AOK_INSIDE_07", type: "audio", audioFile: "audio/vo/bettany-section9", audioTitle: "Kukkura Jataka", order: 6, hotspot: { title: "Kukkura Jataka" } }, { id: "AOK_INSIDE_08", type: "audio", audioFile: "audio/vo/bettany-section10", audioTitle: "Buddhist cosmology", order: 8, hotspot: { title: "Buddhist cosmology" } }, { id: "AOK_INSIDE_09", type: "gallery", images: [{ src: "image/working_inside_temple/04.jpg", alt: "" }, { src: "image/working_inside_temple/02.jpg", alt: "" }, { src: "image/working_inside_temple/03.jpg", alt: "" }, { src: "image/working_inside_temple/01.jpg", alt: "" }, { src: "image/working_inside_temple/05.jpg", alt: "" }, { src: "image/working_inside_temple/06.jpg", alt: "" }, { src: "image/working_inside_temple/07.jpg", alt: "" }, { src: "image/working_inside_temple/08.jpg", alt: "" }, { src: "image/working_inside_temple/09.jpg", alt: "" }, { src: "image/working_inside_temple/10.jpg", alt: "" }, { src: "image/working_inside_temple/11.jpg", alt: "" }], title: "Digital Documentation", description: "CyArk uses a combination of technologies to rapidly and accurately record heritage sites. LiDAR is used to scan the surface of each feature to +- 2mm single point precision. Photogrammetry is used to capture all features; each photo has at least 60% overlap with the next. Finally drones are used to capture oblique aerial photographs.", hotspot: { title: "Digital Documentation" }, mobile: { description: "CyArk uses a combination of technologies to rapidly and accurately record heritage sites. LiDAR is used to scan the surface of each feature to +- 2mm single point precision. Photogrammetry is used to capture all features; each photo has at least 60% overlap with the next. Finally drones are used to capture oblique aerial photographs." } }, { id: "AOK_INSIDE_10", type: "video", videoId: "uZ39HfPWXzU", hotspot: { title: "Murals" } }, { id: "AOK_INSIDE_11", type: "gallery", images: [{ src: "image/local_community/15.jpg", alt: "", alignment: "bottom center" }, { src: "image/local_community/02.jpg", alt: "" }, { src: "image/local_community/03.jpg", alt: "", alignment: "bottom center" }, { src: "image/local_community/04.jpg", alt: "" }, { src: "image/local_community/05.jpg", alt: "" }, { src: "image/local_community/06.jpg", alt: "" }, { src: "image/local_community/07.jpg", alt: "", alignment: "top center" }, { src: "image/local_community/08.jpg", alt: "", alignment: "top center" }, { src: "image/local_community/09.jpg", alt: "" }, { src: "image/local_community/10.jpg", alt: "" }, { src: "image/local_community/11.jpg", alt: "", alignment: "top center" }, { src: "image/local_community/12.jpg", alt: "", alignment: "bottom center" }, { src: "image/local_community/13.jpg", alt: "" }, { src: "image/local_community/14.jpg", alt: "" }, { src: "image/local_community/01.jpg", alt: "", alignment: "top center" }], title: "Local Community", description: "People used to live near the ancient buildings, but in the 1990s they had to move out of the archaeological zone. Now many work in the tourist industry or in workshops making lacquered goods. Some of these images show a coming-of-age ceremony called a shinbyu, and one man displays his protective tattoos.", hotspot: { title: "Local Community" }, mobile: { description: "People used to live near the ancient buildings, but in the 1990s they had to move out of the archaeological zone. Now many work in the tourist industry or in workshops making lacquered goods. Some of these images show a coming-of-age ceremony called a shinbyu, and one man displays his protective tattoos." } }, { id: "AOK_INSIDE_12", type: "audio", audioFile: "audio/vo/bettany-section11", audioTitle: "Horse and Groom", hotspot: { title: "Horse and Groom" } }, { id: "KMG_OUTSIDE_01", type: "video", videoId: "ojgp622VqLc", hotspot: { title: "CyArk Interview" } }, { id: "KMG_OUTSIDE_02", type: "video", videoId: "fNXnR0aJR5s", hotspot: { title: "Methodology" } }, { id: "KMG_OUTSIDE_03", type: "gallery", images: [{ src: "image/repairing_the_temple/02.jpg", alt: "" }, { src: "image/repairing_the_temple/01.jpg", alt: "" }, { src: "image/repairing_the_temple/03.jpg", alt: "" }, { src: "image/repairing_the_temple/04.jpg", alt: "" }, { src: "image/repairing_the_temple/05.jpg", alt: "" }, { src: "image/repairing_the_temple/06.jpg", alt: "", alignment: "bottom center" }, { src: "image/repairing_the_temple/07.jpg", alt: "", alignment: "bottom center" }, { src: "image/repairing_the_temple/08.jpg", alt: "" }], title: "Structural Repairs", description: "Many of the temples in Bagan have been damaged by earthquakes and floods, but humans have caused serious problems too. Much of the repair work dates from the 1990s and 2000s when the government embarked on major religious renovations. Although these changes made the buildings look complete, the additions were neither historically accurate nor structurally sound. Many of these new repairs were significantly damaged or destroyed in the 2016 earthquake.", hotspot: { title: "Structural Repairs" }, mobile: { description: "Many of the temples in Bagan have been damaged by earthquakes and floods, but humans have caused serious problems too. Much of the repair work dates from the 1990s and 2000s when the government embarked on major religious renovations. Although these changes made the buildings look complete, the additions were neither historically accurate nor structurally sound. Many of these new repairs were significantly damaged or destroyed in the 2016 earthquake." } }, { id: "KMG_OUTSIDE_04", type: "gallery", images: [{ src: "image/capturing_data/10.jpg", alt: "", alignment: "top center" }, { src: "image/capturing_data/02.jpg", alt: "", alignment: "bottom center" }, { src: "image/capturing_data/03.jpg", alt: "" }, { src: "image/capturing_data/04.jpg", alt: "" }, { src: "image/capturing_data/05.jpg", alt: "" }, { src: "image/capturing_data/06.jpg", alt: "" }, { src: "image/capturing_data/07.jpg", alt: "" }, { src: "image/capturing_data/08.jpg", alt: "" }, { src: "image/capturing_data/09.jpg", alt: "", alignment: "bottom center" }, { src: "image/capturing_data/01.jpg", alt: "" }, { src: "image/capturing_data/11.jpg", alt: "", alignment: "bottom center" }, { src: "image/capturing_data/12.jpg", alt: "", alignment: "bottom center" }, { src: "image/capturing_data/13.jpg", alt: "" }, { src: "image/capturing_data/14.jpg", alt: "", alignment: "bottom center" }], title: "Digital documentation", description: "CyArk uses a combination of technologies to rapidly and accurately record heritage sites. LiDAR is used to scan the surface of each feature to +- 2mm single point precision. Photogrammetry is used to capture all features; each photo has at least 60% overlap with the next. Finally drones are used to capture oblique aerial photographs.", hotspot: { title: "Digital documentation" }, mobile: { description: "CyArk uses a combination of technologies to rapidly and accurately record heritage sites. LiDAR is used to scan the surface of each feature to +- 2mm single point precision. Photogrammetry is used to capture all features; each photo has at least 60% overlap with the next. Finally drones are used to capture oblique aerial photographs." } }, { id: "KMG_OUTSIDE_05", type: "video", videoId: "xSPArs4xG1I", hotspot: { title: "LiDAR" } }, { id: "KMG_OUTSIDE_06", type: "video", videoId: "U547_yxVM7k", hotspot: { title: "Photogrammetry" } }, { id: "KMG_OUTSIDE_07", type: "video", videoId: "b80N-KJGJXA", hotspot: { title: "Using the data" } }, { id: "KMG_OUTSIDE_08", type: "video-jump", videoId: "sxOvzcdiQ-w", hotspot: { title: "Explore in 360" } }, { id: "KMG_OUTSIDE_09", type: "video-jump", videoId: "2wCvmh8Q5-c", hotspot: { title: "360 Interior" } }, { id: "KMG_OUTSIDE_10", type: "video", videoId: "sk-3PmU26BY", hotspot: { title: "Working with the locals" } }, { id: "KMG_OUTSIDE_11", type: "video", videoId: "ukieF3FQUh4", hotspot: { title: "UNESCO" } }, { id: "EYK_GO_INSIDE", type: "next", hotspot: { title: "Go inside", primary: !0 } }, { id: "EYK_01", type: "cutsection", videoId: "YWUwT87ngzg", title: "Hidden inside the walls", description: "Section cuts are used to describe the relationship of different parts of the building relative to each other. This new perspective can give conservators an advantage when trying to tackle a difficult challenge, such as stabilising a building with earthquake damage.", hotspot: { title: "Hidden inside the walls", primary: !0 }, audioFile: "audio/vo/bettany-section16" }, { id: "EYK_02", type: "reconstruction", steps: [{ title: "Reconstruction", description: "Eim Ya Kyaung is a unique opportunity to study the effect of a single environmental event on the structure of a temple." }, { title: "Documentation", description: "In most disaster scenarios, very little documentation exists of the monuments prior to damage. Here, CyArk had been on site less than a year before the earthquake and then returned following the disaster." }, { title: "Before and After", description: "Before-and-after models can be compared to show which changes in the structure were directly related to the earthquake.  Close examination of the surviving and damaged areas may also show what types of construction and restoration will perform better in future seismic events." }], hotspot: { title: "Compare the damage", primary: !0 }, audioFile: "audio/vo/bettany-section17" }, { id: "EYK_03", type: "video", videoId: "YQmRxJo7Rps", hotspot: { title: "Earthquake damage" } }, { id: "EYK_04", type: "video", videoId: "eZWOGM53IeY", hotspot: { title: "Drone Video" } }, { id: "EYK_05", type: "video-jump", videoId: "RCo75Pa1SNs", hotspot: { title: "Explore the sites" } }, { id: "EYK_06", type: "video-jump", videoId: "Dtng8aWyRQE", hotspot: { title: "360 view from the top" } }, { id: "EYK_07", type: "gallery", images: [{ src: "image/helping_the_local_community/07.jpg", alt: "" }, { src: "image/helping_the_local_community/02.jpg", alt: "" }, { src: "image/helping_the_local_community/03.jpg", alt: "" }, { src: "image/helping_the_local_community/04.jpg", alt: "" }, { src: "image/helping_the_local_community/05.jpg", alt: "" }, { src: "image/helping_the_local_community/06.jpg", alt: "" }, { src: "image/helping_the_local_community/01.jpg", alt: "" }, { src: "image/helping_the_local_community/08.jpg", alt: "" }, { src: "image/helping_the_local_community/09.jpg", alt: "" }, { src: "image/helping_the_local_community/10.jpg", alt: "" }, { src: "image/helping_the_local_community/11.jpg", alt: "", alignment: "top center" }], title: "Training the local people", description: "Helping CyArk on site were students from Yangon Technical University in Myanmar who were eager to learn and participate. Many of them are studying architecture, so they were producing drawings, plans and sections to be given to the Department of Archaeology and Ministry of Culture.", hotspot: { title: "Training the local people" }, mobile: { description: "Helping CyArk on site were students from Yangon Technical University in Myanmar who were eager to learn and participate. Many of them are studying architecture, so they were producing drawings, plans and sections to be given to the Department of Archaeology and Ministry of Culture." } }, { id: "EYK_08", type: "video", videoId: "jaknPtkjZqE", hotspot: { title: "Discover the damage" } }, { id: "EYK_09", type: "audio", audioFile: "audio/vo/bettany-section18", audioTitle: "Gotama", order: 1, hotspot: { title: "Gotama" } }, { id: "EYK_10", type: "audio", audioFile: "audio/vo/bettany-section19", audioTitle: "Dharmacakra mudra", order: 2, hotspot: { title: "Dharmacakra mudra" } }, { id: "EYK_11", type: "audio", audioFile: "audio/vo/bettany-section20", audioTitle: "Abhaya mudra", order: 3, hotspot: { title: "Abhaya mudra" } }, { id: "EYK_12", type: "audio", audioFile: "audio/vo/bettany-section21", audioTitle: "Varada mudra", order: 4, hotspot: { title: "Varada mudra" } }, { id: "EYK_13", type: "video", videoId: "uC1wOjO_4r4", hotspot: { title: "Explore the damage" } }, { id: "EYK_14", type: "compare", images: [{ src: "image/before.jpg", alt: "" }, { src: "image/after.jpg", alt: "" }], hotspot: { title: "Before and After", description: "Before-and-after models can be compared to show which changes in the structure were directly related to the earthquake.  Close examination of the surviving and damaged areas may also show what types of construction and restoration will perform better in future seismic events." } }], keypoints: [{ id: "START", location: 1e-5, mobileLocation: 1e-4, label: "Begin Journey", labelPosition: "bottom", mobileLabelPosition: "top", pathId: "PATH_INTRO_TO_AOK" }, { id: "AOK", location: .22, mobileLocation: .45, label: "Ananda Ok Kyaung", labelPosition: "top", mobileLabelPosition: "right", isTemple: !0, pathId: "PATH_AOK_TO_KMG", pathLocations: ["AOK_INSIDE"], mobile: { type: "panorama", panoramaId: "AOK_INSIDE", introImage: "mobile/temple-aok-full.jpg", label: "Ananda Ok<br>Kyaung", description: "The Ananda Brick Monastery was built in the late 18th century. The temple is one of many historic structures damaged by the devastating earthquake of 2016.", exploreButton: "Explore the interior" } }, { id: "KMG", location: .61, mobileLocation: .63, label: "Khe Min Ga Zedi", labelPosition: "right-top", mobileLabelPosition: "right", isTemple: !0, pathId: "PATH_KMG_TO_EYK", pathLocations: ["KMG_OUTSIDE"], mobile: { introImage: "mobile/temple-kmg.jpg", type: "image", image: "mobile/temple-kmg-detail.jpg", label: "KHE MIN <br>GA ZEDI", description: "Here we start exploring the Bagan era. This period, running from the 11th-13th centuries, saw thousands of buildings constructed while Bagan flourished as a capital city.", exploreButton: "In the field with CyArk", hotspots: [{ id: "KMG_OUTSIDE_02", x: .5, y: .58 }, { id: "KMG_OUTSIDE_03", x: .56, y: .2 }, { id: "KMG_OUTSIDE_04", x: .23, y: .51 }, { id: "KMG_OUTSIDE_05", x: .65, y: .42 }, { id: "KMG_OUTSIDE_07", x: .8, y: .6 }] } }, { id: "EYK", location: .91, mobileLocation: .86, label: "Eim Ya Kyaung", labelPosition: "right", mobileLabelPosition: "right", isTemple: !0, pathId: "PATH_EYK_TO_FUTURE", pathLocations: ["EYK_OUTSIDE", "EYK_INSIDE"], mobile: { type: "panorama", panoramaId: "EYK_INSIDE", introImage: "mobile/temple-eyk.jpg", label: "EIM YA <br>KYAUNG", description: "Inside this pentagonal temple we discover the five Buddhas of this era. Each one is presented with its hands in gestures that represent specific moments and activities in their lives.", exploreButton: "Go inside" } }, { id: "END", location: 1, mobileLocation: 1, label: "Making a difference", description: "The challenge is much bigger than three temples, but digital conservation is making a genuine difference; preserving not only historic buildings, but also cultural identities.", labelPosition: "top", mobileLabelPosition: "bottom", pathId: "PATH_EYK_TO_FUTURE", mobile: { label: "Making a difference", description: "The challenge is much bigger than three temples, but digital conservation is making a genuine difference; preserving not only historic buildings, but also cultural identities." } }], pathData: [{ id: "AOK_INTRO", locationId: "AOK_INSIDE", type: "info", title: "Ananda Ok Kyaung", description: "Lets explore the beautiful interior of this small monastic building and discover the 18th-century wall paintings showing Buddhist cosmology and stories from the previous lives of the Buddha.", map: "image/temple-map.png" }, { id: "KMG_INTRO", locationId: "KMG_OUTSIDE", type: "info", title: "Khe Min Ga Zedi", description: "We start exploring the Bagan era. This early period, running from the 11th to the 13th centuries, saw thousands of buildings constructed while Bagan flourished as a capital city." }, { id: "EYK_INTRO", locationId: "EYK_INSIDE", type: "info", title: "Eim Ya Kyaung", description: "Inside this pentagonal temple we discover the five Buddhas of this era. Each one is presented with its hands in gestures that represent specific moments and activities in their lives.", map: "image/temple-map-eyk.png" }, { id: "EYK_OUTRO", locationId: "EYK_OUTSIDE", type: "info", title: "Eim Ya Kyaung", description: "This temple has five entrances, the eastern is the largest and most important. On the night of his enlightenment, the Buddha faced east while he meditated. At dawn, he became an awakened being." }, { id: "PATH_TO_AOK_VO", locationId: "PATH_INTRO_TO_AOK", type: "voice_over", src: "audio/vo/bettany-section2" }, { id: "PATH_TO_KMG_VO", locationId: "PATH_AOK_TO_KMG", type: "voice_over", src: "audio/vo/bettany-section12" }, { id: "PATH_TO_EYK_VO", locationId: "PATH_KMG_TO_EYK", type: "voice_over", src: "audio/vo/bettany-section14" }, { id: "CONTINUE_AOK", locationId: "AOK_INSIDE", type: "continue", text: "CONTINUE JOURNEY" }, { id: "CONTINUE_KMG", locationId: "KMG_OUTSIDE", type: "continue", text: "CONTINUE JOURNEY" }, { id: "CONTINUE_EYK", locationId: "EYK_OUTSIDE", type: "continue", text: "CONTINUE JOURNEY" }, { id: "CONTINUE_EYK_VO", locationId: "EYK_OUTSIDE", type: "voice_over", src: "audio/vo/bettany-section15" }, { id: "CONTINUE_FUTURE", locationId: "EYK_INSIDE", type: "continue", text: "FINISH JOURNEY" }] } },/***/
       442:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { "webgl-canvas": "webgl-canvas-2sAwpTw", webglCanvas: "webgl-canvas-2sAwpTw", "is-active": "is-active-2TSCFQs", isActive: "is-active-2TSCFQs", "is-overlay-size": "is-overlay-size-2USKoh6", isOverlaySize: "is-overlay-size-2USKoh6", "router-view": "router-view-3jhr26R", routerView: "router-view-3jhr26R", "mobile-loader": "mobile-loader-ha5WjGy", mobileLoader: "mobile-loader-ha5WjGy", "is-visible": "is-visible-xReZbqm", isVisible: "is-visible-xReZbqm", "close-vr-button": "close-vr-button-1RYkoT8", closeVrButton: "close-vr-button-1RYkoT8", "enable-vr-button": "enable-vr-button-1yTICu_", enableVrButton: "enable-vr-button-1yTICu_", isEnabled: "isEnabled-3fidXcp", logoGoogle: "logoGoogle-19WQQ98", loaderContent: "loaderContent-1ThdKyM", logo: "logo-377kwia", "logo-en": "logo-en-1iHjoT2", logoEn: "logo-en-1iHjoT2", subtitle: "subtitle-2HHHKfA" }
              },/***/
       443:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { wrapper: "wrapper-GJeSxGS", container: "container-7gY3PSk", continueButton: "continueButton-1lz9v4A" }
              },/***/
       444:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { wrapper: "wrapper-2yUus9-", "is-intro-video": "is-intro-video-3EQScz6", isIntroVideo: "is-intro-video-3EQScz6", canvas: "canvas-v0f_9MW", video: "video-1diUR0D", "headphone-copy": "headphone-copy-eicioFu", headphoneCopy: "headphone-copy-eicioFu", "headphone-icon": "headphone-icon-3pQXK3b", headphoneIcon: "headphone-icon-3pQXK3b", after: "after-ledUTUP", "webgl-copy": "webgl-copy-zbHtF4h", webglCopy: "webgl-copy-zbHtF4h" }
              },/***/
       445:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { wrapper: "wrapper-3sk-Y4I", "logo-wrapper": "logo-wrapper-29vYlzM", logoWrapper: "logo-wrapper-29vYlzM", canvas: "canvas-2By6kpb", burmese: "burmese-CWjyXtE", "google-logo": "google-logo-XjA8RU7", googleLogo: "google-logo-XjA8RU7", subtitle: "subtitle-8hY5wph" }
              },/***/
       446:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { wrapper: "wrapper-1X-4jXE" }
              },/***/
       447:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { wrapper: "wrapper-2jM6gI3", creditColumn: "creditColumn-3AUJEmn", credit: "credit-3qCueMZ", creditTitle: "creditTitle-2VEnILC" }
              },/***/
       448:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { loader: "loader-1soLlZw", canvas: "canvas-2yj03ab", "loading-copy": "loading-copy-3j-5WIB", loadingCopy: "loading-copy-3j-5WIB", "loading-title": "loading-title-zlgUWVN", loadingTitle: "loading-title-zlgUWVN", percentage: "percentage-XsXoQB9", char: "char-2BLrK6k" }
              },/***/
       449:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { footer: "footer-AT16hx4", "logo-button": "logo-button-3l-Azm_", logoButton: "logo-button-3l-Azm_", "footer-nav": "footer-nav-3aTMssP", footerNav: "footer-nav-3aTMssP", vrItem: "vrItem-1Lmpybh", qualityItem: "qualityItem-3IRVh6p", "footer-button": "footer-button-1jZ69bU", footerButton: "footer-button-1jZ69bU", "sound-icon": "sound-icon-2IHByMC", soundIcon: "sound-icon-2IHByMC", hasVolume: "hasVolume-2_SIi2z", "map-icon": "map-icon-3iEtg_5", mapIcon: "map-icon-3iEtg_5", "vr-button": "vr-button-2DVH0E6", vrButton: "vr-button-2DVH0E6", vrIcon: "vrIcon-3y6AuT_", "privacy-terms": "privacy-terms-36LuWdC", privacyTerms: "privacy-terms-36LuWdC" }
              },/***/
       450:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { selector: "selector-1WxI-rA", toggle: "toggle-37nYP5e", options: "options-ulmBLww", "is-open": "is-open-2dF2xE3", isOpen: "is-open-2dF2xE3", list: "list-1lv-SdY" }
              },/***/
       451:/***/
              function (e, t) {
                     // removed by extract-text-webpack-plugin
                     e.exports = { button: "button-2jB1PiI", label: "label-3NYhxZd" }
              }
}, [213]);